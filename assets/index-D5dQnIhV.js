(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();function Jp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var em={exports:{}},Ru={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ax;function hk(){if(ax)return Ru;ax=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function r(n,a,i){var l=null;if(i!==void 0&&(l=""+i),a.key!==void 0&&(l=""+a.key),"key"in a){i={};for(var u in a)u!=="key"&&(i[u]=a[u])}else i=a;return a=i.ref,{$$typeof:t,type:n,key:l,ref:a!==void 0?a:null,props:i}}return Ru.Fragment=e,Ru.jsx=r,Ru.jsxs=r,Ru}var sx;function fk(){return sx||(sx=1,em.exports=hk()),em.exports}var m=fk(),tm={exports:{}},nt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ix;function mk(){if(ix)return nt;ix=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),b=Symbol.iterator;function y(q){return q===null||typeof q!="object"?null:(q=b&&q[b]||q["@@iterator"],typeof q=="function"?q:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,k={};function S(q,ae,we){this.props=q,this.context=ae,this.refs=k,this.updater=we||x}S.prototype.isReactComponent={},S.prototype.setState=function(q,ae){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,ae,"setState")},S.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function A(){}A.prototype=S.prototype;function C(q,ae,we){this.props=q,this.context=ae,this.refs=k,this.updater=we||x}var N=C.prototype=new A;N.constructor=C,_(N,S.prototype),N.isPureReactComponent=!0;var D=Array.isArray,j={H:null,A:null,T:null,S:null,V:null},O=Object.prototype.hasOwnProperty;function F(q,ae,we,be,Se,W){return we=W.ref,{$$typeof:t,type:q,key:ae,ref:we!==void 0?we:null,props:W}}function R(q,ae){return F(q.type,ae,void 0,void 0,void 0,q.props)}function B(q){return typeof q=="object"&&q!==null&&q.$$typeof===t}function V(q){var ae={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(we){return ae[we]})}var $=/\/+/g;function G(q,ae){return typeof q=="object"&&q!==null&&q.key!=null?V(""+q.key):ae.toString(36)}function le(){}function ie(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(le,le):(q.status="pending",q.then(function(ae){q.status==="pending"&&(q.status="fulfilled",q.value=ae)},function(ae){q.status==="pending"&&(q.status="rejected",q.reason=ae)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function pe(q,ae,we,be,Se){var W=typeof q;(W==="undefined"||W==="boolean")&&(q=null);var ce=!1;if(q===null)ce=!0;else switch(W){case"bigint":case"string":case"number":ce=!0;break;case"object":switch(q.$$typeof){case t:case e:ce=!0;break;case p:return ce=q._init,pe(ce(q._payload),ae,we,be,Se)}}if(ce)return Se=Se(q),ce=be===""?"."+G(q,0):be,D(Se)?(we="",ce!=null&&(we=ce.replace($,"$&/")+"/"),pe(Se,ae,we,"",function(Et){return Et})):Se!=null&&(B(Se)&&(Se=R(Se,we+(Se.key==null||q&&q.key===Se.key?"":(""+Se.key).replace($,"$&/")+"/")+ce)),ae.push(Se)),1;ce=0;var Ne=be===""?".":be+":";if(D(q))for(var Ze=0;Ze<q.length;Ze++)be=q[Ze],W=Ne+G(be,Ze),ce+=pe(be,ae,we,W,Se);else if(Ze=y(q),typeof Ze=="function")for(q=Ze.call(q),Ze=0;!(be=q.next()).done;)be=be.value,W=Ne+G(be,Ze++),ce+=pe(be,ae,we,W,Se);else if(W==="object"){if(typeof q.then=="function")return pe(ie(q),ae,we,be,Se);throw ae=String(q),Error("Objects are not valid as a React child (found: "+(ae==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":ae)+"). If you meant to render a collection of children, use an array instead.")}return ce}function K(q,ae,we){if(q==null)return q;var be=[],Se=0;return pe(q,be,"","",function(W){return ae.call(we,W,Se++)}),be}function ue(q){if(q._status===-1){var ae=q._result;ae=ae(),ae.then(function(we){(q._status===0||q._status===-1)&&(q._status=1,q._result=we)},function(we){(q._status===0||q._status===-1)&&(q._status=2,q._result=we)}),q._status===-1&&(q._status=0,q._result=ae)}if(q._status===1)return q._result.default;throw q._result}var Ce=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ae=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(ae))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)};function ze(){}return nt.Children={map:K,forEach:function(q,ae,we){K(q,function(){ae.apply(this,arguments)},we)},count:function(q){var ae=0;return K(q,function(){ae++}),ae},toArray:function(q){return K(q,function(ae){return ae})||[]},only:function(q){if(!B(q))throw Error("React.Children.only expected to receive a single React element child.");return q}},nt.Component=S,nt.Fragment=r,nt.Profiler=a,nt.PureComponent=C,nt.StrictMode=n,nt.Suspense=d,nt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=j,nt.__COMPILER_RUNTIME={__proto__:null,c:function(q){return j.H.useMemoCache(q)}},nt.cache=function(q){return function(){return q.apply(null,arguments)}},nt.cloneElement=function(q,ae,we){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var be=_({},q.props),Se=q.key,W=void 0;if(ae!=null)for(ce in ae.ref!==void 0&&(W=void 0),ae.key!==void 0&&(Se=""+ae.key),ae)!O.call(ae,ce)||ce==="key"||ce==="__self"||ce==="__source"||ce==="ref"&&ae.ref===void 0||(be[ce]=ae[ce]);var ce=arguments.length-2;if(ce===1)be.children=we;else if(1<ce){for(var Ne=Array(ce),Ze=0;Ze<ce;Ze++)Ne[Ze]=arguments[Ze+2];be.children=Ne}return F(q.type,Se,void 0,void 0,W,be)},nt.createContext=function(q){return q={$$typeof:l,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:i,_context:q},q},nt.createElement=function(q,ae,we){var be,Se={},W=null;if(ae!=null)for(be in ae.key!==void 0&&(W=""+ae.key),ae)O.call(ae,be)&&be!=="key"&&be!=="__self"&&be!=="__source"&&(Se[be]=ae[be]);var ce=arguments.length-2;if(ce===1)Se.children=we;else if(1<ce){for(var Ne=Array(ce),Ze=0;Ze<ce;Ze++)Ne[Ze]=arguments[Ze+2];Se.children=Ne}if(q&&q.defaultProps)for(be in ce=q.defaultProps,ce)Se[be]===void 0&&(Se[be]=ce[be]);return F(q,W,void 0,void 0,null,Se)},nt.createRef=function(){return{current:null}},nt.forwardRef=function(q){return{$$typeof:u,render:q}},nt.isValidElement=B,nt.lazy=function(q){return{$$typeof:p,_payload:{_status:-1,_result:q},_init:ue}},nt.memo=function(q,ae){return{$$typeof:h,type:q,compare:ae===void 0?null:ae}},nt.startTransition=function(q){var ae=j.T,we={};j.T=we;try{var be=q(),Se=j.S;Se!==null&&Se(we,be),typeof be=="object"&&be!==null&&typeof be.then=="function"&&be.then(ze,Ce)}catch(W){Ce(W)}finally{j.T=ae}},nt.unstable_useCacheRefresh=function(){return j.H.useCacheRefresh()},nt.use=function(q){return j.H.use(q)},nt.useActionState=function(q,ae,we){return j.H.useActionState(q,ae,we)},nt.useCallback=function(q,ae){return j.H.useCallback(q,ae)},nt.useContext=function(q){return j.H.useContext(q)},nt.useDebugValue=function(){},nt.useDeferredValue=function(q,ae){return j.H.useDeferredValue(q,ae)},nt.useEffect=function(q,ae,we){var be=j.H;if(typeof we=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return be.useEffect(q,ae)},nt.useId=function(){return j.H.useId()},nt.useImperativeHandle=function(q,ae,we){return j.H.useImperativeHandle(q,ae,we)},nt.useInsertionEffect=function(q,ae){return j.H.useInsertionEffect(q,ae)},nt.useLayoutEffect=function(q,ae){return j.H.useLayoutEffect(q,ae)},nt.useMemo=function(q,ae){return j.H.useMemo(q,ae)},nt.useOptimistic=function(q,ae){return j.H.useOptimistic(q,ae)},nt.useReducer=function(q,ae,we){return j.H.useReducer(q,ae,we)},nt.useRef=function(q){return j.H.useRef(q)},nt.useState=function(q){return j.H.useState(q)},nt.useSyncExternalStore=function(q,ae,we){return j.H.useSyncExternalStore(q,ae,we)},nt.useTransition=function(){return j.H.useTransition()},nt.version="19.1.0",nt}var ox;function e2(){return ox||(ox=1,tm.exports=mk()),tm.exports}var T=e2();const rt=Jp(T);var rm={exports:{}},Fu={},nm={exports:{}},am={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lx;function pk(){return lx||(lx=1,function(t){function e(K,ue){var Ce=K.length;K.push(ue);e:for(;0<Ce;){var ze=Ce-1>>>1,q=K[ze];if(0<a(q,ue))K[ze]=ue,K[Ce]=q,Ce=ze;else break e}}function r(K){return K.length===0?null:K[0]}function n(K){if(K.length===0)return null;var ue=K[0],Ce=K.pop();if(Ce!==ue){K[0]=Ce;e:for(var ze=0,q=K.length,ae=q>>>1;ze<ae;){var we=2*(ze+1)-1,be=K[we],Se=we+1,W=K[Se];if(0>a(be,Ce))Se<q&&0>a(W,be)?(K[ze]=W,K[Se]=Ce,ze=Se):(K[ze]=be,K[we]=Ce,ze=we);else if(Se<q&&0>a(W,Ce))K[ze]=W,K[Se]=Ce,ze=Se;else break e}}return ue}function a(K,ue){var Ce=K.sortIndex-ue.sortIndex;return Ce!==0?Ce:K.id-ue.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}var d=[],h=[],p=1,b=null,y=3,x=!1,_=!1,k=!1,S=!1,A=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function D(K){for(var ue=r(h);ue!==null;){if(ue.callback===null)n(h);else if(ue.startTime<=K)n(h),ue.sortIndex=ue.expirationTime,e(d,ue);else break;ue=r(h)}}function j(K){if(k=!1,D(K),!_)if(r(d)!==null)_=!0,O||(O=!0,G());else{var ue=r(h);ue!==null&&pe(j,ue.startTime-K)}}var O=!1,F=-1,R=5,B=-1;function V(){return S?!0:!(t.unstable_now()-B<R)}function $(){if(S=!1,O){var K=t.unstable_now();B=K;var ue=!0;try{e:{_=!1,k&&(k=!1,C(F),F=-1),x=!0;var Ce=y;try{t:{for(D(K),b=r(d);b!==null&&!(b.expirationTime>K&&V());){var ze=b.callback;if(typeof ze=="function"){b.callback=null,y=b.priorityLevel;var q=ze(b.expirationTime<=K);if(K=t.unstable_now(),typeof q=="function"){b.callback=q,D(K),ue=!0;break t}b===r(d)&&n(d),D(K)}else n(d);b=r(d)}if(b!==null)ue=!0;else{var ae=r(h);ae!==null&&pe(j,ae.startTime-K),ue=!1}}break e}finally{b=null,y=Ce,x=!1}ue=void 0}}finally{ue?G():O=!1}}}var G;if(typeof N=="function")G=function(){N($)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,ie=le.port2;le.port1.onmessage=$,G=function(){ie.postMessage(null)}}else G=function(){A($,0)};function pe(K,ue){F=A(function(){K(t.unstable_now())},ue)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(K){K.callback=null},t.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<K?Math.floor(1e3/K):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_next=function(K){switch(y){case 1:case 2:case 3:var ue=3;break;default:ue=y}var Ce=y;y=ue;try{return K()}finally{y=Ce}},t.unstable_requestPaint=function(){S=!0},t.unstable_runWithPriority=function(K,ue){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var Ce=y;y=K;try{return ue()}finally{y=Ce}},t.unstable_scheduleCallback=function(K,ue,Ce){var ze=t.unstable_now();switch(typeof Ce=="object"&&Ce!==null?(Ce=Ce.delay,Ce=typeof Ce=="number"&&0<Ce?ze+Ce:ze):Ce=ze,K){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=Ce+q,K={id:p++,callback:ue,priorityLevel:K,startTime:Ce,expirationTime:q,sortIndex:-1},Ce>ze?(K.sortIndex=Ce,e(h,K),r(d)===null&&K===r(h)&&(k?(C(F),F=-1):k=!0,pe(j,Ce-ze))):(K.sortIndex=q,e(d,K),_||x||(_=!0,O||(O=!0,G()))),K},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(K){var ue=y;return function(){var Ce=y;y=ue;try{return K.apply(this,arguments)}finally{y=Ce}}}}(am)),am}var ux;function gk(){return ux||(ux=1,nm.exports=pk()),nm.exports}var sm={exports:{}},Kr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cx;function bk(){if(cx)return Kr;cx=1;var t=e2();function e(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(e(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for("react.portal");function i(d,h,p){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:b==null?null:""+b,children:d,containerInfo:h,implementation:p}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Kr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Kr.createPortal=function(d,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return i(d,h,null,p)},Kr.flushSync=function(d){var h=l.T,p=n.p;try{if(l.T=null,n.p=2,d)return d()}finally{l.T=h,n.p=p,n.d.f()}},Kr.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,n.d.C(d,h))},Kr.prefetchDNS=function(d){typeof d=="string"&&n.d.D(d)},Kr.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var p=h.as,b=u(p,h.crossOrigin),y=typeof h.integrity=="string"?h.integrity:void 0,x=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?n.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:b,integrity:y,fetchPriority:x}):p==="script"&&n.d.X(d,{crossOrigin:b,integrity:y,fetchPriority:x,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Kr.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=u(h.as,h.crossOrigin);n.d.M(d,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&n.d.M(d)},Kr.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,b=u(p,h.crossOrigin);n.d.L(d,p,{crossOrigin:b,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Kr.preloadModule=function(d,h){if(typeof d=="string")if(h){var p=u(h.as,h.crossOrigin);n.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else n.d.m(d)},Kr.requestFormReset=function(d){n.d.r(d)},Kr.unstable_batchedUpdates=function(d,h){return d(h)},Kr.useFormState=function(d,h,p){return l.H.useFormState(d,h,p)},Kr.useFormStatus=function(){return l.H.useHostTransitionStatus()},Kr.version="19.1.0",Kr}var dx;function e5(){if(dx)return sm.exports;dx=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),sm.exports=bk(),sm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hx;function yk(){if(hx)return Fu;hx=1;var t=gk(),e=e2(),r=e5();function n(s){var o="https://react.dev/errors/"+s;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function i(s){var o=s,c=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(c=o.return),s=o.return;while(s)}return o.tag===3?c:null}function l(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function u(s){if(i(s)!==s)throw Error(n(188))}function d(s){var o=s.alternate;if(!o){if(o=i(s),o===null)throw Error(n(188));return o!==s?null:s}for(var c=s,f=o;;){var g=c.return;if(g===null)break;var v=g.alternate;if(v===null){if(f=g.return,f!==null){c=f;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===c)return u(g),s;if(v===f)return u(g),o;v=v.sibling}throw Error(n(188))}if(c.return!==f.return)c=g,f=v;else{for(var M=!1,L=g.child;L;){if(L===c){M=!0,c=g,f=v;break}if(L===f){M=!0,f=g,c=v;break}L=L.sibling}if(!M){for(L=v.child;L;){if(L===c){M=!0,c=v,f=g;break}if(L===f){M=!0,f=v,c=g;break}L=L.sibling}if(!M)throw Error(n(189))}}if(c.alternate!==f)throw Error(n(190))}if(c.tag!==3)throw Error(n(188));return c.stateNode.current===c?s:o}function h(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s;for(s=s.child;s!==null;){if(o=h(s),o!==null)return o;s=s.sibling}return null}var p=Object.assign,b=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),C=Symbol.for("react.consumer"),N=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),$=Symbol.iterator;function G(s){return s===null||typeof s!="object"?null:(s=$&&s[$]||s["@@iterator"],typeof s=="function"?s:null)}var le=Symbol.for("react.client.reference");function ie(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===le?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case _:return"Fragment";case S:return"Profiler";case k:return"StrictMode";case j:return"Suspense";case O:return"SuspenseList";case B:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case x:return"Portal";case N:return(s.displayName||"Context")+".Provider";case C:return(s._context.displayName||"Context")+".Consumer";case D:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case F:return o=s.displayName||null,o!==null?o:ie(s.type)||"Memo";case R:o=s._payload,s=s._init;try{return ie(s(o))}catch{}}return null}var pe=Array.isArray,K=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ce={pending:!1,data:null,method:null,action:null},ze=[],q=-1;function ae(s){return{current:s}}function we(s){0>q||(s.current=ze[q],ze[q]=null,q--)}function be(s,o){q++,ze[q]=s.current,s.current=o}var Se=ae(null),W=ae(null),ce=ae(null),Ne=ae(null);function Ze(s,o){switch(be(ce,o),be(W,s),be(Se,null),o.nodeType){case 9:case 11:s=(s=o.documentElement)&&(s=s.namespaceURI)?Dy(s):0;break;default:if(s=o.tagName,o=o.namespaceURI)o=Dy(o),s=zy(o,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}we(Se),be(Se,s)}function Et(){we(Se),we(W),we(ce)}function wt(s){s.memoizedState!==null&&be(Ne,s);var o=Se.current,c=zy(o,s.type);o!==c&&(be(W,s),be(Se,c))}function kt(s){W.current===s&&(we(Se),we(W)),Ne.current===s&&(we(Ne),Mu._currentValue=Ce)}var St=Object.prototype.hasOwnProperty,ur=t.unstable_scheduleCallback,cr=t.unstable_cancelCallback,Sn=t.unstable_shouldYield,Hn=t.unstable_requestPaint,qt=t.unstable_now,un=t.unstable_getCurrentPriorityLevel,Pr=t.unstable_ImmediatePriority,Z=t.unstable_UserBlockingPriority,re=t.unstable_NormalPriority,he=t.unstable_LowPriority,de=t.unstable_IdlePriority,fe=t.log,xe=t.unstable_setDisableYieldValue,De=null,Ke=null;function et(s){if(typeof fe=="function"&&xe(s),Ke&&typeof Ke.setStrictMode=="function")try{Ke.setStrictMode(De,s)}catch{}}var it=Math.clz32?Math.clz32:Fs,dr=Math.log,An=Math.LN2;function Fs(s){return s>>>=0,s===0?32:31-(dr(s)/An|0)|0}var En=256,Mr=4194304;function Ur(s){var o=s&42;if(o!==0)return o;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function la(s,o,c){var f=s.pendingLanes;if(f===0)return 0;var g=0,v=s.suspendedLanes,M=s.pingedLanes;s=s.warmLanes;var L=f&134217727;return L!==0?(f=L&~v,f!==0?g=Ur(f):(M&=L,M!==0?g=Ur(M):c||(c=L&~s,c!==0&&(g=Ur(c))))):(L=f&~v,L!==0?g=Ur(L):M!==0?g=Ur(M):c||(c=f&~s,c!==0&&(g=Ur(c)))),g===0?0:o!==0&&o!==g&&(o&v)===0&&(v=g&-g,c=o&-o,v>=c||v===32&&(c&4194048)!==0)?o:g}function ua(s,o){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&o)===0}function Co(s,o){switch(s){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zi(){var s=En;return En<<=1,(En&4194048)===0&&(En=256),s}function Oi(){var s=Mr;return Mr<<=1,(Mr&62914560)===0&&(Mr=4194304),s}function Pl(s){for(var o=[],c=0;31>c;c++)o.push(s);return o}function ca(s,o){s.pendingLanes|=o,o!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Zh(s,o,c,f,g,v){var M=s.pendingLanes;s.pendingLanes=c,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=c,s.entangledLanes&=c,s.errorRecoveryDisabledLanes&=c,s.shellSuspendCounter=0;var L=s.entanglements,U=s.expirationTimes,te=s.hiddenUpdates;for(c=M&~c;0<c;){var me=31-it(c),ve=1<<me;L[me]=0,U[me]=-1;var se=te[me];if(se!==null)for(te[me]=null,me=0;me<se.length;me++){var oe=se[me];oe!==null&&(oe.lane&=-536870913)}c&=~ve}f!==0&&Yc(s,f,0),v!==0&&g===0&&s.tag!==0&&(s.suspendedLanes|=v&~(M&~o))}function Yc(s,o,c){s.pendingLanes|=o,s.suspendedLanes&=~o;var f=31-it(o);s.entangledLanes|=o,s.entanglements[f]=s.entanglements[f]|1073741824|c&4194090}function hr(s,o){var c=s.entangledLanes|=o;for(s=s.entanglements;c;){var f=31-it(c),g=1<<f;g&o|s[f]&o&&(s[f]|=o),c&=~g}}function Ea(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Bl(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Il(){var s=ue.p;return s!==0?s:(s=window.event,s===void 0?32:Wy(s.type))}function $l(s,o){var c=ue.p;try{return ue.p=s,o()}finally{ue.p=c}}var da=Math.random().toString(36).slice(2),Sr="__reactFiber$"+da,Vr="__reactProps$"+da,Br="__reactContainer$"+da,Ca="__reactEvents$"+da,Xc="__reactListeners$"+da,Qc="__reactHandles$"+da,To="__reactResources$"+da,Ls="__reactMarker$"+da;function Cn(s){delete s[Sr],delete s[Vr],delete s[Ca],delete s[Xc],delete s[Qc]}function es(s){var o=s[Sr];if(o)return o;for(var c=s.parentNode;c;){if(o=c[Br]||c[Sr]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(s=Ly(s);s!==null;){if(c=s[Sr])return c;s=Ly(s)}return o}s=c,c=s.parentNode}return null}function ts(s){if(s=s[Sr]||s[Br]){var o=s.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return s}return null}function Ps(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s.stateNode;throw Error(n(33))}function rs(s){var o=s[To];return o||(o=s[To]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function xr(s){s[Ls]=!0}var $e=new Set,Q={};function Ae(s,o){Be(s,o),Be(s+"Capture",o)}function Be(s,o){for(Q[s]=o,s=0;s<o.length;s++)$e.add(o[s])}var Lt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ar={},ar={};function Gr(s){return St.call(ar,s)?!0:St.call(Ar,s)?!1:Lt.test(s)?ar[s]=!0:(Ar[s]=!0,!1)}function cn(s,o,c){if(Gr(o))if(c===null)s.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":s.removeAttribute(o);return;case"boolean":var f=o.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){s.removeAttribute(o);return}}s.setAttribute(o,""+c)}}function Ta(s,o,c){if(c===null)s.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttribute(o,""+c)}}function Tn(s,o,c,f){if(f===null)s.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(c);return}s.setAttributeNS(o,c,""+f)}}var vr,ql;function ns(s){if(vr===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);vr=o&&o[1]||"",ql=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+vr+s+ql}var Kh=!1;function Yh(s,o){if(!s||Kh)return"";Kh=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(o){var ve=function(){throw Error()};if(Object.defineProperty(ve.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ve,[])}catch(oe){var se=oe}Reflect.construct(s,[],ve)}else{try{ve.call()}catch(oe){se=oe}s.call(ve.prototype)}}else{try{throw Error()}catch(oe){se=oe}(ve=s())&&typeof ve.catch=="function"&&ve.catch(function(){})}}catch(oe){if(oe&&se&&typeof oe.stack=="string")return[oe.stack,se.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=f.DetermineComponentFrameRoot(),M=v[0],L=v[1];if(M&&L){var U=M.split(`
`),te=L.split(`
`);for(g=f=0;f<U.length&&!U[f].includes("DetermineComponentFrameRoot");)f++;for(;g<te.length&&!te[g].includes("DetermineComponentFrameRoot");)g++;if(f===U.length||g===te.length)for(f=U.length-1,g=te.length-1;1<=f&&0<=g&&U[f]!==te[g];)g--;for(;1<=f&&0<=g;f--,g--)if(U[f]!==te[g]){if(f!==1||g!==1)do if(f--,g--,0>g||U[f]!==te[g]){var me=`
`+U[f].replace(" at new "," at ");return s.displayName&&me.includes("<anonymous>")&&(me=me.replace("<anonymous>",s.displayName)),me}while(1<=f&&0<=g);break}}}finally{Kh=!1,Error.prepareStackTrace=c}return(c=s?s.displayName||s.name:"")?ns(c):""}function i_(s){switch(s.tag){case 26:case 27:case 5:return ns(s.type);case 16:return ns("Lazy");case 13:return ns("Suspense");case 19:return ns("SuspenseList");case 0:case 15:return Yh(s.type,!1);case 11:return Yh(s.type.render,!1);case 1:return Yh(s.type,!0);case 31:return ns("Activity");default:return""}}function Eg(s){try{var o="";do o+=i_(s),s=s.return;while(s);return o}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function Un(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Cg(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function o_(s){var o=Cg(s)?"checked":"value",c=Object.getOwnPropertyDescriptor(s.constructor.prototype,o),f=""+s[o];if(!s.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var g=c.get,v=c.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return g.call(this)},set:function(M){f=""+M,v.call(this,M)}}),Object.defineProperty(s,o,{enumerable:c.enumerable}),{getValue:function(){return f},setValue:function(M){f=""+M},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function Wc(s){s._valueTracker||(s._valueTracker=o_(s))}function Tg(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var c=o.getValue(),f="";return s&&(f=Cg(s)?s.checked?"true":"false":s.value),s=f,s!==c?(o.setValue(s),!0):!1}function Jc(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var l_=/[\n"\\]/g;function Vn(s){return s.replace(l_,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Xh(s,o,c,f,g,v,M,L){s.name="",M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?s.type=M:s.removeAttribute("type"),o!=null?M==="number"?(o===0&&s.value===""||s.value!=o)&&(s.value=""+Un(o)):s.value!==""+Un(o)&&(s.value=""+Un(o)):M!=="submit"&&M!=="reset"||s.removeAttribute("value"),o!=null?Qh(s,M,Un(o)):c!=null?Qh(s,M,Un(c)):f!=null&&s.removeAttribute("value"),g==null&&v!=null&&(s.defaultChecked=!!v),g!=null&&(s.checked=g&&typeof g!="function"&&typeof g!="symbol"),L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"?s.name=""+Un(L):s.removeAttribute("name")}function Ng(s,o,c,f,g,v,M,L){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(s.type=v),o!=null||c!=null){if(!(v!=="submit"&&v!=="reset"||o!=null))return;c=c!=null?""+Un(c):"",o=o!=null?""+Un(o):c,L||o===s.value||(s.value=o),s.defaultValue=o}f=f??g,f=typeof f!="function"&&typeof f!="symbol"&&!!f,s.checked=L?s.checked:!!f,s.defaultChecked=!!f,M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"&&(s.name=M)}function Qh(s,o,c){o==="number"&&Jc(s.ownerDocument)===s||s.defaultValue===""+c||(s.defaultValue=""+c)}function No(s,o,c,f){if(s=s.options,o){o={};for(var g=0;g<c.length;g++)o["$"+c[g]]=!0;for(c=0;c<s.length;c++)g=o.hasOwnProperty("$"+s[c].value),s[c].selected!==g&&(s[c].selected=g),g&&f&&(s[c].defaultSelected=!0)}else{for(c=""+Un(c),o=null,g=0;g<s.length;g++){if(s[g].value===c){s[g].selected=!0,f&&(s[g].defaultSelected=!0);return}o!==null||s[g].disabled||(o=s[g])}o!==null&&(o.selected=!0)}}function Mg(s,o,c){if(o!=null&&(o=""+Un(o),o!==s.value&&(s.value=o),c==null)){s.defaultValue!==o&&(s.defaultValue=o);return}s.defaultValue=c!=null?""+Un(c):""}function jg(s,o,c,f){if(o==null){if(f!=null){if(c!=null)throw Error(n(92));if(pe(f)){if(1<f.length)throw Error(n(93));f=f[0]}c=f}c==null&&(c=""),o=c}c=Un(o),s.defaultValue=c,f=s.textContent,f===c&&f!==""&&f!==null&&(s.value=f)}function Mo(s,o){if(o){var c=s.firstChild;if(c&&c===s.lastChild&&c.nodeType===3){c.nodeValue=o;return}}s.textContent=o}var u_=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Dg(s,o,c){var f=o.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?f?s.setProperty(o,""):o==="float"?s.cssFloat="":s[o]="":f?s.setProperty(o,c):typeof c!="number"||c===0||u_.has(o)?o==="float"?s.cssFloat=c:s[o]=(""+c).trim():s[o]=c+"px"}function zg(s,o,c){if(o!=null&&typeof o!="object")throw Error(n(62));if(s=s.style,c!=null){for(var f in c)!c.hasOwnProperty(f)||o!=null&&o.hasOwnProperty(f)||(f.indexOf("--")===0?s.setProperty(f,""):f==="float"?s.cssFloat="":s[f]="");for(var g in o)f=o[g],o.hasOwnProperty(g)&&c[g]!==f&&Dg(s,g,f)}else for(var v in o)o.hasOwnProperty(v)&&Dg(s,v,o[v])}function Wh(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var c_=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),d_=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function e0(s){return d_.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var Jh=null;function ef(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var jo=null,Do=null;function Og(s){var o=ts(s);if(o&&(s=o.stateNode)){var c=s[Vr]||null;e:switch(s=o.stateNode,o.type){case"input":if(Xh(s,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),o=c.name,c.type==="radio"&&o!=null){for(c=s;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Vn(""+o)+'"][type="radio"]'),o=0;o<c.length;o++){var f=c[o];if(f!==s&&f.form===s.form){var g=f[Vr]||null;if(!g)throw Error(n(90));Xh(f,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(o=0;o<c.length;o++)f=c[o],f.form===s.form&&Tg(f)}break e;case"textarea":Mg(s,c.value,c.defaultValue);break e;case"select":o=c.value,o!=null&&No(s,!!c.multiple,o,!1)}}}var tf=!1;function Rg(s,o,c){if(tf)return s(o,c);tf=!0;try{var f=s(o);return f}finally{if(tf=!1,(jo!==null||Do!==null)&&(B0(),jo&&(o=jo,s=Do,Do=jo=null,Og(o),s)))for(o=0;o<s.length;o++)Og(s[o])}}function Hl(s,o){var c=s.stateNode;if(c===null)return null;var f=c[Vr]||null;if(f===null)return null;c=f[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(s=s.type,f=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!f;break e;default:s=!1}if(s)return null;if(c&&typeof c!="function")throw Error(n(231,o,typeof c));return c}var as=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rf=!1;if(as)try{var Ul={};Object.defineProperty(Ul,"passive",{get:function(){rf=!0}}),window.addEventListener("test",Ul,Ul),window.removeEventListener("test",Ul,Ul)}catch{rf=!1}var Bs=null,nf=null,t0=null;function Fg(){if(t0)return t0;var s,o=nf,c=o.length,f,g="value"in Bs?Bs.value:Bs.textContent,v=g.length;for(s=0;s<c&&o[s]===g[s];s++);var M=c-s;for(f=1;f<=M&&o[c-f]===g[v-f];f++);return t0=g.slice(s,1<f?1-f:void 0)}function r0(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function n0(){return!0}function Lg(){return!1}function dn(s){function o(c,f,g,v,M){this._reactName=c,this._targetInst=g,this.type=f,this.nativeEvent=v,this.target=M,this.currentTarget=null;for(var L in s)s.hasOwnProperty(L)&&(c=s[L],this[L]=c?c(v):v[L]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?n0:Lg,this.isPropagationStopped=Lg,this}return p(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=n0)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=n0)},persist:function(){},isPersistent:n0}),o}var Ri={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},a0=dn(Ri),Vl=p({},Ri,{view:0,detail:0}),h_=dn(Vl),af,sf,Gl,s0=p({},Vl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lf,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Gl&&(Gl&&s.type==="mousemove"?(af=s.screenX-Gl.screenX,sf=s.screenY-Gl.screenY):sf=af=0,Gl=s),af)},movementY:function(s){return"movementY"in s?s.movementY:sf}}),Pg=dn(s0),f_=p({},s0,{dataTransfer:0}),m_=dn(f_),p_=p({},Vl,{relatedTarget:0}),of=dn(p_),g_=p({},Ri,{animationName:0,elapsedTime:0,pseudoElement:0}),b_=dn(g_),y_=p({},Ri,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),x_=dn(y_),v_=p({},Ri,{data:0}),Bg=dn(v_),__={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},w_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},k_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function S_(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=k_[s])?!!o[s]:!1}function lf(){return S_}var A_=p({},Vl,{key:function(s){if(s.key){var o=__[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=r0(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?w_[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lf,charCode:function(s){return s.type==="keypress"?r0(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?r0(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),E_=dn(A_),C_=p({},s0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ig=dn(C_),T_=p({},Vl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lf}),N_=dn(T_),M_=p({},Ri,{propertyName:0,elapsedTime:0,pseudoElement:0}),j_=dn(M_),D_=p({},s0,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),z_=dn(D_),O_=p({},Ri,{newState:0,oldState:0}),R_=dn(O_),F_=[9,13,27,32],uf=as&&"CompositionEvent"in window,Zl=null;as&&"documentMode"in document&&(Zl=document.documentMode);var L_=as&&"TextEvent"in window&&!Zl,$g=as&&(!uf||Zl&&8<Zl&&11>=Zl),qg=" ",Hg=!1;function Ug(s,o){switch(s){case"keyup":return F_.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vg(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var zo=!1;function P_(s,o){switch(s){case"compositionend":return Vg(o);case"keypress":return o.which!==32?null:(Hg=!0,qg);case"textInput":return s=o.data,s===qg&&Hg?null:s;default:return null}}function B_(s,o){if(zo)return s==="compositionend"||!uf&&Ug(s,o)?(s=Fg(),t0=nf=Bs=null,zo=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return $g&&o.locale!=="ko"?null:o.data;default:return null}}var I_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gg(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!I_[s.type]:o==="textarea"}function Zg(s,o,c,f){jo?Do?Do.push(f):Do=[f]:jo=f,o=V0(o,"onChange"),0<o.length&&(c=new a0("onChange","change",null,c,f),s.push({event:c,listeners:o}))}var Kl=null,Yl=null;function $_(s){Cy(s,0)}function i0(s){var o=Ps(s);if(Tg(o))return s}function Kg(s,o){if(s==="change")return o}var Yg=!1;if(as){var cf;if(as){var df="oninput"in document;if(!df){var Xg=document.createElement("div");Xg.setAttribute("oninput","return;"),df=typeof Xg.oninput=="function"}cf=df}else cf=!1;Yg=cf&&(!document.documentMode||9<document.documentMode)}function Qg(){Kl&&(Kl.detachEvent("onpropertychange",Wg),Yl=Kl=null)}function Wg(s){if(s.propertyName==="value"&&i0(Yl)){var o=[];Zg(o,Yl,s,ef(s)),Rg($_,o)}}function q_(s,o,c){s==="focusin"?(Qg(),Kl=o,Yl=c,Kl.attachEvent("onpropertychange",Wg)):s==="focusout"&&Qg()}function H_(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return i0(Yl)}function U_(s,o){if(s==="click")return i0(o)}function V_(s,o){if(s==="input"||s==="change")return i0(o)}function G_(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var Nn=typeof Object.is=="function"?Object.is:G_;function Xl(s,o){if(Nn(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var c=Object.keys(s),f=Object.keys(o);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var g=c[f];if(!St.call(o,g)||!Nn(s[g],o[g]))return!1}return!0}function Jg(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function eb(s,o){var c=Jg(s);s=0;for(var f;c;){if(c.nodeType===3){if(f=s+c.textContent.length,s<=o&&f>=o)return{node:c,offset:o-s};s=f}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Jg(c)}}function tb(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?tb(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function rb(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var o=Jc(s.document);o instanceof s.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch{c=!1}if(c)s=o.contentWindow;else break;o=Jc(s.document)}return o}function hf(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}var Z_=as&&"documentMode"in document&&11>=document.documentMode,Oo=null,ff=null,Ql=null,mf=!1;function nb(s,o,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;mf||Oo==null||Oo!==Jc(f)||(f=Oo,"selectionStart"in f&&hf(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Ql&&Xl(Ql,f)||(Ql=f,f=V0(ff,"onSelect"),0<f.length&&(o=new a0("onSelect","select",null,o,c),s.push({event:o,listeners:f}),o.target=Oo)))}function Fi(s,o){var c={};return c[s.toLowerCase()]=o.toLowerCase(),c["Webkit"+s]="webkit"+o,c["Moz"+s]="moz"+o,c}var Ro={animationend:Fi("Animation","AnimationEnd"),animationiteration:Fi("Animation","AnimationIteration"),animationstart:Fi("Animation","AnimationStart"),transitionrun:Fi("Transition","TransitionRun"),transitionstart:Fi("Transition","TransitionStart"),transitioncancel:Fi("Transition","TransitionCancel"),transitionend:Fi("Transition","TransitionEnd")},pf={},ab={};as&&(ab=document.createElement("div").style,"AnimationEvent"in window||(delete Ro.animationend.animation,delete Ro.animationiteration.animation,delete Ro.animationstart.animation),"TransitionEvent"in window||delete Ro.transitionend.transition);function Li(s){if(pf[s])return pf[s];if(!Ro[s])return s;var o=Ro[s],c;for(c in o)if(o.hasOwnProperty(c)&&c in ab)return pf[s]=o[c];return s}var sb=Li("animationend"),ib=Li("animationiteration"),ob=Li("animationstart"),K_=Li("transitionrun"),Y_=Li("transitionstart"),X_=Li("transitioncancel"),lb=Li("transitionend"),ub=new Map,gf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");gf.push("scrollEnd");function ha(s,o){ub.set(s,o),Ae(o,[s])}var cb=new WeakMap;function Gn(s,o){if(typeof s=="object"&&s!==null){var c=cb.get(s);return c!==void 0?c:(o={value:s,source:o,stack:Eg(o)},cb.set(s,o),o)}return{value:s,source:o,stack:Eg(o)}}var Zn=[],Fo=0,bf=0;function o0(){for(var s=Fo,o=bf=Fo=0;o<s;){var c=Zn[o];Zn[o++]=null;var f=Zn[o];Zn[o++]=null;var g=Zn[o];Zn[o++]=null;var v=Zn[o];if(Zn[o++]=null,f!==null&&g!==null){var M=f.pending;M===null?g.next=g:(g.next=M.next,M.next=g),f.pending=g}v!==0&&db(c,g,v)}}function l0(s,o,c,f){Zn[Fo++]=s,Zn[Fo++]=o,Zn[Fo++]=c,Zn[Fo++]=f,bf|=f,s.lanes|=f,s=s.alternate,s!==null&&(s.lanes|=f)}function yf(s,o,c,f){return l0(s,o,c,f),u0(s)}function Lo(s,o){return l0(s,null,null,o),u0(s)}function db(s,o,c){s.lanes|=c;var f=s.alternate;f!==null&&(f.lanes|=c);for(var g=!1,v=s.return;v!==null;)v.childLanes|=c,f=v.alternate,f!==null&&(f.childLanes|=c),v.tag===22&&(s=v.stateNode,s===null||s._visibility&1||(g=!0)),s=v,v=v.return;return s.tag===3?(v=s.stateNode,g&&o!==null&&(g=31-it(c),s=v.hiddenUpdates,f=s[g],f===null?s[g]=[o]:f.push(o),o.lane=c|536870912),v):null}function u0(s){if(50<wu)throw wu=0,S1=null,Error(n(185));for(var o=s.return;o!==null;)s=o,o=s.return;return s.tag===3?s.stateNode:null}var Po={};function Q_(s,o,c,f){this.tag=s,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mn(s,o,c,f){return new Q_(s,o,c,f)}function xf(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ss(s,o){var c=s.alternate;return c===null?(c=Mn(s.tag,o,s.key,s.mode),c.elementType=s.elementType,c.type=s.type,c.stateNode=s.stateNode,c.alternate=s,s.alternate=c):(c.pendingProps=o,c.type=s.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=s.flags&65011712,c.childLanes=s.childLanes,c.lanes=s.lanes,c.child=s.child,c.memoizedProps=s.memoizedProps,c.memoizedState=s.memoizedState,c.updateQueue=s.updateQueue,o=s.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=s.sibling,c.index=s.index,c.ref=s.ref,c.refCleanup=s.refCleanup,c}function hb(s,o){s.flags&=65011714;var c=s.alternate;return c===null?(s.childLanes=0,s.lanes=o,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,o=c.dependencies,s.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),s}function c0(s,o,c,f,g,v){var M=0;if(f=s,typeof s=="function")xf(s)&&(M=1);else if(typeof s=="string")M=Jw(s,c,Se.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case B:return s=Mn(31,c,o,g),s.elementType=B,s.lanes=v,s;case _:return Pi(c.children,g,v,o);case k:M=8,g|=24;break;case S:return s=Mn(12,c,o,g|2),s.elementType=S,s.lanes=v,s;case j:return s=Mn(13,c,o,g),s.elementType=j,s.lanes=v,s;case O:return s=Mn(19,c,o,g),s.elementType=O,s.lanes=v,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case A:case N:M=10;break e;case C:M=9;break e;case D:M=11;break e;case F:M=14;break e;case R:M=16,f=null;break e}M=29,c=Error(n(130,s===null?"null":typeof s,"")),f=null}return o=Mn(M,c,o,g),o.elementType=s,o.type=f,o.lanes=v,o}function Pi(s,o,c,f){return s=Mn(7,s,f,o),s.lanes=c,s}function vf(s,o,c){return s=Mn(6,s,null,o),s.lanes=c,s}function _f(s,o,c){return o=Mn(4,s.children!==null?s.children:[],s.key,o),o.lanes=c,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}var Bo=[],Io=0,d0=null,h0=0,Kn=[],Yn=0,Bi=null,is=1,os="";function Ii(s,o){Bo[Io++]=h0,Bo[Io++]=d0,d0=s,h0=o}function fb(s,o,c){Kn[Yn++]=is,Kn[Yn++]=os,Kn[Yn++]=Bi,Bi=s;var f=is;s=os;var g=32-it(f)-1;f&=~(1<<g),c+=1;var v=32-it(o)+g;if(30<v){var M=g-g%5;v=(f&(1<<M)-1).toString(32),f>>=M,g-=M,is=1<<32-it(o)+g|c<<g|f,os=v+s}else is=1<<v|c<<g|f,os=s}function wf(s){s.return!==null&&(Ii(s,1),fb(s,1,0))}function kf(s){for(;s===d0;)d0=Bo[--Io],Bo[Io]=null,h0=Bo[--Io],Bo[Io]=null;for(;s===Bi;)Bi=Kn[--Yn],Kn[Yn]=null,os=Kn[--Yn],Kn[Yn]=null,is=Kn[--Yn],Kn[Yn]=null}var Qr=null,sr=null,vt=!1,$i=null,Na=!1,Sf=Error(n(519));function qi(s){var o=Error(n(418,""));throw eu(Gn(o,s)),Sf}function mb(s){var o=s.stateNode,c=s.type,f=s.memoizedProps;switch(o[Sr]=s,o[Vr]=f,c){case"dialog":ct("cancel",o),ct("close",o);break;case"iframe":case"object":case"embed":ct("load",o);break;case"video":case"audio":for(c=0;c<Su.length;c++)ct(Su[c],o);break;case"source":ct("error",o);break;case"img":case"image":case"link":ct("error",o),ct("load",o);break;case"details":ct("toggle",o);break;case"input":ct("invalid",o),Ng(o,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0),Wc(o);break;case"select":ct("invalid",o);break;case"textarea":ct("invalid",o),jg(o,f.value,f.defaultValue,f.children),Wc(o)}c=f.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||o.textContent===""+c||f.suppressHydrationWarning===!0||jy(o.textContent,c)?(f.popover!=null&&(ct("beforetoggle",o),ct("toggle",o)),f.onScroll!=null&&ct("scroll",o),f.onScrollEnd!=null&&ct("scrollend",o),f.onClick!=null&&(o.onclick=G0),o=!0):o=!1,o||qi(s)}function pb(s){for(Qr=s.return;Qr;)switch(Qr.tag){case 5:case 13:Na=!1;return;case 27:case 3:Na=!0;return;default:Qr=Qr.return}}function Wl(s){if(s!==Qr)return!1;if(!vt)return pb(s),vt=!0,!1;var o=s.tag,c;if((c=o!==3&&o!==27)&&((c=o===5)&&(c=s.type,c=!(c!=="form"&&c!=="button")||I1(s.type,s.memoizedProps)),c=!c),c&&sr&&qi(s),pb(s),o===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));e:{for(s=s.nextSibling,o=0;s;){if(s.nodeType===8)if(c=s.data,c==="/$"){if(o===0){sr=ma(s.nextSibling);break e}o--}else c!=="$"&&c!=="$!"&&c!=="$?"||o++;s=s.nextSibling}sr=null}}else o===27?(o=sr,ti(s.type)?(s=U1,U1=null,sr=s):sr=o):sr=Qr?ma(s.stateNode.nextSibling):null;return!0}function Jl(){sr=Qr=null,vt=!1}function gb(){var s=$i;return s!==null&&(mn===null?mn=s:mn.push.apply(mn,s),$i=null),s}function eu(s){$i===null?$i=[s]:$i.push(s)}var Af=ae(null),Hi=null,ls=null;function Is(s,o,c){be(Af,o._currentValue),o._currentValue=c}function us(s){s._currentValue=Af.current,we(Af)}function Ef(s,o,c){for(;s!==null;){var f=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),s===c)break;s=s.return}}function Cf(s,o,c,f){var g=s.child;for(g!==null&&(g.return=s);g!==null;){var v=g.dependencies;if(v!==null){var M=g.child;v=v.firstContext;e:for(;v!==null;){var L=v;v=g;for(var U=0;U<o.length;U++)if(L.context===o[U]){v.lanes|=c,L=v.alternate,L!==null&&(L.lanes|=c),Ef(v.return,c,s),f||(M=null);break e}v=L.next}}else if(g.tag===18){if(M=g.return,M===null)throw Error(n(341));M.lanes|=c,v=M.alternate,v!==null&&(v.lanes|=c),Ef(M,c,s),M=null}else M=g.child;if(M!==null)M.return=g;else for(M=g;M!==null;){if(M===s){M=null;break}if(g=M.sibling,g!==null){g.return=M.return,M=g;break}M=M.return}g=M}}function tu(s,o,c,f){s=null;for(var g=o,v=!1;g!==null;){if(!v){if((g.flags&524288)!==0)v=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var M=g.alternate;if(M===null)throw Error(n(387));if(M=M.memoizedProps,M!==null){var L=g.type;Nn(g.pendingProps.value,M.value)||(s!==null?s.push(L):s=[L])}}else if(g===Ne.current){if(M=g.alternate,M===null)throw Error(n(387));M.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(s!==null?s.push(Mu):s=[Mu])}g=g.return}s!==null&&Cf(o,s,c,f),o.flags|=262144}function f0(s){for(s=s.firstContext;s!==null;){if(!Nn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Ui(s){Hi=s,ls=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Zr(s){return bb(Hi,s)}function m0(s,o){return Hi===null&&Ui(s),bb(s,o)}function bb(s,o){var c=o._currentValue;if(o={context:o,memoizedValue:c,next:null},ls===null){if(s===null)throw Error(n(308));ls=o,s.dependencies={lanes:0,firstContext:o},s.flags|=524288}else ls=ls.next=o;return c}var W_=typeof AbortController<"u"?AbortController:function(){var s=[],o=this.signal={aborted:!1,addEventListener:function(c,f){s.push(f)}};this.abort=function(){o.aborted=!0,s.forEach(function(c){return c()})}},J_=t.unstable_scheduleCallback,ew=t.unstable_NormalPriority,Er={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Tf(){return{controller:new W_,data:new Map,refCount:0}}function ru(s){s.refCount--,s.refCount===0&&J_(ew,function(){s.controller.abort()})}var nu=null,Nf=0,$o=0,qo=null;function tw(s,o){if(nu===null){var c=nu=[];Nf=0,$o=j1(),qo={status:"pending",value:void 0,then:function(f){c.push(f)}}}return Nf++,o.then(yb,yb),o}function yb(){if(--Nf===0&&nu!==null){qo!==null&&(qo.status="fulfilled");var s=nu;nu=null,$o=0,qo=null;for(var o=0;o<s.length;o++)(0,s[o])()}}function rw(s,o){var c=[],f={status:"pending",value:null,reason:null,then:function(g){c.push(g)}};return s.then(function(){f.status="fulfilled",f.value=o;for(var g=0;g<c.length;g++)(0,c[g])(o)},function(g){for(f.status="rejected",f.reason=g,g=0;g<c.length;g++)(0,c[g])(void 0)}),f}var xb=K.S;K.S=function(s,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&tw(s,o),xb!==null&&xb(s,o)};var Vi=ae(null);function Mf(){var s=Vi.current;return s!==null?s:Pt.pooledCache}function p0(s,o){o===null?be(Vi,Vi.current):be(Vi,o.pool)}function vb(){var s=Mf();return s===null?null:{parent:Er._currentValue,pool:s}}var au=Error(n(460)),_b=Error(n(474)),g0=Error(n(542)),jf={then:function(){}};function wb(s){return s=s.status,s==="fulfilled"||s==="rejected"}function b0(){}function kb(s,o,c){switch(c=s[c],c===void 0?s.push(o):c!==o&&(o.then(b0,b0),o=c),o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,Ab(s),s;default:if(typeof o.status=="string")o.then(b0,b0);else{if(s=Pt,s!==null&&100<s.shellSuspendCounter)throw Error(n(482));s=o,s.status="pending",s.then(function(f){if(o.status==="pending"){var g=o;g.status="fulfilled",g.value=f}},function(f){if(o.status==="pending"){var g=o;g.status="rejected",g.reason=f}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,Ab(s),s}throw su=o,au}}var su=null;function Sb(){if(su===null)throw Error(n(459));var s=su;return su=null,s}function Ab(s){if(s===au||s===g0)throw Error(n(483))}var $s=!1;function Df(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function zf(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function qs(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Hs(s,o,c){var f=s.updateQueue;if(f===null)return null;if(f=f.shared,(Ct&2)!==0){var g=f.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),f.pending=o,o=u0(s),db(s,null,c),o}return l0(s,f,o,c),u0(s)}function iu(s,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194048)!==0)){var f=o.lanes;f&=s.pendingLanes,c|=f,o.lanes=c,hr(s,c)}}function Of(s,o){var c=s.updateQueue,f=s.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var g=null,v=null;if(c=c.firstBaseUpdate,c!==null){do{var M={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};v===null?g=v=M:v=v.next=M,c=c.next}while(c!==null);v===null?g=v=o:v=v.next=o}else g=v=o;c={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:f.shared,callbacks:f.callbacks},s.updateQueue=c;return}s=c.lastBaseUpdate,s===null?c.firstBaseUpdate=o:s.next=o,c.lastBaseUpdate=o}var Rf=!1;function ou(){if(Rf){var s=qo;if(s!==null)throw s}}function lu(s,o,c,f){Rf=!1;var g=s.updateQueue;$s=!1;var v=g.firstBaseUpdate,M=g.lastBaseUpdate,L=g.shared.pending;if(L!==null){g.shared.pending=null;var U=L,te=U.next;U.next=null,M===null?v=te:M.next=te,M=U;var me=s.alternate;me!==null&&(me=me.updateQueue,L=me.lastBaseUpdate,L!==M&&(L===null?me.firstBaseUpdate=te:L.next=te,me.lastBaseUpdate=U))}if(v!==null){var ve=g.baseState;M=0,me=te=U=null,L=v;do{var se=L.lane&-536870913,oe=se!==L.lane;if(oe?(mt&se)===se:(f&se)===se){se!==0&&se===$o&&(Rf=!0),me!==null&&(me=me.next={lane:0,tag:L.tag,payload:L.payload,callback:null,next:null});e:{var Qe=s,Ye=L;se=o;var zt=c;switch(Ye.tag){case 1:if(Qe=Ye.payload,typeof Qe=="function"){ve=Qe.call(zt,ve,se);break e}ve=Qe;break e;case 3:Qe.flags=Qe.flags&-65537|128;case 0:if(Qe=Ye.payload,se=typeof Qe=="function"?Qe.call(zt,ve,se):Qe,se==null)break e;ve=p({},ve,se);break e;case 2:$s=!0}}se=L.callback,se!==null&&(s.flags|=64,oe&&(s.flags|=8192),oe=g.callbacks,oe===null?g.callbacks=[se]:oe.push(se))}else oe={lane:se,tag:L.tag,payload:L.payload,callback:L.callback,next:null},me===null?(te=me=oe,U=ve):me=me.next=oe,M|=se;if(L=L.next,L===null){if(L=g.shared.pending,L===null)break;oe=L,L=oe.next,oe.next=null,g.lastBaseUpdate=oe,g.shared.pending=null}}while(!0);me===null&&(U=ve),g.baseState=U,g.firstBaseUpdate=te,g.lastBaseUpdate=me,v===null&&(g.shared.lanes=0),Qs|=M,s.lanes=M,s.memoizedState=ve}}function Eb(s,o){if(typeof s!="function")throw Error(n(191,s));s.call(o)}function Cb(s,o){var c=s.callbacks;if(c!==null)for(s.callbacks=null,s=0;s<c.length;s++)Eb(c[s],o)}var Ho=ae(null),y0=ae(0);function Tb(s,o){s=gs,be(y0,s),be(Ho,o),gs=s|o.baseLanes}function Ff(){be(y0,gs),be(Ho,Ho.current)}function Lf(){gs=y0.current,we(Ho),we(y0)}var Us=0,ot=null,jt=null,_r=null,x0=!1,Uo=!1,Gi=!1,v0=0,uu=0,Vo=null,nw=0;function fr(){throw Error(n(321))}function Pf(s,o){if(o===null)return!1;for(var c=0;c<o.length&&c<s.length;c++)if(!Nn(s[c],o[c]))return!1;return!0}function Bf(s,o,c,f,g,v){return Us=v,ot=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,K.H=s===null||s.memoizedState===null?d4:h4,Gi=!1,v=c(f,g),Gi=!1,Uo&&(v=Mb(o,c,f,g)),Nb(s),v}function Nb(s){K.H=E0;var o=jt!==null&&jt.next!==null;if(Us=0,_r=jt=ot=null,x0=!1,uu=0,Vo=null,o)throw Error(n(300));s===null||jr||(s=s.dependencies,s!==null&&f0(s)&&(jr=!0))}function Mb(s,o,c,f){ot=s;var g=0;do{if(Uo&&(Vo=null),uu=0,Uo=!1,25<=g)throw Error(n(301));if(g+=1,_r=jt=null,s.updateQueue!=null){var v=s.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}K.H=cw,v=o(c,f)}while(Uo);return v}function aw(){var s=K.H,o=s.useState()[0];return o=typeof o.then=="function"?cu(o):o,s=s.useState()[0],(jt!==null?jt.memoizedState:null)!==s&&(ot.flags|=1024),o}function If(){var s=v0!==0;return v0=0,s}function $f(s,o,c){o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~c}function qf(s){if(x0){for(s=s.memoizedState;s!==null;){var o=s.queue;o!==null&&(o.pending=null),s=s.next}x0=!1}Us=0,_r=jt=ot=null,Uo=!1,uu=v0=0,Vo=null}function hn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _r===null?ot.memoizedState=_r=s:_r=_r.next=s,_r}function wr(){if(jt===null){var s=ot.alternate;s=s!==null?s.memoizedState:null}else s=jt.next;var o=_r===null?ot.memoizedState:_r.next;if(o!==null)_r=o,jt=s;else{if(s===null)throw ot.alternate===null?Error(n(467)):Error(n(310));jt=s,s={memoizedState:jt.memoizedState,baseState:jt.baseState,baseQueue:jt.baseQueue,queue:jt.queue,next:null},_r===null?ot.memoizedState=_r=s:_r=_r.next=s}return _r}function Hf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function cu(s){var o=uu;return uu+=1,Vo===null&&(Vo=[]),s=kb(Vo,s,o),o=ot,(_r===null?o.memoizedState:_r.next)===null&&(o=o.alternate,K.H=o===null||o.memoizedState===null?d4:h4),s}function _0(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return cu(s);if(s.$$typeof===N)return Zr(s)}throw Error(n(438,String(s)))}function Uf(s){var o=null,c=ot.updateQueue;if(c!==null&&(o=c.memoCache),o==null){var f=ot.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(o={data:f.data.map(function(g){return g.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),c===null&&(c=Hf(),ot.updateQueue=c),c.memoCache=o,c=o.data[o.index],c===void 0)for(c=o.data[o.index]=Array(s),f=0;f<s;f++)c[f]=V;return o.index++,c}function cs(s,o){return typeof o=="function"?o(s):o}function w0(s){var o=wr();return Vf(o,jt,s)}function Vf(s,o,c){var f=s.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=c;var g=s.baseQueue,v=f.pending;if(v!==null){if(g!==null){var M=g.next;g.next=v.next,v.next=M}o.baseQueue=g=v,f.pending=null}if(v=s.baseState,g===null)s.memoizedState=v;else{o=g.next;var L=M=null,U=null,te=o,me=!1;do{var ve=te.lane&-536870913;if(ve!==te.lane?(mt&ve)===ve:(Us&ve)===ve){var se=te.revertLane;if(se===0)U!==null&&(U=U.next={lane:0,revertLane:0,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null}),ve===$o&&(me=!0);else if((Us&se)===se){te=te.next,se===$o&&(me=!0);continue}else ve={lane:0,revertLane:te.revertLane,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},U===null?(L=U=ve,M=v):U=U.next=ve,ot.lanes|=se,Qs|=se;ve=te.action,Gi&&c(v,ve),v=te.hasEagerState?te.eagerState:c(v,ve)}else se={lane:ve,revertLane:te.revertLane,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},U===null?(L=U=se,M=v):U=U.next=se,ot.lanes|=ve,Qs|=ve;te=te.next}while(te!==null&&te!==o);if(U===null?M=v:U.next=L,!Nn(v,s.memoizedState)&&(jr=!0,me&&(c=qo,c!==null)))throw c;s.memoizedState=v,s.baseState=M,s.baseQueue=U,f.lastRenderedState=v}return g===null&&(f.lanes=0),[s.memoizedState,f.dispatch]}function Gf(s){var o=wr(),c=o.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=s;var f=c.dispatch,g=c.pending,v=o.memoizedState;if(g!==null){c.pending=null;var M=g=g.next;do v=s(v,M.action),M=M.next;while(M!==g);Nn(v,o.memoizedState)||(jr=!0),o.memoizedState=v,o.baseQueue===null&&(o.baseState=v),c.lastRenderedState=v}return[v,f]}function jb(s,o,c){var f=ot,g=wr(),v=vt;if(v){if(c===void 0)throw Error(n(407));c=c()}else c=o();var M=!Nn((jt||g).memoizedState,c);M&&(g.memoizedState=c,jr=!0),g=g.queue;var L=Ob.bind(null,f,g,s);if(du(2048,8,L,[s]),g.getSnapshot!==o||M||_r!==null&&_r.memoizedState.tag&1){if(f.flags|=2048,Go(9,k0(),zb.bind(null,f,g,c,o),null),Pt===null)throw Error(n(349));v||(Us&124)!==0||Db(f,o,c)}return c}function Db(s,o,c){s.flags|=16384,s={getSnapshot:o,value:c},o=ot.updateQueue,o===null?(o=Hf(),ot.updateQueue=o,o.stores=[s]):(c=o.stores,c===null?o.stores=[s]:c.push(s))}function zb(s,o,c,f){o.value=c,o.getSnapshot=f,Rb(o)&&Fb(s)}function Ob(s,o,c){return c(function(){Rb(o)&&Fb(s)})}function Rb(s){var o=s.getSnapshot;s=s.value;try{var c=o();return!Nn(s,c)}catch{return!0}}function Fb(s){var o=Lo(s,2);o!==null&&Rn(o,s,2)}function Zf(s){var o=hn();if(typeof s=="function"){var c=s;if(s=c(),Gi){et(!0);try{c()}finally{et(!1)}}}return o.memoizedState=o.baseState=s,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cs,lastRenderedState:s},o}function Lb(s,o,c,f){return s.baseState=c,Vf(s,jt,typeof f=="function"?f:cs)}function sw(s,o,c,f,g){if(A0(s))throw Error(n(485));if(s=o.action,s!==null){var v={payload:g,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(M){v.listeners.push(M)}};K.T!==null?c(!0):v.isTransition=!1,f(v),c=o.pending,c===null?(v.next=o.pending=v,Pb(o,v)):(v.next=c.next,o.pending=c.next=v)}}function Pb(s,o){var c=o.action,f=o.payload,g=s.state;if(o.isTransition){var v=K.T,M={};K.T=M;try{var L=c(g,f),U=K.S;U!==null&&U(M,L),Bb(s,o,L)}catch(te){Kf(s,o,te)}finally{K.T=v}}else try{v=c(g,f),Bb(s,o,v)}catch(te){Kf(s,o,te)}}function Bb(s,o,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(f){Ib(s,o,f)},function(f){return Kf(s,o,f)}):Ib(s,o,c)}function Ib(s,o,c){o.status="fulfilled",o.value=c,$b(o),s.state=c,o=s.pending,o!==null&&(c=o.next,c===o?s.pending=null:(c=c.next,o.next=c,Pb(s,c)))}function Kf(s,o,c){var f=s.pending;if(s.pending=null,f!==null){f=f.next;do o.status="rejected",o.reason=c,$b(o),o=o.next;while(o!==f)}s.action=null}function $b(s){s=s.listeners;for(var o=0;o<s.length;o++)(0,s[o])()}function qb(s,o){return o}function Hb(s,o){if(vt){var c=Pt.formState;if(c!==null){e:{var f=ot;if(vt){if(sr){t:{for(var g=sr,v=Na;g.nodeType!==8;){if(!v){g=null;break t}if(g=ma(g.nextSibling),g===null){g=null;break t}}v=g.data,g=v==="F!"||v==="F"?g:null}if(g){sr=ma(g.nextSibling),f=g.data==="F!";break e}}qi(f)}f=!1}f&&(o=c[0])}}return c=hn(),c.memoizedState=c.baseState=o,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qb,lastRenderedState:o},c.queue=f,c=l4.bind(null,ot,f),f.dispatch=c,f=Zf(!1),v=Jf.bind(null,ot,!1,f.queue),f=hn(),g={state:o,dispatch:null,action:s,pending:null},f.queue=g,c=sw.bind(null,ot,g,v,c),g.dispatch=c,f.memoizedState=s,[o,c,!1]}function Ub(s){var o=wr();return Vb(o,jt,s)}function Vb(s,o,c){if(o=Vf(s,o,qb)[0],s=w0(cs)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var f=cu(o)}catch(M){throw M===au?g0:M}else f=o;o=wr();var g=o.queue,v=g.dispatch;return c!==o.memoizedState&&(ot.flags|=2048,Go(9,k0(),iw.bind(null,g,c),null)),[f,v,s]}function iw(s,o){s.action=o}function Gb(s){var o=wr(),c=jt;if(c!==null)return Vb(o,c,s);wr(),o=o.memoizedState,c=wr();var f=c.queue.dispatch;return c.memoizedState=s,[o,f,!1]}function Go(s,o,c,f){return s={tag:s,create:c,deps:f,inst:o,next:null},o=ot.updateQueue,o===null&&(o=Hf(),ot.updateQueue=o),c=o.lastEffect,c===null?o.lastEffect=s.next=s:(f=c.next,c.next=s,s.next=f,o.lastEffect=s),s}function k0(){return{destroy:void 0,resource:void 0}}function Zb(){return wr().memoizedState}function S0(s,o,c,f){var g=hn();f=f===void 0?null:f,ot.flags|=s,g.memoizedState=Go(1|o,k0(),c,f)}function du(s,o,c,f){var g=wr();f=f===void 0?null:f;var v=g.memoizedState.inst;jt!==null&&f!==null&&Pf(f,jt.memoizedState.deps)?g.memoizedState=Go(o,v,c,f):(ot.flags|=s,g.memoizedState=Go(1|o,v,c,f))}function Kb(s,o){S0(8390656,8,s,o)}function Yb(s,o){du(2048,8,s,o)}function Xb(s,o){return du(4,2,s,o)}function Qb(s,o){return du(4,4,s,o)}function Wb(s,o){if(typeof o=="function"){s=s();var c=o(s);return function(){typeof c=="function"?c():o(null)}}if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function Jb(s,o,c){c=c!=null?c.concat([s]):null,du(4,4,Wb.bind(null,o,s),c)}function Yf(){}function e4(s,o){var c=wr();o=o===void 0?null:o;var f=c.memoizedState;return o!==null&&Pf(o,f[1])?f[0]:(c.memoizedState=[s,o],s)}function t4(s,o){var c=wr();o=o===void 0?null:o;var f=c.memoizedState;if(o!==null&&Pf(o,f[1]))return f[0];if(f=s(),Gi){et(!0);try{s()}finally{et(!1)}}return c.memoizedState=[f,o],f}function Xf(s,o,c){return c===void 0||(Us&1073741824)!==0?s.memoizedState=o:(s.memoizedState=c,s=ay(),ot.lanes|=s,Qs|=s,c)}function r4(s,o,c,f){return Nn(c,o)?c:Ho.current!==null?(s=Xf(s,c,f),Nn(s,o)||(jr=!0),s):(Us&42)===0?(jr=!0,s.memoizedState=c):(s=ay(),ot.lanes|=s,Qs|=s,o)}function n4(s,o,c,f,g){var v=ue.p;ue.p=v!==0&&8>v?v:8;var M=K.T,L={};K.T=L,Jf(s,!1,o,c);try{var U=g(),te=K.S;if(te!==null&&te(L,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var me=rw(U,f);hu(s,o,me,On(s))}else hu(s,o,f,On(s))}catch(ve){hu(s,o,{then:function(){},status:"rejected",reason:ve},On())}finally{ue.p=v,K.T=M}}function ow(){}function Qf(s,o,c,f){if(s.tag!==5)throw Error(n(476));var g=a4(s).queue;n4(s,g,o,Ce,c===null?ow:function(){return s4(s),c(f)})}function a4(s){var o=s.memoizedState;if(o!==null)return o;o={memoizedState:Ce,baseState:Ce,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cs,lastRenderedState:Ce},next:null};var c={};return o.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cs,lastRenderedState:c},next:null},s.memoizedState=o,s=s.alternate,s!==null&&(s.memoizedState=o),o}function s4(s){var o=a4(s).next.queue;hu(s,o,{},On())}function Wf(){return Zr(Mu)}function i4(){return wr().memoizedState}function o4(){return wr().memoizedState}function lw(s){for(var o=s.return;o!==null;){switch(o.tag){case 24:case 3:var c=On();s=qs(c);var f=Hs(o,s,c);f!==null&&(Rn(f,o,c),iu(f,o,c)),o={cache:Tf()},s.payload=o;return}o=o.return}}function uw(s,o,c){var f=On();c={lane:f,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},A0(s)?u4(o,c):(c=yf(s,o,c,f),c!==null&&(Rn(c,s,f),c4(c,o,f)))}function l4(s,o,c){var f=On();hu(s,o,c,f)}function hu(s,o,c,f){var g={lane:f,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(A0(s))u4(o,g);else{var v=s.alternate;if(s.lanes===0&&(v===null||v.lanes===0)&&(v=o.lastRenderedReducer,v!==null))try{var M=o.lastRenderedState,L=v(M,c);if(g.hasEagerState=!0,g.eagerState=L,Nn(L,M))return l0(s,o,g,0),Pt===null&&o0(),!1}catch{}finally{}if(c=yf(s,o,g,f),c!==null)return Rn(c,s,f),c4(c,o,f),!0}return!1}function Jf(s,o,c,f){if(f={lane:2,revertLane:j1(),action:f,hasEagerState:!1,eagerState:null,next:null},A0(s)){if(o)throw Error(n(479))}else o=yf(s,c,f,2),o!==null&&Rn(o,s,2)}function A0(s){var o=s.alternate;return s===ot||o!==null&&o===ot}function u4(s,o){Uo=x0=!0;var c=s.pending;c===null?o.next=o:(o.next=c.next,c.next=o),s.pending=o}function c4(s,o,c){if((c&4194048)!==0){var f=o.lanes;f&=s.pendingLanes,c|=f,o.lanes=c,hr(s,c)}}var E0={readContext:Zr,use:_0,useCallback:fr,useContext:fr,useEffect:fr,useImperativeHandle:fr,useLayoutEffect:fr,useInsertionEffect:fr,useMemo:fr,useReducer:fr,useRef:fr,useState:fr,useDebugValue:fr,useDeferredValue:fr,useTransition:fr,useSyncExternalStore:fr,useId:fr,useHostTransitionStatus:fr,useFormState:fr,useActionState:fr,useOptimistic:fr,useMemoCache:fr,useCacheRefresh:fr},d4={readContext:Zr,use:_0,useCallback:function(s,o){return hn().memoizedState=[s,o===void 0?null:o],s},useContext:Zr,useEffect:Kb,useImperativeHandle:function(s,o,c){c=c!=null?c.concat([s]):null,S0(4194308,4,Wb.bind(null,o,s),c)},useLayoutEffect:function(s,o){return S0(4194308,4,s,o)},useInsertionEffect:function(s,o){S0(4,2,s,o)},useMemo:function(s,o){var c=hn();o=o===void 0?null:o;var f=s();if(Gi){et(!0);try{s()}finally{et(!1)}}return c.memoizedState=[f,o],f},useReducer:function(s,o,c){var f=hn();if(c!==void 0){var g=c(o);if(Gi){et(!0);try{c(o)}finally{et(!1)}}}else g=o;return f.memoizedState=f.baseState=g,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:g},f.queue=s,s=s.dispatch=uw.bind(null,ot,s),[f.memoizedState,s]},useRef:function(s){var o=hn();return s={current:s},o.memoizedState=s},useState:function(s){s=Zf(s);var o=s.queue,c=l4.bind(null,ot,o);return o.dispatch=c,[s.memoizedState,c]},useDebugValue:Yf,useDeferredValue:function(s,o){var c=hn();return Xf(c,s,o)},useTransition:function(){var s=Zf(!1);return s=n4.bind(null,ot,s.queue,!0,!1),hn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,o,c){var f=ot,g=hn();if(vt){if(c===void 0)throw Error(n(407));c=c()}else{if(c=o(),Pt===null)throw Error(n(349));(mt&124)!==0||Db(f,o,c)}g.memoizedState=c;var v={value:c,getSnapshot:o};return g.queue=v,Kb(Ob.bind(null,f,v,s),[s]),f.flags|=2048,Go(9,k0(),zb.bind(null,f,v,c,o),null),c},useId:function(){var s=hn(),o=Pt.identifierPrefix;if(vt){var c=os,f=is;c=(f&~(1<<32-it(f)-1)).toString(32)+c,o=""+o+"R"+c,c=v0++,0<c&&(o+="H"+c.toString(32)),o+=""}else c=nw++,o=""+o+"r"+c.toString(32)+"";return s.memoizedState=o},useHostTransitionStatus:Wf,useFormState:Hb,useActionState:Hb,useOptimistic:function(s){var o=hn();o.memoizedState=o.baseState=s;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=c,o=Jf.bind(null,ot,!0,c),c.dispatch=o,[s,o]},useMemoCache:Uf,useCacheRefresh:function(){return hn().memoizedState=lw.bind(null,ot)}},h4={readContext:Zr,use:_0,useCallback:e4,useContext:Zr,useEffect:Yb,useImperativeHandle:Jb,useInsertionEffect:Xb,useLayoutEffect:Qb,useMemo:t4,useReducer:w0,useRef:Zb,useState:function(){return w0(cs)},useDebugValue:Yf,useDeferredValue:function(s,o){var c=wr();return r4(c,jt.memoizedState,s,o)},useTransition:function(){var s=w0(cs)[0],o=wr().memoizedState;return[typeof s=="boolean"?s:cu(s),o]},useSyncExternalStore:jb,useId:i4,useHostTransitionStatus:Wf,useFormState:Ub,useActionState:Ub,useOptimistic:function(s,o){var c=wr();return Lb(c,jt,s,o)},useMemoCache:Uf,useCacheRefresh:o4},cw={readContext:Zr,use:_0,useCallback:e4,useContext:Zr,useEffect:Yb,useImperativeHandle:Jb,useInsertionEffect:Xb,useLayoutEffect:Qb,useMemo:t4,useReducer:Gf,useRef:Zb,useState:function(){return Gf(cs)},useDebugValue:Yf,useDeferredValue:function(s,o){var c=wr();return jt===null?Xf(c,s,o):r4(c,jt.memoizedState,s,o)},useTransition:function(){var s=Gf(cs)[0],o=wr().memoizedState;return[typeof s=="boolean"?s:cu(s),o]},useSyncExternalStore:jb,useId:i4,useHostTransitionStatus:Wf,useFormState:Gb,useActionState:Gb,useOptimistic:function(s,o){var c=wr();return jt!==null?Lb(c,jt,s,o):(c.baseState=s,[s,c.queue.dispatch])},useMemoCache:Uf,useCacheRefresh:o4},Zo=null,fu=0;function C0(s){var o=fu;return fu+=1,Zo===null&&(Zo=[]),kb(Zo,s,o)}function mu(s,o){o=o.props.ref,s.ref=o!==void 0?o:null}function T0(s,o){throw o.$$typeof===b?Error(n(525)):(s=Object.prototype.toString.call(o),Error(n(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s)))}function f4(s){var o=s._init;return o(s._payload)}function m4(s){function o(J,Y){if(s){var ee=J.deletions;ee===null?(J.deletions=[Y],J.flags|=16):ee.push(Y)}}function c(J,Y){if(!s)return null;for(;Y!==null;)o(J,Y),Y=Y.sibling;return null}function f(J){for(var Y=new Map;J!==null;)J.key!==null?Y.set(J.key,J):Y.set(J.index,J),J=J.sibling;return Y}function g(J,Y){return J=ss(J,Y),J.index=0,J.sibling=null,J}function v(J,Y,ee){return J.index=ee,s?(ee=J.alternate,ee!==null?(ee=ee.index,ee<Y?(J.flags|=67108866,Y):ee):(J.flags|=67108866,Y)):(J.flags|=1048576,Y)}function M(J){return s&&J.alternate===null&&(J.flags|=67108866),J}function L(J,Y,ee,ye){return Y===null||Y.tag!==6?(Y=vf(ee,J.mode,ye),Y.return=J,Y):(Y=g(Y,ee),Y.return=J,Y)}function U(J,Y,ee,ye){var Ie=ee.type;return Ie===_?me(J,Y,ee.props.children,ye,ee.key):Y!==null&&(Y.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===R&&f4(Ie)===Y.type)?(Y=g(Y,ee.props),mu(Y,ee),Y.return=J,Y):(Y=c0(ee.type,ee.key,ee.props,null,J.mode,ye),mu(Y,ee),Y.return=J,Y)}function te(J,Y,ee,ye){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==ee.containerInfo||Y.stateNode.implementation!==ee.implementation?(Y=_f(ee,J.mode,ye),Y.return=J,Y):(Y=g(Y,ee.children||[]),Y.return=J,Y)}function me(J,Y,ee,ye,Ie){return Y===null||Y.tag!==7?(Y=Pi(ee,J.mode,ye,Ie),Y.return=J,Y):(Y=g(Y,ee),Y.return=J,Y)}function ve(J,Y,ee){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Y=vf(""+Y,J.mode,ee),Y.return=J,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case y:return ee=c0(Y.type,Y.key,Y.props,null,J.mode,ee),mu(ee,Y),ee.return=J,ee;case x:return Y=_f(Y,J.mode,ee),Y.return=J,Y;case R:var ye=Y._init;return Y=ye(Y._payload),ve(J,Y,ee)}if(pe(Y)||G(Y))return Y=Pi(Y,J.mode,ee,null),Y.return=J,Y;if(typeof Y.then=="function")return ve(J,C0(Y),ee);if(Y.$$typeof===N)return ve(J,m0(J,Y),ee);T0(J,Y)}return null}function se(J,Y,ee,ye){var Ie=Y!==null?Y.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return Ie!==null?null:L(J,Y,""+ee,ye);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case y:return ee.key===Ie?U(J,Y,ee,ye):null;case x:return ee.key===Ie?te(J,Y,ee,ye):null;case R:return Ie=ee._init,ee=Ie(ee._payload),se(J,Y,ee,ye)}if(pe(ee)||G(ee))return Ie!==null?null:me(J,Y,ee,ye,null);if(typeof ee.then=="function")return se(J,Y,C0(ee),ye);if(ee.$$typeof===N)return se(J,Y,m0(J,ee),ye);T0(J,ee)}return null}function oe(J,Y,ee,ye,Ie){if(typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint")return J=J.get(ee)||null,L(Y,J,""+ye,Ie);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case y:return J=J.get(ye.key===null?ee:ye.key)||null,U(Y,J,ye,Ie);case x:return J=J.get(ye.key===null?ee:ye.key)||null,te(Y,J,ye,Ie);case R:var lt=ye._init;return ye=lt(ye._payload),oe(J,Y,ee,ye,Ie)}if(pe(ye)||G(ye))return J=J.get(ee)||null,me(Y,J,ye,Ie,null);if(typeof ye.then=="function")return oe(J,Y,ee,C0(ye),Ie);if(ye.$$typeof===N)return oe(J,Y,ee,m0(Y,ye),Ie);T0(Y,ye)}return null}function Qe(J,Y,ee,ye){for(var Ie=null,lt=null,qe=Y,Xe=Y=0,zr=null;qe!==null&&Xe<ee.length;Xe++){qe.index>Xe?(zr=qe,qe=null):zr=qe.sibling;var bt=se(J,qe,ee[Xe],ye);if(bt===null){qe===null&&(qe=zr);break}s&&qe&&bt.alternate===null&&o(J,qe),Y=v(bt,Y,Xe),lt===null?Ie=bt:lt.sibling=bt,lt=bt,qe=zr}if(Xe===ee.length)return c(J,qe),vt&&Ii(J,Xe),Ie;if(qe===null){for(;Xe<ee.length;Xe++)qe=ve(J,ee[Xe],ye),qe!==null&&(Y=v(qe,Y,Xe),lt===null?Ie=qe:lt.sibling=qe,lt=qe);return vt&&Ii(J,Xe),Ie}for(qe=f(qe);Xe<ee.length;Xe++)zr=oe(qe,J,Xe,ee[Xe],ye),zr!==null&&(s&&zr.alternate!==null&&qe.delete(zr.key===null?Xe:zr.key),Y=v(zr,Y,Xe),lt===null?Ie=zr:lt.sibling=zr,lt=zr);return s&&qe.forEach(function(ii){return o(J,ii)}),vt&&Ii(J,Xe),Ie}function Ye(J,Y,ee,ye){if(ee==null)throw Error(n(151));for(var Ie=null,lt=null,qe=Y,Xe=Y=0,zr=null,bt=ee.next();qe!==null&&!bt.done;Xe++,bt=ee.next()){qe.index>Xe?(zr=qe,qe=null):zr=qe.sibling;var ii=se(J,qe,bt.value,ye);if(ii===null){qe===null&&(qe=zr);break}s&&qe&&ii.alternate===null&&o(J,qe),Y=v(ii,Y,Xe),lt===null?Ie=ii:lt.sibling=ii,lt=ii,qe=zr}if(bt.done)return c(J,qe),vt&&Ii(J,Xe),Ie;if(qe===null){for(;!bt.done;Xe++,bt=ee.next())bt=ve(J,bt.value,ye),bt!==null&&(Y=v(bt,Y,Xe),lt===null?Ie=bt:lt.sibling=bt,lt=bt);return vt&&Ii(J,Xe),Ie}for(qe=f(qe);!bt.done;Xe++,bt=ee.next())bt=oe(qe,J,Xe,bt.value,ye),bt!==null&&(s&&bt.alternate!==null&&qe.delete(bt.key===null?Xe:bt.key),Y=v(bt,Y,Xe),lt===null?Ie=bt:lt.sibling=bt,lt=bt);return s&&qe.forEach(function(dk){return o(J,dk)}),vt&&Ii(J,Xe),Ie}function zt(J,Y,ee,ye){if(typeof ee=="object"&&ee!==null&&ee.type===_&&ee.key===null&&(ee=ee.props.children),typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case y:e:{for(var Ie=ee.key;Y!==null;){if(Y.key===Ie){if(Ie=ee.type,Ie===_){if(Y.tag===7){c(J,Y.sibling),ye=g(Y,ee.props.children),ye.return=J,J=ye;break e}}else if(Y.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===R&&f4(Ie)===Y.type){c(J,Y.sibling),ye=g(Y,ee.props),mu(ye,ee),ye.return=J,J=ye;break e}c(J,Y);break}else o(J,Y);Y=Y.sibling}ee.type===_?(ye=Pi(ee.props.children,J.mode,ye,ee.key),ye.return=J,J=ye):(ye=c0(ee.type,ee.key,ee.props,null,J.mode,ye),mu(ye,ee),ye.return=J,J=ye)}return M(J);case x:e:{for(Ie=ee.key;Y!==null;){if(Y.key===Ie)if(Y.tag===4&&Y.stateNode.containerInfo===ee.containerInfo&&Y.stateNode.implementation===ee.implementation){c(J,Y.sibling),ye=g(Y,ee.children||[]),ye.return=J,J=ye;break e}else{c(J,Y);break}else o(J,Y);Y=Y.sibling}ye=_f(ee,J.mode,ye),ye.return=J,J=ye}return M(J);case R:return Ie=ee._init,ee=Ie(ee._payload),zt(J,Y,ee,ye)}if(pe(ee))return Qe(J,Y,ee,ye);if(G(ee)){if(Ie=G(ee),typeof Ie!="function")throw Error(n(150));return ee=Ie.call(ee),Ye(J,Y,ee,ye)}if(typeof ee.then=="function")return zt(J,Y,C0(ee),ye);if(ee.$$typeof===N)return zt(J,Y,m0(J,ee),ye);T0(J,ee)}return typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint"?(ee=""+ee,Y!==null&&Y.tag===6?(c(J,Y.sibling),ye=g(Y,ee),ye.return=J,J=ye):(c(J,Y),ye=vf(ee,J.mode,ye),ye.return=J,J=ye),M(J)):c(J,Y)}return function(J,Y,ee,ye){try{fu=0;var Ie=zt(J,Y,ee,ye);return Zo=null,Ie}catch(qe){if(qe===au||qe===g0)throw qe;var lt=Mn(29,qe,null,J.mode);return lt.lanes=ye,lt.return=J,lt}finally{}}}var Ko=m4(!0),p4=m4(!1),Xn=ae(null),Ma=null;function Vs(s){var o=s.alternate;be(Cr,Cr.current&1),be(Xn,s),Ma===null&&(o===null||Ho.current!==null||o.memoizedState!==null)&&(Ma=s)}function g4(s){if(s.tag===22){if(be(Cr,Cr.current),be(Xn,s),Ma===null){var o=s.alternate;o!==null&&o.memoizedState!==null&&(Ma=s)}}else Gs()}function Gs(){be(Cr,Cr.current),be(Xn,Xn.current)}function ds(s){we(Xn),Ma===s&&(Ma=null),we(Cr)}var Cr=ae(0);function N0(s){for(var o=s;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||H1(c)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function e1(s,o,c,f){o=s.memoizedState,c=c(f,o),c=c==null?o:p({},o,c),s.memoizedState=c,s.lanes===0&&(s.updateQueue.baseState=c)}var t1={enqueueSetState:function(s,o,c){s=s._reactInternals;var f=On(),g=qs(f);g.payload=o,c!=null&&(g.callback=c),o=Hs(s,g,f),o!==null&&(Rn(o,s,f),iu(o,s,f))},enqueueReplaceState:function(s,o,c){s=s._reactInternals;var f=On(),g=qs(f);g.tag=1,g.payload=o,c!=null&&(g.callback=c),o=Hs(s,g,f),o!==null&&(Rn(o,s,f),iu(o,s,f))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var c=On(),f=qs(c);f.tag=2,o!=null&&(f.callback=o),o=Hs(s,f,c),o!==null&&(Rn(o,s,c),iu(o,s,c))}};function b4(s,o,c,f,g,v,M){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(f,v,M):o.prototype&&o.prototype.isPureReactComponent?!Xl(c,f)||!Xl(g,v):!0}function y4(s,o,c,f){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,f),o.state!==s&&t1.enqueueReplaceState(o,o.state,null)}function Zi(s,o){var c=o;if("ref"in o){c={};for(var f in o)f!=="ref"&&(c[f]=o[f])}if(s=s.defaultProps){c===o&&(c=p({},c));for(var g in s)c[g]===void 0&&(c[g]=s[g])}return c}var M0=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function x4(s){M0(s)}function v4(s){console.error(s)}function _4(s){M0(s)}function j0(s,o){try{var c=s.onUncaughtError;c(o.value,{componentStack:o.stack})}catch(f){setTimeout(function(){throw f})}}function w4(s,o,c){try{var f=s.onCaughtError;f(c.value,{componentStack:c.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function r1(s,o,c){return c=qs(c),c.tag=3,c.payload={element:null},c.callback=function(){j0(s,o)},c}function k4(s){return s=qs(s),s.tag=3,s}function S4(s,o,c,f){var g=c.type.getDerivedStateFromError;if(typeof g=="function"){var v=f.value;s.payload=function(){return g(v)},s.callback=function(){w4(o,c,f)}}var M=c.stateNode;M!==null&&typeof M.componentDidCatch=="function"&&(s.callback=function(){w4(o,c,f),typeof g!="function"&&(Ws===null?Ws=new Set([this]):Ws.add(this));var L=f.stack;this.componentDidCatch(f.value,{componentStack:L!==null?L:""})})}function dw(s,o,c,f,g){if(c.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(o=c.alternate,o!==null&&tu(o,c,g,!0),c=Xn.current,c!==null){switch(c.tag){case 13:return Ma===null?E1():c.alternate===null&&ir===0&&(ir=3),c.flags&=-257,c.flags|=65536,c.lanes=g,f===jf?c.flags|=16384:(o=c.updateQueue,o===null?c.updateQueue=new Set([f]):o.add(f),T1(s,f,g)),!1;case 22:return c.flags|=65536,f===jf?c.flags|=16384:(o=c.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([f])},c.updateQueue=o):(c=o.retryQueue,c===null?o.retryQueue=new Set([f]):c.add(f)),T1(s,f,g)),!1}throw Error(n(435,c.tag))}return T1(s,f,g),E1(),!1}if(vt)return o=Xn.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=g,f!==Sf&&(s=Error(n(422),{cause:f}),eu(Gn(s,c)))):(f!==Sf&&(o=Error(n(423),{cause:f}),eu(Gn(o,c))),s=s.current.alternate,s.flags|=65536,g&=-g,s.lanes|=g,f=Gn(f,c),g=r1(s.stateNode,f,g),Of(s,g),ir!==4&&(ir=2)),!1;var v=Error(n(520),{cause:f});if(v=Gn(v,c),_u===null?_u=[v]:_u.push(v),ir!==4&&(ir=2),o===null)return!0;f=Gn(f,c),c=o;do{switch(c.tag){case 3:return c.flags|=65536,s=g&-g,c.lanes|=s,s=r1(c.stateNode,f,s),Of(c,s),!1;case 1:if(o=c.type,v=c.stateNode,(c.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Ws===null||!Ws.has(v))))return c.flags|=65536,g&=-g,c.lanes|=g,g=k4(g),S4(g,s,c,f),Of(c,g),!1}c=c.return}while(c!==null);return!1}var A4=Error(n(461)),jr=!1;function Ir(s,o,c,f){o.child=s===null?p4(o,null,c,f):Ko(o,s.child,c,f)}function E4(s,o,c,f,g){c=c.render;var v=o.ref;if("ref"in f){var M={};for(var L in f)L!=="ref"&&(M[L]=f[L])}else M=f;return Ui(o),f=Bf(s,o,c,M,v,g),L=If(),s!==null&&!jr?($f(s,o,g),hs(s,o,g)):(vt&&L&&wf(o),o.flags|=1,Ir(s,o,f,g),o.child)}function C4(s,o,c,f,g){if(s===null){var v=c.type;return typeof v=="function"&&!xf(v)&&v.defaultProps===void 0&&c.compare===null?(o.tag=15,o.type=v,T4(s,o,v,f,g)):(s=c0(c.type,null,f,o,o.mode,g),s.ref=o.ref,s.return=o,o.child=s)}if(v=s.child,!c1(s,g)){var M=v.memoizedProps;if(c=c.compare,c=c!==null?c:Xl,c(M,f)&&s.ref===o.ref)return hs(s,o,g)}return o.flags|=1,s=ss(v,f),s.ref=o.ref,s.return=o,o.child=s}function T4(s,o,c,f,g){if(s!==null){var v=s.memoizedProps;if(Xl(v,f)&&s.ref===o.ref)if(jr=!1,o.pendingProps=f=v,c1(s,g))(s.flags&131072)!==0&&(jr=!0);else return o.lanes=s.lanes,hs(s,o,g)}return n1(s,o,c,f,g)}function N4(s,o,c){var f=o.pendingProps,g=f.children,v=s!==null?s.memoizedState:null;if(f.mode==="hidden"){if((o.flags&128)!==0){if(f=v!==null?v.baseLanes|c:c,s!==null){for(g=o.child=s.child,v=0;g!==null;)v=v|g.lanes|g.childLanes,g=g.sibling;o.childLanes=v&~f}else o.childLanes=0,o.child=null;return M4(s,o,f,c)}if((c&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},s!==null&&p0(o,v!==null?v.cachePool:null),v!==null?Tb(o,v):Ff(),g4(o);else return o.lanes=o.childLanes=536870912,M4(s,o,v!==null?v.baseLanes|c:c,c)}else v!==null?(p0(o,v.cachePool),Tb(o,v),Gs(),o.memoizedState=null):(s!==null&&p0(o,null),Ff(),Gs());return Ir(s,o,g,c),o.child}function M4(s,o,c,f){var g=Mf();return g=g===null?null:{parent:Er._currentValue,pool:g},o.memoizedState={baseLanes:c,cachePool:g},s!==null&&p0(o,null),Ff(),g4(o),s!==null&&tu(s,o,f,!0),null}function D0(s,o){var c=o.ref;if(c===null)s!==null&&s.ref!==null&&(o.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(n(284));(s===null||s.ref!==c)&&(o.flags|=4194816)}}function n1(s,o,c,f,g){return Ui(o),c=Bf(s,o,c,f,void 0,g),f=If(),s!==null&&!jr?($f(s,o,g),hs(s,o,g)):(vt&&f&&wf(o),o.flags|=1,Ir(s,o,c,g),o.child)}function j4(s,o,c,f,g,v){return Ui(o),o.updateQueue=null,c=Mb(o,f,c,g),Nb(s),f=If(),s!==null&&!jr?($f(s,o,v),hs(s,o,v)):(vt&&f&&wf(o),o.flags|=1,Ir(s,o,c,v),o.child)}function D4(s,o,c,f,g){if(Ui(o),o.stateNode===null){var v=Po,M=c.contextType;typeof M=="object"&&M!==null&&(v=Zr(M)),v=new c(f,v),o.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=t1,o.stateNode=v,v._reactInternals=o,v=o.stateNode,v.props=f,v.state=o.memoizedState,v.refs={},Df(o),M=c.contextType,v.context=typeof M=="object"&&M!==null?Zr(M):Po,v.state=o.memoizedState,M=c.getDerivedStateFromProps,typeof M=="function"&&(e1(o,c,M,f),v.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(M=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),M!==v.state&&t1.enqueueReplaceState(v,v.state,null),lu(o,f,v,g),ou(),v.state=o.memoizedState),typeof v.componentDidMount=="function"&&(o.flags|=4194308),f=!0}else if(s===null){v=o.stateNode;var L=o.memoizedProps,U=Zi(c,L);v.props=U;var te=v.context,me=c.contextType;M=Po,typeof me=="object"&&me!==null&&(M=Zr(me));var ve=c.getDerivedStateFromProps;me=typeof ve=="function"||typeof v.getSnapshotBeforeUpdate=="function",L=o.pendingProps!==L,me||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(L||te!==M)&&y4(o,v,f,M),$s=!1;var se=o.memoizedState;v.state=se,lu(o,f,v,g),ou(),te=o.memoizedState,L||se!==te||$s?(typeof ve=="function"&&(e1(o,c,ve,f),te=o.memoizedState),(U=$s||b4(o,c,U,f,se,te,M))?(me||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(o.flags|=4194308)):(typeof v.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=te),v.props=f,v.state=te,v.context=M,f=U):(typeof v.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{v=o.stateNode,zf(s,o),M=o.memoizedProps,me=Zi(c,M),v.props=me,ve=o.pendingProps,se=v.context,te=c.contextType,U=Po,typeof te=="object"&&te!==null&&(U=Zr(te)),L=c.getDerivedStateFromProps,(te=typeof L=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(M!==ve||se!==U)&&y4(o,v,f,U),$s=!1,se=o.memoizedState,v.state=se,lu(o,f,v,g),ou();var oe=o.memoizedState;M!==ve||se!==oe||$s||s!==null&&s.dependencies!==null&&f0(s.dependencies)?(typeof L=="function"&&(e1(o,c,L,f),oe=o.memoizedState),(me=$s||b4(o,c,me,f,se,oe,U)||s!==null&&s.dependencies!==null&&f0(s.dependencies))?(te||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(f,oe,U),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(f,oe,U)),typeof v.componentDidUpdate=="function"&&(o.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof v.componentDidUpdate!="function"||M===s.memoizedProps&&se===s.memoizedState||(o.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||M===s.memoizedProps&&se===s.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=oe),v.props=f,v.state=oe,v.context=U,f=me):(typeof v.componentDidUpdate!="function"||M===s.memoizedProps&&se===s.memoizedState||(o.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||M===s.memoizedProps&&se===s.memoizedState||(o.flags|=1024),f=!1)}return v=f,D0(s,o),f=(o.flags&128)!==0,v||f?(v=o.stateNode,c=f&&typeof c.getDerivedStateFromError!="function"?null:v.render(),o.flags|=1,s!==null&&f?(o.child=Ko(o,s.child,null,g),o.child=Ko(o,null,c,g)):Ir(s,o,c,g),o.memoizedState=v.state,s=o.child):s=hs(s,o,g),s}function z4(s,o,c,f){return Jl(),o.flags|=256,Ir(s,o,c,f),o.child}var a1={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function s1(s){return{baseLanes:s,cachePool:vb()}}function i1(s,o,c){return s=s!==null?s.childLanes&~c:0,o&&(s|=Qn),s}function O4(s,o,c){var f=o.pendingProps,g=!1,v=(o.flags&128)!==0,M;if((M=v)||(M=s!==null&&s.memoizedState===null?!1:(Cr.current&2)!==0),M&&(g=!0,o.flags&=-129),M=(o.flags&32)!==0,o.flags&=-33,s===null){if(vt){if(g?Vs(o):Gs(),vt){var L=sr,U;if(U=L){e:{for(U=L,L=Na;U.nodeType!==8;){if(!L){L=null;break e}if(U=ma(U.nextSibling),U===null){L=null;break e}}L=U}L!==null?(o.memoizedState={dehydrated:L,treeContext:Bi!==null?{id:is,overflow:os}:null,retryLane:536870912,hydrationErrors:null},U=Mn(18,null,null,0),U.stateNode=L,U.return=o,o.child=U,Qr=o,sr=null,U=!0):U=!1}U||qi(o)}if(L=o.memoizedState,L!==null&&(L=L.dehydrated,L!==null))return H1(L)?o.lanes=32:o.lanes=536870912,null;ds(o)}return L=f.children,f=f.fallback,g?(Gs(),g=o.mode,L=z0({mode:"hidden",children:L},g),f=Pi(f,g,c,null),L.return=o,f.return=o,L.sibling=f,o.child=L,g=o.child,g.memoizedState=s1(c),g.childLanes=i1(s,M,c),o.memoizedState=a1,f):(Vs(o),o1(o,L))}if(U=s.memoizedState,U!==null&&(L=U.dehydrated,L!==null)){if(v)o.flags&256?(Vs(o),o.flags&=-257,o=l1(s,o,c)):o.memoizedState!==null?(Gs(),o.child=s.child,o.flags|=128,o=null):(Gs(),g=f.fallback,L=o.mode,f=z0({mode:"visible",children:f.children},L),g=Pi(g,L,c,null),g.flags|=2,f.return=o,g.return=o,f.sibling=g,o.child=f,Ko(o,s.child,null,c),f=o.child,f.memoizedState=s1(c),f.childLanes=i1(s,M,c),o.memoizedState=a1,o=g);else if(Vs(o),H1(L)){if(M=L.nextSibling&&L.nextSibling.dataset,M)var te=M.dgst;M=te,f=Error(n(419)),f.stack="",f.digest=M,eu({value:f,source:null,stack:null}),o=l1(s,o,c)}else if(jr||tu(s,o,c,!1),M=(c&s.childLanes)!==0,jr||M){if(M=Pt,M!==null&&(f=c&-c,f=(f&42)!==0?1:Ea(f),f=(f&(M.suspendedLanes|c))!==0?0:f,f!==0&&f!==U.retryLane))throw U.retryLane=f,Lo(s,f),Rn(M,s,f),A4;L.data==="$?"||E1(),o=l1(s,o,c)}else L.data==="$?"?(o.flags|=192,o.child=s.child,o=null):(s=U.treeContext,sr=ma(L.nextSibling),Qr=o,vt=!0,$i=null,Na=!1,s!==null&&(Kn[Yn++]=is,Kn[Yn++]=os,Kn[Yn++]=Bi,is=s.id,os=s.overflow,Bi=o),o=o1(o,f.children),o.flags|=4096);return o}return g?(Gs(),g=f.fallback,L=o.mode,U=s.child,te=U.sibling,f=ss(U,{mode:"hidden",children:f.children}),f.subtreeFlags=U.subtreeFlags&65011712,te!==null?g=ss(te,g):(g=Pi(g,L,c,null),g.flags|=2),g.return=o,f.return=o,f.sibling=g,o.child=f,f=g,g=o.child,L=s.child.memoizedState,L===null?L=s1(c):(U=L.cachePool,U!==null?(te=Er._currentValue,U=U.parent!==te?{parent:te,pool:te}:U):U=vb(),L={baseLanes:L.baseLanes|c,cachePool:U}),g.memoizedState=L,g.childLanes=i1(s,M,c),o.memoizedState=a1,f):(Vs(o),c=s.child,s=c.sibling,c=ss(c,{mode:"visible",children:f.children}),c.return=o,c.sibling=null,s!==null&&(M=o.deletions,M===null?(o.deletions=[s],o.flags|=16):M.push(s)),o.child=c,o.memoizedState=null,c)}function o1(s,o){return o=z0({mode:"visible",children:o},s.mode),o.return=s,s.child=o}function z0(s,o){return s=Mn(22,s,null,o),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function l1(s,o,c){return Ko(o,s.child,null,c),s=o1(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function R4(s,o,c){s.lanes|=o;var f=s.alternate;f!==null&&(f.lanes|=o),Ef(s.return,o,c)}function u1(s,o,c,f,g){var v=s.memoizedState;v===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:g}:(v.isBackwards=o,v.rendering=null,v.renderingStartTime=0,v.last=f,v.tail=c,v.tailMode=g)}function F4(s,o,c){var f=o.pendingProps,g=f.revealOrder,v=f.tail;if(Ir(s,o,f.children,c),f=Cr.current,(f&2)!==0)f=f&1|2,o.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&R4(s,c,o);else if(s.tag===19)R4(s,c,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}f&=1}switch(be(Cr,f),g){case"forwards":for(c=o.child,g=null;c!==null;)s=c.alternate,s!==null&&N0(s)===null&&(g=c),c=c.sibling;c=g,c===null?(g=o.child,o.child=null):(g=c.sibling,c.sibling=null),u1(o,!1,g,c,v);break;case"backwards":for(c=null,g=o.child,o.child=null;g!==null;){if(s=g.alternate,s!==null&&N0(s)===null){o.child=g;break}s=g.sibling,g.sibling=c,c=g,g=s}u1(o,!0,c,null,v);break;case"together":u1(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function hs(s,o,c){if(s!==null&&(o.dependencies=s.dependencies),Qs|=o.lanes,(c&o.childLanes)===0)if(s!==null){if(tu(s,o,c,!1),(c&o.childLanes)===0)return null}else return null;if(s!==null&&o.child!==s.child)throw Error(n(153));if(o.child!==null){for(s=o.child,c=ss(s,s.pendingProps),o.child=c,c.return=o;s.sibling!==null;)s=s.sibling,c=c.sibling=ss(s,s.pendingProps),c.return=o;c.sibling=null}return o.child}function c1(s,o){return(s.lanes&o)!==0?!0:(s=s.dependencies,!!(s!==null&&f0(s)))}function hw(s,o,c){switch(o.tag){case 3:Ze(o,o.stateNode.containerInfo),Is(o,Er,s.memoizedState.cache),Jl();break;case 27:case 5:wt(o);break;case 4:Ze(o,o.stateNode.containerInfo);break;case 10:Is(o,o.type,o.memoizedProps.value);break;case 13:var f=o.memoizedState;if(f!==null)return f.dehydrated!==null?(Vs(o),o.flags|=128,null):(c&o.child.childLanes)!==0?O4(s,o,c):(Vs(o),s=hs(s,o,c),s!==null?s.sibling:null);Vs(o);break;case 19:var g=(s.flags&128)!==0;if(f=(c&o.childLanes)!==0,f||(tu(s,o,c,!1),f=(c&o.childLanes)!==0),g){if(f)return F4(s,o,c);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),be(Cr,Cr.current),f)break;return null;case 22:case 23:return o.lanes=0,N4(s,o,c);case 24:Is(o,Er,s.memoizedState.cache)}return hs(s,o,c)}function L4(s,o,c){if(s!==null)if(s.memoizedProps!==o.pendingProps)jr=!0;else{if(!c1(s,c)&&(o.flags&128)===0)return jr=!1,hw(s,o,c);jr=(s.flags&131072)!==0}else jr=!1,vt&&(o.flags&1048576)!==0&&fb(o,h0,o.index);switch(o.lanes=0,o.tag){case 16:e:{s=o.pendingProps;var f=o.elementType,g=f._init;if(f=g(f._payload),o.type=f,typeof f=="function")xf(f)?(s=Zi(f,s),o.tag=1,o=D4(null,o,f,s,c)):(o.tag=0,o=n1(null,o,f,s,c));else{if(f!=null){if(g=f.$$typeof,g===D){o.tag=11,o=E4(null,o,f,s,c);break e}else if(g===F){o.tag=14,o=C4(null,o,f,s,c);break e}}throw o=ie(f)||f,Error(n(306,o,""))}}return o;case 0:return n1(s,o,o.type,o.pendingProps,c);case 1:return f=o.type,g=Zi(f,o.pendingProps),D4(s,o,f,g,c);case 3:e:{if(Ze(o,o.stateNode.containerInfo),s===null)throw Error(n(387));f=o.pendingProps;var v=o.memoizedState;g=v.element,zf(s,o),lu(o,f,null,c);var M=o.memoizedState;if(f=M.cache,Is(o,Er,f),f!==v.cache&&Cf(o,[Er],c,!0),ou(),f=M.element,v.isDehydrated)if(v={element:f,isDehydrated:!1,cache:M.cache},o.updateQueue.baseState=v,o.memoizedState=v,o.flags&256){o=z4(s,o,f,c);break e}else if(f!==g){g=Gn(Error(n(424)),o),eu(g),o=z4(s,o,f,c);break e}else{switch(s=o.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(sr=ma(s.firstChild),Qr=o,vt=!0,$i=null,Na=!0,c=p4(o,null,f,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(Jl(),f===g){o=hs(s,o,c);break e}Ir(s,o,f,c)}o=o.child}return o;case 26:return D0(s,o),s===null?(c=$y(o.type,null,o.pendingProps,null))?o.memoizedState=c:vt||(c=o.type,s=o.pendingProps,f=Z0(ce.current).createElement(c),f[Sr]=o,f[Vr]=s,qr(f,c,s),xr(f),o.stateNode=f):o.memoizedState=$y(o.type,s.memoizedProps,o.pendingProps,s.memoizedState),null;case 27:return wt(o),s===null&&vt&&(f=o.stateNode=Py(o.type,o.pendingProps,ce.current),Qr=o,Na=!0,g=sr,ti(o.type)?(U1=g,sr=ma(f.firstChild)):sr=g),Ir(s,o,o.pendingProps.children,c),D0(s,o),s===null&&(o.flags|=4194304),o.child;case 5:return s===null&&vt&&((g=f=sr)&&(f=Iw(f,o.type,o.pendingProps,Na),f!==null?(o.stateNode=f,Qr=o,sr=ma(f.firstChild),Na=!1,g=!0):g=!1),g||qi(o)),wt(o),g=o.type,v=o.pendingProps,M=s!==null?s.memoizedProps:null,f=v.children,I1(g,v)?f=null:M!==null&&I1(g,M)&&(o.flags|=32),o.memoizedState!==null&&(g=Bf(s,o,aw,null,null,c),Mu._currentValue=g),D0(s,o),Ir(s,o,f,c),o.child;case 6:return s===null&&vt&&((s=c=sr)&&(c=$w(c,o.pendingProps,Na),c!==null?(o.stateNode=c,Qr=o,sr=null,s=!0):s=!1),s||qi(o)),null;case 13:return O4(s,o,c);case 4:return Ze(o,o.stateNode.containerInfo),f=o.pendingProps,s===null?o.child=Ko(o,null,f,c):Ir(s,o,f,c),o.child;case 11:return E4(s,o,o.type,o.pendingProps,c);case 7:return Ir(s,o,o.pendingProps,c),o.child;case 8:return Ir(s,o,o.pendingProps.children,c),o.child;case 12:return Ir(s,o,o.pendingProps.children,c),o.child;case 10:return f=o.pendingProps,Is(o,o.type,f.value),Ir(s,o,f.children,c),o.child;case 9:return g=o.type._context,f=o.pendingProps.children,Ui(o),g=Zr(g),f=f(g),o.flags|=1,Ir(s,o,f,c),o.child;case 14:return C4(s,o,o.type,o.pendingProps,c);case 15:return T4(s,o,o.type,o.pendingProps,c);case 19:return F4(s,o,c);case 31:return f=o.pendingProps,c=o.mode,f={mode:f.mode,children:f.children},s===null?(c=z0(f,c),c.ref=o.ref,o.child=c,c.return=o,o=c):(c=ss(s.child,f),c.ref=o.ref,o.child=c,c.return=o,o=c),o;case 22:return N4(s,o,c);case 24:return Ui(o),f=Zr(Er),s===null?(g=Mf(),g===null&&(g=Pt,v=Tf(),g.pooledCache=v,v.refCount++,v!==null&&(g.pooledCacheLanes|=c),g=v),o.memoizedState={parent:f,cache:g},Df(o),Is(o,Er,g)):((s.lanes&c)!==0&&(zf(s,o),lu(o,null,null,c),ou()),g=s.memoizedState,v=o.memoizedState,g.parent!==f?(g={parent:f,cache:f},o.memoizedState=g,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=g),Is(o,Er,f)):(f=v.cache,Is(o,Er,f),f!==g.cache&&Cf(o,[Er],c,!0))),Ir(s,o,o.pendingProps.children,c),o.child;case 29:throw o.pendingProps}throw Error(n(156,o.tag))}function fs(s){s.flags|=4}function P4(s,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Gy(o)){if(o=Xn.current,o!==null&&((mt&4194048)===mt?Ma!==null:(mt&62914560)!==mt&&(mt&536870912)===0||o!==Ma))throw su=jf,_b;s.flags|=8192}}function O0(s,o){o!==null&&(s.flags|=4),s.flags&16384&&(o=s.tag!==22?Oi():536870912,s.lanes|=o,Wo|=o)}function pu(s,o){if(!vt)switch(s.tailMode){case"hidden":o=s.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?s.tail=null:c.sibling=null;break;case"collapsed":c=s.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:f.sibling=null}}function Jt(s){var o=s.alternate!==null&&s.alternate.child===s.child,c=0,f=0;if(o)for(var g=s.child;g!==null;)c|=g.lanes|g.childLanes,f|=g.subtreeFlags&65011712,f|=g.flags&65011712,g.return=s,g=g.sibling;else for(g=s.child;g!==null;)c|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=s,g=g.sibling;return s.subtreeFlags|=f,s.childLanes=c,o}function fw(s,o,c){var f=o.pendingProps;switch(kf(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jt(o),null;case 1:return Jt(o),null;case 3:return c=o.stateNode,f=null,s!==null&&(f=s.memoizedState.cache),o.memoizedState.cache!==f&&(o.flags|=2048),us(Er),Et(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(s===null||s.child===null)&&(Wl(o)?fs(o):s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,gb())),Jt(o),null;case 26:return c=o.memoizedState,s===null?(fs(o),c!==null?(Jt(o),P4(o,c)):(Jt(o),o.flags&=-16777217)):c?c!==s.memoizedState?(fs(o),Jt(o),P4(o,c)):(Jt(o),o.flags&=-16777217):(s.memoizedProps!==f&&fs(o),Jt(o),o.flags&=-16777217),null;case 27:kt(o),c=ce.current;var g=o.type;if(s!==null&&o.stateNode!=null)s.memoizedProps!==f&&fs(o);else{if(!f){if(o.stateNode===null)throw Error(n(166));return Jt(o),null}s=Se.current,Wl(o)?mb(o):(s=Py(g,f,c),o.stateNode=s,fs(o))}return Jt(o),null;case 5:if(kt(o),c=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==f&&fs(o);else{if(!f){if(o.stateNode===null)throw Error(n(166));return Jt(o),null}if(s=Se.current,Wl(o))mb(o);else{switch(g=Z0(ce.current),s){case 1:s=g.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:s=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":s=g.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":s=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":s=g.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof f.is=="string"?g.createElement("select",{is:f.is}):g.createElement("select"),f.multiple?s.multiple=!0:f.size&&(s.size=f.size);break;default:s=typeof f.is=="string"?g.createElement(c,{is:f.is}):g.createElement(c)}}s[Sr]=o,s[Vr]=f;e:for(g=o.child;g!==null;){if(g.tag===5||g.tag===6)s.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===o)break e;for(;g.sibling===null;){if(g.return===null||g.return===o)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}o.stateNode=s;e:switch(qr(s,c,f),c){case"button":case"input":case"select":case"textarea":s=!!f.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&fs(o)}}return Jt(o),o.flags&=-16777217,null;case 6:if(s&&o.stateNode!=null)s.memoizedProps!==f&&fs(o);else{if(typeof f!="string"&&o.stateNode===null)throw Error(n(166));if(s=ce.current,Wl(o)){if(s=o.stateNode,c=o.memoizedProps,f=null,g=Qr,g!==null)switch(g.tag){case 27:case 5:f=g.memoizedProps}s[Sr]=o,s=!!(s.nodeValue===c||f!==null&&f.suppressHydrationWarning===!0||jy(s.nodeValue,c)),s||qi(o)}else s=Z0(s).createTextNode(f),s[Sr]=o,o.stateNode=s}return Jt(o),null;case 13:if(f=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(g=Wl(o),f!==null&&f.dehydrated!==null){if(s===null){if(!g)throw Error(n(318));if(g=o.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(n(317));g[Sr]=o}else Jl(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Jt(o),g=!1}else g=gb(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=g),g=!0;if(!g)return o.flags&256?(ds(o),o):(ds(o),null)}if(ds(o),(o.flags&128)!==0)return o.lanes=c,o;if(c=f!==null,s=s!==null&&s.memoizedState!==null,c){f=o.child,g=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(g=f.alternate.memoizedState.cachePool.pool);var v=null;f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(v=f.memoizedState.cachePool.pool),v!==g&&(f.flags|=2048)}return c!==s&&c&&(o.child.flags|=8192),O0(o,o.updateQueue),Jt(o),null;case 4:return Et(),s===null&&R1(o.stateNode.containerInfo),Jt(o),null;case 10:return us(o.type),Jt(o),null;case 19:if(we(Cr),g=o.memoizedState,g===null)return Jt(o),null;if(f=(o.flags&128)!==0,v=g.rendering,v===null)if(f)pu(g,!1);else{if(ir!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(v=N0(s),v!==null){for(o.flags|=128,pu(g,!1),s=v.updateQueue,o.updateQueue=s,O0(o,s),o.subtreeFlags=0,s=c,c=o.child;c!==null;)hb(c,s),c=c.sibling;return be(Cr,Cr.current&1|2),o.child}s=s.sibling}g.tail!==null&&qt()>L0&&(o.flags|=128,f=!0,pu(g,!1),o.lanes=4194304)}else{if(!f)if(s=N0(v),s!==null){if(o.flags|=128,f=!0,s=s.updateQueue,o.updateQueue=s,O0(o,s),pu(g,!0),g.tail===null&&g.tailMode==="hidden"&&!v.alternate&&!vt)return Jt(o),null}else 2*qt()-g.renderingStartTime>L0&&c!==536870912&&(o.flags|=128,f=!0,pu(g,!1),o.lanes=4194304);g.isBackwards?(v.sibling=o.child,o.child=v):(s=g.last,s!==null?s.sibling=v:o.child=v,g.last=v)}return g.tail!==null?(o=g.tail,g.rendering=o,g.tail=o.sibling,g.renderingStartTime=qt(),o.sibling=null,s=Cr.current,be(Cr,f?s&1|2:s&1),o):(Jt(o),null);case 22:case 23:return ds(o),Lf(),f=o.memoizedState!==null,s!==null?s.memoizedState!==null!==f&&(o.flags|=8192):f&&(o.flags|=8192),f?(c&536870912)!==0&&(o.flags&128)===0&&(Jt(o),o.subtreeFlags&6&&(o.flags|=8192)):Jt(o),c=o.updateQueue,c!==null&&O0(o,c.retryQueue),c=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),f=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==c&&(o.flags|=2048),s!==null&&we(Vi),null;case 24:return c=null,s!==null&&(c=s.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),us(Er),Jt(o),null;case 25:return null;case 30:return null}throw Error(n(156,o.tag))}function mw(s,o){switch(kf(o),o.tag){case 1:return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return us(Er),Et(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 26:case 27:case 5:return kt(o),null;case 13:if(ds(o),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(n(340));Jl()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return we(Cr),null;case 4:return Et(),null;case 10:return us(o.type),null;case 22:case 23:return ds(o),Lf(),s!==null&&we(Vi),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 24:return us(Er),null;case 25:return null;default:return null}}function B4(s,o){switch(kf(o),o.tag){case 3:us(Er),Et();break;case 26:case 27:case 5:kt(o);break;case 4:Et();break;case 13:ds(o);break;case 19:we(Cr);break;case 10:us(o.type);break;case 22:case 23:ds(o),Lf(),s!==null&&we(Vi);break;case 24:us(Er)}}function gu(s,o){try{var c=o.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var g=f.next;c=g;do{if((c.tag&s)===s){f=void 0;var v=c.create,M=c.inst;f=v(),M.destroy=f}c=c.next}while(c!==g)}}catch(L){Ot(o,o.return,L)}}function Zs(s,o,c){try{var f=o.updateQueue,g=f!==null?f.lastEffect:null;if(g!==null){var v=g.next;f=v;do{if((f.tag&s)===s){var M=f.inst,L=M.destroy;if(L!==void 0){M.destroy=void 0,g=o;var U=c,te=L;try{te()}catch(me){Ot(g,U,me)}}}f=f.next}while(f!==v)}}catch(me){Ot(o,o.return,me)}}function I4(s){var o=s.updateQueue;if(o!==null){var c=s.stateNode;try{Cb(o,c)}catch(f){Ot(s,s.return,f)}}}function $4(s,o,c){c.props=Zi(s.type,s.memoizedProps),c.state=s.memoizedState;try{c.componentWillUnmount()}catch(f){Ot(s,o,f)}}function bu(s,o){try{var c=s.ref;if(c!==null){switch(s.tag){case 26:case 27:case 5:var f=s.stateNode;break;case 30:f=s.stateNode;break;default:f=s.stateNode}typeof c=="function"?s.refCleanup=c(f):c.current=f}}catch(g){Ot(s,o,g)}}function ja(s,o){var c=s.ref,f=s.refCleanup;if(c!==null)if(typeof f=="function")try{f()}catch(g){Ot(s,o,g)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(g){Ot(s,o,g)}else c.current=null}function q4(s){var o=s.type,c=s.memoizedProps,f=s.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":c.autoFocus&&f.focus();break e;case"img":c.src?f.src=c.src:c.srcSet&&(f.srcset=c.srcSet)}}catch(g){Ot(s,s.return,g)}}function d1(s,o,c){try{var f=s.stateNode;Rw(f,s.type,c,o),f[Vr]=o}catch(g){Ot(s,s.return,g)}}function H4(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&ti(s.type)||s.tag===4}function h1(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||H4(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&ti(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function f1(s,o,c){var f=s.tag;if(f===5||f===6)s=s.stateNode,o?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(s,o):(o=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,o.appendChild(s),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=G0));else if(f!==4&&(f===27&&ti(s.type)&&(c=s.stateNode,o=null),s=s.child,s!==null))for(f1(s,o,c),s=s.sibling;s!==null;)f1(s,o,c),s=s.sibling}function R0(s,o,c){var f=s.tag;if(f===5||f===6)s=s.stateNode,o?c.insertBefore(s,o):c.appendChild(s);else if(f!==4&&(f===27&&ti(s.type)&&(c=s.stateNode),s=s.child,s!==null))for(R0(s,o,c),s=s.sibling;s!==null;)R0(s,o,c),s=s.sibling}function U4(s){var o=s.stateNode,c=s.memoizedProps;try{for(var f=s.type,g=o.attributes;g.length;)o.removeAttributeNode(g[0]);qr(o,f,c),o[Sr]=s,o[Vr]=c}catch(v){Ot(s,s.return,v)}}var ms=!1,mr=!1,m1=!1,V4=typeof WeakSet=="function"?WeakSet:Set,Dr=null;function pw(s,o){if(s=s.containerInfo,P1=J0,s=rb(s),hf(s)){if("selectionStart"in s)var c={start:s.selectionStart,end:s.selectionEnd};else e:{c=(c=s.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var g=f.anchorOffset,v=f.focusNode;f=f.focusOffset;try{c.nodeType,v.nodeType}catch{c=null;break e}var M=0,L=-1,U=-1,te=0,me=0,ve=s,se=null;t:for(;;){for(var oe;ve!==c||g!==0&&ve.nodeType!==3||(L=M+g),ve!==v||f!==0&&ve.nodeType!==3||(U=M+f),ve.nodeType===3&&(M+=ve.nodeValue.length),(oe=ve.firstChild)!==null;)se=ve,ve=oe;for(;;){if(ve===s)break t;if(se===c&&++te===g&&(L=M),se===v&&++me===f&&(U=M),(oe=ve.nextSibling)!==null)break;ve=se,se=ve.parentNode}ve=oe}c=L===-1||U===-1?null:{start:L,end:U}}else c=null}c=c||{start:0,end:0}}else c=null;for(B1={focusedElem:s,selectionRange:c},J0=!1,Dr=o;Dr!==null;)if(o=Dr,s=o.child,(o.subtreeFlags&1024)!==0&&s!==null)s.return=o,Dr=s;else for(;Dr!==null;){switch(o=Dr,v=o.alternate,s=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&v!==null){s=void 0,c=o,g=v.memoizedProps,v=v.memoizedState,f=c.stateNode;try{var Qe=Zi(c.type,g,c.elementType===c.type);s=f.getSnapshotBeforeUpdate(Qe,v),f.__reactInternalSnapshotBeforeUpdate=s}catch(Ye){Ot(c,c.return,Ye)}}break;case 3:if((s&1024)!==0){if(s=o.stateNode.containerInfo,c=s.nodeType,c===9)q1(s);else if(c===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":q1(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(n(163))}if(s=o.sibling,s!==null){s.return=o.return,Dr=s;break}Dr=o.return}}function G4(s,o,c){var f=c.flags;switch(c.tag){case 0:case 11:case 15:Ks(s,c),f&4&&gu(5,c);break;case 1:if(Ks(s,c),f&4)if(s=c.stateNode,o===null)try{s.componentDidMount()}catch(M){Ot(c,c.return,M)}else{var g=Zi(c.type,o.memoizedProps);o=o.memoizedState;try{s.componentDidUpdate(g,o,s.__reactInternalSnapshotBeforeUpdate)}catch(M){Ot(c,c.return,M)}}f&64&&I4(c),f&512&&bu(c,c.return);break;case 3:if(Ks(s,c),f&64&&(s=c.updateQueue,s!==null)){if(o=null,c.child!==null)switch(c.child.tag){case 27:case 5:o=c.child.stateNode;break;case 1:o=c.child.stateNode}try{Cb(s,o)}catch(M){Ot(c,c.return,M)}}break;case 27:o===null&&f&4&&U4(c);case 26:case 5:Ks(s,c),o===null&&f&4&&q4(c),f&512&&bu(c,c.return);break;case 12:Ks(s,c);break;case 13:Ks(s,c),f&4&&Y4(s,c),f&64&&(s=c.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(c=Sw.bind(null,c),qw(s,c))));break;case 22:if(f=c.memoizedState!==null||ms,!f){o=o!==null&&o.memoizedState!==null||mr,g=ms;var v=mr;ms=f,(mr=o)&&!v?Ys(s,c,(c.subtreeFlags&8772)!==0):Ks(s,c),ms=g,mr=v}break;case 30:break;default:Ks(s,c)}}function Z4(s){var o=s.alternate;o!==null&&(s.alternate=null,Z4(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&Cn(o)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Zt=null,fn=!1;function ps(s,o,c){for(c=c.child;c!==null;)K4(s,o,c),c=c.sibling}function K4(s,o,c){if(Ke&&typeof Ke.onCommitFiberUnmount=="function")try{Ke.onCommitFiberUnmount(De,c)}catch{}switch(c.tag){case 26:mr||ja(c,o),ps(s,o,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:mr||ja(c,o);var f=Zt,g=fn;ti(c.type)&&(Zt=c.stateNode,fn=!1),ps(s,o,c),Eu(c.stateNode),Zt=f,fn=g;break;case 5:mr||ja(c,o);case 6:if(f=Zt,g=fn,Zt=null,ps(s,o,c),Zt=f,fn=g,Zt!==null)if(fn)try{(Zt.nodeType===9?Zt.body:Zt.nodeName==="HTML"?Zt.ownerDocument.body:Zt).removeChild(c.stateNode)}catch(v){Ot(c,o,v)}else try{Zt.removeChild(c.stateNode)}catch(v){Ot(c,o,v)}break;case 18:Zt!==null&&(fn?(s=Zt,Fy(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,c.stateNode),Ou(s)):Fy(Zt,c.stateNode));break;case 4:f=Zt,g=fn,Zt=c.stateNode.containerInfo,fn=!0,ps(s,o,c),Zt=f,fn=g;break;case 0:case 11:case 14:case 15:mr||Zs(2,c,o),mr||Zs(4,c,o),ps(s,o,c);break;case 1:mr||(ja(c,o),f=c.stateNode,typeof f.componentWillUnmount=="function"&&$4(c,o,f)),ps(s,o,c);break;case 21:ps(s,o,c);break;case 22:mr=(f=mr)||c.memoizedState!==null,ps(s,o,c),mr=f;break;default:ps(s,o,c)}}function Y4(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Ou(s)}catch(c){Ot(o,o.return,c)}}function gw(s){switch(s.tag){case 13:case 19:var o=s.stateNode;return o===null&&(o=s.stateNode=new V4),o;case 22:return s=s.stateNode,o=s._retryCache,o===null&&(o=s._retryCache=new V4),o;default:throw Error(n(435,s.tag))}}function p1(s,o){var c=gw(s);o.forEach(function(f){var g=Aw.bind(null,s,f);c.has(f)||(c.add(f),f.then(g,g))})}function jn(s,o){var c=o.deletions;if(c!==null)for(var f=0;f<c.length;f++){var g=c[f],v=s,M=o,L=M;e:for(;L!==null;){switch(L.tag){case 27:if(ti(L.type)){Zt=L.stateNode,fn=!1;break e}break;case 5:Zt=L.stateNode,fn=!1;break e;case 3:case 4:Zt=L.stateNode.containerInfo,fn=!0;break e}L=L.return}if(Zt===null)throw Error(n(160));K4(v,M,g),Zt=null,fn=!1,v=g.alternate,v!==null&&(v.return=null),g.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)X4(o,s),o=o.sibling}var fa=null;function X4(s,o){var c=s.alternate,f=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:jn(o,s),Dn(s),f&4&&(Zs(3,s,s.return),gu(3,s),Zs(5,s,s.return));break;case 1:jn(o,s),Dn(s),f&512&&(mr||c===null||ja(c,c.return)),f&64&&ms&&(s=s.updateQueue,s!==null&&(f=s.callbacks,f!==null&&(c=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=c===null?f:c.concat(f))));break;case 26:var g=fa;if(jn(o,s),Dn(s),f&512&&(mr||c===null||ja(c,c.return)),f&4){var v=c!==null?c.memoizedState:null;if(f=s.memoizedState,c===null)if(f===null)if(s.stateNode===null){e:{f=s.type,c=s.memoizedProps,g=g.ownerDocument||g;t:switch(f){case"title":v=g.getElementsByTagName("title")[0],(!v||v[Ls]||v[Sr]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=g.createElement(f),g.head.insertBefore(v,g.querySelector("head > title"))),qr(v,f,c),v[Sr]=s,xr(v),f=v;break e;case"link":var M=Uy("link","href",g).get(f+(c.href||""));if(M){for(var L=0;L<M.length;L++)if(v=M[L],v.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&v.getAttribute("rel")===(c.rel==null?null:c.rel)&&v.getAttribute("title")===(c.title==null?null:c.title)&&v.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){M.splice(L,1);break t}}v=g.createElement(f),qr(v,f,c),g.head.appendChild(v);break;case"meta":if(M=Uy("meta","content",g).get(f+(c.content||""))){for(L=0;L<M.length;L++)if(v=M[L],v.getAttribute("content")===(c.content==null?null:""+c.content)&&v.getAttribute("name")===(c.name==null?null:c.name)&&v.getAttribute("property")===(c.property==null?null:c.property)&&v.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&v.getAttribute("charset")===(c.charSet==null?null:c.charSet)){M.splice(L,1);break t}}v=g.createElement(f),qr(v,f,c),g.head.appendChild(v);break;default:throw Error(n(468,f))}v[Sr]=s,xr(v),f=v}s.stateNode=f}else Vy(g,s.type,s.stateNode);else s.stateNode=Hy(g,f,s.memoizedProps);else v!==f?(v===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):v.count--,f===null?Vy(g,s.type,s.stateNode):Hy(g,f,s.memoizedProps)):f===null&&s.stateNode!==null&&d1(s,s.memoizedProps,c.memoizedProps)}break;case 27:jn(o,s),Dn(s),f&512&&(mr||c===null||ja(c,c.return)),c!==null&&f&4&&d1(s,s.memoizedProps,c.memoizedProps);break;case 5:if(jn(o,s),Dn(s),f&512&&(mr||c===null||ja(c,c.return)),s.flags&32){g=s.stateNode;try{Mo(g,"")}catch(oe){Ot(s,s.return,oe)}}f&4&&s.stateNode!=null&&(g=s.memoizedProps,d1(s,g,c!==null?c.memoizedProps:g)),f&1024&&(m1=!0);break;case 6:if(jn(o,s),Dn(s),f&4){if(s.stateNode===null)throw Error(n(162));f=s.memoizedProps,c=s.stateNode;try{c.nodeValue=f}catch(oe){Ot(s,s.return,oe)}}break;case 3:if(X0=null,g=fa,fa=K0(o.containerInfo),jn(o,s),fa=g,Dn(s),f&4&&c!==null&&c.memoizedState.isDehydrated)try{Ou(o.containerInfo)}catch(oe){Ot(s,s.return,oe)}m1&&(m1=!1,Q4(s));break;case 4:f=fa,fa=K0(s.stateNode.containerInfo),jn(o,s),Dn(s),fa=f;break;case 12:jn(o,s),Dn(s);break;case 13:jn(o,s),Dn(s),s.child.flags&8192&&s.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(_1=qt()),f&4&&(f=s.updateQueue,f!==null&&(s.updateQueue=null,p1(s,f)));break;case 22:g=s.memoizedState!==null;var U=c!==null&&c.memoizedState!==null,te=ms,me=mr;if(ms=te||g,mr=me||U,jn(o,s),mr=me,ms=te,Dn(s),f&8192)e:for(o=s.stateNode,o._visibility=g?o._visibility&-2:o._visibility|1,g&&(c===null||U||ms||mr||Ki(s)),c=null,o=s;;){if(o.tag===5||o.tag===26){if(c===null){U=c=o;try{if(v=U.stateNode,g)M=v.style,typeof M.setProperty=="function"?M.setProperty("display","none","important"):M.display="none";else{L=U.stateNode;var ve=U.memoizedProps.style,se=ve!=null&&ve.hasOwnProperty("display")?ve.display:null;L.style.display=se==null||typeof se=="boolean"?"":(""+se).trim()}}catch(oe){Ot(U,U.return,oe)}}}else if(o.tag===6){if(c===null){U=o;try{U.stateNode.nodeValue=g?"":U.memoizedProps}catch(oe){Ot(U,U.return,oe)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===s)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;c===o&&(c=null),o=o.return}c===o&&(c=null),o.sibling.return=o.return,o=o.sibling}f&4&&(f=s.updateQueue,f!==null&&(c=f.retryQueue,c!==null&&(f.retryQueue=null,p1(s,c))));break;case 19:jn(o,s),Dn(s),f&4&&(f=s.updateQueue,f!==null&&(s.updateQueue=null,p1(s,f)));break;case 30:break;case 21:break;default:jn(o,s),Dn(s)}}function Dn(s){var o=s.flags;if(o&2){try{for(var c,f=s.return;f!==null;){if(H4(f)){c=f;break}f=f.return}if(c==null)throw Error(n(160));switch(c.tag){case 27:var g=c.stateNode,v=h1(s);R0(s,v,g);break;case 5:var M=c.stateNode;c.flags&32&&(Mo(M,""),c.flags&=-33);var L=h1(s);R0(s,L,M);break;case 3:case 4:var U=c.stateNode.containerInfo,te=h1(s);f1(s,te,U);break;default:throw Error(n(161))}}catch(me){Ot(s,s.return,me)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function Q4(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var o=s;Q4(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),s=s.sibling}}function Ks(s,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)G4(s,o.alternate,o),o=o.sibling}function Ki(s){for(s=s.child;s!==null;){var o=s;switch(o.tag){case 0:case 11:case 14:case 15:Zs(4,o,o.return),Ki(o);break;case 1:ja(o,o.return);var c=o.stateNode;typeof c.componentWillUnmount=="function"&&$4(o,o.return,c),Ki(o);break;case 27:Eu(o.stateNode);case 26:case 5:ja(o,o.return),Ki(o);break;case 22:o.memoizedState===null&&Ki(o);break;case 30:Ki(o);break;default:Ki(o)}s=s.sibling}}function Ys(s,o,c){for(c=c&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var f=o.alternate,g=s,v=o,M=v.flags;switch(v.tag){case 0:case 11:case 15:Ys(g,v,c),gu(4,v);break;case 1:if(Ys(g,v,c),f=v,g=f.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(te){Ot(f,f.return,te)}if(f=v,g=f.updateQueue,g!==null){var L=f.stateNode;try{var U=g.shared.hiddenCallbacks;if(U!==null)for(g.shared.hiddenCallbacks=null,g=0;g<U.length;g++)Eb(U[g],L)}catch(te){Ot(f,f.return,te)}}c&&M&64&&I4(v),bu(v,v.return);break;case 27:U4(v);case 26:case 5:Ys(g,v,c),c&&f===null&&M&4&&q4(v),bu(v,v.return);break;case 12:Ys(g,v,c);break;case 13:Ys(g,v,c),c&&M&4&&Y4(g,v);break;case 22:v.memoizedState===null&&Ys(g,v,c),bu(v,v.return);break;case 30:break;default:Ys(g,v,c)}o=o.sibling}}function g1(s,o){var c=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),s=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(s=o.memoizedState.cachePool.pool),s!==c&&(s!=null&&s.refCount++,c!=null&&ru(c))}function b1(s,o){s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&ru(s))}function Da(s,o,c,f){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)W4(s,o,c,f),o=o.sibling}function W4(s,o,c,f){var g=o.flags;switch(o.tag){case 0:case 11:case 15:Da(s,o,c,f),g&2048&&gu(9,o);break;case 1:Da(s,o,c,f);break;case 3:Da(s,o,c,f),g&2048&&(s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&ru(s)));break;case 12:if(g&2048){Da(s,o,c,f),s=o.stateNode;try{var v=o.memoizedProps,M=v.id,L=v.onPostCommit;typeof L=="function"&&L(M,o.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(U){Ot(o,o.return,U)}}else Da(s,o,c,f);break;case 13:Da(s,o,c,f);break;case 23:break;case 22:v=o.stateNode,M=o.alternate,o.memoizedState!==null?v._visibility&2?Da(s,o,c,f):yu(s,o):v._visibility&2?Da(s,o,c,f):(v._visibility|=2,Yo(s,o,c,f,(o.subtreeFlags&10256)!==0)),g&2048&&g1(M,o);break;case 24:Da(s,o,c,f),g&2048&&b1(o.alternate,o);break;default:Da(s,o,c,f)}}function Yo(s,o,c,f,g){for(g=g&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var v=s,M=o,L=c,U=f,te=M.flags;switch(M.tag){case 0:case 11:case 15:Yo(v,M,L,U,g),gu(8,M);break;case 23:break;case 22:var me=M.stateNode;M.memoizedState!==null?me._visibility&2?Yo(v,M,L,U,g):yu(v,M):(me._visibility|=2,Yo(v,M,L,U,g)),g&&te&2048&&g1(M.alternate,M);break;case 24:Yo(v,M,L,U,g),g&&te&2048&&b1(M.alternate,M);break;default:Yo(v,M,L,U,g)}o=o.sibling}}function yu(s,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var c=s,f=o,g=f.flags;switch(f.tag){case 22:yu(c,f),g&2048&&g1(f.alternate,f);break;case 24:yu(c,f),g&2048&&b1(f.alternate,f);break;default:yu(c,f)}o=o.sibling}}var xu=8192;function Xo(s){if(s.subtreeFlags&xu)for(s=s.child;s!==null;)J4(s),s=s.sibling}function J4(s){switch(s.tag){case 26:Xo(s),s.flags&xu&&s.memoizedState!==null&&tk(fa,s.memoizedState,s.memoizedProps);break;case 5:Xo(s);break;case 3:case 4:var o=fa;fa=K0(s.stateNode.containerInfo),Xo(s),fa=o;break;case 22:s.memoizedState===null&&(o=s.alternate,o!==null&&o.memoizedState!==null?(o=xu,xu=16777216,Xo(s),xu=o):Xo(s));break;default:Xo(s)}}function ey(s){var o=s.alternate;if(o!==null&&(s=o.child,s!==null)){o.child=null;do o=s.sibling,s.sibling=null,s=o;while(s!==null)}}function vu(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var f=o[c];Dr=f,ry(f,s)}ey(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)ty(s),s=s.sibling}function ty(s){switch(s.tag){case 0:case 11:case 15:vu(s),s.flags&2048&&Zs(9,s,s.return);break;case 3:vu(s);break;case 12:vu(s);break;case 22:var o=s.stateNode;s.memoizedState!==null&&o._visibility&2&&(s.return===null||s.return.tag!==13)?(o._visibility&=-3,F0(s)):vu(s);break;default:vu(s)}}function F0(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var f=o[c];Dr=f,ry(f,s)}ey(s)}for(s=s.child;s!==null;){switch(o=s,o.tag){case 0:case 11:case 15:Zs(8,o,o.return),F0(o);break;case 22:c=o.stateNode,c._visibility&2&&(c._visibility&=-3,F0(o));break;default:F0(o)}s=s.sibling}}function ry(s,o){for(;Dr!==null;){var c=Dr;switch(c.tag){case 0:case 11:case 15:Zs(8,c,o);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var f=c.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:ru(c.memoizedState.cache)}if(f=c.child,f!==null)f.return=c,Dr=f;else e:for(c=s;Dr!==null;){f=Dr;var g=f.sibling,v=f.return;if(Z4(f),f===c){Dr=null;break e}if(g!==null){g.return=v,Dr=g;break e}Dr=v}}}var bw={getCacheForType:function(s){var o=Zr(Er),c=o.data.get(s);return c===void 0&&(c=s(),o.data.set(s,c)),c}},yw=typeof WeakMap=="function"?WeakMap:Map,Ct=0,Pt=null,ut=null,mt=0,Tt=0,zn=null,Xs=!1,Qo=!1,y1=!1,gs=0,ir=0,Qs=0,Yi=0,x1=0,Qn=0,Wo=0,_u=null,mn=null,v1=!1,_1=0,L0=1/0,P0=null,Ws=null,$r=0,Js=null,Jo=null,el=0,w1=0,k1=null,ny=null,wu=0,S1=null;function On(){if((Ct&2)!==0&&mt!==0)return mt&-mt;if(K.T!==null){var s=$o;return s!==0?s:j1()}return Il()}function ay(){Qn===0&&(Qn=(mt&536870912)===0||vt?zi():536870912);var s=Xn.current;return s!==null&&(s.flags|=32),Qn}function Rn(s,o,c){(s===Pt&&(Tt===2||Tt===9)||s.cancelPendingCommit!==null)&&(tl(s,0),ei(s,mt,Qn,!1)),ca(s,c),((Ct&2)===0||s!==Pt)&&(s===Pt&&((Ct&2)===0&&(Yi|=c),ir===4&&ei(s,mt,Qn,!1)),za(s))}function sy(s,o,c){if((Ct&6)!==0)throw Error(n(327));var f=!c&&(o&124)===0&&(o&s.expiredLanes)===0||ua(s,o),g=f?_w(s,o):C1(s,o,!0),v=f;do{if(g===0){Qo&&!f&&ei(s,o,0,!1);break}else{if(c=s.current.alternate,v&&!xw(c)){g=C1(s,o,!1),v=!1;continue}if(g===2){if(v=o,s.errorRecoveryDisabledLanes&v)var M=0;else M=s.pendingLanes&-536870913,M=M!==0?M:M&536870912?536870912:0;if(M!==0){o=M;e:{var L=s;g=_u;var U=L.current.memoizedState.isDehydrated;if(U&&(tl(L,M).flags|=256),M=C1(L,M,!1),M!==2){if(y1&&!U){L.errorRecoveryDisabledLanes|=v,Yi|=v,g=4;break e}v=mn,mn=g,v!==null&&(mn===null?mn=v:mn.push.apply(mn,v))}g=M}if(v=!1,g!==2)continue}}if(g===1){tl(s,0),ei(s,o,0,!0);break}e:{switch(f=s,v=g,v){case 0:case 1:throw Error(n(345));case 4:if((o&4194048)!==o)break;case 6:ei(f,o,Qn,!Xs);break e;case 2:mn=null;break;case 3:case 5:break;default:throw Error(n(329))}if((o&62914560)===o&&(g=_1+300-qt(),10<g)){if(ei(f,o,Qn,!Xs),la(f,0,!0)!==0)break e;f.timeoutHandle=Oy(iy.bind(null,f,c,mn,P0,v1,o,Qn,Yi,Wo,Xs,v,2,-0,0),g);break e}iy(f,c,mn,P0,v1,o,Qn,Yi,Wo,Xs,v,0,-0,0)}}break}while(!0);za(s)}function iy(s,o,c,f,g,v,M,L,U,te,me,ve,se,oe){if(s.timeoutHandle=-1,ve=o.subtreeFlags,(ve&8192||(ve&16785408)===16785408)&&(Nu={stylesheets:null,count:0,unsuspend:ek},J4(o),ve=rk(),ve!==null)){s.cancelPendingCommit=ve(fy.bind(null,s,o,v,c,f,g,M,L,U,me,1,se,oe)),ei(s,v,M,!te);return}fy(s,o,v,c,f,g,M,L,U)}function xw(s){for(var o=s;;){var c=o.tag;if((c===0||c===11||c===15)&&o.flags&16384&&(c=o.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var f=0;f<c.length;f++){var g=c[f],v=g.getSnapshot;g=g.value;try{if(!Nn(v(),g))return!1}catch{return!1}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function ei(s,o,c,f){o&=~x1,o&=~Yi,s.suspendedLanes|=o,s.pingedLanes&=~o,f&&(s.warmLanes|=o),f=s.expirationTimes;for(var g=o;0<g;){var v=31-it(g),M=1<<v;f[v]=-1,g&=~M}c!==0&&Yc(s,c,o)}function B0(){return(Ct&6)===0?(ku(0),!1):!0}function A1(){if(ut!==null){if(Tt===0)var s=ut.return;else s=ut,ls=Hi=null,qf(s),Zo=null,fu=0,s=ut;for(;s!==null;)B4(s.alternate,s),s=s.return;ut=null}}function tl(s,o){var c=s.timeoutHandle;c!==-1&&(s.timeoutHandle=-1,Lw(c)),c=s.cancelPendingCommit,c!==null&&(s.cancelPendingCommit=null,c()),A1(),Pt=s,ut=c=ss(s.current,null),mt=o,Tt=0,zn=null,Xs=!1,Qo=ua(s,o),y1=!1,Wo=Qn=x1=Yi=Qs=ir=0,mn=_u=null,v1=!1,(o&8)!==0&&(o|=o&32);var f=s.entangledLanes;if(f!==0)for(s=s.entanglements,f&=o;0<f;){var g=31-it(f),v=1<<g;o|=s[g],f&=~v}return gs=o,o0(),c}function oy(s,o){ot=null,K.H=E0,o===au||o===g0?(o=Sb(),Tt=3):o===_b?(o=Sb(),Tt=4):Tt=o===A4?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,zn=o,ut===null&&(ir=1,j0(s,Gn(o,s.current)))}function ly(){var s=K.H;return K.H=E0,s===null?E0:s}function uy(){var s=K.A;return K.A=bw,s}function E1(){ir=4,Xs||(mt&4194048)!==mt&&Xn.current!==null||(Qo=!0),(Qs&134217727)===0&&(Yi&134217727)===0||Pt===null||ei(Pt,mt,Qn,!1)}function C1(s,o,c){var f=Ct;Ct|=2;var g=ly(),v=uy();(Pt!==s||mt!==o)&&(P0=null,tl(s,o)),o=!1;var M=ir;e:do try{if(Tt!==0&&ut!==null){var L=ut,U=zn;switch(Tt){case 8:A1(),M=6;break e;case 3:case 2:case 9:case 6:Xn.current===null&&(o=!0);var te=Tt;if(Tt=0,zn=null,rl(s,L,U,te),c&&Qo){M=0;break e}break;default:te=Tt,Tt=0,zn=null,rl(s,L,U,te)}}vw(),M=ir;break}catch(me){oy(s,me)}while(!0);return o&&s.shellSuspendCounter++,ls=Hi=null,Ct=f,K.H=g,K.A=v,ut===null&&(Pt=null,mt=0,o0()),M}function vw(){for(;ut!==null;)cy(ut)}function _w(s,o){var c=Ct;Ct|=2;var f=ly(),g=uy();Pt!==s||mt!==o?(P0=null,L0=qt()+500,tl(s,o)):Qo=ua(s,o);e:do try{if(Tt!==0&&ut!==null){o=ut;var v=zn;t:switch(Tt){case 1:Tt=0,zn=null,rl(s,o,v,1);break;case 2:case 9:if(wb(v)){Tt=0,zn=null,dy(o);break}o=function(){Tt!==2&&Tt!==9||Pt!==s||(Tt=7),za(s)},v.then(o,o);break e;case 3:Tt=7;break e;case 4:Tt=5;break e;case 7:wb(v)?(Tt=0,zn=null,dy(o)):(Tt=0,zn=null,rl(s,o,v,7));break;case 5:var M=null;switch(ut.tag){case 26:M=ut.memoizedState;case 5:case 27:var L=ut;if(!M||Gy(M)){Tt=0,zn=null;var U=L.sibling;if(U!==null)ut=U;else{var te=L.return;te!==null?(ut=te,I0(te)):ut=null}break t}}Tt=0,zn=null,rl(s,o,v,5);break;case 6:Tt=0,zn=null,rl(s,o,v,6);break;case 8:A1(),ir=6;break e;default:throw Error(n(462))}}ww();break}catch(me){oy(s,me)}while(!0);return ls=Hi=null,K.H=f,K.A=g,Ct=c,ut!==null?0:(Pt=null,mt=0,o0(),ir)}function ww(){for(;ut!==null&&!Sn();)cy(ut)}function cy(s){var o=L4(s.alternate,s,gs);s.memoizedProps=s.pendingProps,o===null?I0(s):ut=o}function dy(s){var o=s,c=o.alternate;switch(o.tag){case 15:case 0:o=j4(c,o,o.pendingProps,o.type,void 0,mt);break;case 11:o=j4(c,o,o.pendingProps,o.type.render,o.ref,mt);break;case 5:qf(o);default:B4(c,o),o=ut=hb(o,gs),o=L4(c,o,gs)}s.memoizedProps=s.pendingProps,o===null?I0(s):ut=o}function rl(s,o,c,f){ls=Hi=null,qf(o),Zo=null,fu=0;var g=o.return;try{if(dw(s,g,o,c,mt)){ir=1,j0(s,Gn(c,s.current)),ut=null;return}}catch(v){if(g!==null)throw ut=g,v;ir=1,j0(s,Gn(c,s.current)),ut=null;return}o.flags&32768?(vt||f===1?s=!0:Qo||(mt&536870912)!==0?s=!1:(Xs=s=!0,(f===2||f===9||f===3||f===6)&&(f=Xn.current,f!==null&&f.tag===13&&(f.flags|=16384))),hy(o,s)):I0(o)}function I0(s){var o=s;do{if((o.flags&32768)!==0){hy(o,Xs);return}s=o.return;var c=fw(o.alternate,o,gs);if(c!==null){ut=c;return}if(o=o.sibling,o!==null){ut=o;return}ut=o=s}while(o!==null);ir===0&&(ir=5)}function hy(s,o){do{var c=mw(s.alternate,s);if(c!==null){c.flags&=32767,ut=c;return}if(c=s.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!o&&(s=s.sibling,s!==null)){ut=s;return}ut=s=c}while(s!==null);ir=6,ut=null}function fy(s,o,c,f,g,v,M,L,U){s.cancelPendingCommit=null;do $0();while($r!==0);if((Ct&6)!==0)throw Error(n(327));if(o!==null){if(o===s.current)throw Error(n(177));if(v=o.lanes|o.childLanes,v|=bf,Zh(s,c,v,M,L,U),s===Pt&&(ut=Pt=null,mt=0),Jo=o,Js=s,el=c,w1=v,k1=g,ny=f,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,Ew(re,function(){return yy(),null})):(s.callbackNode=null,s.callbackPriority=0),f=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||f){f=K.T,K.T=null,g=ue.p,ue.p=2,M=Ct,Ct|=4;try{pw(s,o,c)}finally{Ct=M,ue.p=g,K.T=f}}$r=1,my(),py(),gy()}}function my(){if($r===1){$r=0;var s=Js,o=Jo,c=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||c){c=K.T,K.T=null;var f=ue.p;ue.p=2;var g=Ct;Ct|=4;try{X4(o,s);var v=B1,M=rb(s.containerInfo),L=v.focusedElem,U=v.selectionRange;if(M!==L&&L&&L.ownerDocument&&tb(L.ownerDocument.documentElement,L)){if(U!==null&&hf(L)){var te=U.start,me=U.end;if(me===void 0&&(me=te),"selectionStart"in L)L.selectionStart=te,L.selectionEnd=Math.min(me,L.value.length);else{var ve=L.ownerDocument||document,se=ve&&ve.defaultView||window;if(se.getSelection){var oe=se.getSelection(),Qe=L.textContent.length,Ye=Math.min(U.start,Qe),zt=U.end===void 0?Ye:Math.min(U.end,Qe);!oe.extend&&Ye>zt&&(M=zt,zt=Ye,Ye=M);var J=eb(L,Ye),Y=eb(L,zt);if(J&&Y&&(oe.rangeCount!==1||oe.anchorNode!==J.node||oe.anchorOffset!==J.offset||oe.focusNode!==Y.node||oe.focusOffset!==Y.offset)){var ee=ve.createRange();ee.setStart(J.node,J.offset),oe.removeAllRanges(),Ye>zt?(oe.addRange(ee),oe.extend(Y.node,Y.offset)):(ee.setEnd(Y.node,Y.offset),oe.addRange(ee))}}}}for(ve=[],oe=L;oe=oe.parentNode;)oe.nodeType===1&&ve.push({element:oe,left:oe.scrollLeft,top:oe.scrollTop});for(typeof L.focus=="function"&&L.focus(),L=0;L<ve.length;L++){var ye=ve[L];ye.element.scrollLeft=ye.left,ye.element.scrollTop=ye.top}}J0=!!P1,B1=P1=null}finally{Ct=g,ue.p=f,K.T=c}}s.current=o,$r=2}}function py(){if($r===2){$r=0;var s=Js,o=Jo,c=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||c){c=K.T,K.T=null;var f=ue.p;ue.p=2;var g=Ct;Ct|=4;try{G4(s,o.alternate,o)}finally{Ct=g,ue.p=f,K.T=c}}$r=3}}function gy(){if($r===4||$r===3){$r=0,Hn();var s=Js,o=Jo,c=el,f=ny;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?$r=5:($r=0,Jo=Js=null,by(s,s.pendingLanes));var g=s.pendingLanes;if(g===0&&(Ws=null),Bl(c),o=o.stateNode,Ke&&typeof Ke.onCommitFiberRoot=="function")try{Ke.onCommitFiberRoot(De,o,void 0,(o.current.flags&128)===128)}catch{}if(f!==null){o=K.T,g=ue.p,ue.p=2,K.T=null;try{for(var v=s.onRecoverableError,M=0;M<f.length;M++){var L=f[M];v(L.value,{componentStack:L.stack})}}finally{K.T=o,ue.p=g}}(el&3)!==0&&$0(),za(s),g=s.pendingLanes,(c&4194090)!==0&&(g&42)!==0?s===S1?wu++:(wu=0,S1=s):wu=0,ku(0)}}function by(s,o){(s.pooledCacheLanes&=o)===0&&(o=s.pooledCache,o!=null&&(s.pooledCache=null,ru(o)))}function $0(s){return my(),py(),gy(),yy()}function yy(){if($r!==5)return!1;var s=Js,o=w1;w1=0;var c=Bl(el),f=K.T,g=ue.p;try{ue.p=32>c?32:c,K.T=null,c=k1,k1=null;var v=Js,M=el;if($r=0,Jo=Js=null,el=0,(Ct&6)!==0)throw Error(n(331));var L=Ct;if(Ct|=4,ty(v.current),W4(v,v.current,M,c),Ct=L,ku(0,!1),Ke&&typeof Ke.onPostCommitFiberRoot=="function")try{Ke.onPostCommitFiberRoot(De,v)}catch{}return!0}finally{ue.p=g,K.T=f,by(s,o)}}function xy(s,o,c){o=Gn(c,o),o=r1(s.stateNode,o,2),s=Hs(s,o,2),s!==null&&(ca(s,2),za(s))}function Ot(s,o,c){if(s.tag===3)xy(s,s,c);else for(;o!==null;){if(o.tag===3){xy(o,s,c);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Ws===null||!Ws.has(f))){s=Gn(c,s),c=k4(2),f=Hs(o,c,2),f!==null&&(S4(c,f,o,s),ca(f,2),za(f));break}}o=o.return}}function T1(s,o,c){var f=s.pingCache;if(f===null){f=s.pingCache=new yw;var g=new Set;f.set(o,g)}else g=f.get(o),g===void 0&&(g=new Set,f.set(o,g));g.has(c)||(y1=!0,g.add(c),s=kw.bind(null,s,o,c),o.then(s,s))}function kw(s,o,c){var f=s.pingCache;f!==null&&f.delete(o),s.pingedLanes|=s.suspendedLanes&c,s.warmLanes&=~c,Pt===s&&(mt&c)===c&&(ir===4||ir===3&&(mt&62914560)===mt&&300>qt()-_1?(Ct&2)===0&&tl(s,0):x1|=c,Wo===mt&&(Wo=0)),za(s)}function vy(s,o){o===0&&(o=Oi()),s=Lo(s,o),s!==null&&(ca(s,o),za(s))}function Sw(s){var o=s.memoizedState,c=0;o!==null&&(c=o.retryLane),vy(s,c)}function Aw(s,o){var c=0;switch(s.tag){case 13:var f=s.stateNode,g=s.memoizedState;g!==null&&(c=g.retryLane);break;case 19:f=s.stateNode;break;case 22:f=s.stateNode._retryCache;break;default:throw Error(n(314))}f!==null&&f.delete(o),vy(s,c)}function Ew(s,o){return ur(s,o)}var q0=null,nl=null,N1=!1,H0=!1,M1=!1,Xi=0;function za(s){s!==nl&&s.next===null&&(nl===null?q0=nl=s:nl=nl.next=s),H0=!0,N1||(N1=!0,Tw())}function ku(s,o){if(!M1&&H0){M1=!0;do for(var c=!1,f=q0;f!==null;){if(s!==0){var g=f.pendingLanes;if(g===0)var v=0;else{var M=f.suspendedLanes,L=f.pingedLanes;v=(1<<31-it(42|s)+1)-1,v&=g&~(M&~L),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(c=!0,Sy(f,v))}else v=mt,v=la(f,f===Pt?v:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(v&3)===0||ua(f,v)||(c=!0,Sy(f,v));f=f.next}while(c);M1=!1}}function Cw(){_y()}function _y(){H0=N1=!1;var s=0;Xi!==0&&(Fw()&&(s=Xi),Xi=0);for(var o=qt(),c=null,f=q0;f!==null;){var g=f.next,v=wy(f,o);v===0?(f.next=null,c===null?q0=g:c.next=g,g===null&&(nl=c)):(c=f,(s!==0||(v&3)!==0)&&(H0=!0)),f=g}ku(s)}function wy(s,o){for(var c=s.suspendedLanes,f=s.pingedLanes,g=s.expirationTimes,v=s.pendingLanes&-62914561;0<v;){var M=31-it(v),L=1<<M,U=g[M];U===-1?((L&c)===0||(L&f)!==0)&&(g[M]=Co(L,o)):U<=o&&(s.expiredLanes|=L),v&=~L}if(o=Pt,c=mt,c=la(s,s===o?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),f=s.callbackNode,c===0||s===o&&(Tt===2||Tt===9)||s.cancelPendingCommit!==null)return f!==null&&f!==null&&cr(f),s.callbackNode=null,s.callbackPriority=0;if((c&3)===0||ua(s,c)){if(o=c&-c,o===s.callbackPriority)return o;switch(f!==null&&cr(f),Bl(c)){case 2:case 8:c=Z;break;case 32:c=re;break;case 268435456:c=de;break;default:c=re}return f=ky.bind(null,s),c=ur(c,f),s.callbackPriority=o,s.callbackNode=c,o}return f!==null&&f!==null&&cr(f),s.callbackPriority=2,s.callbackNode=null,2}function ky(s,o){if($r!==0&&$r!==5)return s.callbackNode=null,s.callbackPriority=0,null;var c=s.callbackNode;if($0()&&s.callbackNode!==c)return null;var f=mt;return f=la(s,s===Pt?f:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),f===0?null:(sy(s,f,o),wy(s,qt()),s.callbackNode!=null&&s.callbackNode===c?ky.bind(null,s):null)}function Sy(s,o){if($0())return null;sy(s,o,!0)}function Tw(){Pw(function(){(Ct&6)!==0?ur(Pr,Cw):_y()})}function j1(){return Xi===0&&(Xi=zi()),Xi}function Ay(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:e0(""+s)}function Ey(s,o){var c=o.ownerDocument.createElement("input");return c.name=o.name,c.value=o.value,s.id&&c.setAttribute("form",s.id),o.parentNode.insertBefore(c,o),s=new FormData(s),c.parentNode.removeChild(c),s}function Nw(s,o,c,f,g){if(o==="submit"&&c&&c.stateNode===g){var v=Ay((g[Vr]||null).action),M=f.submitter;M&&(o=(o=M[Vr]||null)?Ay(o.formAction):M.getAttribute("formAction"),o!==null&&(v=o,M=null));var L=new a0("action","action",null,f,g);s.push({event:L,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(Xi!==0){var U=M?Ey(g,M):new FormData(g);Qf(c,{pending:!0,data:U,method:g.method,action:v},null,U)}}else typeof v=="function"&&(L.preventDefault(),U=M?Ey(g,M):new FormData(g),Qf(c,{pending:!0,data:U,method:g.method,action:v},v,U))},currentTarget:g}]})}}for(var D1=0;D1<gf.length;D1++){var z1=gf[D1],Mw=z1.toLowerCase(),jw=z1[0].toUpperCase()+z1.slice(1);ha(Mw,"on"+jw)}ha(sb,"onAnimationEnd"),ha(ib,"onAnimationIteration"),ha(ob,"onAnimationStart"),ha("dblclick","onDoubleClick"),ha("focusin","onFocus"),ha("focusout","onBlur"),ha(K_,"onTransitionRun"),ha(Y_,"onTransitionStart"),ha(X_,"onTransitionCancel"),ha(lb,"onTransitionEnd"),Be("onMouseEnter",["mouseout","mouseover"]),Be("onMouseLeave",["mouseout","mouseover"]),Be("onPointerEnter",["pointerout","pointerover"]),Be("onPointerLeave",["pointerout","pointerover"]),Ae("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ae("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ae("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ae("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ae("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ae("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Su="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Su));function Cy(s,o){o=(o&4)!==0;for(var c=0;c<s.length;c++){var f=s[c],g=f.event;f=f.listeners;e:{var v=void 0;if(o)for(var M=f.length-1;0<=M;M--){var L=f[M],U=L.instance,te=L.currentTarget;if(L=L.listener,U!==v&&g.isPropagationStopped())break e;v=L,g.currentTarget=te;try{v(g)}catch(me){M0(me)}g.currentTarget=null,v=U}else for(M=0;M<f.length;M++){if(L=f[M],U=L.instance,te=L.currentTarget,L=L.listener,U!==v&&g.isPropagationStopped())break e;v=L,g.currentTarget=te;try{v(g)}catch(me){M0(me)}g.currentTarget=null,v=U}}}}function ct(s,o){var c=o[Ca];c===void 0&&(c=o[Ca]=new Set);var f=s+"__bubble";c.has(f)||(Ty(o,s,2,!1),c.add(f))}function O1(s,o,c){var f=0;o&&(f|=4),Ty(c,s,f,o)}var U0="_reactListening"+Math.random().toString(36).slice(2);function R1(s){if(!s[U0]){s[U0]=!0,$e.forEach(function(c){c!=="selectionchange"&&(Dw.has(c)||O1(c,!1,s),O1(c,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[U0]||(o[U0]=!0,O1("selectionchange",!1,o))}}function Ty(s,o,c,f){switch(Wy(o)){case 2:var g=sk;break;case 8:g=ik;break;default:g=Y1}c=g.bind(null,o,c,s),g=void 0,!rf||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),f?g!==void 0?s.addEventListener(o,c,{capture:!0,passive:g}):s.addEventListener(o,c,!0):g!==void 0?s.addEventListener(o,c,{passive:g}):s.addEventListener(o,c,!1)}function F1(s,o,c,f,g){var v=f;if((o&1)===0&&(o&2)===0&&f!==null)e:for(;;){if(f===null)return;var M=f.tag;if(M===3||M===4){var L=f.stateNode.containerInfo;if(L===g)break;if(M===4)for(M=f.return;M!==null;){var U=M.tag;if((U===3||U===4)&&M.stateNode.containerInfo===g)return;M=M.return}for(;L!==null;){if(M=es(L),M===null)return;if(U=M.tag,U===5||U===6||U===26||U===27){f=v=M;continue e}L=L.parentNode}}f=f.return}Rg(function(){var te=v,me=ef(c),ve=[];e:{var se=ub.get(s);if(se!==void 0){var oe=a0,Qe=s;switch(s){case"keypress":if(r0(c)===0)break e;case"keydown":case"keyup":oe=E_;break;case"focusin":Qe="focus",oe=of;break;case"focusout":Qe="blur",oe=of;break;case"beforeblur":case"afterblur":oe=of;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=Pg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=m_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=N_;break;case sb:case ib:case ob:oe=b_;break;case lb:oe=j_;break;case"scroll":case"scrollend":oe=h_;break;case"wheel":oe=z_;break;case"copy":case"cut":case"paste":oe=x_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=Ig;break;case"toggle":case"beforetoggle":oe=R_}var Ye=(o&4)!==0,zt=!Ye&&(s==="scroll"||s==="scrollend"),J=Ye?se!==null?se+"Capture":null:se;Ye=[];for(var Y=te,ee;Y!==null;){var ye=Y;if(ee=ye.stateNode,ye=ye.tag,ye!==5&&ye!==26&&ye!==27||ee===null||J===null||(ye=Hl(Y,J),ye!=null&&Ye.push(Au(Y,ye,ee))),zt)break;Y=Y.return}0<Ye.length&&(se=new oe(se,Qe,null,c,me),ve.push({event:se,listeners:Ye}))}}if((o&7)===0){e:{if(se=s==="mouseover"||s==="pointerover",oe=s==="mouseout"||s==="pointerout",se&&c!==Jh&&(Qe=c.relatedTarget||c.fromElement)&&(es(Qe)||Qe[Br]))break e;if((oe||se)&&(se=me.window===me?me:(se=me.ownerDocument)?se.defaultView||se.parentWindow:window,oe?(Qe=c.relatedTarget||c.toElement,oe=te,Qe=Qe?es(Qe):null,Qe!==null&&(zt=i(Qe),Ye=Qe.tag,Qe!==zt||Ye!==5&&Ye!==27&&Ye!==6)&&(Qe=null)):(oe=null,Qe=te),oe!==Qe)){if(Ye=Pg,ye="onMouseLeave",J="onMouseEnter",Y="mouse",(s==="pointerout"||s==="pointerover")&&(Ye=Ig,ye="onPointerLeave",J="onPointerEnter",Y="pointer"),zt=oe==null?se:Ps(oe),ee=Qe==null?se:Ps(Qe),se=new Ye(ye,Y+"leave",oe,c,me),se.target=zt,se.relatedTarget=ee,ye=null,es(me)===te&&(Ye=new Ye(J,Y+"enter",Qe,c,me),Ye.target=ee,Ye.relatedTarget=zt,ye=Ye),zt=ye,oe&&Qe)t:{for(Ye=oe,J=Qe,Y=0,ee=Ye;ee;ee=al(ee))Y++;for(ee=0,ye=J;ye;ye=al(ye))ee++;for(;0<Y-ee;)Ye=al(Ye),Y--;for(;0<ee-Y;)J=al(J),ee--;for(;Y--;){if(Ye===J||J!==null&&Ye===J.alternate)break t;Ye=al(Ye),J=al(J)}Ye=null}else Ye=null;oe!==null&&Ny(ve,se,oe,Ye,!1),Qe!==null&&zt!==null&&Ny(ve,zt,Qe,Ye,!0)}}e:{if(se=te?Ps(te):window,oe=se.nodeName&&se.nodeName.toLowerCase(),oe==="select"||oe==="input"&&se.type==="file")var Ie=Kg;else if(Gg(se))if(Yg)Ie=V_;else{Ie=H_;var lt=q_}else oe=se.nodeName,!oe||oe.toLowerCase()!=="input"||se.type!=="checkbox"&&se.type!=="radio"?te&&Wh(te.elementType)&&(Ie=Kg):Ie=U_;if(Ie&&(Ie=Ie(s,te))){Zg(ve,Ie,c,me);break e}lt&&lt(s,se,te),s==="focusout"&&te&&se.type==="number"&&te.memoizedProps.value!=null&&Qh(se,"number",se.value)}switch(lt=te?Ps(te):window,s){case"focusin":(Gg(lt)||lt.contentEditable==="true")&&(Oo=lt,ff=te,Ql=null);break;case"focusout":Ql=ff=Oo=null;break;case"mousedown":mf=!0;break;case"contextmenu":case"mouseup":case"dragend":mf=!1,nb(ve,c,me);break;case"selectionchange":if(Z_)break;case"keydown":case"keyup":nb(ve,c,me)}var qe;if(uf)e:{switch(s){case"compositionstart":var Xe="onCompositionStart";break e;case"compositionend":Xe="onCompositionEnd";break e;case"compositionupdate":Xe="onCompositionUpdate";break e}Xe=void 0}else zo?Ug(s,c)&&(Xe="onCompositionEnd"):s==="keydown"&&c.keyCode===229&&(Xe="onCompositionStart");Xe&&($g&&c.locale!=="ko"&&(zo||Xe!=="onCompositionStart"?Xe==="onCompositionEnd"&&zo&&(qe=Fg()):(Bs=me,nf="value"in Bs?Bs.value:Bs.textContent,zo=!0)),lt=V0(te,Xe),0<lt.length&&(Xe=new Bg(Xe,s,null,c,me),ve.push({event:Xe,listeners:lt}),qe?Xe.data=qe:(qe=Vg(c),qe!==null&&(Xe.data=qe)))),(qe=L_?P_(s,c):B_(s,c))&&(Xe=V0(te,"onBeforeInput"),0<Xe.length&&(lt=new Bg("onBeforeInput","beforeinput",null,c,me),ve.push({event:lt,listeners:Xe}),lt.data=qe)),Nw(ve,s,te,c,me)}Cy(ve,o)})}function Au(s,o,c){return{instance:s,listener:o,currentTarget:c}}function V0(s,o){for(var c=o+"Capture",f=[];s!==null;){var g=s,v=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||v===null||(g=Hl(s,c),g!=null&&f.unshift(Au(s,g,v)),g=Hl(s,o),g!=null&&f.push(Au(s,g,v))),s.tag===3)return f;s=s.return}return[]}function al(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function Ny(s,o,c,f,g){for(var v=o._reactName,M=[];c!==null&&c!==f;){var L=c,U=L.alternate,te=L.stateNode;if(L=L.tag,U!==null&&U===f)break;L!==5&&L!==26&&L!==27||te===null||(U=te,g?(te=Hl(c,v),te!=null&&M.unshift(Au(c,te,U))):g||(te=Hl(c,v),te!=null&&M.push(Au(c,te,U)))),c=c.return}M.length!==0&&s.push({event:o,listeners:M})}var zw=/\r\n?/g,Ow=/\u0000|\uFFFD/g;function My(s){return(typeof s=="string"?s:""+s).replace(zw,`
`).replace(Ow,"")}function jy(s,o){return o=My(o),My(s)===o}function G0(){}function Dt(s,o,c,f,g,v){switch(c){case"children":typeof f=="string"?o==="body"||o==="textarea"&&f===""||Mo(s,f):(typeof f=="number"||typeof f=="bigint")&&o!=="body"&&Mo(s,""+f);break;case"className":Ta(s,"class",f);break;case"tabIndex":Ta(s,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":Ta(s,c,f);break;case"style":zg(s,f,v);break;case"data":if(o!=="object"){Ta(s,"data",f);break}case"src":case"href":if(f===""&&(o!=="a"||c!=="href")){s.removeAttribute(c);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){s.removeAttribute(c);break}f=e0(""+f),s.setAttribute(c,f);break;case"action":case"formAction":if(typeof f=="function"){s.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(c==="formAction"?(o!=="input"&&Dt(s,o,"name",g.name,g,null),Dt(s,o,"formEncType",g.formEncType,g,null),Dt(s,o,"formMethod",g.formMethod,g,null),Dt(s,o,"formTarget",g.formTarget,g,null)):(Dt(s,o,"encType",g.encType,g,null),Dt(s,o,"method",g.method,g,null),Dt(s,o,"target",g.target,g,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){s.removeAttribute(c);break}f=e0(""+f),s.setAttribute(c,f);break;case"onClick":f!=null&&(s.onclick=G0);break;case"onScroll":f!=null&&ct("scroll",s);break;case"onScrollEnd":f!=null&&ct("scrollend",s);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(n(61));if(c=f.__html,c!=null){if(g.children!=null)throw Error(n(60));s.innerHTML=c}}break;case"multiple":s.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":s.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){s.removeAttribute("xlink:href");break}c=e0(""+f),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?s.setAttribute(c,""+f):s.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?s.setAttribute(c,""):s.removeAttribute(c);break;case"capture":case"download":f===!0?s.setAttribute(c,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?s.setAttribute(c,f):s.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?s.setAttribute(c,f):s.removeAttribute(c);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?s.removeAttribute(c):s.setAttribute(c,f);break;case"popover":ct("beforetoggle",s),ct("toggle",s),cn(s,"popover",f);break;case"xlinkActuate":Tn(s,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":Tn(s,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":Tn(s,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":Tn(s,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":Tn(s,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":Tn(s,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":Tn(s,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":Tn(s,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":Tn(s,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":cn(s,"is",f);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=c_.get(c)||c,cn(s,c,f))}}function L1(s,o,c,f,g,v){switch(c){case"style":zg(s,f,v);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(n(61));if(c=f.__html,c!=null){if(g.children!=null)throw Error(n(60));s.innerHTML=c}}break;case"children":typeof f=="string"?Mo(s,f):(typeof f=="number"||typeof f=="bigint")&&Mo(s,""+f);break;case"onScroll":f!=null&&ct("scroll",s);break;case"onScrollEnd":f!=null&&ct("scrollend",s);break;case"onClick":f!=null&&(s.onclick=G0);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Q.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(g=c.endsWith("Capture"),o=c.slice(2,g?c.length-7:void 0),v=s[Vr]||null,v=v!=null?v[c]:null,typeof v=="function"&&s.removeEventListener(o,v,g),typeof f=="function")){typeof v!="function"&&v!==null&&(c in s?s[c]=null:s.hasAttribute(c)&&s.removeAttribute(c)),s.addEventListener(o,f,g);break e}c in s?s[c]=f:f===!0?s.setAttribute(c,""):cn(s,c,f)}}}function qr(s,o,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ct("error",s),ct("load",s);var f=!1,g=!1,v;for(v in c)if(c.hasOwnProperty(v)){var M=c[v];if(M!=null)switch(v){case"src":f=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:Dt(s,o,v,M,c,null)}}g&&Dt(s,o,"srcSet",c.srcSet,c,null),f&&Dt(s,o,"src",c.src,c,null);return;case"input":ct("invalid",s);var L=v=M=g=null,U=null,te=null;for(f in c)if(c.hasOwnProperty(f)){var me=c[f];if(me!=null)switch(f){case"name":g=me;break;case"type":M=me;break;case"checked":U=me;break;case"defaultChecked":te=me;break;case"value":v=me;break;case"defaultValue":L=me;break;case"children":case"dangerouslySetInnerHTML":if(me!=null)throw Error(n(137,o));break;default:Dt(s,o,f,me,c,null)}}Ng(s,v,L,U,te,M,g,!1),Wc(s);return;case"select":ct("invalid",s),f=M=v=null;for(g in c)if(c.hasOwnProperty(g)&&(L=c[g],L!=null))switch(g){case"value":v=L;break;case"defaultValue":M=L;break;case"multiple":f=L;default:Dt(s,o,g,L,c,null)}o=v,c=M,s.multiple=!!f,o!=null?No(s,!!f,o,!1):c!=null&&No(s,!!f,c,!0);return;case"textarea":ct("invalid",s),v=g=f=null;for(M in c)if(c.hasOwnProperty(M)&&(L=c[M],L!=null))switch(M){case"value":f=L;break;case"defaultValue":g=L;break;case"children":v=L;break;case"dangerouslySetInnerHTML":if(L!=null)throw Error(n(91));break;default:Dt(s,o,M,L,c,null)}jg(s,f,g,v),Wc(s);return;case"option":for(U in c)if(c.hasOwnProperty(U)&&(f=c[U],f!=null))switch(U){case"selected":s.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:Dt(s,o,U,f,c,null)}return;case"dialog":ct("beforetoggle",s),ct("toggle",s),ct("cancel",s),ct("close",s);break;case"iframe":case"object":ct("load",s);break;case"video":case"audio":for(f=0;f<Su.length;f++)ct(Su[f],s);break;case"image":ct("error",s),ct("load",s);break;case"details":ct("toggle",s);break;case"embed":case"source":case"link":ct("error",s),ct("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(te in c)if(c.hasOwnProperty(te)&&(f=c[te],f!=null))switch(te){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:Dt(s,o,te,f,c,null)}return;default:if(Wh(o)){for(me in c)c.hasOwnProperty(me)&&(f=c[me],f!==void 0&&L1(s,o,me,f,c,void 0));return}}for(L in c)c.hasOwnProperty(L)&&(f=c[L],f!=null&&Dt(s,o,L,f,c,null))}function Rw(s,o,c,f){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,v=null,M=null,L=null,U=null,te=null,me=null;for(oe in c){var ve=c[oe];if(c.hasOwnProperty(oe)&&ve!=null)switch(oe){case"checked":break;case"value":break;case"defaultValue":U=ve;default:f.hasOwnProperty(oe)||Dt(s,o,oe,null,f,ve)}}for(var se in f){var oe=f[se];if(ve=c[se],f.hasOwnProperty(se)&&(oe!=null||ve!=null))switch(se){case"type":v=oe;break;case"name":g=oe;break;case"checked":te=oe;break;case"defaultChecked":me=oe;break;case"value":M=oe;break;case"defaultValue":L=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(n(137,o));break;default:oe!==ve&&Dt(s,o,se,oe,f,ve)}}Xh(s,M,L,U,te,me,v,g);return;case"select":oe=M=L=se=null;for(v in c)if(U=c[v],c.hasOwnProperty(v)&&U!=null)switch(v){case"value":break;case"multiple":oe=U;default:f.hasOwnProperty(v)||Dt(s,o,v,null,f,U)}for(g in f)if(v=f[g],U=c[g],f.hasOwnProperty(g)&&(v!=null||U!=null))switch(g){case"value":se=v;break;case"defaultValue":L=v;break;case"multiple":M=v;default:v!==U&&Dt(s,o,g,v,f,U)}o=L,c=M,f=oe,se!=null?No(s,!!c,se,!1):!!f!=!!c&&(o!=null?No(s,!!c,o,!0):No(s,!!c,c?[]:"",!1));return;case"textarea":oe=se=null;for(L in c)if(g=c[L],c.hasOwnProperty(L)&&g!=null&&!f.hasOwnProperty(L))switch(L){case"value":break;case"children":break;default:Dt(s,o,L,null,f,g)}for(M in f)if(g=f[M],v=c[M],f.hasOwnProperty(M)&&(g!=null||v!=null))switch(M){case"value":se=g;break;case"defaultValue":oe=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(n(91));break;default:g!==v&&Dt(s,o,M,g,f,v)}Mg(s,se,oe);return;case"option":for(var Qe in c)if(se=c[Qe],c.hasOwnProperty(Qe)&&se!=null&&!f.hasOwnProperty(Qe))switch(Qe){case"selected":s.selected=!1;break;default:Dt(s,o,Qe,null,f,se)}for(U in f)if(se=f[U],oe=c[U],f.hasOwnProperty(U)&&se!==oe&&(se!=null||oe!=null))switch(U){case"selected":s.selected=se&&typeof se!="function"&&typeof se!="symbol";break;default:Dt(s,o,U,se,f,oe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ye in c)se=c[Ye],c.hasOwnProperty(Ye)&&se!=null&&!f.hasOwnProperty(Ye)&&Dt(s,o,Ye,null,f,se);for(te in f)if(se=f[te],oe=c[te],f.hasOwnProperty(te)&&se!==oe&&(se!=null||oe!=null))switch(te){case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(n(137,o));break;default:Dt(s,o,te,se,f,oe)}return;default:if(Wh(o)){for(var zt in c)se=c[zt],c.hasOwnProperty(zt)&&se!==void 0&&!f.hasOwnProperty(zt)&&L1(s,o,zt,void 0,f,se);for(me in f)se=f[me],oe=c[me],!f.hasOwnProperty(me)||se===oe||se===void 0&&oe===void 0||L1(s,o,me,se,f,oe);return}}for(var J in c)se=c[J],c.hasOwnProperty(J)&&se!=null&&!f.hasOwnProperty(J)&&Dt(s,o,J,null,f,se);for(ve in f)se=f[ve],oe=c[ve],!f.hasOwnProperty(ve)||se===oe||se==null&&oe==null||Dt(s,o,ve,se,f,oe)}var P1=null,B1=null;function Z0(s){return s.nodeType===9?s:s.ownerDocument}function Dy(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function zy(s,o){if(s===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&o==="foreignObject"?0:s}function I1(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var $1=null;function Fw(){var s=window.event;return s&&s.type==="popstate"?s===$1?!1:($1=s,!0):($1=null,!1)}var Oy=typeof setTimeout=="function"?setTimeout:void 0,Lw=typeof clearTimeout=="function"?clearTimeout:void 0,Ry=typeof Promise=="function"?Promise:void 0,Pw=typeof queueMicrotask=="function"?queueMicrotask:typeof Ry<"u"?function(s){return Ry.resolve(null).then(s).catch(Bw)}:Oy;function Bw(s){setTimeout(function(){throw s})}function ti(s){return s==="head"}function Fy(s,o){var c=o,f=0,g=0;do{var v=c.nextSibling;if(s.removeChild(c),v&&v.nodeType===8)if(c=v.data,c==="/$"){if(0<f&&8>f){c=f;var M=s.ownerDocument;if(c&1&&Eu(M.documentElement),c&2&&Eu(M.body),c&4)for(c=M.head,Eu(c),M=c.firstChild;M;){var L=M.nextSibling,U=M.nodeName;M[Ls]||U==="SCRIPT"||U==="STYLE"||U==="LINK"&&M.rel.toLowerCase()==="stylesheet"||c.removeChild(M),M=L}}if(g===0){s.removeChild(v),Ou(o);return}g--}else c==="$"||c==="$?"||c==="$!"?g++:f=c.charCodeAt(0)-48;else f=0;c=v}while(c);Ou(o)}function q1(s){var o=s.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var c=o;switch(o=o.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":q1(c),Cn(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}s.removeChild(c)}}function Iw(s,o,c,f){for(;s.nodeType===1;){var g=c;if(s.nodeName.toLowerCase()!==o.toLowerCase()){if(!f&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(f){if(!s[Ls])switch(o){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(v=s.getAttribute("rel"),v==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(v!==g.rel||s.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||s.getAttribute("title")!==(g.title==null?null:g.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(v=s.getAttribute("src"),(v!==(g.src==null?null:g.src)||s.getAttribute("type")!==(g.type==null?null:g.type)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&v&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(o==="input"&&s.type==="hidden"){var v=g.name==null?null:""+g.name;if(g.type==="hidden"&&s.getAttribute("name")===v)return s}else return s;if(s=ma(s.nextSibling),s===null)break}return null}function $w(s,o,c){if(o==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!c||(s=ma(s.nextSibling),s===null))return null;return s}function H1(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function qw(s,o){var c=s.ownerDocument;if(s.data!=="$?"||c.readyState==="complete")o();else{var f=function(){o(),c.removeEventListener("DOMContentLoaded",f)};c.addEventListener("DOMContentLoaded",f),s._reactRetry=f}}function ma(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return s}var U1=null;function Ly(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var c=s.data;if(c==="$"||c==="$!"||c==="$?"){if(o===0)return s;o--}else c==="/$"&&o++}s=s.previousSibling}return null}function Py(s,o,c){switch(o=Z0(c),s){case"html":if(s=o.documentElement,!s)throw Error(n(452));return s;case"head":if(s=o.head,!s)throw Error(n(453));return s;case"body":if(s=o.body,!s)throw Error(n(454));return s;default:throw Error(n(451))}}function Eu(s){for(var o=s.attributes;o.length;)s.removeAttributeNode(o[0]);Cn(s)}var Wn=new Map,By=new Set;function K0(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var bs=ue.d;ue.d={f:Hw,r:Uw,D:Vw,C:Gw,L:Zw,m:Kw,X:Xw,S:Yw,M:Qw};function Hw(){var s=bs.f(),o=B0();return s||o}function Uw(s){var o=ts(s);o!==null&&o.tag===5&&o.type==="form"?s4(o):bs.r(s)}var sl=typeof document>"u"?null:document;function Iy(s,o,c){var f=sl;if(f&&typeof o=="string"&&o){var g=Vn(o);g='link[rel="'+s+'"][href="'+g+'"]',typeof c=="string"&&(g+='[crossorigin="'+c+'"]'),By.has(g)||(By.add(g),s={rel:s,crossOrigin:c,href:o},f.querySelector(g)===null&&(o=f.createElement("link"),qr(o,"link",s),xr(o),f.head.appendChild(o)))}}function Vw(s){bs.D(s),Iy("dns-prefetch",s,null)}function Gw(s,o){bs.C(s,o),Iy("preconnect",s,o)}function Zw(s,o,c){bs.L(s,o,c);var f=sl;if(f&&s&&o){var g='link[rel="preload"][as="'+Vn(o)+'"]';o==="image"&&c&&c.imageSrcSet?(g+='[imagesrcset="'+Vn(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(g+='[imagesizes="'+Vn(c.imageSizes)+'"]')):g+='[href="'+Vn(s)+'"]';var v=g;switch(o){case"style":v=il(s);break;case"script":v=ol(s)}Wn.has(v)||(s=p({rel:"preload",href:o==="image"&&c&&c.imageSrcSet?void 0:s,as:o},c),Wn.set(v,s),f.querySelector(g)!==null||o==="style"&&f.querySelector(Cu(v))||o==="script"&&f.querySelector(Tu(v))||(o=f.createElement("link"),qr(o,"link",s),xr(o),f.head.appendChild(o)))}}function Kw(s,o){bs.m(s,o);var c=sl;if(c&&s){var f=o&&typeof o.as=="string"?o.as:"script",g='link[rel="modulepreload"][as="'+Vn(f)+'"][href="'+Vn(s)+'"]',v=g;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=ol(s)}if(!Wn.has(v)&&(s=p({rel:"modulepreload",href:s},o),Wn.set(v,s),c.querySelector(g)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Tu(v)))return}f=c.createElement("link"),qr(f,"link",s),xr(f),c.head.appendChild(f)}}}function Yw(s,o,c){bs.S(s,o,c);var f=sl;if(f&&s){var g=rs(f).hoistableStyles,v=il(s);o=o||"default";var M=g.get(v);if(!M){var L={loading:0,preload:null};if(M=f.querySelector(Cu(v)))L.loading=5;else{s=p({rel:"stylesheet",href:s,"data-precedence":o},c),(c=Wn.get(v))&&V1(s,c);var U=M=f.createElement("link");xr(U),qr(U,"link",s),U._p=new Promise(function(te,me){U.onload=te,U.onerror=me}),U.addEventListener("load",function(){L.loading|=1}),U.addEventListener("error",function(){L.loading|=2}),L.loading|=4,Y0(M,o,f)}M={type:"stylesheet",instance:M,count:1,state:L},g.set(v,M)}}}function Xw(s,o){bs.X(s,o);var c=sl;if(c&&s){var f=rs(c).hoistableScripts,g=ol(s),v=f.get(g);v||(v=c.querySelector(Tu(g)),v||(s=p({src:s,async:!0},o),(o=Wn.get(g))&&G1(s,o),v=c.createElement("script"),xr(v),qr(v,"link",s),c.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},f.set(g,v))}}function Qw(s,o){bs.M(s,o);var c=sl;if(c&&s){var f=rs(c).hoistableScripts,g=ol(s),v=f.get(g);v||(v=c.querySelector(Tu(g)),v||(s=p({src:s,async:!0,type:"module"},o),(o=Wn.get(g))&&G1(s,o),v=c.createElement("script"),xr(v),qr(v,"link",s),c.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},f.set(g,v))}}function $y(s,o,c,f){var g=(g=ce.current)?K0(g):null;if(!g)throw Error(n(446));switch(s){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(o=il(c.href),c=rs(g).hoistableStyles,f=c.get(o),f||(f={type:"style",instance:null,count:0,state:null},c.set(o,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){s=il(c.href);var v=rs(g).hoistableStyles,M=v.get(s);if(M||(g=g.ownerDocument||g,M={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(s,M),(v=g.querySelector(Cu(s)))&&!v._p&&(M.instance=v,M.state.loading=5),Wn.has(s)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Wn.set(s,c),v||Ww(g,s,c,M.state))),o&&f===null)throw Error(n(528,""));return M}if(o&&f!==null)throw Error(n(529,""));return null;case"script":return o=c.async,c=c.src,typeof c=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=ol(c),c=rs(g).hoistableScripts,f=c.get(o),f||(f={type:"script",instance:null,count:0,state:null},c.set(o,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,s))}}function il(s){return'href="'+Vn(s)+'"'}function Cu(s){return'link[rel="stylesheet"]['+s+"]"}function qy(s){return p({},s,{"data-precedence":s.precedence,precedence:null})}function Ww(s,o,c,f){s.querySelector('link[rel="preload"][as="style"]['+o+"]")?f.loading=1:(o=s.createElement("link"),f.preload=o,o.addEventListener("load",function(){return f.loading|=1}),o.addEventListener("error",function(){return f.loading|=2}),qr(o,"link",c),xr(o),s.head.appendChild(o))}function ol(s){return'[src="'+Vn(s)+'"]'}function Tu(s){return"script[async]"+s}function Hy(s,o,c){if(o.count++,o.instance===null)switch(o.type){case"style":var f=s.querySelector('style[data-href~="'+Vn(c.href)+'"]');if(f)return o.instance=f,xr(f),f;var g=p({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return f=(s.ownerDocument||s).createElement("style"),xr(f),qr(f,"style",g),Y0(f,c.precedence,s),o.instance=f;case"stylesheet":g=il(c.href);var v=s.querySelector(Cu(g));if(v)return o.state.loading|=4,o.instance=v,xr(v),v;f=qy(c),(g=Wn.get(g))&&V1(f,g),v=(s.ownerDocument||s).createElement("link"),xr(v);var M=v;return M._p=new Promise(function(L,U){M.onload=L,M.onerror=U}),qr(v,"link",f),o.state.loading|=4,Y0(v,c.precedence,s),o.instance=v;case"script":return v=ol(c.src),(g=s.querySelector(Tu(v)))?(o.instance=g,xr(g),g):(f=c,(g=Wn.get(v))&&(f=p({},c),G1(f,g)),s=s.ownerDocument||s,g=s.createElement("script"),xr(g),qr(g,"link",f),s.head.appendChild(g),o.instance=g);case"void":return null;default:throw Error(n(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(f=o.instance,o.state.loading|=4,Y0(f,c.precedence,s));return o.instance}function Y0(s,o,c){for(var f=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=f.length?f[f.length-1]:null,v=g,M=0;M<f.length;M++){var L=f[M];if(L.dataset.precedence===o)v=L;else if(v!==g)break}v?v.parentNode.insertBefore(s,v.nextSibling):(o=c.nodeType===9?c.head:c,o.insertBefore(s,o.firstChild))}function V1(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.title==null&&(s.title=o.title)}function G1(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.integrity==null&&(s.integrity=o.integrity)}var X0=null;function Uy(s,o,c){if(X0===null){var f=new Map,g=X0=new Map;g.set(c,f)}else g=X0,f=g.get(c),f||(f=new Map,g.set(c,f));if(f.has(s))return f;for(f.set(s,null),c=c.getElementsByTagName(s),g=0;g<c.length;g++){var v=c[g];if(!(v[Ls]||v[Sr]||s==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var M=v.getAttribute(o)||"";M=s+M;var L=f.get(M);L?L.push(v):f.set(M,[v])}}return f}function Vy(s,o,c){s=s.ownerDocument||s,s.head.insertBefore(c,o==="title"?s.querySelector("head > title"):null)}function Jw(s,o,c){if(c===1||o.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return s=o.disabled,typeof o.precedence=="string"&&s==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function Gy(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var Nu=null;function ek(){}function tk(s,o,c){if(Nu===null)throw Error(n(475));var f=Nu;if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var g=il(c.href),v=s.querySelector(Cu(g));if(v){s=v._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(f.count++,f=Q0.bind(f),s.then(f,f)),o.state.loading|=4,o.instance=v,xr(v);return}v=s.ownerDocument||s,c=qy(c),(g=Wn.get(g))&&V1(c,g),v=v.createElement("link"),xr(v);var M=v;M._p=new Promise(function(L,U){M.onload=L,M.onerror=U}),qr(v,"link",c),o.instance=v}f.stylesheets===null&&(f.stylesheets=new Map),f.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(f.count++,o=Q0.bind(f),s.addEventListener("load",o),s.addEventListener("error",o))}}function rk(){if(Nu===null)throw Error(n(475));var s=Nu;return s.stylesheets&&s.count===0&&Z1(s,s.stylesheets),0<s.count?function(o){var c=setTimeout(function(){if(s.stylesheets&&Z1(s,s.stylesheets),s.unsuspend){var f=s.unsuspend;s.unsuspend=null,f()}},6e4);return s.unsuspend=o,function(){s.unsuspend=null,clearTimeout(c)}}:null}function Q0(){if(this.count--,this.count===0){if(this.stylesheets)Z1(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var W0=null;function Z1(s,o){s.stylesheets=null,s.unsuspend!==null&&(s.count++,W0=new Map,o.forEach(nk,s),W0=null,Q0.call(s))}function nk(s,o){if(!(o.state.loading&4)){var c=W0.get(s);if(c)var f=c.get(null);else{c=new Map,W0.set(s,c);for(var g=s.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<g.length;v++){var M=g[v];(M.nodeName==="LINK"||M.getAttribute("media")!=="not all")&&(c.set(M.dataset.precedence,M),f=M)}f&&c.set(null,f)}g=o.instance,M=g.getAttribute("data-precedence"),v=c.get(M)||f,v===f&&c.set(null,g),c.set(M,g),this.count++,f=Q0.bind(this),g.addEventListener("load",f),g.addEventListener("error",f),v?v.parentNode.insertBefore(g,v.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(g,s.firstChild)),o.state.loading|=4}}var Mu={$$typeof:N,Provider:null,Consumer:null,_currentValue:Ce,_currentValue2:Ce,_threadCount:0};function ak(s,o,c,f,g,v,M,L){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Pl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pl(0),this.hiddenUpdates=Pl(null),this.identifierPrefix=f,this.onUncaughtError=g,this.onCaughtError=v,this.onRecoverableError=M,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function Zy(s,o,c,f,g,v,M,L,U,te,me,ve){return s=new ak(s,o,c,M,L,U,te,ve),o=1,v===!0&&(o|=24),v=Mn(3,null,null,o),s.current=v,v.stateNode=s,o=Tf(),o.refCount++,s.pooledCache=o,o.refCount++,v.memoizedState={element:f,isDehydrated:c,cache:o},Df(v),s}function Ky(s){return s?(s=Po,s):Po}function Yy(s,o,c,f,g,v){g=Ky(g),f.context===null?f.context=g:f.pendingContext=g,f=qs(o),f.payload={element:c},v=v===void 0?null:v,v!==null&&(f.callback=v),c=Hs(s,f,o),c!==null&&(Rn(c,s,o),iu(c,s,o))}function Xy(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var c=s.retryLane;s.retryLane=c!==0&&c<o?c:o}}function K1(s,o){Xy(s,o),(s=s.alternate)&&Xy(s,o)}function Qy(s){if(s.tag===13){var o=Lo(s,67108864);o!==null&&Rn(o,s,67108864),K1(s,67108864)}}var J0=!0;function sk(s,o,c,f){var g=K.T;K.T=null;var v=ue.p;try{ue.p=2,Y1(s,o,c,f)}finally{ue.p=v,K.T=g}}function ik(s,o,c,f){var g=K.T;K.T=null;var v=ue.p;try{ue.p=8,Y1(s,o,c,f)}finally{ue.p=v,K.T=g}}function Y1(s,o,c,f){if(J0){var g=X1(f);if(g===null)F1(s,o,f,ed,c),Jy(s,f);else if(lk(g,s,o,c,f))f.stopPropagation();else if(Jy(s,f),o&4&&-1<ok.indexOf(s)){for(;g!==null;){var v=ts(g);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var M=Ur(v.pendingLanes);if(M!==0){var L=v;for(L.pendingLanes|=2,L.entangledLanes|=2;M;){var U=1<<31-it(M);L.entanglements[1]|=U,M&=~U}za(v),(Ct&6)===0&&(L0=qt()+500,ku(0))}}break;case 13:L=Lo(v,2),L!==null&&Rn(L,v,2),B0(),K1(v,2)}if(v=X1(f),v===null&&F1(s,o,f,ed,c),v===g)break;g=v}g!==null&&f.stopPropagation()}else F1(s,o,f,null,c)}}function X1(s){return s=ef(s),Q1(s)}var ed=null;function Q1(s){if(ed=null,s=es(s),s!==null){var o=i(s);if(o===null)s=null;else{var c=o.tag;if(c===13){if(s=l(o),s!==null)return s;s=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null)}}return ed=s,null}function Wy(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(un()){case Pr:return 2;case Z:return 8;case re:case he:return 32;case de:return 268435456;default:return 32}default:return 32}}var W1=!1,ri=null,ni=null,ai=null,ju=new Map,Du=new Map,si=[],ok="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Jy(s,o){switch(s){case"focusin":case"focusout":ri=null;break;case"dragenter":case"dragleave":ni=null;break;case"mouseover":case"mouseout":ai=null;break;case"pointerover":case"pointerout":ju.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Du.delete(o.pointerId)}}function zu(s,o,c,f,g,v){return s===null||s.nativeEvent!==v?(s={blockedOn:o,domEventName:c,eventSystemFlags:f,nativeEvent:v,targetContainers:[g]},o!==null&&(o=ts(o),o!==null&&Qy(o)),s):(s.eventSystemFlags|=f,o=s.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),s)}function lk(s,o,c,f,g){switch(o){case"focusin":return ri=zu(ri,s,o,c,f,g),!0;case"dragenter":return ni=zu(ni,s,o,c,f,g),!0;case"mouseover":return ai=zu(ai,s,o,c,f,g),!0;case"pointerover":var v=g.pointerId;return ju.set(v,zu(ju.get(v)||null,s,o,c,f,g)),!0;case"gotpointercapture":return v=g.pointerId,Du.set(v,zu(Du.get(v)||null,s,o,c,f,g)),!0}return!1}function ex(s){var o=es(s.target);if(o!==null){var c=i(o);if(c!==null){if(o=c.tag,o===13){if(o=l(c),o!==null){s.blockedOn=o,$l(s.priority,function(){if(c.tag===13){var f=On();f=Ea(f);var g=Lo(c,f);g!==null&&Rn(g,c,f),K1(c,f)}});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){s.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}s.blockedOn=null}function td(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var c=X1(s.nativeEvent);if(c===null){c=s.nativeEvent;var f=new c.constructor(c.type,c);Jh=f,c.target.dispatchEvent(f),Jh=null}else return o=ts(c),o!==null&&Qy(o),s.blockedOn=c,!1;o.shift()}return!0}function tx(s,o,c){td(s)&&c.delete(o)}function uk(){W1=!1,ri!==null&&td(ri)&&(ri=null),ni!==null&&td(ni)&&(ni=null),ai!==null&&td(ai)&&(ai=null),ju.forEach(tx),Du.forEach(tx)}function rd(s,o){s.blockedOn===o&&(s.blockedOn=null,W1||(W1=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,uk)))}var nd=null;function rx(s){nd!==s&&(nd=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){nd===s&&(nd=null);for(var o=0;o<s.length;o+=3){var c=s[o],f=s[o+1],g=s[o+2];if(typeof f!="function"){if(Q1(f||c)===null)continue;break}var v=ts(c);v!==null&&(s.splice(o,3),o-=3,Qf(v,{pending:!0,data:g,method:c.method,action:f},f,g))}}))}function Ou(s){function o(U){return rd(U,s)}ri!==null&&rd(ri,s),ni!==null&&rd(ni,s),ai!==null&&rd(ai,s),ju.forEach(o),Du.forEach(o);for(var c=0;c<si.length;c++){var f=si[c];f.blockedOn===s&&(f.blockedOn=null)}for(;0<si.length&&(c=si[0],c.blockedOn===null);)ex(c),c.blockedOn===null&&si.shift();if(c=(s.ownerDocument||s).$$reactFormReplay,c!=null)for(f=0;f<c.length;f+=3){var g=c[f],v=c[f+1],M=g[Vr]||null;if(typeof v=="function")M||rx(c);else if(M){var L=null;if(v&&v.hasAttribute("formAction")){if(g=v,M=v[Vr]||null)L=M.formAction;else if(Q1(g)!==null)continue}else L=M.action;typeof L=="function"?c[f+1]=L:(c.splice(f,3),f-=3),rx(c)}}}function J1(s){this._internalRoot=s}ad.prototype.render=J1.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(n(409));var c=o.current,f=On();Yy(c,f,s,o,null,null)},ad.prototype.unmount=J1.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;Yy(s.current,2,null,s,null,null),B0(),o[Br]=null}};function ad(s){this._internalRoot=s}ad.prototype.unstable_scheduleHydration=function(s){if(s){var o=Il();s={blockedOn:null,target:s,priority:o};for(var c=0;c<si.length&&o!==0&&o<si[c].priority;c++);si.splice(c,0,s),c===0&&ex(s)}};var nx=e.version;if(nx!=="19.1.0")throw Error(n(527,nx,"19.1.0"));ue.findDOMNode=function(s){var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(n(188)):(s=Object.keys(s).join(","),Error(n(268,s)));return s=d(o),s=s!==null?h(s):null,s=s===null?null:s.stateNode,s};var ck={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sd.isDisabled&&sd.supportsFiber)try{De=sd.inject(ck),Ke=sd}catch{}}return Fu.createRoot=function(s,o){if(!a(s))throw Error(n(299));var c=!1,f="",g=x4,v=v4,M=_4,L=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(v=o.onCaughtError),o.onRecoverableError!==void 0&&(M=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(L=o.unstable_transitionCallbacks)),o=Zy(s,1,!1,null,null,c,f,g,v,M,L,null),s[Br]=o.current,R1(s),new J1(o)},Fu.hydrateRoot=function(s,o,c){if(!a(s))throw Error(n(299));var f=!1,g="",v=x4,M=v4,L=_4,U=null,te=null;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onUncaughtError!==void 0&&(v=c.onUncaughtError),c.onCaughtError!==void 0&&(M=c.onCaughtError),c.onRecoverableError!==void 0&&(L=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(U=c.unstable_transitionCallbacks),c.formState!==void 0&&(te=c.formState)),o=Zy(s,1,!0,o,c??null,f,g,v,M,L,U,te),o.context=Ky(null),c=o.current,f=On(),f=Ea(f),g=qs(f),g.callback=null,Hs(c,g,f),c=f,o.current.lanes=c,ca(o,c),za(o),s[Br]=o.current,R1(s),new ad(o)},Fu.version="19.1.0",Fu}var fx;function xk(){if(fx)return rm.exports;fx=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),rm.exports=yk(),rm.exports}var vk=xk();const _k=Jp(vk);var Ml=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},yo=typeof window>"u"||"Deno"in globalThis;function tn(){}function wk(t,e){return typeof t=="function"?t(e):t}function dp(t){return typeof t=="number"&&t>=0&&t!==1/0}function t5(t,e){return Math.max(t+(e||0)-Date.now(),0)}function _i(t,e){return typeof t=="function"?t(e):t}function ea(t,e){return typeof t=="function"?t(e):t}function mx(t,e){const{type:r="all",exact:n,fetchStatus:a,predicate:i,queryKey:l,stale:u}=t;if(l){if(n){if(e.queryHash!==t2(l,e.options))return!1}else if(!mc(e.queryKey,l))return!1}if(r!=="all"){const d=e.isActive();if(r==="active"&&!d||r==="inactive"&&d)return!1}return!(typeof u=="boolean"&&e.isStale()!==u||a&&a!==e.state.fetchStatus||i&&!i(e))}function px(t,e){const{exact:r,status:n,predicate:a,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(r){if(xo(e.options.mutationKey)!==xo(i))return!1}else if(!mc(e.options.mutationKey,i))return!1}return!(n&&e.state.status!==n||a&&!a(e))}function t2(t,e){return(e?.queryKeyHashFn||xo)(t)}function xo(t){return JSON.stringify(t,(e,r)=>hp(r)?Object.keys(r).sort().reduce((n,a)=>(n[a]=r[a],n),{}):r)}function mc(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(r=>mc(t[r],e[r])):!1}function r5(t,e){if(t===e)return t;const r=gx(t)&&gx(e);if(r||hp(t)&&hp(e)){const n=r?t:Object.keys(t),a=n.length,i=r?e:Object.keys(e),l=i.length,u=r?[]:{},d=new Set(n);let h=0;for(let p=0;p<l;p++){const b=r?p:i[p];(!r&&d.has(b)||r)&&t[b]===void 0&&e[b]===void 0?(u[b]=void 0,h++):(u[b]=r5(t[b],e[b]),u[b]===t[b]&&t[b]!==void 0&&h++)}return a===l&&h===a?t:u}return e}function eh(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(t[r]!==e[r])return!1;return!0}function gx(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function hp(t){if(!bx(t))return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(!bx(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function bx(t){return Object.prototype.toString.call(t)==="[object Object]"}function kk(t){return new Promise(e=>{setTimeout(e,t)})}function fp(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?r5(t,e):e}function Sk(t){return t}function Ak(t,e,r=0){const n=[...t,e];return r&&n.length>r?n.slice(1):n}function Ek(t,e,r=0){const n=[e,...t];return r&&n.length>r?n.slice(0,-1):n}var r2=Symbol();function n5(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===r2?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function a5(t,e){return typeof t=="function"?t(...e):!!t}var Ck=class extends Ml{#t;#e;#r;constructor(){super(),this.#r=t=>{if(!yo&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#e||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(t){this.#r=t,this.#e?.(),this.#e=t(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(t){this.#t!==t&&(this.#t=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return typeof this.#t=="boolean"?this.#t:globalThis.document?.visibilityState!=="hidden"}},n2=new Ck,Tk=class extends Ml{#t=!0;#e;#r;constructor(){super(),this.#r=t=>{if(!yo&&window.addEventListener){const e=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#e||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(t){this.#r=t,this.#e?.(),this.#e=t(this.setOnline.bind(this))}setOnline(t){this.#t!==t&&(this.#t=t,this.listeners.forEach(r=>{r(t)}))}isOnline(){return this.#t}},th=new Tk;function mp(){let t,e;const r=new Promise((a,i)=>{t=a,e=i});r.status="pending",r.catch(()=>{});function n(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{n({status:"fulfilled",value:a}),t(a)},r.reject=a=>{n({status:"rejected",reason:a}),e(a)},r}function Nk(t){return Math.min(1e3*2**t,3e4)}function s5(t){return(t??"online")==="online"?th.isOnline():!0}var i5=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function im(t){return t instanceof i5}function o5(t){let e=!1,r=0,n=!1,a;const i=mp(),l=k=>{n||(y(new i5(k)),t.abort?.())},u=()=>{e=!0},d=()=>{e=!1},h=()=>n2.isFocused()&&(t.networkMode==="always"||th.isOnline())&&t.canRun(),p=()=>s5(t.networkMode)&&t.canRun(),b=k=>{n||(n=!0,t.onSuccess?.(k),a?.(),i.resolve(k))},y=k=>{n||(n=!0,t.onError?.(k),a?.(),i.reject(k))},x=()=>new Promise(k=>{a=S=>{(n||h())&&k(S)},t.onPause?.()}).then(()=>{a=void 0,n||t.onContinue?.()}),_=()=>{if(n)return;let k;const S=r===0?t.initialPromise:void 0;try{k=S??t.fn()}catch(A){k=Promise.reject(A)}Promise.resolve(k).then(b).catch(A=>{if(n)return;const C=t.retry??(yo?0:3),N=t.retryDelay??Nk,D=typeof N=="function"?N(r,A):N,j=C===!0||typeof C=="number"&&r<C||typeof C=="function"&&C(r,A);if(e||!j){y(A);return}r++,t.onFail?.(r,A),kk(D).then(()=>h()?void 0:x()).then(()=>{e?y(A):_()})})};return{promise:i,cancel:l,continue:()=>(a?.(),i),cancelRetry:u,continueRetry:d,canStart:p,start:()=>(p()?_():x().then(_),i)}}var Mk=t=>setTimeout(t,0);function jk(){let t=[],e=0,r=u=>{u()},n=u=>{u()},a=Mk;const i=u=>{e?t.push(u):a(()=>{r(u)})},l=()=>{const u=t;t=[],u.length&&a(()=>{n(()=>{u.forEach(d=>{r(d)})})})};return{batch:u=>{let d;e++;try{d=u()}finally{e--,e||l()}return d},batchCalls:u=>(...d)=>{i(()=>{u(...d)})},schedule:i,setNotifyFunction:u=>{r=u},setBatchNotifyFunction:u=>{n=u},setScheduler:u=>{a=u}}}var Tr=jk(),l5=class{#t;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),dp(this.gcTime)&&(this.#t=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(yo?1/0:5*60*1e3))}clearGcTimeout(){this.#t&&(clearTimeout(this.#t),this.#t=void 0)}},Dk=class extends l5{#t;#e;#r;#n;#a;#i;#s;constructor(t){super(),this.#s=!1,this.#i=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#n=t.client,this.#r=this.#n.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#t=zk(this.options),this.state=t.state??this.#t,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#a?.promise}setOptions(t){this.options={...this.#i,...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(t,e){const r=fp(this.state.data,t,this.options);return this.#o({data:r,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),r}setState(t,e){this.#o({type:"setState",state:t,setStateOptions:e})}cancel(t){const e=this.#a?.promise;return this.#a?.cancel(t),e?e.then(tn).catch(tn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#t)}isActive(){return this.observers.some(t=>ea(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===r2||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>_i(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!t5(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#a?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#a?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#a&&(this.#s?this.#a.cancel({revert:!0}):this.#a.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#o({type:"invalidate"})}fetch(t,e){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#a)return this.#a.continueRetry(),this.#a.promise}if(t&&this.setOptions(t),!this.options.queryFn){const d=this.observers.find(h=>h.options.queryFn);d&&this.setOptions(d.options)}const r=new AbortController,n=d=>{Object.defineProperty(d,"signal",{enumerable:!0,get:()=>(this.#s=!0,r.signal)})},a=()=>{const d=n5(this.options,e),p=(()=>{const b={client:this.#n,queryKey:this.queryKey,meta:this.meta};return n(b),b})();return this.#s=!1,this.options.persister?this.options.persister(d,p,this):d(p)},l=(()=>{const d={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#n,state:this.state,fetchFn:a};return n(d),d})();this.options.behavior?.onFetch(l,this),this.#e=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==l.fetchOptions?.meta)&&this.#o({type:"fetch",meta:l.fetchOptions?.meta});const u=d=>{im(d)&&d.silent||this.#o({type:"error",error:d}),im(d)||(this.#r.config.onError?.(d,this),this.#r.config.onSettled?.(this.state.data,d,this)),this.scheduleGc()};return this.#a=o5({initialPromise:e?.initialPromise,fn:l.fetchFn,abort:r.abort.bind(r),onSuccess:d=>{if(d===void 0){u(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(d)}catch(h){u(h);return}this.#r.config.onSuccess?.(d,this),this.#r.config.onSettled?.(d,this.state.error,this),this.scheduleGc()},onError:u,onFail:(d,h)=>{this.#o({type:"failed",failureCount:d,error:h})},onPause:()=>{this.#o({type:"pause"})},onContinue:()=>{this.#o({type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}),this.#a.start()}#o(t){const e=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...u5(r.data,this.options),fetchMeta:t.meta??null};case"success":return this.#e=void 0,{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const n=t.error;return im(n)&&n.revert&&this.#e?{...this.#e,fetchStatus:"idle"}:{...r,error:n,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=e(this.state),Tr.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:t})})}};function u5(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:s5(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function zk(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=e!==void 0,n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Ok=class extends Ml{constructor(t={}){super(),this.config=t,this.#t=new Map}#t;build(t,e,r){const n=e.queryKey,a=e.queryHash??t2(n,e);let i=this.get(a);return i||(i=new Dk({client:t,queryKey:n,queryHash:a,options:t.defaultQueryOptions(e),state:r,defaultOptions:t.getQueryDefaults(n)}),this.add(i)),i}add(t){this.#t.has(t.queryHash)||(this.#t.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=this.#t.get(t.queryHash);e&&(t.destroy(),e===t&&this.#t.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Tr.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#t.get(t)}getAll(){return[...this.#t.values()]}find(t){const e={exact:!0,...t};return this.getAll().find(r=>mx(e,r))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(r=>mx(t,r)):e}notify(t){Tr.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){Tr.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Tr.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Rk=class extends l5{#t;#e;#r;constructor(t){super(),this.mutationId=t.mutationId,this.#e=t.mutationCache,this.#t=[],this.state=t.state||c5(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#t.includes(t)||(this.#t.push(t),this.clearGcTimeout(),this.#e.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#t=this.#t.filter(e=>e!==t),this.scheduleGc(),this.#e.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#e.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(t){const e=()=>{this.#n({type:"continue"})};this.#r=o5({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(a,i)=>{this.#n({type:"failed",failureCount:a,error:i})},onPause:()=>{this.#n({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#e.canRun(this)});const r=this.state.status==="pending",n=!this.#r.canStart();try{if(r)e();else{this.#n({type:"pending",variables:t,isPaused:n}),await this.#e.config.onMutate?.(t,this);const i=await this.options.onMutate?.(t);i!==this.state.context&&this.#n({type:"pending",context:i,variables:t,isPaused:n})}const a=await this.#r.start();return await this.#e.config.onSuccess?.(a,t,this.state.context,this),await this.options.onSuccess?.(a,t,this.state.context),await this.#e.config.onSettled?.(a,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(a,null,t,this.state.context),this.#n({type:"success",data:a}),a}catch(a){try{throw await this.#e.config.onError?.(a,t,this.state.context,this),await this.options.onError?.(a,t,this.state.context),await this.#e.config.onSettled?.(void 0,a,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,a,t,this.state.context),a}finally{this.#n({type:"error",error:a})}}finally{this.#e.runNext(this)}}#n(t){const e=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),Tr.batch(()=>{this.#t.forEach(r=>{r.onMutationUpdate(t)}),this.#e.notify({mutation:this,type:"updated",action:t})})}};function c5(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Fk=class extends Ml{constructor(t={}){super(),this.config=t,this.#t=new Set,this.#e=new Map,this.#r=0}#t;#e;#r;build(t,e,r){const n=new Rk({mutationCache:this,mutationId:++this.#r,options:t.defaultMutationOptions(e),state:r});return this.add(n),n}add(t){this.#t.add(t);const e=id(t);if(typeof e=="string"){const r=this.#e.get(e);r?r.push(t):this.#e.set(e,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#t.delete(t)){const e=id(t);if(typeof e=="string"){const r=this.#e.get(e);if(r)if(r.length>1){const n=r.indexOf(t);n!==-1&&r.splice(n,1)}else r[0]===t&&this.#e.delete(e)}}this.notify({type:"removed",mutation:t})}canRun(t){const e=id(t);if(typeof e=="string"){const n=this.#e.get(e)?.find(a=>a.state.status==="pending");return!n||n===t}else return!0}runNext(t){const e=id(t);return typeof e=="string"?this.#e.get(e)?.find(n=>n!==t&&n.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Tr.batch(()=>{this.#t.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#t.clear(),this.#e.clear()})}getAll(){return Array.from(this.#t)}find(t){const e={exact:!0,...t};return this.getAll().find(r=>px(e,r))}findAll(t={}){return this.getAll().filter(e=>px(t,e))}notify(t){Tr.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return Tr.batch(()=>Promise.all(t.map(e=>e.continue().catch(tn))))}};function id(t){return t.options.scope?.id}function yx(t){return{onFetch:(e,r)=>{const n=e.options,a=e.fetchOptions?.meta?.fetchMore?.direction,i=e.state.data?.pages||[],l=e.state.data?.pageParams||[];let u={pages:[],pageParams:[]},d=0;const h=async()=>{let p=!1;const b=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(e.signal.aborted?p=!0:e.signal.addEventListener("abort",()=>{p=!0}),e.signal)})},y=n5(e.options,e.fetchOptions),x=async(_,k,S)=>{if(p)return Promise.reject();if(k==null&&_.pages.length)return Promise.resolve(_);const C=(()=>{const O={client:e.client,queryKey:e.queryKey,pageParam:k,direction:S?"backward":"forward",meta:e.options.meta};return b(O),O})(),N=await y(C),{maxPages:D}=e.options,j=S?Ek:Ak;return{pages:j(_.pages,N,D),pageParams:j(_.pageParams,k,D)}};if(a&&i.length){const _=a==="backward",k=_?Lk:xx,S={pages:i,pageParams:l},A=k(n,S);u=await x(S,A,_)}else{const _=t??i.length;do{const k=d===0?l[0]??n.initialPageParam:xx(n,u);if(d>0&&k==null)break;u=await x(u,k),d++}while(d<_)}return u};e.options.persister?e.fetchFn=()=>e.options.persister?.(h,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r):e.fetchFn=h}}}function xx(t,{pages:e,pageParams:r}){const n=e.length-1;return e.length>0?t.getNextPageParam(e[n],e,r[n],r):void 0}function Lk(t,{pages:e,pageParams:r}){return e.length>0?t.getPreviousPageParam?.(e[0],e,r[0],r):void 0}var d5=class{#t;#e;#r;#n;#a;#i;#s;#o;constructor(t={}){this.#t=t.queryCache||new Ok,this.#e=t.mutationCache||new Fk,this.#r=t.defaultOptions||{},this.#n=new Map,this.#a=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#s=n2.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#t.onFocus())}),this.#o=th.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#t.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#s?.(),this.#s=void 0,this.#o?.(),this.#o=void 0)}isFetching(t){return this.#t.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#e.findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return this.#t.get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),r=this.#t.build(this,e),n=r.state.data;return n===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime(_i(e.staleTime,r))&&this.prefetchQuery(e),Promise.resolve(n))}getQueriesData(t){return this.#t.findAll(t).map(({queryKey:e,state:r})=>{const n=r.data;return[e,n]})}setQueryData(t,e,r){const n=this.defaultQueryOptions({queryKey:t}),i=this.#t.get(n.queryHash)?.state.data,l=wk(e,i);if(l!==void 0)return this.#t.build(this,n).setData(l,{...r,manual:!0})}setQueriesData(t,e,r){return Tr.batch(()=>this.#t.findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,r)]))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return this.#t.get(e.queryHash)?.state}removeQueries(t){const e=this.#t;Tr.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=this.#t;return Tr.batch(()=>(r.findAll(t).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const r={revert:!0,...e},n=Tr.batch(()=>this.#t.findAll(t).map(a=>a.cancel(r)));return Promise.all(n).then(tn).catch(tn)}invalidateQueries(t,e={}){return Tr.batch(()=>(this.#t.findAll(t).forEach(r=>{r.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},e)))}refetchQueries(t,e={}){const r={...e,cancelRefetch:e.cancelRefetch??!0},n=Tr.batch(()=>this.#t.findAll(t).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,r);return r.throwOnError||(i=i.catch(tn)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(tn)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const r=this.#t.build(this,e);return r.isStaleByTime(_i(e.staleTime,r))?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(tn).catch(tn)}fetchInfiniteQuery(t){return t.behavior=yx(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(tn).catch(tn)}ensureInfiniteQueryData(t){return t.behavior=yx(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return th.isOnline()?this.#e.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#t}getMutationCache(){return this.#e}getDefaultOptions(){return this.#r}setDefaultOptions(t){this.#r=t}setQueryDefaults(t,e){this.#n.set(xo(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...this.#n.values()],r={};return e.forEach(n=>{mc(t,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(t,e){this.#a.set(xo(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...this.#a.values()],r={};return e.forEach(n=>{mc(t,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const e={...this.#r.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=t2(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===r2&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#r.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#t.clear(),this.#e.clear()}},Pk=class extends Ml{constructor(t,e){super(),this.options=e,this.#t=t,this.#o=null,this.#s=mp(),this.options.experimental_prefetchInRender||this.#s.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(e)}#t;#e=void 0;#r=void 0;#n=void 0;#a;#i;#s;#o;#p;#h;#f;#u;#c;#l;#m=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#e.addObserver(this),vx(this.#e,this.options)?this.#d():this.updateResult(),this.#x())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return pp(this.#e,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return pp(this.#e,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#v(),this.#_(),this.#e.removeObserver(this)}setOptions(t){const e=this.options,r=this.#e;if(this.options=this.#t.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ea(this.options.enabled,this.#e)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#w(),this.#e.setOptions(this.options),e._defaulted&&!eh(this.options,e)&&this.#t.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#e,observer:this});const n=this.hasListeners();n&&_x(this.#e,r,this.options,e)&&this.#d(),this.updateResult(),n&&(this.#e!==r||ea(this.options.enabled,this.#e)!==ea(e.enabled,this.#e)||_i(this.options.staleTime,this.#e)!==_i(e.staleTime,this.#e))&&this.#g();const a=this.#b();n&&(this.#e!==r||ea(this.options.enabled,this.#e)!==ea(e.enabled,this.#e)||a!==this.#l)&&this.#y(a)}getOptimisticResult(t){const e=this.#t.getQueryCache().build(this.#t,t),r=this.createResult(e,t);return Ik(this,r)&&(this.#n=r,this.#i=this.options,this.#a=this.#e.state),r}getCurrentResult(){return this.#n}trackResult(t,e){return new Proxy(t,{get:(r,n)=>(this.trackProp(n),e?.(n),Reflect.get(r,n))})}trackProp(t){this.#m.add(t)}getCurrentQuery(){return this.#e}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=this.#t.defaultQueryOptions(t),r=this.#t.getQueryCache().build(this.#t,e);return r.fetch().then(()=>this.createResult(r,e))}fetch(t){return this.#d({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#n))}#d(t){this.#w();let e=this.#e.fetch(this.options,t);return t?.throwOnError||(e=e.catch(tn)),e}#g(){this.#v();const t=_i(this.options.staleTime,this.#e);if(yo||this.#n.isStale||!dp(t))return;const r=t5(this.#n.dataUpdatedAt,t)+1;this.#u=setTimeout(()=>{this.#n.isStale||this.updateResult()},r)}#b(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#e):this.options.refetchInterval)??!1}#y(t){this.#_(),this.#l=t,!(yo||ea(this.options.enabled,this.#e)===!1||!dp(this.#l)||this.#l===0)&&(this.#c=setInterval(()=>{(this.options.refetchIntervalInBackground||n2.isFocused())&&this.#d()},this.#l))}#x(){this.#g(),this.#y(this.#b())}#v(){this.#u&&(clearTimeout(this.#u),this.#u=void 0)}#_(){this.#c&&(clearInterval(this.#c),this.#c=void 0)}createResult(t,e){const r=this.#e,n=this.options,a=this.#n,i=this.#a,l=this.#i,d=t!==r?t.state:this.#r,{state:h}=t;let p={...h},b=!1,y;if(e._optimisticResults){const R=this.hasListeners(),B=!R&&vx(t,e),V=R&&_x(t,r,e,n);(B||V)&&(p={...p,...u5(h.data,t.options)}),e._optimisticResults==="isRestoring"&&(p.fetchStatus="idle")}let{error:x,errorUpdatedAt:_,status:k}=p;y=p.data;let S=!1;if(e.placeholderData!==void 0&&y===void 0&&k==="pending"){let R;a?.isPlaceholderData&&e.placeholderData===l?.placeholderData?(R=a.data,S=!0):R=typeof e.placeholderData=="function"?e.placeholderData(this.#f?.state.data,this.#f):e.placeholderData,R!==void 0&&(k="success",y=fp(a?.data,R,e),b=!0)}if(e.select&&y!==void 0&&!S)if(a&&y===i?.data&&e.select===this.#p)y=this.#h;else try{this.#p=e.select,y=e.select(y),y=fp(a?.data,y,e),this.#h=y,this.#o=null}catch(R){this.#o=R}this.#o&&(x=this.#o,y=this.#h,_=Date.now(),k="error");const A=p.fetchStatus==="fetching",C=k==="pending",N=k==="error",D=C&&A,j=y!==void 0,F={status:k,fetchStatus:p.fetchStatus,isPending:C,isSuccess:k==="success",isError:N,isInitialLoading:D,isLoading:D,data:y,dataUpdatedAt:p.dataUpdatedAt,error:x,errorUpdatedAt:_,failureCount:p.fetchFailureCount,failureReason:p.fetchFailureReason,errorUpdateCount:p.errorUpdateCount,isFetched:p.dataUpdateCount>0||p.errorUpdateCount>0,isFetchedAfterMount:p.dataUpdateCount>d.dataUpdateCount||p.errorUpdateCount>d.errorUpdateCount,isFetching:A,isRefetching:A&&!C,isLoadingError:N&&!j,isPaused:p.fetchStatus==="paused",isPlaceholderData:b,isRefetchError:N&&j,isStale:a2(t,e),refetch:this.refetch,promise:this.#s,isEnabled:ea(e.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const R=$=>{F.status==="error"?$.reject(F.error):F.data!==void 0&&$.resolve(F.data)},B=()=>{const $=this.#s=F.promise=mp();R($)},V=this.#s;switch(V.status){case"pending":t.queryHash===r.queryHash&&R(V);break;case"fulfilled":(F.status==="error"||F.data!==V.value)&&B();break;case"rejected":(F.status!=="error"||F.error!==V.reason)&&B();break}}return F}updateResult(){const t=this.#n,e=this.createResult(this.#e,this.options);if(this.#a=this.#e.state,this.#i=this.options,this.#a.data!==void 0&&(this.#f=this.#e),eh(e,t))return;this.#n=e;const r=()=>{if(!t)return!0;const{notifyOnChangeProps:n}=this.options,a=typeof n=="function"?n():n;if(a==="all"||!a&&!this.#m.size)return!0;const i=new Set(a??this.#m);return this.options.throwOnError&&i.add("error"),Object.keys(this.#n).some(l=>{const u=l;return this.#n[u]!==t[u]&&i.has(u)})};this.#k({listeners:r()})}#w(){const t=this.#t.getQueryCache().build(this.#t,this.options);if(t===this.#e)return;const e=this.#e;this.#e=t,this.#r=t.state,this.hasListeners()&&(e?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#x()}#k(t){Tr.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(this.#n)}),this.#t.getQueryCache().notify({query:this.#e,type:"observerResultsUpdated"})})}};function Bk(t,e){return ea(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function vx(t,e){return Bk(t,e)||t.state.data!==void 0&&pp(t,e,e.refetchOnMount)}function pp(t,e,r){if(ea(e.enabled,t)!==!1&&_i(e.staleTime,t)!=="static"){const n=typeof r=="function"?r(t):r;return n==="always"||n!==!1&&a2(t,e)}return!1}function _x(t,e,r,n){return(t!==e||ea(n.enabled,t)===!1)&&(!r.suspense||t.state.status!=="error")&&a2(t,r)}function a2(t,e){return ea(e.enabled,t)!==!1&&t.isStaleByTime(_i(e.staleTime,t))}function Ik(t,e){return!eh(t.getCurrentResult(),e)}var $k=class extends Ml{#t;#e=void 0;#r;#n;constructor(e,r){super(),this.#t=e,this.setOptions(r),this.bindMethods(),this.#a()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const r=this.options;this.options=this.#t.defaultMutationOptions(e),eh(this.options,r)||this.#t.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),r?.mutationKey&&this.options.mutationKey&&xo(r.mutationKey)!==xo(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(e){this.#a(),this.#i(e)}getCurrentResult(){return this.#e}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#a(),this.#i()}mutate(e,r){return this.#n=r,this.#r?.removeObserver(this),this.#r=this.#t.getMutationCache().build(this.#t,this.options),this.#r.addObserver(this),this.#r.execute(e)}#a(){const e=this.#r?.state??c5();this.#e={...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset}}#i(e){Tr.batch(()=>{if(this.#n&&this.hasListeners()){const r=this.#e.variables,n=this.#e.context;e?.type==="success"?(this.#n.onSuccess?.(e.data,r,n),this.#n.onSettled?.(e.data,null,r,n)):e?.type==="error"&&(this.#n.onError?.(e.error,r,n),this.#n.onSettled?.(void 0,e.error,r,n))}this.listeners.forEach(r=>{r(this.#e)})})}},h5=T.createContext(void 0),Hr=t=>{const e=T.useContext(h5);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},f5=({client:t,children:e})=>(T.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),m.jsx(h5.Provider,{value:t,children:e})),m5=T.createContext(!1),qk=()=>T.useContext(m5);m5.Provider;function Hk(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var Uk=T.createContext(Hk()),Vk=()=>T.useContext(Uk),Gk=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},Zk=t=>{T.useEffect(()=>{t.clearReset()},[t])},Kk=({result:t,errorResetBoundary:e,throwOnError:r,query:n,suspense:a})=>t.isError&&!e.isReset()&&!t.isFetching&&n&&(a&&t.data===void 0||a5(r,[t.error,n])),Yk=t=>{if(t.suspense){const e=n=>n==="static"?n:Math.max(n??1e3,1e3),r=t.staleTime;t.staleTime=typeof r=="function"?(...n)=>e(r(...n)):e(r),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},Xk=(t,e)=>t.isLoading&&t.isFetching&&!e,Qk=(t,e)=>t?.suspense&&e.isPending,wx=(t,e,r)=>e.fetchOptimistic(t).catch(()=>{r.clearReset()});function Wk(t,e,r){const n=qk(),a=Vk(),i=Hr(),l=i.defaultQueryOptions(t);i.getDefaultOptions().queries?._experimental_beforeQuery?.(l),l._optimisticResults=n?"isRestoring":"optimistic",Yk(l),Gk(l,a),Zk(a);const u=!i.getQueryCache().get(l.queryHash),[d]=T.useState(()=>new e(i,l)),h=d.getOptimisticResult(l),p=!n&&t.subscribed!==!1;if(T.useSyncExternalStore(T.useCallback(b=>{const y=p?d.subscribe(Tr.batchCalls(b)):tn;return d.updateResult(),y},[d,p]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),T.useEffect(()=>{d.setOptions(l)},[l,d]),Qk(l,h))throw wx(l,d,a);if(Kk({result:h,errorResetBoundary:a,throwOnError:l.throwOnError,query:i.getQueryCache().get(l.queryHash),suspense:l.suspense}))throw h.error;return i.getDefaultOptions().queries?._experimental_afterQuery?.(l,h),l.experimental_prefetchInRender&&!yo&&Xk(h,n)&&(u?wx(l,d,a):i.getQueryCache().get(l.queryHash)?.promise)?.catch(tn).finally(()=>{d.updateResult()}),l.notifyOnChangeProps?h:d.trackResult(h)}function lr(t,e){return Wk(t,Pk)}function pt(t,e){const r=Hr(),[n]=T.useState(()=>new $k(r,t));T.useEffect(()=>{n.setOptions(t)},[n,t]);const a=T.useSyncExternalStore(T.useCallback(l=>n.subscribe(Tr.batchCalls(l)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),i=T.useCallback((l,u)=>{n.mutate(l,u).catch(tn)},[n]);if(a.error&&a5(n.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:i,mutateAsync:a.mutate}}var Lu={},kx;function Jk(){if(kx)return Lu;kx=1,Object.defineProperty(Lu,"__esModule",{value:!0}),Lu.parse=l,Lu.serialize=h;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,r=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,n=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,i=(()=>{const y=function(){};return y.prototype=Object.create(null),y})();function l(y,x){const _=new i,k=y.length;if(k<2)return _;const S=x?.decode||p;let A=0;do{const C=y.indexOf("=",A);if(C===-1)break;const N=y.indexOf(";",A),D=N===-1?k:N;if(C>D){A=y.lastIndexOf(";",C-1)+1;continue}const j=u(y,A,C),O=d(y,C,j),F=y.slice(j,O);if(_[F]===void 0){let R=u(y,C+1,D),B=d(y,D,R);const V=S(y.slice(R,B));_[F]=V}A=D+1}while(A<k);return _}function u(y,x,_){do{const k=y.charCodeAt(x);if(k!==32&&k!==9)return x}while(++x<_);return _}function d(y,x,_){for(;x>_;){const k=y.charCodeAt(--x);if(k!==32&&k!==9)return x+1}return _}function h(y,x,_){const k=_?.encode||encodeURIComponent;if(!t.test(y))throw new TypeError(`argument name is invalid: ${y}`);const S=k(x);if(!e.test(S))throw new TypeError(`argument val is invalid: ${x}`);let A=y+"="+S;if(!_)return A;if(_.maxAge!==void 0){if(!Number.isInteger(_.maxAge))throw new TypeError(`option maxAge is invalid: ${_.maxAge}`);A+="; Max-Age="+_.maxAge}if(_.domain){if(!r.test(_.domain))throw new TypeError(`option domain is invalid: ${_.domain}`);A+="; Domain="+_.domain}if(_.path){if(!n.test(_.path))throw new TypeError(`option path is invalid: ${_.path}`);A+="; Path="+_.path}if(_.expires){if(!b(_.expires)||!Number.isFinite(_.expires.valueOf()))throw new TypeError(`option expires is invalid: ${_.expires}`);A+="; Expires="+_.expires.toUTCString()}if(_.httpOnly&&(A+="; HttpOnly"),_.secure&&(A+="; Secure"),_.partitioned&&(A+="; Partitioned"),_.priority)switch(typeof _.priority=="string"?_.priority.toLowerCase():void 0){case"low":A+="; Priority=Low";break;case"medium":A+="; Priority=Medium";break;case"high":A+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${_.priority}`)}if(_.sameSite)switch(typeof _.sameSite=="string"?_.sameSite.toLowerCase():_.sameSite){case!0:case"strict":A+="; SameSite=Strict";break;case"lax":A+="; SameSite=Lax";break;case"none":A+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${_.sameSite}`)}return A}function p(y){if(y.indexOf("%")===-1)return y;try{return decodeURIComponent(y)}catch{return y}}function b(y){return a.call(y)==="[object Date]"}return Lu}Jk();var Sx="popstate";function eS(t={}){function e(a,i){let{pathname:l="/",search:u="",hash:d=""}=_o(a.location.hash.substring(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),gp("",{pathname:l,search:u,hash:d},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(a,i){let l=a.document.querySelector("base"),u="";if(l&&l.getAttribute("href")){let d=a.location.href,h=d.indexOf("#");u=h===-1?d:d.slice(0,h)}return u+"#"+(typeof i=="string"?i:pc(i))}function n(a,i){In(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(i)})`)}return rS(e,r,n,t)}function Xt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function In(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function tS(){return Math.random().toString(36).substring(2,10)}function Ax(t,e){return{usr:t.state,key:t.key,idx:e}}function gp(t,e,r=null,n){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?_o(e):e,state:r,key:e&&e.key||n||tS()}}function pc({pathname:t="/",search:e="",hash:r=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function _o(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substring(r),t=t.substring(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substring(n),t=t.substring(0,n)),t&&(e.pathname=t)}return e}function rS(t,e,r,n={}){let{window:a=document.defaultView,v5Compat:i=!1}=n,l=a.history,u="POP",d=null,h=p();h==null&&(h=0,l.replaceState({...l.state,idx:h},""));function p(){return(l.state||{idx:null}).idx}function b(){u="POP";let S=p(),A=S==null?null:S-h;h=S,d&&d({action:u,location:k.location,delta:A})}function y(S,A){u="PUSH";let C=gp(k.location,S,A);r&&r(C,S),h=p()+1;let N=Ax(C,h),D=k.createHref(C);try{l.pushState(N,"",D)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;a.location.assign(D)}i&&d&&d({action:u,location:k.location,delta:1})}function x(S,A){u="REPLACE";let C=gp(k.location,S,A);r&&r(C,S),h=p();let N=Ax(C,h),D=k.createHref(C);l.replaceState(N,"",D),i&&d&&d({action:u,location:k.location,delta:0})}function _(S){return nS(S)}let k={get action(){return u},get location(){return t(a,l)},listen(S){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(Sx,b),d=S,()=>{a.removeEventListener(Sx,b),d=null}},createHref(S){return e(a,S)},createURL:_,encodeLocation(S){let A=_(S);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:y,replace:x,go(S){return l.go(S)}};return k}function nS(t,e=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Xt(r,"No window.location.(origin|href) available to create URL");let n=typeof t=="string"?t:pc(t);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function p5(t,e,r="/"){return aS(t,e,r,!1)}function aS(t,e,r,n){let a=typeof e=="string"?_o(e):e,i=Ms(a.pathname||"/",r);if(i==null)return null;let l=g5(t);sS(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let h=gS(i);u=mS(l[d],h,n)}return u}function g5(t,e=[],r=[],n=""){let a=(i,l,u)=>{let d={relativePath:u===void 0?i.path||"":u,caseSensitive:i.caseSensitive===!0,childrenIndex:l,route:i};d.relativePath.startsWith("/")&&(Xt(d.relativePath.startsWith(n),`Absolute route path "${d.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(n.length));let h=Cs([n,d.relativePath]),p=r.concat(d);i.children&&i.children.length>0&&(Xt(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),g5(i.children,e,p,h)),!(i.path==null&&!i.index)&&e.push({path:h,score:hS(h,i.index),routesMeta:p})};return t.forEach((i,l)=>{if(i.path===""||!i.path?.includes("?"))a(i,l);else for(let u of b5(i.path))a(i,l,u)}),e}function b5(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let l=b5(n.join("/")),u=[];return u.push(...l.map(d=>d===""?i:[i,d].join("/"))),a&&u.push(...l),u.map(d=>t.startsWith("/")&&d===""?"/":d)}function sS(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:fS(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var iS=/^:[\w-]+$/,oS=3,lS=2,uS=1,cS=10,dS=-2,Ex=t=>t==="*";function hS(t,e){let r=t.split("/"),n=r.length;return r.some(Ex)&&(n+=dS),e&&(n+=lS),r.filter(a=>!Ex(a)).reduce((a,i)=>a+(iS.test(i)?oS:i===""?uS:cS),n)}function fS(t,e){return t.length===e.length&&t.slice(0,-1).every((n,a)=>n===e[a])?t[t.length-1]-e[e.length-1]:0}function mS(t,e,r=!1){let{routesMeta:n}=t,a={},i="/",l=[];for(let u=0;u<n.length;++u){let d=n[u],h=u===n.length-1,p=i==="/"?e:e.slice(i.length)||"/",b=rh({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},p),y=d.route;if(!b&&h&&r&&!n[n.length-1].route.index&&(b=rh({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},p)),!b)return null;Object.assign(a,b.params),l.push({params:a,pathname:Cs([i,b.pathname]),pathnameBase:vS(Cs([i,b.pathnameBase])),route:y}),b.pathnameBase!=="/"&&(i=Cs([i,b.pathnameBase]))}return l}function rh(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=pS(t.path,t.caseSensitive,t.end),a=e.match(r);if(!a)return null;let i=a[0],l=i.replace(/(.)\/+$/,"$1"),u=a.slice(1);return{params:n.reduce((h,{paramName:p,isOptional:b},y)=>{if(p==="*"){let _=u[y]||"";l=i.slice(0,i.length-_.length).replace(/(.)\/+$/,"$1")}const x=u[y];return b&&!x?h[p]=void 0:h[p]=(x||"").replace(/%2F/g,"/"),h},{}),pathname:i,pathnameBase:l,pattern:t}}function pS(t,e=!1,r=!0){In(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let n=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(n.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),n]}function gS(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return In(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Ms(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function bS(t,e="/"){let{pathname:r,search:n="",hash:a=""}=typeof t=="string"?_o(t):t;return{pathname:r?r.startsWith("/")?r:yS(r,e):e,search:_S(n),hash:wS(a)}}function yS(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function om(t,e,r,n){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function xS(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function s2(t){let e=xS(t);return e.map((r,n)=>n===e.length-1?r.pathname:r.pathnameBase)}function i2(t,e,r,n=!1){let a;typeof t=="string"?a=_o(t):(a={...t},Xt(!a.pathname||!a.pathname.includes("?"),om("?","pathname","search",a)),Xt(!a.pathname||!a.pathname.includes("#"),om("#","pathname","hash",a)),Xt(!a.search||!a.search.includes("#"),om("#","search","hash",a)));let i=t===""||a.pathname==="",l=i?"/":a.pathname,u;if(l==null)u=r;else{let b=e.length-1;if(!n&&l.startsWith("..")){let y=l.split("/");for(;y[0]==="..";)y.shift(),b-=1;a.pathname=y.join("/")}u=b>=0?e[b]:"/"}let d=bS(a,u),h=l&&l!=="/"&&l.endsWith("/"),p=(i||l===".")&&r.endsWith("/");return!d.pathname.endsWith("/")&&(h||p)&&(d.pathname+="/"),d}var Cs=t=>t.join("/").replace(/\/\/+/g,"/"),vS=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),_S=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,wS=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function kS(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var y5=["POST","PUT","PATCH","DELETE"];new Set(y5);var SS=["GET",...y5];new Set(SS);var jl=T.createContext(null);jl.displayName="DataRouter";var Sh=T.createContext(null);Sh.displayName="DataRouterState";var x5=T.createContext({isTransitioning:!1});x5.displayName="ViewTransition";var AS=T.createContext(new Map);AS.displayName="Fetchers";var ES=T.createContext(null);ES.displayName="Await";var wa=T.createContext(null);wa.displayName="Navigation";var Dc=T.createContext(null);Dc.displayName="Location";var Ka=T.createContext({outlet:null,matches:[],isDataRoute:!1});Ka.displayName="Route";var o2=T.createContext(null);o2.displayName="RouteError";function CS(t,{relative:e}={}){Xt(Dl(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=T.useContext(wa),{hash:a,pathname:i,search:l}=zc(t,{relative:e}),u=i;return r!=="/"&&(u=i==="/"?r:Cs([r,i])),n.createHref({pathname:u,search:l,hash:a})}function Dl(){return T.useContext(Dc)!=null}function ka(){return Xt(Dl(),"useLocation() may be used only in the context of a <Router> component."),T.useContext(Dc).location}var v5="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function _5(t){T.useContext(wa).static||T.useLayoutEffect(t)}function zl(){let{isDataRoute:t}=T.useContext(Ka);return t?IS():TS()}function TS(){Xt(Dl(),"useNavigate() may be used only in the context of a <Router> component.");let t=T.useContext(jl),{basename:e,navigator:r}=T.useContext(wa),{matches:n}=T.useContext(Ka),{pathname:a}=ka(),i=JSON.stringify(s2(n)),l=T.useRef(!1);return _5(()=>{l.current=!0}),T.useCallback((d,h={})=>{if(In(l.current,v5),!l.current)return;if(typeof d=="number"){r.go(d);return}let p=i2(d,JSON.parse(i),a,h.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Cs([e,p.pathname])),(h.replace?r.replace:r.push)(p,h.state,h)},[e,r,i,a,t])}T.createContext(null);function zc(t,{relative:e}={}){let{matches:r}=T.useContext(Ka),{pathname:n}=ka(),a=JSON.stringify(s2(r));return T.useMemo(()=>i2(t,JSON.parse(a),n,e==="path"),[t,a,n,e])}function NS(t,e){return w5(t,e)}function w5(t,e,r,n){Xt(Dl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=T.useContext(wa),{matches:i}=T.useContext(Ka),l=i[i.length-1],u=l?l.params:{},d=l?l.pathname:"/",h=l?l.pathnameBase:"/",p=l&&l.route;{let A=p&&p.path||"";k5(d,!p||A.endsWith("*")||A.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${A}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${A}"> to <Route path="${A==="/"?"*":`${A}/*`}">.`)}let b=ka(),y;if(e){let A=typeof e=="string"?_o(e):e;Xt(h==="/"||A.pathname?.startsWith(h),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${A.pathname}" was given in the \`location\` prop.`),y=A}else y=b;let x=y.pathname||"/",_=x;if(h!=="/"){let A=h.replace(/^\//,"").split("/");_="/"+x.replace(/^\//,"").split("/").slice(A.length).join("/")}let k=p5(t,{pathname:_});In(p||k!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),In(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let S=OS(k&&k.map(A=>Object.assign({},A,{params:Object.assign({},u,A.params),pathname:Cs([h,a.encodeLocation?a.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?h:Cs([h,a.encodeLocation?a.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),i,r,n);return e&&S?T.createElement(Dc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},S):S}function MS(){let t=BS(),e=kS(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},l=null;return console.error("Error handled by React Router default ErrorBoundary:",t),l=T.createElement(T.Fragment,null,T.createElement("p",null," Hey developer "),T.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",T.createElement("code",{style:i},"ErrorBoundary")," or"," ",T.createElement("code",{style:i},"errorElement")," prop on your route.")),T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},e),r?T.createElement("pre",{style:a},r):null,l)}var jS=T.createElement(MS,null),DS=class extends T.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?T.createElement(Ka.Provider,{value:this.props.routeContext},T.createElement(o2.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function zS({routeContext:t,match:e,children:r}){let n=T.useContext(jl);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),T.createElement(Ka.Provider,{value:t},r)}function OS(t,e=[],r=null,n=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let a=t,i=r?.errors;if(i!=null){let d=a.findIndex(h=>h.route.id&&i?.[h.route.id]!==void 0);Xt(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),a=a.slice(0,Math.min(a.length,d+1))}let l=!1,u=-1;if(r)for(let d=0;d<a.length;d++){let h=a[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:p,errors:b}=r,y=h.route.loader&&!p.hasOwnProperty(h.route.id)&&(!b||b[h.route.id]===void 0);if(h.route.lazy||y){l=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((d,h,p)=>{let b,y=!1,x=null,_=null;r&&(b=i&&h.route.id?i[h.route.id]:void 0,x=h.route.errorElement||jS,l&&(u<0&&p===0?(k5("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,_=null):u===p&&(y=!0,_=h.route.hydrateFallbackElement||null)));let k=e.concat(a.slice(0,p+1)),S=()=>{let A;return b?A=x:y?A=_:h.route.Component?A=T.createElement(h.route.Component,null):h.route.element?A=h.route.element:A=d,T.createElement(zS,{match:h,routeContext:{outlet:d,matches:k,isDataRoute:r!=null},children:A})};return r&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?T.createElement(DS,{location:r.location,revalidation:r.revalidation,component:x,error:b,children:S(),routeContext:{outlet:null,matches:k,isDataRoute:!0}}):S()},null)}function l2(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function RS(t){let e=T.useContext(jl);return Xt(e,l2(t)),e}function FS(t){let e=T.useContext(Sh);return Xt(e,l2(t)),e}function LS(t){let e=T.useContext(Ka);return Xt(e,l2(t)),e}function u2(t){let e=LS(t),r=e.matches[e.matches.length-1];return Xt(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function PS(){return u2("useRouteId")}function BS(){let t=T.useContext(o2),e=FS("useRouteError"),r=u2("useRouteError");return t!==void 0?t:e.errors?.[r]}function IS(){let{router:t}=RS("useNavigate"),e=u2("useNavigate"),r=T.useRef(!1);return _5(()=>{r.current=!0}),T.useCallback(async(a,i={})=>{In(r.current,v5),r.current&&(typeof a=="number"?t.navigate(a):await t.navigate(a,{fromRouteId:e,...i}))},[t,e])}var Cx={};function k5(t,e,r){!e&&!Cx[t]&&(Cx[t]=!0,In(!1,r))}T.memo($S);function $S({routes:t,future:e,state:r}){return w5(t,void 0,r,e)}function qS({to:t,replace:e,state:r,relative:n}){Xt(Dl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=T.useContext(wa);In(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=T.useContext(Ka),{pathname:l}=ka(),u=zl(),d=i2(t,s2(i),l,n==="path"),h=JSON.stringify(d);return T.useEffect(()=>{u(JSON.parse(h),{replace:e,state:r,relative:n})},[u,h,n,e,r]),null}function ci(t){Xt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function HS({basename:t="/",children:e=null,location:r,navigationType:n="POP",navigator:a,static:i=!1}){Xt(!Dl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),u=T.useMemo(()=>({basename:l,navigator:a,static:i,future:{}}),[l,a,i]);typeof r=="string"&&(r=_o(r));let{pathname:d="/",search:h="",hash:p="",state:b=null,key:y="default"}=r,x=T.useMemo(()=>{let _=Ms(d,l);return _==null?null:{location:{pathname:_,search:h,hash:p,state:b,key:y},navigationType:n}},[l,d,h,p,b,y,n]);return In(x!=null,`<Router basename="${l}"> is not able to match the URL "${d}${h}${p}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:T.createElement(wa.Provider,{value:u},T.createElement(Dc.Provider,{children:e,value:x}))}function US({children:t,location:e}){return NS(bp(t),e)}function bp(t,e=[]){let r=[];return T.Children.forEach(t,(n,a)=>{if(!T.isValidElement(n))return;let i=[...e,a];if(n.type===T.Fragment){r.push.apply(r,bp(n.props.children,i));return}Xt(n.type===ci,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Xt(!n.props.index||!n.props.children,"An index route cannot have child routes.");let l={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=bp(n.props.children,i)),r.push(l)}),r}var Ud="get",Vd="application/x-www-form-urlencoded";function Ah(t){return t!=null&&typeof t.tagName=="string"}function VS(t){return Ah(t)&&t.tagName.toLowerCase()==="button"}function GS(t){return Ah(t)&&t.tagName.toLowerCase()==="form"}function ZS(t){return Ah(t)&&t.tagName.toLowerCase()==="input"}function KS(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function YS(t,e){return t.button===0&&(!e||e==="_self")&&!KS(t)}function yp(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let n=t[r];return e.concat(Array.isArray(n)?n.map(a=>[r,a]):[[r,n]])},[]))}function XS(t,e){let r=yp(t);return e&&e.forEach((n,a)=>{r.has(a)||e.getAll(a).forEach(i=>{r.append(a,i)})}),r}var od=null;function QS(){if(od===null)try{new FormData(document.createElement("form"),0),od=!1}catch{od=!0}return od}var WS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function lm(t){return t!=null&&!WS.has(t)?(In(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Vd}"`),null):t}function JS(t,e){let r,n,a,i,l;if(GS(t)){let u=t.getAttribute("action");n=u?Ms(u,e):null,r=t.getAttribute("method")||Ud,a=lm(t.getAttribute("enctype"))||Vd,i=new FormData(t)}else if(VS(t)||ZS(t)&&(t.type==="submit"||t.type==="image")){let u=t.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=t.getAttribute("formaction")||u.getAttribute("action");if(n=d?Ms(d,e):null,r=t.getAttribute("formmethod")||u.getAttribute("method")||Ud,a=lm(t.getAttribute("formenctype"))||lm(u.getAttribute("enctype"))||Vd,i=new FormData(u,t),!QS()){let{name:h,type:p,value:b}=t;if(p==="image"){let y=h?`${h}.`:"";i.append(`${y}x`,"0"),i.append(`${y}y`,"0")}else h&&i.append(h,b)}}else{if(Ah(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Ud,n=null,a=Vd,l=t}return i&&a==="text/plain"&&(l=i,i=void 0),{action:n,method:r.toLowerCase(),encType:a,formData:i,body:l}}function c2(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function eA(t,e){if(t.id in e)return e[t.id];try{let r=await import(t.module);return e[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function tA(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function rA(t,e,r){let n=await Promise.all(t.map(async a=>{let i=e.routes[a.route.id];if(i){let l=await eA(i,r);return l.links?l.links():[]}return[]}));return iA(n.flat(1).filter(tA).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function Tx(t,e,r,n,a,i){let l=(d,h)=>r[h]?d.route.id!==r[h].route.id:!0,u=(d,h)=>r[h].pathname!==d.pathname||r[h].route.path?.endsWith("*")&&r[h].params["*"]!==d.params["*"];return i==="assets"?e.filter((d,h)=>l(d,h)||u(d,h)):i==="data"?e.filter((d,h)=>{let p=n.routes[d.route.id];if(!p||!p.hasLoader)return!1;if(l(d,h)||u(d,h))return!0;if(d.route.shouldRevalidate){let b=d.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function nA(t,e,{includeHydrateFallback:r}={}){return aA(t.map(n=>{let a=e.routes[n.route.id];if(!a)return[];let i=[a.module];return a.clientActionModule&&(i=i.concat(a.clientActionModule)),a.clientLoaderModule&&(i=i.concat(a.clientLoaderModule)),r&&a.hydrateFallbackModule&&(i=i.concat(a.hydrateFallbackModule)),a.imports&&(i=i.concat(a.imports)),i}).flat(1))}function aA(t){return[...new Set(t)]}function sA(t){let e={},r=Object.keys(t).sort();for(let n of r)e[n]=t[n];return e}function iA(t,e){let r=new Set;return new Set(e),t.reduce((n,a)=>{let i=JSON.stringify(sA(a));return r.has(i)||(r.add(i),n.push({key:i,link:a})),n},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var oA=new Set([100,101,204,205]);function lA(t,e){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname="_root.data":e&&Ms(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.data`:r.pathname=`${r.pathname.replace(/\/$/,"")}.data`,r}function S5(){let t=T.useContext(jl);return c2(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function uA(){let t=T.useContext(Sh);return c2(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var d2=T.createContext(void 0);d2.displayName="FrameworkContext";function A5(){let t=T.useContext(d2);return c2(t,"You must render this element inside a <HydratedRouter> element"),t}function cA(t,e){let r=T.useContext(d2),[n,a]=T.useState(!1),[i,l]=T.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:h,onMouseLeave:p,onTouchStart:b}=e,y=T.useRef(null);T.useEffect(()=>{if(t==="render"&&l(!0),t==="viewport"){let k=A=>{A.forEach(C=>{l(C.isIntersecting)})},S=new IntersectionObserver(k,{threshold:.5});return y.current&&S.observe(y.current),()=>{S.disconnect()}}},[t]),T.useEffect(()=>{if(n){let k=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(k)}}},[n]);let x=()=>{a(!0)},_=()=>{a(!1),l(!1)};return r?t!=="intent"?[i,y,{}]:[i,y,{onFocus:Pu(u,x),onBlur:Pu(d,_),onMouseEnter:Pu(h,x),onMouseLeave:Pu(p,_),onTouchStart:Pu(b,x)}]:[!1,y,{}]}function Pu(t,e){return r=>{t&&t(r),r.defaultPrevented||e(r)}}function dA({page:t,...e}){let{router:r}=S5(),n=T.useMemo(()=>p5(r.routes,t,r.basename),[r.routes,t,r.basename]);return n?T.createElement(fA,{page:t,matches:n,...e}):null}function hA(t){let{manifest:e,routeModules:r}=A5(),[n,a]=T.useState([]);return T.useEffect(()=>{let i=!1;return rA(t,e,r).then(l=>{i||a(l)}),()=>{i=!0}},[t,e,r]),n}function fA({page:t,matches:e,...r}){let n=ka(),{manifest:a,routeModules:i}=A5(),{basename:l}=S5(),{loaderData:u,matches:d}=uA(),h=T.useMemo(()=>Tx(t,e,d,a,n,"data"),[t,e,d,a,n]),p=T.useMemo(()=>Tx(t,e,d,a,n,"assets"),[t,e,d,a,n]),b=T.useMemo(()=>{if(t===n.pathname+n.search+n.hash)return[];let _=new Set,k=!1;if(e.forEach(A=>{let C=a.routes[A.route.id];!C||!C.hasLoader||(!h.some(N=>N.route.id===A.route.id)&&A.route.id in u&&i[A.route.id]?.shouldRevalidate||C.hasClientLoader?k=!0:_.add(A.route.id))}),_.size===0)return[];let S=lA(t,l);return k&&_.size>0&&S.searchParams.set("_routes",e.filter(A=>_.has(A.route.id)).map(A=>A.route.id).join(",")),[S.pathname+S.search]},[l,u,n,a,h,e,t,i]),y=T.useMemo(()=>nA(p,a),[p,a]),x=hA(p);return T.createElement(T.Fragment,null,b.map(_=>T.createElement("link",{key:_,rel:"prefetch",as:"fetch",href:_,...r})),y.map(_=>T.createElement("link",{key:_,rel:"modulepreload",href:_,...r})),x.map(({key:_,link:k})=>T.createElement("link",{key:_,...k})))}function mA(...t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var E5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{E5&&(window.__reactRouterVersion="7.6.3")}catch{}function pA({basename:t,children:e,window:r}){let n=T.useRef();n.current==null&&(n.current=eS({window:r,v5Compat:!0}));let a=n.current,[i,l]=T.useState({action:a.action,location:a.location}),u=T.useCallback(d=>{T.startTransition(()=>l(d))},[l]);return T.useLayoutEffect(()=>a.listen(u),[a,u]),T.createElement(HS,{basename:t,children:e,location:i.location,navigationType:i.action,navigator:a})}var C5=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,T5=T.forwardRef(function({onClick:e,discover:r="render",prefetch:n="none",relative:a,reloadDocument:i,replace:l,state:u,target:d,to:h,preventScrollReset:p,viewTransition:b,...y},x){let{basename:_}=T.useContext(wa),k=typeof h=="string"&&C5.test(h),S,A=!1;if(typeof h=="string"&&k&&(S=h,E5))try{let B=new URL(window.location.href),V=h.startsWith("//")?new URL(B.protocol+h):new URL(h),$=Ms(V.pathname,_);V.origin===B.origin&&$!=null?h=$+V.search+V.hash:A=!0}catch{In(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let C=CS(h,{relative:a}),[N,D,j]=cA(n,y),O=xA(h,{replace:l,state:u,target:d,preventScrollReset:p,relative:a,viewTransition:b});function F(B){e&&e(B),B.defaultPrevented||O(B)}let R=T.createElement("a",{...y,...j,href:S||C,onClick:A||i?e:F,ref:mA(x,D),target:d,"data-discover":!k&&r==="render"?"true":void 0});return N&&!k?T.createElement(T.Fragment,null,R,T.createElement(dA,{page:C})):R});T5.displayName="Link";var gA=T.forwardRef(function({"aria-current":e="page",caseSensitive:r=!1,className:n="",end:a=!1,style:i,to:l,viewTransition:u,children:d,...h},p){let b=zc(l,{relative:h.relative}),y=ka(),x=T.useContext(Sh),{navigator:_,basename:k}=T.useContext(wa),S=x!=null&&AA(b)&&u===!0,A=_.encodeLocation?_.encodeLocation(b).pathname:b.pathname,C=y.pathname,N=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;r||(C=C.toLowerCase(),N=N?N.toLowerCase():null,A=A.toLowerCase()),N&&k&&(N=Ms(N,k)||N);const D=A!=="/"&&A.endsWith("/")?A.length-1:A.length;let j=C===A||!a&&C.startsWith(A)&&C.charAt(D)==="/",O=N!=null&&(N===A||!a&&N.startsWith(A)&&N.charAt(A.length)==="/"),F={isActive:j,isPending:O,isTransitioning:S},R=j?e:void 0,B;typeof n=="function"?B=n(F):B=[n,j?"active":null,O?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let V=typeof i=="function"?i(F):i;return T.createElement(T5,{...h,"aria-current":R,className:B,ref:p,style:V,to:l,viewTransition:u},typeof d=="function"?d(F):d)});gA.displayName="NavLink";var bA=T.forwardRef(({discover:t="render",fetcherKey:e,navigate:r,reloadDocument:n,replace:a,state:i,method:l=Ud,action:u,onSubmit:d,relative:h,preventScrollReset:p,viewTransition:b,...y},x)=>{let _=kA(),k=SA(u,{relative:h}),S=l.toLowerCase()==="get"?"get":"post",A=typeof u=="string"&&C5.test(u),C=N=>{if(d&&d(N),N.defaultPrevented)return;N.preventDefault();let D=N.nativeEvent.submitter,j=D?.getAttribute("formmethod")||l;_(D||N.currentTarget,{fetcherKey:e,method:j,navigate:r,replace:a,state:i,relative:h,preventScrollReset:p,viewTransition:b})};return T.createElement("form",{ref:x,method:S,action:k,onSubmit:n?d:C,...y,"data-discover":!A&&t==="render"?"true":void 0})});bA.displayName="Form";function yA(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function N5(t){let e=T.useContext(jl);return Xt(e,yA(t)),e}function xA(t,{target:e,replace:r,state:n,preventScrollReset:a,relative:i,viewTransition:l}={}){let u=zl(),d=ka(),h=zc(t,{relative:i});return T.useCallback(p=>{if(YS(p,e)){p.preventDefault();let b=r!==void 0?r:pc(d)===pc(h);u(t,{replace:b,state:n,preventScrollReset:a,relative:i,viewTransition:l})}},[d,u,h,r,n,e,t,a,i,l])}function vA(t){In(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=T.useRef(yp(t)),r=T.useRef(!1),n=ka(),a=T.useMemo(()=>XS(n.search,r.current?null:e.current),[n.search]),i=zl(),l=T.useCallback((u,d)=>{const h=yp(typeof u=="function"?u(a):u);r.current=!0,i("?"+h,d)},[i,a]);return[a,l]}var _A=0,wA=()=>`__${String(++_A)}__`;function kA(){let{router:t}=N5("useSubmit"),{basename:e}=T.useContext(wa),r=PS();return T.useCallback(async(n,a={})=>{let{action:i,method:l,encType:u,formData:d,body:h}=JS(n,e);if(a.navigate===!1){let p=a.fetcherKey||wA();await t.fetch(p,r,a.action||i,{preventScrollReset:a.preventScrollReset,formData:d,body:h,formMethod:a.method||l,formEncType:a.encType||u,flushSync:a.flushSync})}else await t.navigate(a.action||i,{preventScrollReset:a.preventScrollReset,formData:d,body:h,formMethod:a.method||l,formEncType:a.encType||u,replace:a.replace,state:a.state,fromRouteId:r,flushSync:a.flushSync,viewTransition:a.viewTransition})},[t,e,r])}function SA(t,{relative:e}={}){let{basename:r}=T.useContext(wa),n=T.useContext(Ka);Xt(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),i={...zc(t||".",{relative:e})},l=ka();if(t==null){i.search=l.search;let u=new URLSearchParams(i.search),d=u.getAll("index");if(d.some(p=>p==="")){u.delete("index"),d.filter(b=>b).forEach(b=>u.append("index",b));let p=u.toString();i.search=p?`?${p}`:""}}return(!t||t===".")&&a.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:Cs([r,i.pathname])),pc(i)}function AA(t,e={}){let r=T.useContext(x5);Xt(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=N5("useViewTransitionState"),a=zc(t,{relative:e.relative});if(!r.isTransitioning)return!1;let i=Ms(r.currentLocation.pathname,n)||r.currentLocation.pathname,l=Ms(r.nextLocation.pathname,n)||r.nextLocation.pathname;return rh(a.pathname,l)!=null||rh(a.pathname,i)!=null}[...oA];var gc=e5();const h2=T.createContext(void 0),Lr=()=>{const t=T.useContext(h2);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t};function EA(){const{expiresAt:t}=Lr(),[e,r]=T.useState(null);return T.useEffect(()=>{if(!t){r(null);return}const n=()=>{const i=t-Date.now();r(i>0?i:0)};n();const a=setInterval(n,1e3);return()=>clearInterval(a)},[t]),e}function ge(t,e,r){function n(u,d){var h;Object.defineProperty(u,"_zod",{value:u._zod??{},enumerable:!1}),(h=u._zod).traits??(h.traits=new Set),u._zod.traits.add(t),e(u,d);for(const p in l.prototype)p in u||Object.defineProperty(u,p,{value:l.prototype[p].bind(u)});u._zod.constr=l,u._zod.def=d}const a=r?.Parent??Object;class i extends a{}Object.defineProperty(i,"name",{value:t});function l(u){var d;const h=r?.Parent?new i:this;n(h,u),(d=h._zod).deferred??(d.deferred=[]);for(const p of h._zod.deferred)p();return h}return Object.defineProperty(l,"init",{value:n}),Object.defineProperty(l,Symbol.hasInstance,{value:u=>r?.Parent&&u instanceof r.Parent?!0:u?._zod?.traits?.has(t)}),Object.defineProperty(l,"name",{value:t}),l}class bc extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const M5={};function Si(t){return M5}function CA(t){const e=Object.values(t).filter(n=>typeof n=="number");return Object.entries(t).filter(([n,a])=>e.indexOf(+n)===-1).map(([n,a])=>a)}function TA(t,e){return typeof e=="bigint"?e.toString():e}function j5(t){return{get value(){{const e=t();return Object.defineProperty(this,"value",{value:e}),e}}}}function f2(t){return t==null}function m2(t){const e=t.startsWith("^")?1:0,r=t.endsWith("$")?t.length-1:t.length;return t.slice(e,r)}function NA(t,e){const r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,a=r>n?r:n,i=Number.parseInt(t.toFixed(a).replace(".","")),l=Number.parseInt(e.toFixed(a).replace(".",""));return i%l/10**a}function Ut(t,e,r){Object.defineProperty(t,e,{get(){{const n=r();return t[e]=n,n}},set(n){Object.defineProperty(t,e,{value:n})},configurable:!0})}function p2(t,e,r){Object.defineProperty(t,e,{value:r,writable:!0,enumerable:!0,configurable:!0})}function Bu(t){return JSON.stringify(t)}const D5=Error.captureStackTrace?Error.captureStackTrace:(...t)=>{};function xp(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}const MA=j5(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function nh(t){if(xp(t)===!1)return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(xp(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}const jA=new Set(["string","number","symbol"]);function Oc(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function wo(t,e,r){const n=new t._zod.constr(e??t._zod.def);return(!e||r?.parent)&&(n._zod.parent=t),n}function He(t){const e=t;if(!e)return{};if(typeof e=="string")return{error:()=>e};if(e?.message!==void 0){if(e?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function DA(t){return Object.keys(t).filter(e=>t[e]._zod.optin==="optional"&&t[e]._zod.optout==="optional")}const zA={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function OA(t,e){const r={},n=t._zod.def;for(const a in e){if(!(a in n.shape))throw new Error(`Unrecognized key: "${a}"`);e[a]&&(r[a]=n.shape[a])}return wo(t,{...t._zod.def,shape:r,checks:[]})}function RA(t,e){const r={...t._zod.def.shape},n=t._zod.def;for(const a in e){if(!(a in n.shape))throw new Error(`Unrecognized key: "${a}"`);e[a]&&delete r[a]}return wo(t,{...t._zod.def,shape:r,checks:[]})}function FA(t,e){if(!nh(e))throw new Error("Invalid input to extend: expected a plain object");const r={...t._zod.def,get shape(){const n={...t._zod.def.shape,...e};return p2(this,"shape",n),n},checks:[]};return wo(t,r)}function LA(t,e){return wo(t,{...t._zod.def,get shape(){const r={...t._zod.def.shape,...e._zod.def.shape};return p2(this,"shape",r),r},catchall:e._zod.def.catchall,checks:[]})}function PA(t,e,r){const n=e._zod.def.shape,a={...n};if(r)for(const i in r){if(!(i in n))throw new Error(`Unrecognized key: "${i}"`);r[i]&&(a[i]=t?new t({type:"optional",innerType:n[i]}):n[i])}else for(const i in n)a[i]=t?new t({type:"optional",innerType:n[i]}):n[i];return wo(e,{...e._zod.def,shape:a,checks:[]})}function BA(t,e,r){const n=e._zod.def.shape,a={...n};if(r)for(const i in r){if(!(i in a))throw new Error(`Unrecognized key: "${i}"`);r[i]&&(a[i]=new t({type:"nonoptional",innerType:n[i]}))}else for(const i in n)a[i]=new t({type:"nonoptional",innerType:n[i]});return wo(e,{...e._zod.def,shape:a,checks:[]})}function sc(t,e=0){for(let r=e;r<t.issues.length;r++)if(t.issues[r]?.continue!==!0)return!0;return!1}function io(t,e){return e.map(r=>{var n;return(n=r).path??(n.path=[]),r.path.unshift(t),r})}function ld(t){return typeof t=="string"?t:t?.message}function Ai(t,e,r){const n={...t,path:t.path??[]};if(!t.message){const a=ld(t.inst?._zod.def?.error?.(t))??ld(e?.error?.(t))??ld(r.customError?.(t))??ld(r.localeError?.(t))??"Invalid input";n.message=a}return delete n.inst,delete n.continue,e?.reportInput||delete n.input,n}function g2(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}function yc(...t){const[e,r,n]=t;return typeof e=="string"?{message:e,code:"custom",input:r,inst:n}:{...e}}const z5=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),Object.defineProperty(t,"message",{get(){return JSON.stringify(e,TA,2)},enumerable:!0}),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},b2=ge("$ZodError",z5),Eh=ge("$ZodError",z5,{Parent:Error});function IA(t,e=r=>r.message){const r={},n=[];for(const a of t.issues)a.path.length>0?(r[a.path[0]]=r[a.path[0]]||[],r[a.path[0]].push(e(a))):n.push(e(a));return{formErrors:n,fieldErrors:r}}function $A(t,e){const r=e||function(i){return i.message},n={_errors:[]},a=i=>{for(const l of i.issues)if(l.code==="invalid_union"&&l.errors.length)l.errors.map(u=>a({issues:u}));else if(l.code==="invalid_key")a({issues:l.issues});else if(l.code==="invalid_element")a({issues:l.issues});else if(l.path.length===0)n._errors.push(r(l));else{let u=n,d=0;for(;d<l.path.length;){const h=l.path[d];d===l.path.length-1?(u[h]=u[h]||{_errors:[]},u[h]._errors.push(r(l))):u[h]=u[h]||{_errors:[]},u=u[h],d++}}};return a(t),n}const O5=t=>(e,r,n,a)=>{const i=n?Object.assign(n,{async:!1}):{async:!1},l=e._zod.run({value:r,issues:[]},i);if(l instanceof Promise)throw new bc;if(l.issues.length){const u=new(a?.Err??t)(l.issues.map(d=>Ai(d,i,Si())));throw D5(u,a?.callee),u}return l.value},qA=O5(Eh),R5=t=>async(e,r,n,a)=>{const i=n?Object.assign(n,{async:!0}):{async:!0};let l=e._zod.run({value:r,issues:[]},i);if(l instanceof Promise&&(l=await l),l.issues.length){const u=new(a?.Err??t)(l.issues.map(d=>Ai(d,i,Si())));throw D5(u,a?.callee),u}return l.value},HA=R5(Eh),F5=t=>(e,r,n)=>{const a=n?{...n,async:!1}:{async:!1},i=e._zod.run({value:r,issues:[]},a);if(i instanceof Promise)throw new bc;return i.issues.length?{success:!1,error:new(t??b2)(i.issues.map(l=>Ai(l,a,Si())))}:{success:!0,data:i.value}},UA=F5(Eh),L5=t=>async(e,r,n)=>{const a=n?Object.assign(n,{async:!0}):{async:!0};let i=e._zod.run({value:r,issues:[]},a);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new t(i.issues.map(l=>Ai(l,a,Si())))}:{success:!0,data:i.value}},VA=L5(Eh),GA=/^[cC][^\s-]{8,}$/,ZA=/^[0-9a-z]+$/,KA=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,YA=/^[0-9a-vA-V]{20}$/,XA=/^[A-Za-z0-9]{27}$/,QA=/^[a-zA-Z0-9_-]{21}$/,WA=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,JA=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Nx=t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,eE=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,tE="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function rE(){return new RegExp(tE,"u")}const nE=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,aE=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,sE=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,iE=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,oE=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,P5=/^[A-Za-z0-9_-]*$/,lE=/^([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+$/,uE=/^\+(?:[0-9]){6,14}[0-9]$/,B5="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",cE=new RegExp(`^${B5}$`);function I5(t){const e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${e}`:t.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${t.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function dE(t){return new RegExp(`^${I5(t)}$`)}function hE(t){const e=I5({precision:t.precision}),r=["Z"];t.local&&r.push(""),t.offset&&r.push("([+-]\\d{2}:\\d{2})");const n=`${e}(?:${r.join("|")})`;return new RegExp(`^${B5}T(?:${n})$`)}const fE=t=>{const e=t?`[\\s\\S]{${t?.minimum??0},${t?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},mE=/^\d+$/,pE=/^-?\d+(?:\.\d+)?/i,gE=/true|false/i,bE=/^[^A-Z]*$/,yE=/^[^a-z]*$/,wn=ge("$ZodCheck",(t,e)=>{var r;t._zod??(t._zod={}),t._zod.def=e,(r=t._zod).onattach??(r.onattach=[])}),$5={number:"number",bigint:"bigint",object:"date"},q5=ge("$ZodCheckLessThan",(t,e)=>{wn.init(t,e);const r=$5[typeof e.value];t._zod.onattach.push(n=>{const a=n._zod.bag,i=(e.inclusive?a.maximum:a.exclusiveMaximum)??Number.POSITIVE_INFINITY;e.value<i&&(e.inclusive?a.maximum=e.value:a.exclusiveMaximum=e.value)}),t._zod.check=n=>{(e.inclusive?n.value<=e.value:n.value<e.value)||n.issues.push({origin:r,code:"too_big",maximum:e.value,input:n.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),H5=ge("$ZodCheckGreaterThan",(t,e)=>{wn.init(t,e);const r=$5[typeof e.value];t._zod.onattach.push(n=>{const a=n._zod.bag,i=(e.inclusive?a.minimum:a.exclusiveMinimum)??Number.NEGATIVE_INFINITY;e.value>i&&(e.inclusive?a.minimum=e.value:a.exclusiveMinimum=e.value)}),t._zod.check=n=>{(e.inclusive?n.value>=e.value:n.value>e.value)||n.issues.push({origin:r,code:"too_small",minimum:e.value,input:n.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),xE=ge("$ZodCheckMultipleOf",(t,e)=>{wn.init(t,e),t._zod.onattach.push(r=>{var n;(n=r._zod.bag).multipleOf??(n.multipleOf=e.value)}),t._zod.check=r=>{if(typeof r.value!=typeof e.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof r.value=="bigint"?r.value%e.value===BigInt(0):NA(r.value,e.value)===0)||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:e.value,input:r.value,inst:t,continue:!e.abort})}}),vE=ge("$ZodCheckNumberFormat",(t,e)=>{wn.init(t,e),e.format=e.format||"float64";const r=e.format?.includes("int"),n=r?"int":"number",[a,i]=zA[e.format];t._zod.onattach.push(l=>{const u=l._zod.bag;u.format=e.format,u.minimum=a,u.maximum=i,r&&(u.pattern=mE)}),t._zod.check=l=>{const u=l.value;if(r){if(!Number.isInteger(u)){l.issues.push({expected:n,format:e.format,code:"invalid_type",input:u,inst:t});return}if(!Number.isSafeInteger(u)){u>0?l.issues.push({input:u,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:n,continue:!e.abort}):l.issues.push({input:u,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:n,continue:!e.abort});return}}u<a&&l.issues.push({origin:"number",input:u,code:"too_small",minimum:a,inclusive:!0,inst:t,continue:!e.abort}),u>i&&l.issues.push({origin:"number",input:u,code:"too_big",maximum:i,inst:t})}}),_E=ge("$ZodCheckMaxLength",(t,e)=>{var r;wn.init(t,e),(r=t._zod.def).when??(r.when=n=>{const a=n.value;return!f2(a)&&a.length!==void 0}),t._zod.onattach.push(n=>{const a=n._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<a&&(n._zod.bag.maximum=e.maximum)}),t._zod.check=n=>{const a=n.value;if(a.length<=e.maximum)return;const l=g2(a);n.issues.push({origin:l,code:"too_big",maximum:e.maximum,inclusive:!0,input:a,inst:t,continue:!e.abort})}}),wE=ge("$ZodCheckMinLength",(t,e)=>{var r;wn.init(t,e),(r=t._zod.def).when??(r.when=n=>{const a=n.value;return!f2(a)&&a.length!==void 0}),t._zod.onattach.push(n=>{const a=n._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>a&&(n._zod.bag.minimum=e.minimum)}),t._zod.check=n=>{const a=n.value;if(a.length>=e.minimum)return;const l=g2(a);n.issues.push({origin:l,code:"too_small",minimum:e.minimum,inclusive:!0,input:a,inst:t,continue:!e.abort})}}),kE=ge("$ZodCheckLengthEquals",(t,e)=>{var r;wn.init(t,e),(r=t._zod.def).when??(r.when=n=>{const a=n.value;return!f2(a)&&a.length!==void 0}),t._zod.onattach.push(n=>{const a=n._zod.bag;a.minimum=e.length,a.maximum=e.length,a.length=e.length}),t._zod.check=n=>{const a=n.value,i=a.length;if(i===e.length)return;const l=g2(a),u=i>e.length;n.issues.push({origin:l,...u?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:n.value,inst:t,continue:!e.abort})}}),Ch=ge("$ZodCheckStringFormat",(t,e)=>{var r,n;wn.init(t,e),t._zod.onattach.push(a=>{const i=a._zod.bag;i.format=e.format,e.pattern&&(i.patterns??(i.patterns=new Set),i.patterns.add(e.pattern))}),e.pattern?(r=t._zod).check??(r.check=a=>{e.pattern.lastIndex=0,!e.pattern.test(a.value)&&a.issues.push({origin:"string",code:"invalid_format",format:e.format,input:a.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:t,continue:!e.abort})}):(n=t._zod).check??(n.check=()=>{})}),SE=ge("$ZodCheckRegex",(t,e)=>{Ch.init(t,e),t._zod.check=r=>{e.pattern.lastIndex=0,!e.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:e.pattern.toString(),inst:t,continue:!e.abort})}}),AE=ge("$ZodCheckLowerCase",(t,e)=>{e.pattern??(e.pattern=bE),Ch.init(t,e)}),EE=ge("$ZodCheckUpperCase",(t,e)=>{e.pattern??(e.pattern=yE),Ch.init(t,e)}),CE=ge("$ZodCheckIncludes",(t,e)=>{wn.init(t,e);const r=Oc(e.includes),n=new RegExp(typeof e.position=="number"?`^.{${e.position}}${r}`:r);e.pattern=n,t._zod.onattach.push(a=>{const i=a._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(n)}),t._zod.check=a=>{a.value.includes(e.includes,e.position)||a.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:a.value,inst:t,continue:!e.abort})}}),TE=ge("$ZodCheckStartsWith",(t,e)=>{wn.init(t,e);const r=new RegExp(`^${Oc(e.prefix)}.*`);e.pattern??(e.pattern=r),t._zod.onattach.push(n=>{const a=n._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(r)}),t._zod.check=n=>{n.value.startsWith(e.prefix)||n.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:n.value,inst:t,continue:!e.abort})}}),NE=ge("$ZodCheckEndsWith",(t,e)=>{wn.init(t,e);const r=new RegExp(`.*${Oc(e.suffix)}$`);e.pattern??(e.pattern=r),t._zod.onattach.push(n=>{const a=n._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(r)}),t._zod.check=n=>{n.value.endsWith(e.suffix)||n.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:n.value,inst:t,continue:!e.abort})}}),ME=ge("$ZodCheckOverwrite",(t,e)=>{wn.init(t,e),t._zod.check=r=>{r.value=e.tx(r.value)}});class jE{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}const n=e.split(`
`).filter(l=>l),a=Math.min(...n.map(l=>l.length-l.trimStart().length)),i=n.map(l=>l.slice(a)).map(l=>" ".repeat(this.indent*2)+l);for(const l of i)this.content.push(l)}compile(){const e=Function,r=this?.args,a=[...(this?.content??[""]).map(i=>`  ${i}`)];return new e(...r,a.join(`
`))}}const DE={major:4,minor:0,patch:5},Vt=ge("$ZodType",(t,e)=>{var r;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=DE;const n=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&n.unshift(t);for(const a of n)for(const i of a._zod.onattach)i(t);if(n.length===0)(r=t._zod).deferred??(r.deferred=[]),t._zod.deferred?.push(()=>{t._zod.run=t._zod.parse});else{const a=(i,l,u)=>{let d=sc(i),h;for(const p of l){if(p._zod.def.when){if(!p._zod.def.when(i))continue}else if(d)continue;const b=i.issues.length,y=p._zod.check(i);if(y instanceof Promise&&u?.async===!1)throw new bc;if(h||y instanceof Promise)h=(h??Promise.resolve()).then(async()=>{await y,i.issues.length!==b&&(d||(d=sc(i,b)))});else{if(i.issues.length===b)continue;d||(d=sc(i,b))}}return h?h.then(()=>i):i};t._zod.run=(i,l)=>{const u=t._zod.parse(i,l);if(u instanceof Promise){if(l.async===!1)throw new bc;return u.then(d=>a(d,n,l))}return a(u,n,l)}}t["~standard"]={validate:a=>{try{const i=UA(t,a);return i.success?{value:i.data}:{issues:i.error?.issues}}catch{return VA(t,a).then(l=>l.success?{value:l.data}:{issues:l.error?.issues})}},vendor:"zod",version:1}}),y2=ge("$ZodString",(t,e)=>{Vt.init(t,e),t._zod.pattern=[...t?._zod.bag?.patterns??[]].pop()??fE(t._zod.bag),t._zod.parse=(r,n)=>{if(e.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:t}),r}}),Qt=ge("$ZodStringFormat",(t,e)=>{Ch.init(t,e),y2.init(t,e)}),zE=ge("$ZodGUID",(t,e)=>{e.pattern??(e.pattern=JA),Qt.init(t,e)}),OE=ge("$ZodUUID",(t,e)=>{if(e.version){const n={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(n===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=Nx(n))}else e.pattern??(e.pattern=Nx());Qt.init(t,e)}),RE=ge("$ZodEmail",(t,e)=>{e.pattern??(e.pattern=eE),Qt.init(t,e)}),FE=ge("$ZodURL",(t,e)=>{Qt.init(t,e),t._zod.check=r=>{try{const n=r.value,a=new URL(n),i=a.href;e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(a.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:lE.source,input:r.value,inst:t,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(a.protocol.endsWith(":")?a.protocol.slice(0,-1):a.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:r.value,inst:t,continue:!e.abort})),!n.endsWith("/")&&i.endsWith("/")?r.value=i.slice(0,-1):r.value=i;return}catch{r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:t,continue:!e.abort})}}}),LE=ge("$ZodEmoji",(t,e)=>{e.pattern??(e.pattern=rE()),Qt.init(t,e)}),PE=ge("$ZodNanoID",(t,e)=>{e.pattern??(e.pattern=QA),Qt.init(t,e)}),BE=ge("$ZodCUID",(t,e)=>{e.pattern??(e.pattern=GA),Qt.init(t,e)}),IE=ge("$ZodCUID2",(t,e)=>{e.pattern??(e.pattern=ZA),Qt.init(t,e)}),$E=ge("$ZodULID",(t,e)=>{e.pattern??(e.pattern=KA),Qt.init(t,e)}),qE=ge("$ZodXID",(t,e)=>{e.pattern??(e.pattern=YA),Qt.init(t,e)}),HE=ge("$ZodKSUID",(t,e)=>{e.pattern??(e.pattern=XA),Qt.init(t,e)}),UE=ge("$ZodISODateTime",(t,e)=>{e.pattern??(e.pattern=hE(e)),Qt.init(t,e)}),VE=ge("$ZodISODate",(t,e)=>{e.pattern??(e.pattern=cE),Qt.init(t,e)}),GE=ge("$ZodISOTime",(t,e)=>{e.pattern??(e.pattern=dE(e)),Qt.init(t,e)}),ZE=ge("$ZodISODuration",(t,e)=>{e.pattern??(e.pattern=WA),Qt.init(t,e)}),KE=ge("$ZodIPv4",(t,e)=>{e.pattern??(e.pattern=nE),Qt.init(t,e),t._zod.onattach.push(r=>{const n=r._zod.bag;n.format="ipv4"})}),YE=ge("$ZodIPv6",(t,e)=>{e.pattern??(e.pattern=aE),Qt.init(t,e),t._zod.onattach.push(r=>{const n=r._zod.bag;n.format="ipv6"}),t._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:t,continue:!e.abort})}}}),XE=ge("$ZodCIDRv4",(t,e)=>{e.pattern??(e.pattern=sE),Qt.init(t,e)}),QE=ge("$ZodCIDRv6",(t,e)=>{e.pattern??(e.pattern=iE),Qt.init(t,e),t._zod.check=r=>{const[n,a]=r.value.split("/");try{if(!a)throw new Error;const i=Number(a);if(`${i}`!==a)throw new Error;if(i<0||i>128)throw new Error;new URL(`http://[${n}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:t,continue:!e.abort})}}});function U5(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch{return!1}}const WE=ge("$ZodBase64",(t,e)=>{e.pattern??(e.pattern=oE),Qt.init(t,e),t._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64"}),t._zod.check=r=>{U5(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:t,continue:!e.abort})}});function JE(t){if(!P5.test(t))return!1;const e=t.replace(/[-_]/g,n=>n==="-"?"+":"/"),r=e.padEnd(Math.ceil(e.length/4)*4,"=");return U5(r)}const eC=ge("$ZodBase64URL",(t,e)=>{e.pattern??(e.pattern=P5),Qt.init(t,e),t._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64url"}),t._zod.check=r=>{JE(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:t,continue:!e.abort})}}),tC=ge("$ZodE164",(t,e)=>{e.pattern??(e.pattern=uE),Qt.init(t,e)});function rC(t,e=null){try{const r=t.split(".");if(r.length!==3)return!1;const[n]=r;if(!n)return!1;const a=JSON.parse(atob(n));return!("typ"in a&&a?.typ!=="JWT"||!a.alg||e&&(!("alg"in a)||a.alg!==e))}catch{return!1}}const nC=ge("$ZodJWT",(t,e)=>{Qt.init(t,e),t._zod.check=r=>{rC(r.value,e.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:t,continue:!e.abort})}}),V5=ge("$ZodNumber",(t,e)=>{Vt.init(t,e),t._zod.pattern=t._zod.bag.pattern??pE,t._zod.parse=(r,n)=>{if(e.coerce)try{r.value=Number(r.value)}catch{}const a=r.value;if(typeof a=="number"&&!Number.isNaN(a)&&Number.isFinite(a))return r;const i=typeof a=="number"?Number.isNaN(a)?"NaN":Number.isFinite(a)?void 0:"Infinity":void 0;return r.issues.push({expected:"number",code:"invalid_type",input:a,inst:t,...i?{received:i}:{}}),r}}),aC=ge("$ZodNumber",(t,e)=>{vE.init(t,e),V5.init(t,e)}),sC=ge("$ZodBoolean",(t,e)=>{Vt.init(t,e),t._zod.pattern=gE,t._zod.parse=(r,n)=>{if(e.coerce)try{r.value=!!r.value}catch{}const a=r.value;return typeof a=="boolean"||r.issues.push({expected:"boolean",code:"invalid_type",input:a,inst:t}),r}}),iC=ge("$ZodAny",(t,e)=>{Vt.init(t,e),t._zod.parse=r=>r}),oC=ge("$ZodUnknown",(t,e)=>{Vt.init(t,e),t._zod.parse=r=>r}),lC=ge("$ZodNever",(t,e)=>{Vt.init(t,e),t._zod.parse=(r,n)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:t}),r)});function Mx(t,e,r){t.issues.length&&e.issues.push(...io(r,t.issues)),e.value[r]=t.value}const uC=ge("$ZodArray",(t,e)=>{Vt.init(t,e),t._zod.parse=(r,n)=>{const a=r.value;if(!Array.isArray(a))return r.issues.push({expected:"array",code:"invalid_type",input:a,inst:t}),r;r.value=Array(a.length);const i=[];for(let l=0;l<a.length;l++){const u=a[l],d=e.element._zod.run({value:u,issues:[]},n);d instanceof Promise?i.push(d.then(h=>Mx(h,r,l))):Mx(d,r,l)}return i.length?Promise.all(i).then(()=>r):r}});function ud(t,e,r){t.issues.length&&e.issues.push(...io(r,t.issues)),e.value[r]=t.value}function jx(t,e,r,n){t.issues.length?n[r]===void 0?r in n?e.value[r]=void 0:e.value[r]=t.value:e.issues.push(...io(r,t.issues)):t.value===void 0?r in n&&(e.value[r]=void 0):e.value[r]=t.value}const cC=ge("$ZodObject",(t,e)=>{Vt.init(t,e);const r=j5(()=>{const b=Object.keys(e.shape);for(const x of b)if(!(e.shape[x]instanceof Vt))throw new Error(`Invalid element at key "${x}": expected a Zod schema`);const y=DA(e.shape);return{shape:e.shape,keys:b,keySet:new Set(b),numKeys:b.length,optionalKeys:new Set(y)}});Ut(t._zod,"propValues",()=>{const b=e.shape,y={};for(const x in b){const _=b[x]._zod;if(_.values){y[x]??(y[x]=new Set);for(const k of _.values)y[x].add(k)}}return y});const n=b=>{const y=new jE(["shape","payload","ctx"]),x=r.value,_=C=>{const N=Bu(C);return`shape[${N}]._zod.run({ value: input[${N}], issues: [] }, ctx)`};y.write("const input = payload.value;");const k=Object.create(null);let S=0;for(const C of x.keys)k[C]=`key_${S++}`;y.write("const newResult = {}");for(const C of x.keys)if(x.optionalKeys.has(C)){const N=k[C];y.write(`const ${N} = ${_(C)};`);const D=Bu(C);y.write(`
        if (${N}.issues.length) {
          if (input[${D}] === undefined) {
            if (${D} in input) {
              newResult[${D}] = undefined;
            }
          } else {
            payload.issues = payload.issues.concat(
              ${N}.issues.map((iss) => ({
                ...iss,
                path: iss.path ? [${D}, ...iss.path] : [${D}],
              }))
            );
          }
        } else if (${N}.value === undefined) {
          if (${D} in input) newResult[${D}] = undefined;
        } else {
          newResult[${D}] = ${N}.value;
        }
        `)}else{const N=k[C];y.write(`const ${N} = ${_(C)};`),y.write(`
          if (${N}.issues.length) payload.issues = payload.issues.concat(${N}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${Bu(C)}, ...iss.path] : [${Bu(C)}]
          })));`),y.write(`newResult[${Bu(C)}] = ${N}.value`)}y.write("payload.value = newResult;"),y.write("return payload;");const A=y.compile();return(C,N)=>A(b,C,N)};let a;const i=xp,l=!M5.jitless,d=l&&MA.value,h=e.catchall;let p;t._zod.parse=(b,y)=>{p??(p=r.value);const x=b.value;if(!i(x))return b.issues.push({expected:"object",code:"invalid_type",input:x,inst:t}),b;const _=[];if(l&&d&&y?.async===!1&&y.jitless!==!0)a||(a=n(e.shape)),b=a(b,y);else{b.value={};const N=p.shape;for(const D of p.keys){const j=N[D],O=j._zod.run({value:x[D],issues:[]},y),F=j._zod.optin==="optional"&&j._zod.optout==="optional";O instanceof Promise?_.push(O.then(R=>F?jx(R,b,D,x):ud(R,b,D))):F?jx(O,b,D,x):ud(O,b,D)}}if(!h)return _.length?Promise.all(_).then(()=>b):b;const k=[],S=p.keySet,A=h._zod,C=A.def.type;for(const N of Object.keys(x)){if(S.has(N))continue;if(C==="never"){k.push(N);continue}const D=A.run({value:x[N],issues:[]},y);D instanceof Promise?_.push(D.then(j=>ud(j,b,N))):ud(D,b,N)}return k.length&&b.issues.push({code:"unrecognized_keys",keys:k,input:x,inst:t}),_.length?Promise.all(_).then(()=>b):b}});function Dx(t,e,r,n){for(const a of t)if(a.issues.length===0)return e.value=a.value,e;return e.issues.push({code:"invalid_union",input:e.value,inst:r,errors:t.map(a=>a.issues.map(i=>Ai(i,n,Si())))}),e}const dC=ge("$ZodUnion",(t,e)=>{Vt.init(t,e),Ut(t._zod,"optin",()=>e.options.some(r=>r._zod.optin==="optional")?"optional":void 0),Ut(t._zod,"optout",()=>e.options.some(r=>r._zod.optout==="optional")?"optional":void 0),Ut(t._zod,"values",()=>{if(e.options.every(r=>r._zod.values))return new Set(e.options.flatMap(r=>Array.from(r._zod.values)))}),Ut(t._zod,"pattern",()=>{if(e.options.every(r=>r._zod.pattern)){const r=e.options.map(n=>n._zod.pattern);return new RegExp(`^(${r.map(n=>m2(n.source)).join("|")})$`)}}),t._zod.parse=(r,n)=>{let a=!1;const i=[];for(const l of e.options){const u=l._zod.run({value:r.value,issues:[]},n);if(u instanceof Promise)i.push(u),a=!0;else{if(u.issues.length===0)return u;i.push(u)}}return a?Promise.all(i).then(l=>Dx(l,r,t,n)):Dx(i,r,t,n)}}),hC=ge("$ZodIntersection",(t,e)=>{Vt.init(t,e),t._zod.parse=(r,n)=>{const a=r.value,i=e.left._zod.run({value:a,issues:[]},n),l=e.right._zod.run({value:a,issues:[]},n);return i instanceof Promise||l instanceof Promise?Promise.all([i,l]).then(([d,h])=>zx(r,d,h)):zx(r,i,l)}});function vp(t,e){if(t===e)return{valid:!0,data:t};if(t instanceof Date&&e instanceof Date&&+t==+e)return{valid:!0,data:t};if(nh(t)&&nh(e)){const r=Object.keys(e),n=Object.keys(t).filter(i=>r.indexOf(i)!==-1),a={...t,...e};for(const i of n){const l=vp(t[i],e[i]);if(!l.valid)return{valid:!1,mergeErrorPath:[i,...l.mergeErrorPath]};a[i]=l.data}return{valid:!0,data:a}}if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return{valid:!1,mergeErrorPath:[]};const r=[];for(let n=0;n<t.length;n++){const a=t[n],i=e[n],l=vp(a,i);if(!l.valid)return{valid:!1,mergeErrorPath:[n,...l.mergeErrorPath]};r.push(l.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function zx(t,e,r){if(e.issues.length&&t.issues.push(...e.issues),r.issues.length&&t.issues.push(...r.issues),sc(t))return t;const n=vp(e.value,r.value);if(!n.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(n.mergeErrorPath)}`);return t.value=n.data,t}const fC=ge("$ZodRecord",(t,e)=>{Vt.init(t,e),t._zod.parse=(r,n)=>{const a=r.value;if(!nh(a))return r.issues.push({expected:"record",code:"invalid_type",input:a,inst:t}),r;const i=[];if(e.keyType._zod.values){const l=e.keyType._zod.values;r.value={};for(const d of l)if(typeof d=="string"||typeof d=="number"||typeof d=="symbol"){const h=e.valueType._zod.run({value:a[d],issues:[]},n);h instanceof Promise?i.push(h.then(p=>{p.issues.length&&r.issues.push(...io(d,p.issues)),r.value[d]=p.value})):(h.issues.length&&r.issues.push(...io(d,h.issues)),r.value[d]=h.value)}let u;for(const d in a)l.has(d)||(u=u??[],u.push(d));u&&u.length>0&&r.issues.push({code:"unrecognized_keys",input:a,inst:t,keys:u})}else{r.value={};for(const l of Reflect.ownKeys(a)){if(l==="__proto__")continue;const u=e.keyType._zod.run({value:l,issues:[]},n);if(u instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(u.issues.length){r.issues.push({origin:"record",code:"invalid_key",issues:u.issues.map(h=>Ai(h,n,Si())),input:l,path:[l],inst:t}),r.value[u.value]=u.value;continue}const d=e.valueType._zod.run({value:a[l],issues:[]},n);d instanceof Promise?i.push(d.then(h=>{h.issues.length&&r.issues.push(...io(l,h.issues)),r.value[u.value]=h.value})):(d.issues.length&&r.issues.push(...io(l,d.issues)),r.value[u.value]=d.value)}}return i.length?Promise.all(i).then(()=>r):r}}),mC=ge("$ZodEnum",(t,e)=>{Vt.init(t,e);const r=CA(e.entries);t._zod.values=new Set(r),t._zod.pattern=new RegExp(`^(${r.filter(n=>jA.has(typeof n)).map(n=>typeof n=="string"?Oc(n):n.toString()).join("|")})$`),t._zod.parse=(n,a)=>{const i=n.value;return t._zod.values.has(i)||n.issues.push({code:"invalid_value",values:r,input:i,inst:t}),n}}),pC=ge("$ZodLiteral",(t,e)=>{Vt.init(t,e),t._zod.values=new Set(e.values),t._zod.pattern=new RegExp(`^(${e.values.map(r=>typeof r=="string"?Oc(r):r?r.toString():String(r)).join("|")})$`),t._zod.parse=(r,n)=>{const a=r.value;return t._zod.values.has(a)||r.issues.push({code:"invalid_value",values:e.values,input:a,inst:t}),r}}),gC=ge("$ZodTransform",(t,e)=>{Vt.init(t,e),t._zod.parse=(r,n)=>{const a=e.transform(r.value,r);if(n.async)return(a instanceof Promise?a:Promise.resolve(a)).then(l=>(r.value=l,r));if(a instanceof Promise)throw new bc;return r.value=a,r}}),bC=ge("$ZodOptional",(t,e)=>{Vt.init(t,e),t._zod.optin="optional",t._zod.optout="optional",Ut(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),Ut(t._zod,"pattern",()=>{const r=e.innerType._zod.pattern;return r?new RegExp(`^(${m2(r.source)})?$`):void 0}),t._zod.parse=(r,n)=>e.innerType._zod.optin==="optional"?e.innerType._zod.run(r,n):r.value===void 0?r:e.innerType._zod.run(r,n)}),yC=ge("$ZodNullable",(t,e)=>{Vt.init(t,e),Ut(t._zod,"optin",()=>e.innerType._zod.optin),Ut(t._zod,"optout",()=>e.innerType._zod.optout),Ut(t._zod,"pattern",()=>{const r=e.innerType._zod.pattern;return r?new RegExp(`^(${m2(r.source)}|null)$`):void 0}),Ut(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),t._zod.parse=(r,n)=>r.value===null?r:e.innerType._zod.run(r,n)}),xC=ge("$ZodDefault",(t,e)=>{Vt.init(t,e),t._zod.optin="optional",Ut(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(r,n)=>{if(r.value===void 0)return r.value=e.defaultValue,r;const a=e.innerType._zod.run(r,n);return a instanceof Promise?a.then(i=>Ox(i,e)):Ox(a,e)}});function Ox(t,e){return t.value===void 0&&(t.value=e.defaultValue),t}const vC=ge("$ZodPrefault",(t,e)=>{Vt.init(t,e),t._zod.optin="optional",Ut(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(r,n)=>(r.value===void 0&&(r.value=e.defaultValue),e.innerType._zod.run(r,n))}),_C=ge("$ZodNonOptional",(t,e)=>{Vt.init(t,e),Ut(t._zod,"values",()=>{const r=e.innerType._zod.values;return r?new Set([...r].filter(n=>n!==void 0)):void 0}),t._zod.parse=(r,n)=>{const a=e.innerType._zod.run(r,n);return a instanceof Promise?a.then(i=>Rx(i,t)):Rx(a,t)}});function Rx(t,e){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:e}),t}const wC=ge("$ZodCatch",(t,e)=>{Vt.init(t,e),t._zod.optin="optional",Ut(t._zod,"optout",()=>e.innerType._zod.optout),Ut(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(r,n)=>{const a=e.innerType._zod.run(r,n);return a instanceof Promise?a.then(i=>(r.value=i.value,i.issues.length&&(r.value=e.catchValue({...r,error:{issues:i.issues.map(l=>Ai(l,n,Si()))},input:r.value}),r.issues=[]),r)):(r.value=a.value,a.issues.length&&(r.value=e.catchValue({...r,error:{issues:a.issues.map(i=>Ai(i,n,Si()))},input:r.value}),r.issues=[]),r)}}),kC=ge("$ZodPipe",(t,e)=>{Vt.init(t,e),Ut(t._zod,"values",()=>e.in._zod.values),Ut(t._zod,"optin",()=>e.in._zod.optin),Ut(t._zod,"optout",()=>e.out._zod.optout),Ut(t._zod,"propValues",()=>e.in._zod.propValues),t._zod.parse=(r,n)=>{const a=e.in._zod.run(r,n);return a instanceof Promise?a.then(i=>Fx(i,e,n)):Fx(a,e,n)}});function Fx(t,e,r){return sc(t)?t:e.out._zod.run({value:t.value,issues:t.issues},r)}const SC=ge("$ZodReadonly",(t,e)=>{Vt.init(t,e),Ut(t._zod,"propValues",()=>e.innerType._zod.propValues),Ut(t._zod,"values",()=>e.innerType._zod.values),Ut(t._zod,"optin",()=>e.innerType._zod.optin),Ut(t._zod,"optout",()=>e.innerType._zod.optout),t._zod.parse=(r,n)=>{const a=e.innerType._zod.run(r,n);return a instanceof Promise?a.then(Lx):Lx(a)}});function Lx(t){return t.value=Object.freeze(t.value),t}const AC=ge("$ZodCustom",(t,e)=>{wn.init(t,e),Vt.init(t,e),t._zod.parse=(r,n)=>r,t._zod.check=r=>{const n=r.value,a=e.fn(n);if(a instanceof Promise)return a.then(i=>Px(i,r,n,t));Px(a,r,n,t)}});function Px(t,e,r,n){if(!t){const a={code:"custom",input:r,inst:n,path:[...n._zod.def.path??[]],continue:!n._zod.def.abort};n._zod.def.params&&(a.params=n._zod.def.params),e.issues.push(yc(a))}}class EC{constructor(){this._map=new Map,this._idmap=new Map}add(e,...r){const n=r[0];if(this._map.set(e,n),n&&typeof n=="object"&&"id"in n){if(this._idmap.has(n.id))throw new Error(`ID ${n.id} already exists in the registry`);this._idmap.set(n.id,e)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(e){const r=this._map.get(e);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(e),this}get(e){const r=e._zod.parent;if(r){const n={...this.get(r)??{}};return delete n.id,{...n,...this._map.get(e)}}return this._map.get(e)}has(e){return this._map.has(e)}}function CC(){return new EC}const cd=CC();function TC(t,e){return new t({type:"string",...He(e)})}function NC(t,e){return new t({type:"string",format:"email",check:"string_format",abort:!1,...He(e)})}function Bx(t,e){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...He(e)})}function MC(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...He(e)})}function jC(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...He(e)})}function DC(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...He(e)})}function zC(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...He(e)})}function OC(t,e){return new t({type:"string",format:"url",check:"string_format",abort:!1,...He(e)})}function RC(t,e){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...He(e)})}function FC(t,e){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...He(e)})}function LC(t,e){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...He(e)})}function PC(t,e){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...He(e)})}function BC(t,e){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...He(e)})}function IC(t,e){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...He(e)})}function $C(t,e){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...He(e)})}function qC(t,e){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...He(e)})}function HC(t,e){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...He(e)})}function UC(t,e){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...He(e)})}function VC(t,e){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...He(e)})}function GC(t,e){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...He(e)})}function ZC(t,e){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...He(e)})}function KC(t,e){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...He(e)})}function YC(t,e){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...He(e)})}function XC(t,e){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...He(e)})}function QC(t,e){return new t({type:"string",format:"date",check:"string_format",...He(e)})}function WC(t,e){return new t({type:"string",format:"time",check:"string_format",precision:null,...He(e)})}function JC(t,e){return new t({type:"string",format:"duration",check:"string_format",...He(e)})}function eT(t,e){return new t({type:"number",checks:[],...He(e)})}function tT(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"safeint",...He(e)})}function rT(t,e){return new t({type:"boolean",...He(e)})}function nT(t){return new t({type:"any"})}function aT(t){return new t({type:"unknown"})}function sT(t,e){return new t({type:"never",...He(e)})}function Ix(t,e){return new q5({check:"less_than",...He(e),value:t,inclusive:!1})}function um(t,e){return new q5({check:"less_than",...He(e),value:t,inclusive:!0})}function $x(t,e){return new H5({check:"greater_than",...He(e),value:t,inclusive:!1})}function cm(t,e){return new H5({check:"greater_than",...He(e),value:t,inclusive:!0})}function qx(t,e){return new xE({check:"multiple_of",...He(e),value:t})}function G5(t,e){return new _E({check:"max_length",...He(e),maximum:t})}function ah(t,e){return new wE({check:"min_length",...He(e),minimum:t})}function Z5(t,e){return new kE({check:"length_equals",...He(e),length:t})}function iT(t,e){return new SE({check:"string_format",format:"regex",...He(e),pattern:t})}function oT(t){return new AE({check:"string_format",format:"lowercase",...He(t)})}function lT(t){return new EE({check:"string_format",format:"uppercase",...He(t)})}function uT(t,e){return new CE({check:"string_format",format:"includes",...He(e),includes:t})}function cT(t,e){return new TE({check:"string_format",format:"starts_with",...He(e),prefix:t})}function dT(t,e){return new NE({check:"string_format",format:"ends_with",...He(e),suffix:t})}function Rc(t){return new ME({check:"overwrite",tx:t})}function hT(t){return Rc(e=>e.normalize(t))}function fT(){return Rc(t=>t.trim())}function mT(){return Rc(t=>t.toLowerCase())}function pT(){return Rc(t=>t.toUpperCase())}function gT(t,e,r){return new t({type:"array",element:e,...He(r)})}function bT(t,e,r){return new t({type:"custom",check:"custom",fn:e,...He(r)})}const yT=ge("ZodISODateTime",(t,e)=>{UE.init(t,e),nr.init(t,e)});function xT(t){return XC(yT,t)}const vT=ge("ZodISODate",(t,e)=>{VE.init(t,e),nr.init(t,e)});function _T(t){return QC(vT,t)}const wT=ge("ZodISOTime",(t,e)=>{GE.init(t,e),nr.init(t,e)});function kT(t){return WC(wT,t)}const ST=ge("ZodISODuration",(t,e)=>{ZE.init(t,e),nr.init(t,e)});function AT(t){return JC(ST,t)}const K5=(t,e)=>{b2.init(t,e),t.name="ZodError",Object.defineProperties(t,{format:{value:r=>$A(t,r)},flatten:{value:r=>IA(t,r)},addIssue:{value:r=>t.issues.push(r)},addIssues:{value:r=>t.issues.push(...r)},isEmpty:{get(){return t.issues.length===0}}})},ET=ge("ZodError",K5),Th=ge("ZodError",K5,{Parent:Error}),CT=O5(Th),TT=R5(Th),NT=F5(Th),MT=L5(Th),rr=ge("ZodType",(t,e)=>(Vt.init(t,e),t.def=e,Object.defineProperty(t,"_def",{value:e}),t.check=(...r)=>t.clone({...e,checks:[...e.checks??[],...r.map(n=>typeof n=="function"?{_zod:{check:n,def:{check:"custom"},onattach:[]}}:n)]}),t.clone=(r,n)=>wo(t,r,n),t.brand=()=>t,t.register=(r,n)=>(r.add(t,n),t),t.parse=(r,n)=>CT(t,r,n,{callee:t.parse}),t.safeParse=(r,n)=>NT(t,r,n),t.parseAsync=async(r,n)=>TT(t,r,n,{callee:t.parseAsync}),t.safeParseAsync=async(r,n)=>MT(t,r,n),t.spa=t.safeParseAsync,t.refine=(r,n)=>t.check(kN(r,n)),t.superRefine=r=>t.check(SN(r)),t.overwrite=r=>t.check(Rc(r)),t.optional=()=>Gx(t),t.nullable=()=>Zx(t),t.nullish=()=>Gx(Zx(t)),t.nonoptional=r=>pN(t,r),t.array=()=>an(t),t.or=r=>Q5([t,r]),t.and=r=>sN(t,r),t.transform=r=>Kx(t,uN(r)),t.default=r=>hN(t,r),t.prefault=r=>mN(t,r),t.catch=r=>bN(t,r),t.pipe=r=>Kx(t,r),t.readonly=()=>vN(t),t.describe=r=>{const n=t.clone();return cd.add(n,{description:r}),n},Object.defineProperty(t,"description",{get(){return cd.get(t)?.description},configurable:!0}),t.meta=(...r)=>{if(r.length===0)return cd.get(t);const n=t.clone();return cd.add(n,r[0]),n},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t)),Y5=ge("_ZodString",(t,e)=>{y2.init(t,e),rr.init(t,e);const r=t._zod.bag;t.format=r.format??null,t.minLength=r.minimum??null,t.maxLength=r.maximum??null,t.regex=(...n)=>t.check(iT(...n)),t.includes=(...n)=>t.check(uT(...n)),t.startsWith=(...n)=>t.check(cT(...n)),t.endsWith=(...n)=>t.check(dT(...n)),t.min=(...n)=>t.check(ah(...n)),t.max=(...n)=>t.check(G5(...n)),t.length=(...n)=>t.check(Z5(...n)),t.nonempty=(...n)=>t.check(ah(1,...n)),t.lowercase=n=>t.check(oT(n)),t.uppercase=n=>t.check(lT(n)),t.trim=()=>t.check(fT()),t.normalize=(...n)=>t.check(hT(...n)),t.toLowerCase=()=>t.check(mT()),t.toUpperCase=()=>t.check(pT())}),jT=ge("ZodString",(t,e)=>{y2.init(t,e),Y5.init(t,e),t.email=r=>t.check(NC(DT,r)),t.url=r=>t.check(OC(zT,r)),t.jwt=r=>t.check(YC(KT,r)),t.emoji=r=>t.check(RC(OT,r)),t.guid=r=>t.check(Bx(Hx,r)),t.uuid=r=>t.check(MC(dd,r)),t.uuidv4=r=>t.check(jC(dd,r)),t.uuidv6=r=>t.check(DC(dd,r)),t.uuidv7=r=>t.check(zC(dd,r)),t.nanoid=r=>t.check(FC(RT,r)),t.guid=r=>t.check(Bx(Hx,r)),t.cuid=r=>t.check(LC(FT,r)),t.cuid2=r=>t.check(PC(LT,r)),t.ulid=r=>t.check(BC(PT,r)),t.base64=r=>t.check(GC(VT,r)),t.base64url=r=>t.check(ZC(GT,r)),t.xid=r=>t.check(IC(BT,r)),t.ksuid=r=>t.check($C(IT,r)),t.ipv4=r=>t.check(qC($T,r)),t.ipv6=r=>t.check(HC(qT,r)),t.cidrv4=r=>t.check(UC(HT,r)),t.cidrv6=r=>t.check(VC(UT,r)),t.e164=r=>t.check(KC(ZT,r)),t.datetime=r=>t.check(xT(r)),t.date=r=>t.check(_T(r)),t.time=r=>t.check(kT(r)),t.duration=r=>t.check(AT(r))});function Oe(t){return TC(jT,t)}const nr=ge("ZodStringFormat",(t,e)=>{Qt.init(t,e),Y5.init(t,e)}),DT=ge("ZodEmail",(t,e)=>{RE.init(t,e),nr.init(t,e)}),Hx=ge("ZodGUID",(t,e)=>{zE.init(t,e),nr.init(t,e)}),dd=ge("ZodUUID",(t,e)=>{OE.init(t,e),nr.init(t,e)}),zT=ge("ZodURL",(t,e)=>{FE.init(t,e),nr.init(t,e)}),OT=ge("ZodEmoji",(t,e)=>{LE.init(t,e),nr.init(t,e)}),RT=ge("ZodNanoID",(t,e)=>{PE.init(t,e),nr.init(t,e)}),FT=ge("ZodCUID",(t,e)=>{BE.init(t,e),nr.init(t,e)}),LT=ge("ZodCUID2",(t,e)=>{IE.init(t,e),nr.init(t,e)}),PT=ge("ZodULID",(t,e)=>{$E.init(t,e),nr.init(t,e)}),BT=ge("ZodXID",(t,e)=>{qE.init(t,e),nr.init(t,e)}),IT=ge("ZodKSUID",(t,e)=>{HE.init(t,e),nr.init(t,e)}),$T=ge("ZodIPv4",(t,e)=>{KE.init(t,e),nr.init(t,e)}),qT=ge("ZodIPv6",(t,e)=>{YE.init(t,e),nr.init(t,e)}),HT=ge("ZodCIDRv4",(t,e)=>{XE.init(t,e),nr.init(t,e)}),UT=ge("ZodCIDRv6",(t,e)=>{QE.init(t,e),nr.init(t,e)}),VT=ge("ZodBase64",(t,e)=>{WE.init(t,e),nr.init(t,e)}),GT=ge("ZodBase64URL",(t,e)=>{eC.init(t,e),nr.init(t,e)}),ZT=ge("ZodE164",(t,e)=>{tC.init(t,e),nr.init(t,e)}),KT=ge("ZodJWT",(t,e)=>{nC.init(t,e),nr.init(t,e)}),X5=ge("ZodNumber",(t,e)=>{V5.init(t,e),rr.init(t,e),t.gt=(n,a)=>t.check($x(n,a)),t.gte=(n,a)=>t.check(cm(n,a)),t.min=(n,a)=>t.check(cm(n,a)),t.lt=(n,a)=>t.check(Ix(n,a)),t.lte=(n,a)=>t.check(um(n,a)),t.max=(n,a)=>t.check(um(n,a)),t.int=n=>t.check(Ux(n)),t.safe=n=>t.check(Ux(n)),t.positive=n=>t.check($x(0,n)),t.nonnegative=n=>t.check(cm(0,n)),t.negative=n=>t.check(Ix(0,n)),t.nonpositive=n=>t.check(um(0,n)),t.multipleOf=(n,a)=>t.check(qx(n,a)),t.step=(n,a)=>t.check(qx(n,a)),t.finite=()=>t;const r=t._zod.bag;t.minValue=Math.max(r.minimum??Number.NEGATIVE_INFINITY,r.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,t.maxValue=Math.min(r.maximum??Number.POSITIVE_INFINITY,r.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,t.isInt=(r.format??"").includes("int")||Number.isSafeInteger(r.multipleOf??.5),t.isFinite=!0,t.format=r.format??null});function Je(t){return eT(X5,t)}const YT=ge("ZodNumberFormat",(t,e)=>{aC.init(t,e),X5.init(t,e)});function Ux(t){return tT(YT,t)}const XT=ge("ZodBoolean",(t,e)=>{sC.init(t,e),rr.init(t,e)});function Bt(t){return rT(XT,t)}const QT=ge("ZodAny",(t,e)=>{iC.init(t,e),rr.init(t,e)});function xl(){return nT(QT)}const WT=ge("ZodUnknown",(t,e)=>{oC.init(t,e),rr.init(t,e)});function Vx(){return aT(WT)}const JT=ge("ZodNever",(t,e)=>{lC.init(t,e),rr.init(t,e)});function eN(t){return sT(JT,t)}const tN=ge("ZodArray",(t,e)=>{uC.init(t,e),rr.init(t,e),t.element=e.element,t.min=(r,n)=>t.check(ah(r,n)),t.nonempty=r=>t.check(ah(1,r)),t.max=(r,n)=>t.check(G5(r,n)),t.length=(r,n)=>t.check(Z5(r,n)),t.unwrap=()=>t.element});function an(t,e){return gT(tN,t,e)}const rN=ge("ZodObject",(t,e)=>{cC.init(t,e),rr.init(t,e),Ut(t,"shape",()=>e.shape),t.keyof=()=>Ei(Object.keys(t._zod.def.shape)),t.catchall=r=>t.clone({...t._zod.def,catchall:r}),t.passthrough=()=>t.clone({...t._zod.def,catchall:Vx()}),t.loose=()=>t.clone({...t._zod.def,catchall:Vx()}),t.strict=()=>t.clone({...t._zod.def,catchall:eN()}),t.strip=()=>t.clone({...t._zod.def,catchall:void 0}),t.extend=r=>FA(t,r),t.merge=r=>LA(t,r),t.pick=r=>OA(t,r),t.omit=r=>RA(t,r),t.partial=(...r)=>PA(e8,t,r[0]),t.required=(...r)=>BA(t8,t,r[0])});function xt(t,e){const r={type:"object",get shape(){return p2(this,"shape",{...t}),this.shape},...He(e)};return new rN(r)}const nN=ge("ZodUnion",(t,e)=>{dC.init(t,e),rr.init(t,e),t.options=e.options});function Q5(t,e){return new nN({type:"union",options:t,...He(e)})}const aN=ge("ZodIntersection",(t,e)=>{hC.init(t,e),rr.init(t,e)});function sN(t,e){return new aN({type:"intersection",left:t,right:e})}const iN=ge("ZodRecord",(t,e)=>{fC.init(t,e),rr.init(t,e),t.keyType=e.keyType,t.valueType=e.valueType});function W5(t,e,r){return new iN({type:"record",keyType:t,valueType:e,...He(r)})}const _p=ge("ZodEnum",(t,e)=>{mC.init(t,e),rr.init(t,e),t.enum=e.entries,t.options=Object.values(e.entries);const r=new Set(Object.keys(e.entries));t.extract=(n,a)=>{const i={};for(const l of n)if(r.has(l))i[l]=e.entries[l];else throw new Error(`Key ${l} not found in enum`);return new _p({...e,checks:[],...He(a),entries:i})},t.exclude=(n,a)=>{const i={...e.entries};for(const l of n)if(r.has(l))delete i[l];else throw new Error(`Key ${l} not found in enum`);return new _p({...e,checks:[],...He(a),entries:i})}});function Ei(t,e){const r=Array.isArray(t)?Object.fromEntries(t.map(n=>[n,n])):t;return new _p({type:"enum",entries:r,...He(e)})}const oN=ge("ZodLiteral",(t,e)=>{pC.init(t,e),rr.init(t,e),t.values=new Set(e.values),Object.defineProperty(t,"value",{get(){if(e.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return e.values[0]}})});function J5(t,e){return new oN({type:"literal",values:Array.isArray(t)?t:[t],...He(e)})}const lN=ge("ZodTransform",(t,e)=>{gC.init(t,e),rr.init(t,e),t._zod.parse=(r,n)=>{r.addIssue=i=>{if(typeof i=="string")r.issues.push(yc(i,r.value,e));else{const l=i;l.fatal&&(l.continue=!1),l.code??(l.code="custom"),l.input??(l.input=r.value),l.inst??(l.inst=t),l.continue??(l.continue=!0),r.issues.push(yc(l))}};const a=e.transform(r.value,r);return a instanceof Promise?a.then(i=>(r.value=i,r)):(r.value=a,r)}});function uN(t){return new lN({type:"transform",transform:t})}const e8=ge("ZodOptional",(t,e)=>{bC.init(t,e),rr.init(t,e),t.unwrap=()=>t._zod.def.innerType});function Gx(t){return new e8({type:"optional",innerType:t})}const cN=ge("ZodNullable",(t,e)=>{yC.init(t,e),rr.init(t,e),t.unwrap=()=>t._zod.def.innerType});function Zx(t){return new cN({type:"nullable",innerType:t})}const dN=ge("ZodDefault",(t,e)=>{xC.init(t,e),rr.init(t,e),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function hN(t,e){return new dN({type:"default",innerType:t,get defaultValue(){return typeof e=="function"?e():e}})}const fN=ge("ZodPrefault",(t,e)=>{vC.init(t,e),rr.init(t,e),t.unwrap=()=>t._zod.def.innerType});function mN(t,e){return new fN({type:"prefault",innerType:t,get defaultValue(){return typeof e=="function"?e():e}})}const t8=ge("ZodNonOptional",(t,e)=>{_C.init(t,e),rr.init(t,e),t.unwrap=()=>t._zod.def.innerType});function pN(t,e){return new t8({type:"nonoptional",innerType:t,...He(e)})}const gN=ge("ZodCatch",(t,e)=>{wC.init(t,e),rr.init(t,e),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function bN(t,e){return new gN({type:"catch",innerType:t,catchValue:typeof e=="function"?e:()=>e})}const yN=ge("ZodPipe",(t,e)=>{kC.init(t,e),rr.init(t,e),t.in=e.in,t.out=e.out});function Kx(t,e){return new yN({type:"pipe",in:t,out:e})}const xN=ge("ZodReadonly",(t,e)=>{SC.init(t,e),rr.init(t,e)});function vN(t){return new xN({type:"readonly",innerType:t})}const _N=ge("ZodCustom",(t,e)=>{AC.init(t,e),rr.init(t,e)});function wN(t){const e=new wn({check:"custom"});return e._zod.check=t,e}function kN(t,e={}){return bT(_N,t,e)}function SN(t){const e=wN(r=>(r.addIssue=n=>{if(typeof n=="string")r.issues.push(yc(n,r.value,e._zod.def));else{const a=n;a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=r.value),a.inst??(a.inst=e),a.continue??(a.continue=!e._zod.def.abort),r.issues.push(yc(a))}},t(r.value,r)));return e}const x2=xt({core_user_id:Je(),username:Oe(),email:Oe().nullable().optional(),full_name:Oe().nullable().optional(),role:Ei(["guest","user","trusted","admin"]),is_active:Bt()}).passthrough(),AN=xt({id:Je(),code:Oe(),title:Oe(),description:Oe().nullable().optional(),type:J5("subject"),courses:an(xl()).optional(),matrix_templates:an(xl()).optional()}).passthrough(),EN=xt({ability_code:Oe(),ability_name:Oe(),description:Oe().nullable().optional(),subject_id:Je()}).passthrough();xt({subject:AN,abilities:an(EN),matrix:xt({id:Je(),name:Oe(),subject_id:Je(),grade_scale_id:Je()}).optional(),matrix_cells_created:Je().optional()}).passthrough();xt({id:Je(),title:Oe(),code:Oe().nullable().optional(),description:Oe().nullable().optional(),position:Je().optional(),type:Ei(["subject","course","chapter","area"]),parent_id:Je().nullable().optional(),chapters:an(xl()).optional(),areas:an(xl()).optional()}).passthrough();xt({bank_problem_definition_id:Je(),title:Oe(),prompt_tex:Oe().nullable().optional(),weighted_score:Je().nullable().optional(),is_np:Bt().optional(),is_s:Bt().optional(),is_r:Bt().optional(),is_fake:Bt().optional(),is_elev:Bt().optional(),is_digital:Bt().optional(),is_whole:Bt().optional(),levels:an(Oe()).nullable().optional(),ability_codes:Oe().nullable().optional(),level_codes:Oe().nullable().optional(),points_e:Je().optional(),points_c:Je().optional(),points_a:Je().optional(),bank_area_definition_id:Je().nullable().optional(),owner_id:Je().nullable().optional(),created_by:Je().nullable().optional(),updated_by:Je().nullable().optional(),status:Oe().nullable().optional(),owner_username:Oe().nullable().optional(),request_publish:Bt().optional(),is_public:Bt().optional(),assessment_items:an(xl()).optional(),pdf_path:Oe().nullable().optional(),pdf_sha256:Oe().nullable().optional()}).passthrough();xt({page:Je(),size:Je(),total:Je(),pages:Je()}).passthrough();const CN=xt({detail:Oe(),status_code:Je().optional()}).passthrough(),v2=xt({message:Oe(),status:J5("success").optional()}).passthrough(),TN=t=>CN.parse(t);async function NN(t,e){try{const r=await t();if(!r.ok){const a=await r.json().catch(()=>({}));try{const i=TN(a);throw new Error(i.detail)}catch{const i=r.statusText||"Unknown error";throw new Error(`HTTP ${r.status}: ${i}`)}}const n=await r.json();return e.parse(n)}catch(r){throw r instanceof ET?(console.error("API Response validation failed:",{issues:r.issues,message:"Ogiltig data frn servern",data:r.issues.map(n=>({path:n.path.join("."),message:n.message,code:n.code})),totalErrors:r.issues.length}),new Error("Ogiltig data frn servern")):r}}async function st(t,e={},r){let n=t;typeof t=="string"&&t.startsWith("/")&&(n="https://83.251.173.209.nip.io".replace(/\/$/,"")+t);const a=r,i=new Headers(e.headers||{});a&&!i.has("Authorization")&&i.set("Authorization",`Bearer ${a}`);const l=await fetch(n,{...e,headers:i});if(!l.ok){const u=new Error(`HTTP error! status: ${l.status}`);throw u.status=l.status,u}return l}async function r8(t,e,r={},n){return NN(()=>st(t,r,n),e)}function MN(t){return lr({queryKey:["globalStats"],enabled:!!t,queryFn:async()=>{const e=await st("/v1/user-statistics/global",{},t);if(!e.ok)throw new Error("Kunde inte hmta global statistik");return e.json()},staleTime:6e4})}function jN(t){return lr({queryKey:["currentUserStats"],enabled:!!t,queryFn:async()=>{const e=await st("/v1/user-statistics/current-user",{},t);if(!e.ok)throw new Error("Kunde inte hmta anvndarstatistik");return e.json()},staleTime:3e4})}function DN(t){return lr({queryKey:["totalProblems"],enabled:!!t,queryFn:async()=>{const e=await st("/v1/problems/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({page:1,page_size:1})},t);if(!e.ok)throw new Error("Kunde inte hmta problemantal");return(await e.json()).total_count??0},staleTime:3e4})}/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zN=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ON=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,n)=>n?n.toUpperCase():r.toLowerCase()),Yx=t=>{const e=ON(t);return e.charAt(0).toUpperCase()+e.slice(1)},n8=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim(),RN=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var FN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LN=T.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:l,...u},d)=>T.createElement("svg",{ref:d,...FN,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:n8("lucide",a),...!i&&!RN(u)&&{"aria-hidden":"true"},...u},[...l.map(([h,p])=>T.createElement(h,p)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=(t,e)=>{const r=T.forwardRef(({className:n,...a},i)=>T.createElement(LN,{ref:i,iconNode:e,className:n8(`lucide-${zN(Yx(t))}`,`lucide-${t}`,n),...a}));return r.displayName=Yx(t),r};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]],BN=Re("ban",PN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IN=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],$N=Re("bold",IN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qN=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],HN=Re("book-open",qN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UN=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}],["path",{d:"M8 11h8",key:"vwpz6n"}],["path",{d:"M8 7h6",key:"1f0q6e"}]],VN=Re("book-text",UN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GN=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],a8=Re("bot",GN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZN=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],KN=Re("brain-circuit",ZN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YN=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],s8=Re("brain",YN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XN=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ko=Re("chevron-down",XN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QN=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],WN=Re("chevron-left",QN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JN=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Fc=Re("chevron-right",JN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eM=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],tM=Re("chevron-up",eM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],wp=Re("circle-alert",rM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nM=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],kp=Re("circle-check-big",nM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],sM=Re("circle-question-mark",aM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Xx=Re("circle-x",iM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],lM=Re("circle",oM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uM=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],i8=Re("code",uM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cM=[["path",{d:"M12 2a10 10 0 1 0 10 10 4 4 0 0 1-5-5 4 4 0 0 1-5-5",key:"laymnq"}],["path",{d:"M8.5 8.5v.01",key:"ue8clq"}],["path",{d:"M16 15.5v.01",key:"14dtrp"}],["path",{d:"M12 12v.01",key:"u5ubse"}],["path",{d:"M11 17v.01",key:"1hyl5a"}],["path",{d:"M7 14v.01",key:"uct60s"}]],dM=Re("cookie",cM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hM=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],fM=Re("copy",hM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mM=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],Gd=Re("cpu",mM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pM=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],gM=Re("download",pM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bM=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],yM=Re("ellipsis",bM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xM=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],vM=Re("external-link",xM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _M=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],vl=Re("eye-off",_M);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wM=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],_l=Re("eye",wM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kM=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],xc=Re("file-text",kM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SM=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],_2=Re("flag",SM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AM=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M2 10h20",key:"1ir3d8"}]],sh=Re("folder-closed",AM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EM=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],w2=Re("folder-open",EM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],TM=Re("globe",CM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NM=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],o8=Re("graduation-cap",NM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MM=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],jM=Re("hash",MM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DM=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],zM=Re("house",DM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OM=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],RM=Re("image",OM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],l8=Re("info",FM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LM=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],PM=Re("italic",LM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BM=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],Sp=Re("key",BM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IM=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],$M=Re("layers",IM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qM=[["rect",{width:"8",height:"18",x:"3",y:"3",rx:"1",key:"oynpb5"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M20.4 18.9c.2.5-.1 1.1-.6 1.3l-1.9.7c-.5.2-1.1-.1-1.3-.6L11.1 5.1c-.2-.5.1-1.1.6-1.3l1.9-.7c.5-.2 1.1.1 1.3.6Z",key:"1qboyk"}]],HM=Re("library-big",qM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UM=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],VM=Re("list",UM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GM=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Qx=Re("loader-circle",GM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZM=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],KM=Re("log-in",ZM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YM=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Wx=Re("lock",YM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XM=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],QM=Re("log-out",XM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WM=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Ap=Re("mail",WM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JM=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],ej=Re("map-pin",JM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tj=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],u8=Re("monitor",tj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rj=[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]],nj=Re("move",rj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aj=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],dm=Re("pen-tool",aj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sj=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Za=Re("plus",sj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ij=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],oj=Re("printer",ij);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lj=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],wl=Re("refresh-cw",lj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uj=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],cj=Re("rotate-ccw",uj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dj=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],js=Re("save",dj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hj=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],fj=Re("search",hj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mj=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],c8=Re("settings",mj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pj=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],gj=Re("shield-check",pj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bj=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m14.5 9.5-5 5",key:"17q4r4"}],["path",{d:"m9.5 9.5 5 5",key:"18nt4w"}]],Jx=Re("shield-x",bj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yj=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],ho=Re("shield",yj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xj=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],d8=Re("square-pen",xj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vj=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],_j=Re("table",vj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],k2=Re("target",wj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kj=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],xa=Re("trash-2",kj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sj=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ba=Re("triangle-alert",Sj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aj=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],Ej=Re("type",Aj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cj=[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]],Tj=Re("underline",Cj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nj=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Mj=Re("user-check",Nj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jj=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],Dj=Re("user-x",jj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zj=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],kl=Re("user",zj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oj=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Lc=Re("users",Oj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rj=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],e3=Re("wand-sparkles",Rj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fj=[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]],Lj=Re("workflow",Fj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pj=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],va=Re("x",Pj),Bj=()=>{const{isAuthenticated:t,user:e,token:r,logout:n,renewToken:a}=Lr(),i=EA(),l=ka(),u=zl(),[d,h]=T.useState(!1),p=T.useRef(null),{data:b}=MN(r??void 0),{data:y}=jN(r??void 0),{data:x}=DN(r??void 0),_=N=>{switch(N){case"home":u("/");break;case"problems":u("/problems");break;case"docs":u("/docs");break;case"login":u("/login");break;default:u("/")}},k=N=>{const D="nav-link";let j=!1;switch(N){case"home":j=l.pathname==="/";break;case"problems":j=l.pathname==="/problems";break;case"docs":j=l.pathname==="/docs";break;case"changelog":j=l.pathname==="/changelog";break;case"login":j=l.pathname==="/login";break;default:j=!1}return j?`${D} active`:D};T.useEffect(()=>{const N=D=>{p.current&&!p.current.contains(D.target)&&h(!1)};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]);const S=()=>{h(!d)},A=()=>{h(!1),u("/settings")},C=()=>{h(!1),n()};return m.jsx("nav",{className:"topnav px-6 py-3 w-full",children:m.jsxs("div",{className:"max-w-screen-2xl mx-auto flex justify-between items-center gap-8",children:[m.jsxs("div",{className:"flex items-center gap-8",children:[m.jsxs("button",{onClick:()=>_("home"),className:k("home"),children:[m.jsx(zM,{})," Hem"]}),m.jsx("button",{onClick:()=>_("problems"),className:k("problems"),children:m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx(xc,{size:16}),m.jsx("span",{children:"Problem"}),x&&x>0&&m.jsxs("span",{children:["(",x,")"]})]})}),m.jsxs("button",{onClick:()=>_("docs"),className:k("docs"),children:[m.jsx(sM,{})," Docs"]}),m.jsxs("button",{onClick:()=>u("/changelog"),className:k("changelog"),children:[m.jsx(xc,{size:16})," Changelog"]})]}),m.jsx("div",{className:"flex items-center gap-4",children:t?m.jsxs(m.Fragment,{children:[b&&m.jsxs("div",{className:"flex items-center gap-2 text-sm cursor-help",title:`${b.active_users} aktiva anvndare av ${b.total_users} totala anvndare`,children:[m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx("div",{className:"w-2 h-2 rounded-full animate-pulse",style:{backgroundColor:"var(--status-success)"}}),m.jsx(Lc,{size:16,style:{color:"var(--text-secondary)"}})]}),m.jsx("span",{className:"font-medium font-mono",style:{color:"var(--text-primary)"},children:b.active_users})]}),i!==null&&i<8*60*1e3&&m.jsxs("span",{className:`nav-link transition-colors duration-300 ${i<3e4?"text-red-500":i<6e4?"text-yellow-500":"text-green-500"}`,title:`Token expires in ${Math.ceil(i/1e3)} seconds`,children:["Token: ",Math.ceil(i/1e3),"s"]}),i!==null&&i<5*60*1e3&&i>30*1e3&&m.jsxs("button",{onClick:a,className:"nav-link bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded transition-colors",title:"Frnya token fr att undvika utloggning",children:[m.jsx(wl,{size:16})," Frnya Token"]}),m.jsxs("div",{className:"relative",ref:p,children:[m.jsxs("button",{onClick:S,className:"nav-link flex items-center gap-2",children:[m.jsx(kl,{size:20}),m.jsx("span",{children:e?.username}),y&&m.jsx(m.Fragment,{children:m.jsxs("span",{className:"text-xs text-green-500 font-mono",children:["(+",y.problems_public+y.problems_requested,")"]})}),m.jsx(ko,{size:16,className:`transition-transform ${d?"rotate-180":""}`})]}),d&&m.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white rounded-md shadow-lg border border-gray-200 z-50",children:[m.jsxs("div",{className:"px-4 py-3 border-b border-gray-200",children:[m.jsx("div",{className:"font-medium text-gray-900",children:e?.username}),m.jsx("div",{className:"text-sm text-gray-500",children:e?.role}),y&&m.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[y.problems_created," skapade  ",y.problems_public," publika  ",y.problems_requested," begrda"]})]}),m.jsxs("div",{className:"py-1",children:[m.jsxs("button",{onClick:A,className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center gap-2",children:[m.jsx(c8,{size:16}),"Instllningar"]}),m.jsxs("button",{onClick:C,className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center gap-2",children:[m.jsx(QM,{size:16}),"Logga ut"]})]})]})]})]}):m.jsxs("button",{onClick:()=>_("login"),className:"nav-link",children:[m.jsx(KM,{})," Login"]})})]})})};var Pc=t=>t.type==="checkbox",oo=t=>t instanceof Date,rn=t=>t==null;const h8=t=>typeof t=="object";var yr=t=>!rn(t)&&!Array.isArray(t)&&h8(t)&&!oo(t),Ij=t=>yr(t)&&t.target?Pc(t.target)?t.target.checked:t.target.value:t,$j=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,qj=(t,e)=>t.has($j(e)),Hj=t=>{const e=t.constructor&&t.constructor.prototype;return yr(e)&&e.hasOwnProperty("isPrototypeOf")},S2=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Kt(t){let e;const r=Array.isArray(t),n=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(!(S2&&(t instanceof Blob||n))&&(r||yr(t)))if(e=r?[]:{},!r&&!Hj(t))e=t;else for(const a in t)t.hasOwnProperty(a)&&(e[a]=Kt(t[a]));else return t;return e}var Nh=t=>/^\w*$/.test(t),Yt=t=>t===void 0,Mh=t=>Array.isArray(t)?t.filter(Boolean):[],A2=t=>Mh(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Le=(t,e,r)=>{if(!e||!yr(t))return r;const n=(Nh(e)?[e]:A2(e)).reduce((a,i)=>rn(a)?a:a[i],t);return Yt(n)||n===t?Yt(t[e])?r:t[e]:n},La=t=>typeof t=="boolean",Nt=(t,e,r)=>{let n=-1;const a=Nh(e)?[e]:A2(e),i=a.length,l=i-1;for(;++n<i;){const u=a[n];let d=r;if(n!==l){const h=t[u];d=yr(h)||Array.isArray(h)?h:isNaN(+a[n+1])?{}:[]}if(u==="__proto__"||u==="constructor"||u==="prototype")return;t[u]=d,t=t[u]}};const t3={BLUR:"blur",FOCUS_OUT:"focusout"},ta={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},ys={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},E2=rt.createContext(null);E2.displayName="HookFormContext";const C2=()=>rt.useContext(E2),Uj=t=>{const{children:e,...r}=t;return rt.createElement(E2.Provider,{value:r},e)};var Vj=(t,e,r,n=!0)=>{const a={defaultValues:e._defaultValues};for(const i in t)Object.defineProperty(a,i,{get:()=>{const l=i;return e._proxyFormState[l]!==ta.all&&(e._proxyFormState[l]=!n||ta.all),t[l]}});return a};const f8=typeof window<"u"?T.useLayoutEffect:T.useEffect;var Ia=t=>typeof t=="string",Gj=(t,e,r,n,a)=>Ia(t)?(n&&e.watch.add(t),Le(r,t,a)):Array.isArray(t)?t.map(i=>(n&&e.watch.add(i),Le(r,i))):(n&&(e.watchAll=!0),r),T2=(t,e,r,n,a)=>e?{...r[t],types:{...r[t]&&r[t].types?r[t].types:{},[n]:a||!0}}:{},yn=t=>Array.isArray(t)?t:[t],r3=()=>{let t=[];return{get observers(){return t},next:a=>{for(const i of t)i.next&&i.next(a)},subscribe:a=>(t.push(a),{unsubscribe:()=>{t=t.filter(i=>i!==a)}}),unsubscribe:()=>{t=[]}}},Ep=t=>rn(t)||!h8(t);function mi(t,e,r=new WeakSet){if(Ep(t)||Ep(e))return t===e;if(oo(t)&&oo(e))return t.getTime()===e.getTime();const n=Object.keys(t),a=Object.keys(e);if(n.length!==a.length)return!1;if(r.has(t)||r.has(e))return!0;r.add(t),r.add(e);for(const i of n){const l=t[i];if(!a.includes(i))return!1;if(i!=="ref"){const u=e[i];if(oo(l)&&oo(u)||yr(l)&&yr(u)||Array.isArray(l)&&Array.isArray(u)?!mi(l,u,r):l!==u)return!1}}return!0}var en=t=>yr(t)&&!Object.keys(t).length,N2=t=>t.type==="file",ba=t=>typeof t=="function",ih=t=>{if(!S2)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},m8=t=>t.type==="select-multiple",M2=t=>t.type==="radio",Zj=t=>M2(t)||Pc(t),hm=t=>ih(t)&&t.isConnected;function Kj(t,e){const r=e.slice(0,-1).length;let n=0;for(;n<r;)t=Yt(t)?n++:t[e[n++]];return t}function Yj(t){for(const e in t)if(t.hasOwnProperty(e)&&!Yt(t[e]))return!1;return!0}function pr(t,e){const r=Array.isArray(e)?e:Nh(e)?[e]:A2(e),n=r.length===1?t:Kj(t,r),a=r.length-1,i=r[a];return n&&delete n[i],a!==0&&(yr(n)&&en(n)||Array.isArray(n)&&Yj(n))&&pr(t,r.slice(0,-1)),t}var p8=t=>{for(const e in t)if(ba(t[e]))return!0;return!1};function oh(t,e={}){const r=Array.isArray(t);if(yr(t)||r)for(const n in t)Array.isArray(t[n])||yr(t[n])&&!p8(t[n])?(e[n]=Array.isArray(t[n])?[]:{},oh(t[n],e[n])):rn(t[n])||(e[n]=!0);return e}function g8(t,e,r){const n=Array.isArray(t);if(yr(t)||n)for(const a in t)Array.isArray(t[a])||yr(t[a])&&!p8(t[a])?Yt(e)||Ep(r[a])?r[a]=Array.isArray(t[a])?oh(t[a],[]):{...oh(t[a])}:g8(t[a],rn(e)?{}:e[a],r[a]):r[a]=!mi(t[a],e[a]);return r}var Iu=(t,e)=>g8(t,e,oh(e));const n3={value:!1,isValid:!1},a3={value:!0,isValid:!0};var b8=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Yt(t[0].attributes.value)?Yt(t[0].value)||t[0].value===""?a3:{value:t[0].value,isValid:!0}:a3:n3}return n3},y8=(t,{valueAsNumber:e,valueAsDate:r,setValueAs:n})=>Yt(t)?t:e?t===""?NaN:t&&+t:r&&Ia(t)?new Date(t):n?n(t):t;const s3={isValid:!1,value:null};var x8=t=>Array.isArray(t)?t.reduce((e,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:e,s3):s3;function i3(t){const e=t.ref;return N2(e)?e.files:M2(e)?x8(t.refs).value:m8(e)?[...e.selectedOptions].map(({value:r})=>r):Pc(e)?b8(t.refs).value:y8(Yt(e.value)?t.ref.value:e.value,t)}var Xj=(t,e,r,n)=>{const a={};for(const i of t){const l=Le(e,i);l&&Nt(a,i,l._f)}return{criteriaMode:r,names:[...t],fields:a,shouldUseNativeValidation:n}},lh=t=>t instanceof RegExp,$u=t=>Yt(t)?t:lh(t)?t.source:yr(t)?lh(t.value)?t.value.source:t.value:t,hl=t=>({isOnSubmit:!t||t===ta.onSubmit,isOnBlur:t===ta.onBlur,isOnChange:t===ta.onChange,isOnAll:t===ta.all,isOnTouch:t===ta.onTouched});const o3="AsyncFunction";var Qj=t=>!!t&&!!t.validate&&!!(ba(t.validate)&&t.validate.constructor.name===o3||yr(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===o3)),Wj=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),Cp=(t,e,r)=>!r&&(e.watchAll||e.watch.has(t)||[...e.watch].some(n=>t.startsWith(n)&&/^\.\w+/.test(t.slice(n.length))));const ml=(t,e,r,n)=>{for(const a of r||Object.keys(t)){const i=Le(t,a);if(i){const{_f:l,...u}=i;if(l){if(l.refs&&l.refs[0]&&e(l.refs[0],a)&&!n)return!0;if(l.ref&&e(l.ref,l.name)&&!n)return!0;if(ml(u,e))break}else if(yr(u)&&ml(u,e))break}}};function l3(t,e,r){const n=Le(t,r);if(n||Nh(r))return{error:n,name:r};const a=r.split(".");for(;a.length;){const i=a.join("."),l=Le(e,i),u=Le(t,i);if(l&&!Array.isArray(l)&&r!==i)return{name:r};if(u&&u.type)return{name:i,error:u};if(u&&u.root&&u.root.type)return{name:`${i}.root`,error:u.root};a.pop()}return{name:r}}var Jj=(t,e,r,n)=>{r(t);const{name:a,...i}=t;return en(i)||Object.keys(i).length>=Object.keys(e).length||Object.keys(i).find(l=>e[l]===(!n||ta.all))},eD=(t,e,r)=>!t||!e||t===e||yn(t).some(n=>n&&(r?n===e:n.startsWith(e)||e.startsWith(n))),tD=(t,e,r,n,a)=>a.isOnAll?!1:!r&&a.isOnTouch?!(e||t):(r?n.isOnBlur:a.isOnBlur)?!t:(r?n.isOnChange:a.isOnChange)?t:!0,rD=(t,e)=>!Mh(Le(t,e)).length&&pr(t,e),v8=(t,e,r)=>{const n=yn(Le(t,r));return Nt(n,"root",e[r]),Nt(t,r,n),t},Zd=t=>Ia(t);function u3(t,e,r="validate"){if(Zd(t)||Array.isArray(t)&&t.every(Zd)||La(t)&&!t)return{type:r,message:Zd(t)?t:"",ref:e}}var ll=t=>yr(t)&&!lh(t)?t:{value:t,message:""},Tp=async(t,e,r,n,a,i)=>{const{ref:l,refs:u,required:d,maxLength:h,minLength:p,min:b,max:y,pattern:x,validate:_,name:k,valueAsNumber:S,mount:A}=t._f,C=Le(r,k);if(!A||e.has(k))return{};const N=u?u[0]:l,D=G=>{a&&N.reportValidity&&(N.setCustomValidity(La(G)?"":G||""),N.reportValidity())},j={},O=M2(l),F=Pc(l),R=O||F,B=(S||N2(l))&&Yt(l.value)&&Yt(C)||ih(l)&&l.value===""||C===""||Array.isArray(C)&&!C.length,V=T2.bind(null,k,n,j),$=(G,le,ie,pe=ys.maxLength,K=ys.minLength)=>{const ue=G?le:ie;j[k]={type:G?pe:K,message:ue,ref:l,...V(G?pe:K,ue)}};if(i?!Array.isArray(C)||!C.length:d&&(!R&&(B||rn(C))||La(C)&&!C||F&&!b8(u).isValid||O&&!x8(u).isValid)){const{value:G,message:le}=Zd(d)?{value:!!d,message:d}:ll(d);if(G&&(j[k]={type:ys.required,message:le,ref:N,...V(ys.required,le)},!n))return D(le),j}if(!B&&(!rn(b)||!rn(y))){let G,le;const ie=ll(y),pe=ll(b);if(!rn(C)&&!isNaN(C)){const K=l.valueAsNumber||C&&+C;rn(ie.value)||(G=K>ie.value),rn(pe.value)||(le=K<pe.value)}else{const K=l.valueAsDate||new Date(C),ue=q=>new Date(new Date().toDateString()+" "+q),Ce=l.type=="time",ze=l.type=="week";Ia(ie.value)&&C&&(G=Ce?ue(C)>ue(ie.value):ze?C>ie.value:K>new Date(ie.value)),Ia(pe.value)&&C&&(le=Ce?ue(C)<ue(pe.value):ze?C<pe.value:K<new Date(pe.value))}if((G||le)&&($(!!G,ie.message,pe.message,ys.max,ys.min),!n))return D(j[k].message),j}if((h||p)&&!B&&(Ia(C)||i&&Array.isArray(C))){const G=ll(h),le=ll(p),ie=!rn(G.value)&&C.length>+G.value,pe=!rn(le.value)&&C.length<+le.value;if((ie||pe)&&($(ie,G.message,le.message),!n))return D(j[k].message),j}if(x&&!B&&Ia(C)){const{value:G,message:le}=ll(x);if(lh(G)&&!C.match(G)&&(j[k]={type:ys.pattern,message:le,ref:l,...V(ys.pattern,le)},!n))return D(le),j}if(_){if(ba(_)){const G=await _(C,r),le=u3(G,N);if(le&&(j[k]={...le,...V(ys.validate,le.message)},!n))return D(le.message),j}else if(yr(_)){let G={};for(const le in _){if(!en(G)&&!n)break;const ie=u3(await _[le](C,r),N,le);ie&&(G={...ie,...V(le,ie.message)},D(ie.message),n&&(j[k]=G))}if(!en(G)&&(j[k]={ref:N,...G},!n))return j}}return D(!0),j};const nD={mode:ta.onSubmit,reValidateMode:ta.onChange,shouldFocusError:!0};function aD(t={}){let e={...nD,...t},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:ba(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},n={},a=yr(e.defaultValues)||yr(e.values)?Kt(e.defaultValues||e.values)||{}:{},i=e.shouldUnregister?{}:Kt(a),l={action:!1,mount:!1,watch:!1},u={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},d,h=0;const p={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let b={...p};const y={array:r3(),state:r3()},x=e.criteriaMode===ta.all,_=Z=>re=>{clearTimeout(h),h=setTimeout(Z,re)},k=async Z=>{if(!e.disabled&&(p.isValid||b.isValid||Z)){const re=e.resolver?en((await F()).errors):await B(n,!0);re!==r.isValid&&y.state.next({isValid:re})}},S=(Z,re)=>{!e.disabled&&(p.isValidating||p.validatingFields||b.isValidating||b.validatingFields)&&((Z||Array.from(u.mount)).forEach(he=>{he&&(re?Nt(r.validatingFields,he,re):pr(r.validatingFields,he))}),y.state.next({validatingFields:r.validatingFields,isValidating:!en(r.validatingFields)}))},A=(Z,re=[],he,de,fe=!0,xe=!0)=>{if(de&&he&&!e.disabled){if(l.action=!0,xe&&Array.isArray(Le(n,Z))){const De=he(Le(n,Z),de.argA,de.argB);fe&&Nt(n,Z,De)}if(xe&&Array.isArray(Le(r.errors,Z))){const De=he(Le(r.errors,Z),de.argA,de.argB);fe&&Nt(r.errors,Z,De),rD(r.errors,Z)}if((p.touchedFields||b.touchedFields)&&xe&&Array.isArray(Le(r.touchedFields,Z))){const De=he(Le(r.touchedFields,Z),de.argA,de.argB);fe&&Nt(r.touchedFields,Z,De)}(p.dirtyFields||b.dirtyFields)&&(r.dirtyFields=Iu(a,i)),y.state.next({name:Z,isDirty:$(Z,re),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Nt(i,Z,re)},C=(Z,re)=>{Nt(r.errors,Z,re),y.state.next({errors:r.errors})},N=Z=>{r.errors=Z,y.state.next({errors:r.errors,isValid:!1})},D=(Z,re,he,de)=>{const fe=Le(n,Z);if(fe){const xe=Le(i,Z,Yt(he)?Le(a,Z):he);Yt(xe)||de&&de.defaultChecked||re?Nt(i,Z,re?xe:i3(fe._f)):ie(Z,xe),l.mount&&k()}},j=(Z,re,he,de,fe)=>{let xe=!1,De=!1;const Ke={name:Z};if(!e.disabled){if(!he||de){(p.isDirty||b.isDirty)&&(De=r.isDirty,r.isDirty=Ke.isDirty=$(),xe=De!==Ke.isDirty);const et=mi(Le(a,Z),re);De=!!Le(r.dirtyFields,Z),et?pr(r.dirtyFields,Z):Nt(r.dirtyFields,Z,!0),Ke.dirtyFields=r.dirtyFields,xe=xe||(p.dirtyFields||b.dirtyFields)&&De!==!et}if(he){const et=Le(r.touchedFields,Z);et||(Nt(r.touchedFields,Z,he),Ke.touchedFields=r.touchedFields,xe=xe||(p.touchedFields||b.touchedFields)&&et!==he)}xe&&fe&&y.state.next(Ke)}return xe?Ke:{}},O=(Z,re,he,de)=>{const fe=Le(r.errors,Z),xe=(p.isValid||b.isValid)&&La(re)&&r.isValid!==re;if(e.delayError&&he?(d=_(()=>C(Z,he)),d(e.delayError)):(clearTimeout(h),d=null,he?Nt(r.errors,Z,he):pr(r.errors,Z)),(he?!mi(fe,he):fe)||!en(de)||xe){const De={...de,...xe&&La(re)?{isValid:re}:{},errors:r.errors,name:Z};r={...r,...De},y.state.next(De)}},F=async Z=>{S(Z,!0);const re=await e.resolver(i,e.context,Xj(Z||u.mount,n,e.criteriaMode,e.shouldUseNativeValidation));return S(Z),re},R=async Z=>{const{errors:re}=await F(Z);if(Z)for(const he of Z){const de=Le(re,he);de?Nt(r.errors,he,de):pr(r.errors,he)}else r.errors=re;return re},B=async(Z,re,he={valid:!0})=>{for(const de in Z){const fe=Z[de];if(fe){const{_f:xe,...De}=fe;if(xe){const Ke=u.array.has(xe.name),et=fe._f&&Qj(fe._f);et&&p.validatingFields&&S([de],!0);const it=await Tp(fe,u.disabled,i,x,e.shouldUseNativeValidation&&!re,Ke);if(et&&p.validatingFields&&S([de]),it[xe.name]&&(he.valid=!1,re))break;!re&&(Le(it,xe.name)?Ke?v8(r.errors,it,xe.name):Nt(r.errors,xe.name,it[xe.name]):pr(r.errors,xe.name))}!en(De)&&await B(De,re,he)}}return he.valid},V=()=>{for(const Z of u.unMount){const re=Le(n,Z);re&&(re._f.refs?re._f.refs.every(he=>!hm(he)):!hm(re._f.ref))&&Ne(Z)}u.unMount=new Set},$=(Z,re)=>!e.disabled&&(Z&&re&&Nt(i,Z,re),!mi(q(),a)),G=(Z,re,he)=>Gj(Z,u,{...l.mount?i:Yt(re)?a:Ia(Z)?{[Z]:re}:re},he,re),le=Z=>Mh(Le(l.mount?i:a,Z,e.shouldUnregister?Le(a,Z,[]):[])),ie=(Z,re,he={})=>{const de=Le(n,Z);let fe=re;if(de){const xe=de._f;xe&&(!xe.disabled&&Nt(i,Z,y8(re,xe)),fe=ih(xe.ref)&&rn(re)?"":re,m8(xe.ref)?[...xe.ref.options].forEach(De=>De.selected=fe.includes(De.value)):xe.refs?Pc(xe.ref)?xe.refs.forEach(De=>{(!De.defaultChecked||!De.disabled)&&(Array.isArray(fe)?De.checked=!!fe.find(Ke=>Ke===De.value):De.checked=fe===De.value||!!fe)}):xe.refs.forEach(De=>De.checked=De.value===fe):N2(xe.ref)?xe.ref.value="":(xe.ref.value=fe,xe.ref.type||y.state.next({name:Z,values:Kt(i)})))}(he.shouldDirty||he.shouldTouch)&&j(Z,fe,he.shouldTouch,he.shouldDirty,!0),he.shouldValidate&&ze(Z)},pe=(Z,re,he)=>{for(const de in re){if(!re.hasOwnProperty(de))return;const fe=re[de],xe=Z+"."+de,De=Le(n,xe);(u.array.has(Z)||yr(fe)||De&&!De._f)&&!oo(fe)?pe(xe,fe,he):ie(xe,fe,he)}},K=(Z,re,he={})=>{const de=Le(n,Z),fe=u.array.has(Z),xe=Kt(re);Nt(i,Z,xe),fe?(y.array.next({name:Z,values:Kt(i)}),(p.isDirty||p.dirtyFields||b.isDirty||b.dirtyFields)&&he.shouldDirty&&y.state.next({name:Z,dirtyFields:Iu(a,i),isDirty:$(Z,xe)})):de&&!de._f&&!rn(xe)?pe(Z,xe,he):ie(Z,xe,he),Cp(Z,u)&&y.state.next({...r}),y.state.next({name:l.mount?Z:void 0,values:Kt(i)})},ue=async Z=>{l.mount=!0;const re=Z.target;let he=re.name,de=!0;const fe=Le(n,he),xe=et=>{de=Number.isNaN(et)||oo(et)&&isNaN(et.getTime())||mi(et,Le(i,he,et))},De=hl(e.mode),Ke=hl(e.reValidateMode);if(fe){let et,it;const dr=re.type?i3(fe._f):Ij(Z),An=Z.type===t3.BLUR||Z.type===t3.FOCUS_OUT,Fs=!Wj(fe._f)&&!e.resolver&&!Le(r.errors,he)&&!fe._f.deps||tD(An,Le(r.touchedFields,he),r.isSubmitted,Ke,De),En=Cp(he,u,An);Nt(i,he,dr),An?(fe._f.onBlur&&fe._f.onBlur(Z),d&&d(0)):fe._f.onChange&&fe._f.onChange(Z);const Mr=j(he,dr,An),Ur=!en(Mr)||En;if(!An&&y.state.next({name:he,type:Z.type,values:Kt(i)}),Fs)return(p.isValid||b.isValid)&&(e.mode==="onBlur"?An&&k():An||k()),Ur&&y.state.next({name:he,...En?{}:Mr});if(!An&&En&&y.state.next({...r}),e.resolver){const{errors:la}=await F([he]);if(xe(dr),de){const ua=l3(r.errors,n,he),Co=l3(la,n,ua.name||he);et=Co.error,he=Co.name,it=en(la)}}else S([he],!0),et=(await Tp(fe,u.disabled,i,x,e.shouldUseNativeValidation))[he],S([he]),xe(dr),de&&(et?it=!1:(p.isValid||b.isValid)&&(it=await B(n,!0)));de&&(fe._f.deps&&ze(fe._f.deps),O(he,it,et,Mr))}},Ce=(Z,re)=>{if(Le(r.errors,re)&&Z.focus)return Z.focus(),1},ze=async(Z,re={})=>{let he,de;const fe=yn(Z);if(e.resolver){const xe=await R(Yt(Z)?Z:fe);he=en(xe),de=Z?!fe.some(De=>Le(xe,De)):he}else Z?(de=(await Promise.all(fe.map(async xe=>{const De=Le(n,xe);return await B(De&&De._f?{[xe]:De}:De)}))).every(Boolean),!(!de&&!r.isValid)&&k()):de=he=await B(n);return y.state.next({...!Ia(Z)||(p.isValid||b.isValid)&&he!==r.isValid?{}:{name:Z},...e.resolver||!Z?{isValid:he}:{},errors:r.errors}),re.shouldFocus&&!de&&ml(n,Ce,Z?fe:u.mount),de},q=Z=>{const re={...l.mount?i:a};return Yt(Z)?re:Ia(Z)?Le(re,Z):Z.map(he=>Le(re,he))},ae=(Z,re)=>({invalid:!!Le((re||r).errors,Z),isDirty:!!Le((re||r).dirtyFields,Z),error:Le((re||r).errors,Z),isValidating:!!Le(r.validatingFields,Z),isTouched:!!Le((re||r).touchedFields,Z)}),we=Z=>{Z&&yn(Z).forEach(re=>pr(r.errors,re)),y.state.next({errors:Z?r.errors:{}})},be=(Z,re,he)=>{const de=(Le(n,Z,{_f:{}})._f||{}).ref,fe=Le(r.errors,Z)||{},{ref:xe,message:De,type:Ke,...et}=fe;Nt(r.errors,Z,{...et,...re,ref:de}),y.state.next({name:Z,errors:r.errors,isValid:!1}),he&&he.shouldFocus&&de&&de.focus&&de.focus()},Se=(Z,re)=>ba(Z)?y.state.subscribe({next:he=>Z(G(void 0,re),he)}):G(Z,re,!0),W=Z=>y.state.subscribe({next:re=>{eD(Z.name,re.name,Z.exact)&&Jj(re,Z.formState||p,qt,Z.reRenderRoot)&&Z.callback({values:{...i},...r,...re})}}).unsubscribe,ce=Z=>(l.mount=!0,b={...b,...Z.formState},W({...Z,formState:b})),Ne=(Z,re={})=>{for(const he of Z?yn(Z):u.mount)u.mount.delete(he),u.array.delete(he),re.keepValue||(pr(n,he),pr(i,he)),!re.keepError&&pr(r.errors,he),!re.keepDirty&&pr(r.dirtyFields,he),!re.keepTouched&&pr(r.touchedFields,he),!re.keepIsValidating&&pr(r.validatingFields,he),!e.shouldUnregister&&!re.keepDefaultValue&&pr(a,he);y.state.next({values:Kt(i)}),y.state.next({...r,...re.keepDirty?{isDirty:$()}:{}}),!re.keepIsValid&&k()},Ze=({disabled:Z,name:re})=>{(La(Z)&&l.mount||Z||u.disabled.has(re))&&(Z?u.disabled.add(re):u.disabled.delete(re))},Et=(Z,re={})=>{let he=Le(n,Z);const de=La(re.disabled)||La(e.disabled);return Nt(n,Z,{...he||{},_f:{...he&&he._f?he._f:{ref:{name:Z}},name:Z,mount:!0,...re}}),u.mount.add(Z),he?Ze({disabled:La(re.disabled)?re.disabled:e.disabled,name:Z}):D(Z,!0,re.value),{...de?{disabled:re.disabled||e.disabled}:{},...e.progressive?{required:!!re.required,min:$u(re.min),max:$u(re.max),minLength:$u(re.minLength),maxLength:$u(re.maxLength),pattern:$u(re.pattern)}:{},name:Z,onChange:ue,onBlur:ue,ref:fe=>{if(fe){Et(Z,re),he=Le(n,Z);const xe=Yt(fe.value)&&fe.querySelectorAll&&fe.querySelectorAll("input,select,textarea")[0]||fe,De=Zj(xe),Ke=he._f.refs||[];if(De?Ke.find(et=>et===xe):xe===he._f.ref)return;Nt(n,Z,{_f:{...he._f,...De?{refs:[...Ke.filter(hm),xe,...Array.isArray(Le(a,Z))?[{}]:[]],ref:{type:xe.type,name:Z}}:{ref:xe}}}),D(Z,!1,void 0,xe)}else he=Le(n,Z,{}),he._f&&(he._f.mount=!1),(e.shouldUnregister||re.shouldUnregister)&&!(qj(u.array,Z)&&l.action)&&u.unMount.add(Z)}}},wt=()=>e.shouldFocusError&&ml(n,Ce,u.mount),kt=Z=>{La(Z)&&(y.state.next({disabled:Z}),ml(n,(re,he)=>{const de=Le(n,he);de&&(re.disabled=de._f.disabled||Z,Array.isArray(de._f.refs)&&de._f.refs.forEach(fe=>{fe.disabled=de._f.disabled||Z}))},0,!1))},St=(Z,re)=>async he=>{let de;he&&(he.preventDefault&&he.preventDefault(),he.persist&&he.persist());let fe=Kt(i);if(y.state.next({isSubmitting:!0}),e.resolver){const{errors:xe,values:De}=await F();r.errors=xe,fe=Kt(De)}else await B(n);if(u.disabled.size)for(const xe of u.disabled)pr(fe,xe);if(pr(r.errors,"root"),en(r.errors)){y.state.next({errors:{}});try{await Z(fe,he)}catch(xe){de=xe}}else re&&await re({...r.errors},he),wt(),setTimeout(wt);if(y.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:en(r.errors)&&!de,submitCount:r.submitCount+1,errors:r.errors}),de)throw de},ur=(Z,re={})=>{Le(n,Z)&&(Yt(re.defaultValue)?K(Z,Kt(Le(a,Z))):(K(Z,re.defaultValue),Nt(a,Z,Kt(re.defaultValue))),re.keepTouched||pr(r.touchedFields,Z),re.keepDirty||(pr(r.dirtyFields,Z),r.isDirty=re.defaultValue?$(Z,Kt(Le(a,Z))):$()),re.keepError||(pr(r.errors,Z),p.isValid&&k()),y.state.next({...r}))},cr=(Z,re={})=>{const he=Z?Kt(Z):a,de=Kt(he),fe=en(Z),xe=fe?a:de;if(re.keepDefaultValues||(a=he),!re.keepValues){if(re.keepDirtyValues){const De=new Set([...u.mount,...Object.keys(Iu(a,i))]);for(const Ke of Array.from(De))Le(r.dirtyFields,Ke)?Nt(xe,Ke,Le(i,Ke)):K(Ke,Le(xe,Ke))}else{if(S2&&Yt(Z))for(const De of u.mount){const Ke=Le(n,De);if(Ke&&Ke._f){const et=Array.isArray(Ke._f.refs)?Ke._f.refs[0]:Ke._f.ref;if(ih(et)){const it=et.closest("form");if(it){it.reset();break}}}}if(re.keepFieldsRef)for(const De of u.mount)K(De,Le(xe,De));else n={}}i=e.shouldUnregister?re.keepDefaultValues?Kt(a):{}:Kt(xe),y.array.next({values:{...xe}}),y.state.next({values:{...xe}})}u={mount:re.keepDirtyValues?u.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!p.isValid||!!re.keepIsValid||!!re.keepDirtyValues,l.watch=!!e.shouldUnregister,y.state.next({submitCount:re.keepSubmitCount?r.submitCount:0,isDirty:fe?!1:re.keepDirty?r.isDirty:!!(re.keepDefaultValues&&!mi(Z,a)),isSubmitted:re.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:fe?{}:re.keepDirtyValues?re.keepDefaultValues&&i?Iu(a,i):r.dirtyFields:re.keepDefaultValues&&Z?Iu(a,Z):re.keepDirty?r.dirtyFields:{},touchedFields:re.keepTouched?r.touchedFields:{},errors:re.keepErrors?r.errors:{},isSubmitSuccessful:re.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},Sn=(Z,re)=>cr(ba(Z)?Z(i):Z,re),Hn=(Z,re={})=>{const he=Le(n,Z),de=he&&he._f;if(de){const fe=de.refs?de.refs[0]:de.ref;fe.focus&&(fe.focus(),re.shouldSelect&&ba(fe.select)&&fe.select())}},qt=Z=>{r={...r,...Z}},Pr={control:{register:Et,unregister:Ne,getFieldState:ae,handleSubmit:St,setError:be,_subscribe:W,_runSchema:F,_focusError:wt,_getWatch:G,_getDirty:$,_setValid:k,_setFieldArray:A,_setDisabledField:Ze,_setErrors:N,_getFieldArray:le,_reset:cr,_resetDefaultValues:()=>ba(e.defaultValues)&&e.defaultValues().then(Z=>{Sn(Z,e.resetOptions),y.state.next({isLoading:!1})}),_removeUnmounted:V,_disableForm:kt,_subjects:y,_proxyFormState:p,get _fields(){return n},get _formValues(){return i},get _state(){return l},set _state(Z){l=Z},get _defaultValues(){return a},get _names(){return u},set _names(Z){u=Z},get _formState(){return r},get _options(){return e},set _options(Z){e={...e,...Z}}},subscribe:ce,trigger:ze,register:Et,handleSubmit:St,watch:Se,setValue:K,getValues:q,reset:Sn,resetField:ur,clearErrors:we,unregister:Ne,setError:be,setFocus:Hn,getFieldState:ae};return{...Pr,formControl:Pr}}var oi=()=>{if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID();const t=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const r=(Math.random()*16+t)%16|0;return(e=="x"?r:r&3|8).toString(16)})},fm=(t,e,r={})=>r.shouldFocus||Yt(r.shouldFocus)?r.focusName||`${t}.${Yt(r.focusIndex)?e:r.focusIndex}.`:"",mm=(t,e)=>[...t,...yn(e)],pm=t=>Array.isArray(t)?t.map(()=>{}):void 0;function gm(t,e,r){return[...t.slice(0,e),...yn(r),...t.slice(e)]}var bm=(t,e,r)=>Array.isArray(t)?(Yt(t[r])&&(t[r]=void 0),t.splice(r,0,t.splice(e,1)[0]),t):[],ym=(t,e)=>[...yn(e),...yn(t)];function sD(t,e){let r=0;const n=[...t];for(const a of e)n.splice(a-r,1),r++;return Mh(n).length?n:[]}var xm=(t,e)=>Yt(e)?[]:sD(t,yn(e).sort((r,n)=>r-n)),vm=(t,e,r)=>{[t[e],t[r]]=[t[r],t[e]]},c3=(t,e,r)=>(t[e]=r,t);function _8(t){const e=C2(),{control:r=e.control,name:n,keyName:a="id",shouldUnregister:i,rules:l}=t,[u,d]=rt.useState(r._getFieldArray(n)),h=rt.useRef(r._getFieldArray(n).map(oi)),p=rt.useRef(u),b=rt.useRef(n),y=rt.useRef(!1);b.current=n,p.current=u,r._names.array.add(n),l&&r.register(n,l),f8(()=>r._subjects.array.subscribe({next:({values:O,name:F})=>{if(F===b.current||!F){const R=Le(O,b.current);Array.isArray(R)&&(d(R),h.current=R.map(oi))}}}).unsubscribe,[r]);const x=rt.useCallback(O=>{y.current=!0,r._setFieldArray(n,O)},[r,n]),_=(O,F)=>{const R=yn(Kt(O)),B=mm(r._getFieldArray(n),R);r._names.focus=fm(n,B.length-1,F),h.current=mm(h.current,R.map(oi)),x(B),d(B),r._setFieldArray(n,B,mm,{argA:pm(O)})},k=(O,F)=>{const R=yn(Kt(O)),B=ym(r._getFieldArray(n),R);r._names.focus=fm(n,0,F),h.current=ym(h.current,R.map(oi)),x(B),d(B),r._setFieldArray(n,B,ym,{argA:pm(O)})},S=O=>{const F=xm(r._getFieldArray(n),O);h.current=xm(h.current,O),x(F),d(F),!Array.isArray(Le(r._fields,n))&&Nt(r._fields,n,void 0),r._setFieldArray(n,F,xm,{argA:O})},A=(O,F,R)=>{const B=yn(Kt(F)),V=gm(r._getFieldArray(n),O,B);r._names.focus=fm(n,O,R),h.current=gm(h.current,O,B.map(oi)),x(V),d(V),r._setFieldArray(n,V,gm,{argA:O,argB:pm(F)})},C=(O,F)=>{const R=r._getFieldArray(n);vm(R,O,F),vm(h.current,O,F),x(R),d(R),r._setFieldArray(n,R,vm,{argA:O,argB:F},!1)},N=(O,F)=>{const R=r._getFieldArray(n);bm(R,O,F),bm(h.current,O,F),x(R),d(R),r._setFieldArray(n,R,bm,{argA:O,argB:F},!1)},D=(O,F)=>{const R=Kt(F),B=c3(r._getFieldArray(n),O,R);h.current=[...B].map((V,$)=>!V||$===O?oi():h.current[$]),x(B),d([...B]),r._setFieldArray(n,B,c3,{argA:O,argB:R},!0,!1)},j=O=>{const F=yn(Kt(O));h.current=F.map(oi),x([...F]),d([...F]),r._setFieldArray(n,[...F],R=>R,{},!0,!1)};return rt.useEffect(()=>{if(r._state.action=!1,Cp(n,r._names)&&r._subjects.state.next({...r._formState}),y.current&&(!hl(r._options.mode).isOnSubmit||r._formState.isSubmitted)&&!hl(r._options.reValidateMode).isOnSubmit)if(r._options.resolver)r._runSchema([n]).then(O=>{const F=Le(O.errors,n),R=Le(r._formState.errors,n);(R?!F&&R.type||F&&(R.type!==F.type||R.message!==F.message):F&&F.type)&&(F?Nt(r._formState.errors,n,F):pr(r._formState.errors,n),r._subjects.state.next({errors:r._formState.errors}))});else{const O=Le(r._fields,n);O&&O._f&&!(hl(r._options.reValidateMode).isOnSubmit&&hl(r._options.mode).isOnSubmit)&&Tp(O,r._names.disabled,r._formValues,r._options.criteriaMode===ta.all,r._options.shouldUseNativeValidation,!0).then(F=>!en(F)&&r._subjects.state.next({errors:v8(r._formState.errors,F,n)}))}r._subjects.state.next({name:n,values:Kt(r._formValues)}),r._names.focus&&ml(r._fields,(O,F)=>{if(r._names.focus&&F.startsWith(r._names.focus)&&O.focus)return O.focus(),1}),r._names.focus="",r._setValid(),y.current=!1},[u,n,r]),rt.useEffect(()=>(!Le(r._formValues,n)&&r._setFieldArray(n),()=>{const O=(F,R)=>{const B=Le(r._fields,F);B&&B._f&&(B._f.mount=R)};r._options.shouldUnregister||i?r.unregister(n):O(n,!1)}),[n,r,a,i]),{swap:rt.useCallback(C,[x,n,r]),move:rt.useCallback(N,[x,n,r]),prepend:rt.useCallback(k,[x,n,r]),append:rt.useCallback(_,[x,n,r]),remove:rt.useCallback(S,[x,n,r]),insert:rt.useCallback(A,[x,n,r]),update:rt.useCallback(D,[x,n,r]),replace:rt.useCallback(j,[x,n,r]),fields:rt.useMemo(()=>u.map((O,F)=>({...O,[a]:h.current[F]||oi()})),[u,a])}}function fo(t={}){const e=rt.useRef(void 0),r=rt.useRef(void 0),[n,a]=rt.useState({isDirty:!1,isValidating:!1,isLoading:ba(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:ba(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:n},t.defaultValues&&!ba(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:l,...u}=aD(t);e.current={...u,formState:n}}const i=e.current.control;return i._options=t,f8(()=>{const l=i._subscribe({formState:i._proxyFormState,callback:()=>a({...i._formState}),reRenderRoot:!0});return a(u=>({...u,isReady:!0})),i._formState.isReady=!0,l},[i]),rt.useEffect(()=>i._disableForm(t.disabled),[i,t.disabled]),rt.useEffect(()=>{t.mode&&(i._options.mode=t.mode),t.reValidateMode&&(i._options.reValidateMode=t.reValidateMode)},[i,t.mode,t.reValidateMode]),rt.useEffect(()=>{t.errors&&(i._setErrors(t.errors),i._focusError())},[i,t.errors]),rt.useEffect(()=>{t.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,t.shouldUnregister]),rt.useEffect(()=>{if(i._proxyFormState.isDirty){const l=i._getDirty();l!==n.isDirty&&i._subjects.state.next({isDirty:l})}},[i,n.isDirty]),rt.useEffect(()=>{t.values&&!mi(t.values,r.current)?(i._reset(t.values,{keepFieldsRef:!0,...i._options.resetOptions}),r.current=t.values,a(l=>({...l}))):i._resetDefaultValues()},[i,t.values]),rt.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),e.current.formState=Vj(n,i),e.current}const d3=(t,e,r)=>{if(t&&"reportValidity"in t){const n=Le(r,e);t.setCustomValidity(n&&n.message||""),t.reportValidity()}},Np=(t,e)=>{for(const r in e.fields){const n=e.fields[r];n&&n.ref&&"reportValidity"in n.ref?d3(n.ref,r,t):n&&n.refs&&n.refs.forEach(a=>d3(a,r,t))}},h3=(t,e)=>{e.shouldUseNativeValidation&&Np(t,e);const r={};for(const n in t){const a=Le(e.fields,n),i=Object.assign(t[n]||{},{ref:a&&a.ref});if(iD(e.names||Object.keys(t),n)){const l=Object.assign({},Le(r,n));Nt(l,"root",i),Nt(r,n,l)}else Nt(r,n,i)}return r},iD=(t,e)=>{const r=f3(e);return t.some(n=>f3(n).match(`^${r}\\.\\d+`))};function f3(t){return t.replace(/\]|\[/g,"")}function m3(t,e){try{var r=t()}catch(n){return e(n)}return r&&r.then?r.then(void 0,e):r}function oD(t,e){for(var r={};t.length;){var n=t[0],a=n.code,i=n.message,l=n.path.join(".");if(!r[l])if("unionErrors"in n){var u=n.unionErrors[0].errors[0];r[l]={message:u.message,type:u.code}}else r[l]={message:i,type:a};if("unionErrors"in n&&n.unionErrors.forEach(function(p){return p.errors.forEach(function(b){return t.push(b)})}),e){var d=r[l].types,h=d&&d[n.code];r[l]=T2(l,e,r,a,h?[].concat(h,n.message):n.message)}t.shift()}return r}function lD(t,e){for(var r={};t.length;){var n=t[0],a=n.code,i=n.message,l=n.path.join(".");if(!r[l])if(n.code==="invalid_union"){var u=n.errors[0][0];r[l]={message:u.message,type:u.code}}else r[l]={message:i,type:a};if(n.code==="invalid_union"&&n.errors.forEach(function(p){return p.forEach(function(b){return t.push(b)})}),e){var d=r[l].types,h=d&&d[n.code];r[l]=T2(l,e,r,a,h?[].concat(h,n.message):n.message)}t.shift()}return r}function mo(t,e,r){if(r===void 0&&(r={}),function(n){return"_def"in n&&typeof n._def=="object"&&"typeName"in n._def}(t))return function(n,a,i){try{return Promise.resolve(m3(function(){return Promise.resolve(t[r.mode==="sync"?"parse":"parseAsync"](n,e)).then(function(l){return i.shouldUseNativeValidation&&Np({},i),{errors:{},values:r.raw?Object.assign({},n):l}})},function(l){if(function(u){return Array.isArray(u?.issues)}(l))return{values:{},errors:h3(oD(l.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw l}))}catch(l){return Promise.reject(l)}};if(function(n){return"_zod"in n&&typeof n._zod=="object"}(t))return function(n,a,i){try{return Promise.resolve(m3(function(){return Promise.resolve((r.mode==="sync"?qA:HA)(t,n,e)).then(function(l){return i.shouldUseNativeValidation&&Np({},i),{errors:{},values:r.raw?Object.assign({},n):l}})},function(l){if(function(u){return u instanceof b2}(l))return{values:{},errors:h3(lD(l.issues,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw l}))}catch(l){return Promise.reject(l)}};throw new Error("Invalid input: not a Zod schema")}const uD=xt({access_token:Oe(),user:x2});function cD(t){return lr({queryKey:["currentUser"],queryFn:async()=>r8("/auth/me",x2,{},t),enabled:!!t})}function dD(){const t=Hr();return pt({mutationKey:["login"],mutationFn:async e=>{const r=await st("/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok){const a=await r.json().catch(()=>({detail:"Login failed"}));throw new Error(a.detail??"Login failed")}const n=await r.json();return uD.parse(n)},onSuccess:e=>{t.setQueryData(["currentUser"],e.user)}})}function hD(){return pt({mutationKey:["signup"],mutationFn:async({data:t,token:e})=>{const n=`https://83.251.173.209.nip.io/auth/signup?token=${encodeURIComponent(e)}`,a=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!a.ok){const l=await a.json().catch(()=>({detail:"Signup failed"}));throw new Error(l.detail??"Signup failed")}return await a.json()}})}const fD=xt({username:Oe().min(1,"Anvndarnamn krvs"),password:Oe().min(1,"Lsenord krvs")}),mD=xt({username:Oe().min(3,"Anvndarnamn mste vara minst 3 tecken").max(50),password:Oe().min(6,"Lsenord mste vara minst 6 tecken"),confirmPassword:Oe(),email:Oe().email("Ogiltig email-adress").optional(),fullName:Oe().max(100).optional()}).refine(t=>t.password===t.confirmPassword,{message:"Lsenorden matchar inte",path:["confirmPassword"]}),pD=xt({username:Oe().min(3,"Anvndarnamn mste vara minst 3 tecken").max(50),email:Oe().email("Ogiltig email-adress").optional(),full_name:Oe().max(100).optional()}),gD=xt({current_password:Oe().min(1,"Nuvarande lsenord krvs"),new_password:Oe().min(8,"Nytt lsenord mste vara minst 8 tecken").regex(/[A-Z]/,"Mste innehlla minst en stor bokstav").regex(/[a-z]/,"Mste innehlla minst en liten bokstav").regex(/\d/,"Mste innehlla minst en siffra"),confirm_password:Oe()}).refine(t=>t.new_password===t.confirm_password,{message:"Lsenorden matchar inte",path:["confirm_password"]}),bD=xt({email:Oe().email("Ogiltig email-adress")}),yD=()=>{const t=dD(),e=zl(),{isAuthenticated:r}=Lr(),n=T.useRef(!1),[a,i]=T.useState(!1),[l,u]=T.useState(""),[d,h]=T.useState(!1),[p,b]=T.useState(!1),[y,x]=T.useState(null),{register:_,handleSubmit:k,formState:{errors:S,isValid:A}}=fo({resolver:mo(fD),mode:"onChange"});T.useEffect(()=>{r&&!n.current&&(n.current=!0,e("/problems",{replace:!0}))},[r,e]);const C=async D=>{t.mutate(D)},N=async D=>{D.preventDefault(),h(!0);try{(await fetch("/api/v1/auth/forgot-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:l})})).ok?(b(!0),u("")):x("Kunde inte skicka lsenordsterstllning")}catch{x("Ett fel uppstod vid skickning av lsenordsterstllning")}finally{h(!1)}};return a?m.jsxs("div",{className:"flex flex-col items-center gap-4 p-6 border border-panel rounded bg-panel max-w-xs mx-auto mt-12 text-primary font-roboto",children:[m.jsx("h2",{className:"text-xl font-bold mb-2",children:"Glmt lsenord"}),p?m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"text-green-600 text-sm mb-4",children:"Om email-adressen finns i systemet har ett temporrt lsenord skickats."}),m.jsx("button",{onClick:()=>i(!1),className:"btn-primary px-4 py-2 rounded w-full",children:"Tillbaka till inloggning"})]}):m.jsxs("form",{onSubmit:N,className:"w-full",children:[m.jsxs("label",{className:"w-full text-left block mb-4",children:["Email-adress:",m.jsx("input",{className:"ml-2 border border-panel rounded px-2 py-1 w-full bg-primary text-primary",type:"email",value:l,onChange:D=>u(D.target.value),placeholder:"din.email@example.com",autoComplete:"email",required:!0})]}),y&&m.jsx("div",{className:"text-red-600 text-sm mb-4",children:y}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{type:"submit",className:"btn-primary px-4 py-2 rounded flex-1",disabled:d,children:d?"Skickar...":"Skicka terstllning"}),m.jsx("button",{type:"button",onClick:()=>i(!1),className:"px-4 py-2 rounded border border-panel flex-1",children:"Avbryt"})]})]})]}):m.jsxs("form",{onSubmit:k(C),className:"flex flex-col items-center gap-4 p-6 border border-panel rounded bg-panel max-w-xs mx-auto mt-12 text-primary font-roboto",children:[m.jsx("h2",{className:"text-xl font-bold mb-2",children:"Logga in"}),m.jsxs("div",{className:"w-full",children:[m.jsxs("label",{className:"w-full text-left block",children:["Anvndarnamn:",m.jsx("input",{..._("username"),className:"ml-2 border border-panel rounded px-2 py-1 w-full bg-primary text-primary",autoFocus:!0,autoComplete:"username"})]}),S.username&&m.jsx("div",{className:"text-red-600 text-sm mt-1",children:S.username.message})]}),m.jsxs("div",{className:"w-full",children:[m.jsxs("label",{className:"w-full text-left block",children:["Lsenord:",m.jsx("input",{..._("password"),type:"password",className:"ml-2 border border-panel rounded px-2 py-1 w-full bg-primary text-primary",autoComplete:"current-password"})]}),S.password&&m.jsx("div",{className:"text-red-600 text-sm mt-1",children:S.password.message})]}),t.error&&m.jsx("div",{className:"text-red-600 text-sm",children:t.error.message}),t.isSuccess&&m.jsx("div",{className:"text-green-600 text-sm",children:"Inloggad  omdirigerar "}),m.jsx("button",{type:"submit",className:"btn-primary px-4 py-2 rounded w-full",disabled:t.isPending||!A,children:t.isPending?"Loggar in...":"Logga in"}),m.jsxs("button",{type:"button",onClick:()=>i(!0),className:"text-sm text-muted hover:text-primary flex items-center gap-1",children:[m.jsx(Ap,{size:14}),"Glmt lsenord?"]})]})};class ic extends Error{url;status;statusText;body;request;constructor(e,r,n){super(n),this.name="ApiError",this.url=r.url,this.status=r.status,this.statusText=r.statusText,this.body=r.body,this.request=e}}class xD extends Error{constructor(e){super(e),this.name="CancelError"}get isCancelled(){return!0}}class vD{#t;#e;#r;#n;#a;#i;#s;constructor(e){this.#t=!1,this.#e=!1,this.#r=!1,this.#n=[],this.#a=new Promise((r,n)=>{this.#i=r,this.#s=n;const a=u=>{this.#t||this.#e||this.#r||(this.#t=!0,this.#i&&this.#i(u))},i=u=>{this.#t||this.#e||this.#r||(this.#e=!0,this.#s&&this.#s(u))},l=u=>{this.#t||this.#e||this.#r||this.#n.push(u)};return Object.defineProperty(l,"isResolved",{get:()=>this.#t}),Object.defineProperty(l,"isRejected",{get:()=>this.#e}),Object.defineProperty(l,"isCancelled",{get:()=>this.#r}),e(a,i,l)})}get[Symbol.toStringTag](){return"Cancellable Promise"}then(e,r){return this.#a.then(e,r)}catch(e){return this.#a.catch(e)}finally(e){return this.#a.finally(e)}cancel(){if(!(this.#t||this.#e||this.#r)){if(this.#r=!0,this.#n.length)try{for(const e of this.#n)e()}catch(e){console.warn("Cancellation threw an error",e);return}this.#n.length=0,this.#s&&this.#s(new xD("Request aborted"))}}get isCancelled(){return this.#r}}const _D=()=>"https://83.251.173.209.nip.io",tt={BASE:_D(),VERSION:"0.1.0",WITH_CREDENTIALS:!0,CREDENTIALS:"include",TOKEN:void 0,USERNAME:void 0,PASSWORD:void 0,HEADERS:void 0,ENCODE_PATH:void 0},hd=Object.freeze(Object.defineProperty({__proto__:null,OpenAPI:tt},Symbol.toStringTag,{value:"Module"})),j2=t=>t!=null,Bc=t=>typeof t=="string",_m=t=>Bc(t)&&t!=="",D2=t=>typeof t=="object"&&typeof t.type=="string"&&typeof t.stream=="function"&&typeof t.arrayBuffer=="function"&&typeof t.constructor=="function"&&typeof t.constructor.name=="string"&&/^(Blob|File)$/.test(t.constructor.name)&&/^(Blob|File)$/.test(t[Symbol.toStringTag]),w8=t=>t instanceof FormData,wD=t=>{try{return btoa(t)}catch{return Buffer.from(t).toString("base64")}},kD=t=>{const e=[],r=(a,i)=>{e.push(`${encodeURIComponent(a)}=${encodeURIComponent(String(i))}`)},n=(a,i)=>{j2(i)&&(Array.isArray(i)?i.forEach(l=>{n(a,l)}):typeof i=="object"?Object.entries(i).forEach(([l,u])=>{n(`${a}[${l}]`,u)}):r(a,i))};return Object.entries(t).forEach(([a,i])=>{n(a,i)}),e.length>0?`?${e.join("&")}`:""},SD=(t,e)=>{const r=t.ENCODE_PATH||encodeURI,n=e.url.replace("{api-version}",t.VERSION).replace(/{(.*?)}/g,(i,l)=>e.path?.hasOwnProperty(l)?r(String(e.path[l])):i),a=`${t.BASE}${n}`;return e.query?`${a}${kD(e.query)}`:a},AD=t=>{if(t.formData){const e=new FormData,r=(n,a)=>{Bc(a)||D2(a)?e.append(n,a):e.append(n,JSON.stringify(a))};return Object.entries(t.formData).filter(([n,a])=>j2(a)).forEach(([n,a])=>{Array.isArray(a)?a.forEach(i=>r(n,i)):r(n,a)}),e}},fd=async(t,e)=>typeof e=="function"?e(t):e,ED=async(t,e)=>{const[r,n,a,i]=await Promise.all([fd(e,t.TOKEN),fd(e,t.USERNAME),fd(e,t.PASSWORD),fd(e,t.HEADERS)]),l=Object.entries({Accept:"application/json",...i,...e.headers}).filter(([u,d])=>j2(d)).reduce((u,[d,h])=>({...u,[d]:String(h)}),{});if(_m(r)&&(l.Authorization=`Bearer ${r}`),_m(n)&&_m(a)){const u=wD(`${n}:${a}`);l.Authorization=`Basic ${u}`}return e.body&&(e.mediaType?l["Content-Type"]=e.mediaType:D2(e.body)?l["Content-Type"]=e.body.type||"application/octet-stream":Bc(e.body)?l["Content-Type"]="text/plain":w8(e.body)||(l["Content-Type"]="application/json")),new Headers(l)},CD=t=>{if(t.body!==void 0)return t.mediaType?.includes("/json")?JSON.stringify(t.body):Bc(t.body)||D2(t.body)||w8(t.body)?t.body:JSON.stringify(t.body)},TD=async(t,e,r,n,a,i,l)=>{const u=new AbortController,d={headers:i,body:n??a,method:e.method,signal:u.signal};return t.WITH_CREDENTIALS&&(d.credentials=t.CREDENTIALS),l(()=>u.abort()),await fetch(r,d)},ND=(t,e)=>{if(e){const r=t.headers.get(e);if(Bc(r))return r}},MD=async t=>{if(t.status!==204)try{const e=t.headers.get("Content-Type");if(e)return["application/json","application/problem+json"].some(a=>e.toLowerCase().startsWith(a))?await t.json():await t.text()}catch(e){console.error(e)}},jD=(t,e)=>{const n={400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",500:"Internal Server Error",502:"Bad Gateway",503:"Service Unavailable",...t.errors}[e.status];if(n)throw new ic(t,e,n);if(!e.ok){const a=e.status??"unknown",i=e.statusText??"unknown",l=(()=>{try{return JSON.stringify(e.body,null,2)}catch{return}})();throw new ic(t,e,`Generic Error: status: ${a}; status text: ${i}; body: ${l}`)}},ft=(t,e)=>new vD(async(r,n,a)=>{try{const i=SD(t,e),l=AD(e),u=CD(e),d=await ED(t,e);if(!a.isCancelled){const h=await TD(t,e,i,u,l,d,a),p=await MD(h),b=ND(h,e.responseHeader),y={url:i,ok:h.ok,status:h.status,statusText:h.statusText,body:b??p};jD(e,y),r(y.body)}}catch(i){n(i)}});class DD{static serveMediaFileMediaPathGet(e){return ft(tt,{method:"GET",url:"/media/{path}",path:{path:e},errors:{422:"Validation Error"}})}static serveMediaFileOptionsMediaPathOptions(e){return ft(tt,{method:"OPTIONS",url:"/media/{path}",path:{path:e},errors:{422:"Validation Error"}})}static testEndpointTestGet(){return ft(tt,{method:"GET",url:"/test"})}static testDbEndpointTestDbGet(){return ft(tt,{method:"GET",url:"/test-db"})}static healthLivenessHealthzGet(){return ft(tt,{method:"GET",url:"/healthz"})}static healthReadinessReadyzGet(){return ft(tt,{method:"GET",url:"/readyz"})}static listAbilitiesAbilitiesGet(e){return ft(tt,{method:"GET",url:"/abilities",query:{subject_id:e},errors:{422:"Validation Error"}})}static listLevelsLevelsGet(){return ft(tt,{method:"GET",url:"/levels"})}}class po{static getHierarchyApiHierarchyGet(e){return ft(tt,{method:"GET",url:"/api/hierarchy/",query:{subject_id:e},errors:{422:"Validation Error"}})}static listSubjectsApiHierarchySubjectsGet(){return ft(tt,{method:"GET",url:"/api/hierarchy/subjects"})}static getSubjectCompleteApiHierarchySubjectsSubjectIdCompleteGet(e){return ft(tt,{method:"GET",url:"/api/hierarchy/subjects/{subject_id}/complete",path:{subject_id:e},errors:{422:"Validation Error"}})}static getSubjectForEditApiHierarchySubjectsSubjectIdEditGet(e){return ft(tt,{method:"GET",url:"/api/hierarchy/subjects/{subject_id}/edit",path:{subject_id:e},errors:{422:"Validation Error"}})}static createSubjectWithAbilitiesApiHierarchySubjectsWithAbilitiesPost(e){return ft(tt,{method:"POST",url:"/api/hierarchy/subjects/with-abilities",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static updateSubjectApiHierarchySubjectsSubjectIdPut(e,r){return ft(tt,{method:"PUT",url:"/api/hierarchy/subjects/{subject_id}",path:{subject_id:e},body:r,mediaType:"application/json",errors:{422:"Validation Error"}})}static deleteSubjectApiHierarchySubjectsSubjectIdDelete(e){return ft(tt,{method:"DELETE",url:"/api/hierarchy/subjects/{subject_id}",path:{subject_id:e},errors:{422:"Validation Error"}})}static moveCourseApiHierarchyCoursesCourseIdMovePut(e,r){return ft(tt,{method:"PUT",url:"/api/hierarchy/courses/{course_id}/move",path:{course_id:e},query:{target_subject_id:r},errors:{422:"Validation Error"}})}static moveChapterApiHierarchyChaptersChapterIdMovePut(e,r,n){return ft(tt,{method:"PUT",url:"/api/hierarchy/chapters/{chapter_id}/move",path:{chapter_id:e},query:{target_parent_type:r,target_parent_id:n},errors:{422:"Validation Error"}})}static moveAreaApiHierarchyAreasAreaIdMovePut(e,r,n){return ft(tt,{method:"PUT",url:"/api/hierarchy/areas/{area_id}/move",path:{area_id:e},query:{target_parent_type:r,target_parent_id:n},errors:{422:"Validation Error"}})}static checkSubjectDeleteSafetyApiHierarchySubjectsSubjectIdCheckDeleteGet(e){return ft(tt,{method:"GET",url:"/api/hierarchy/subjects/{subject_id}/check-delete",path:{subject_id:e},errors:{422:"Validation Error"}})}static checkCourseDeleteSafetyApiHierarchyCoursesCourseIdCheckDeleteGet(e){return ft(tt,{method:"GET",url:"/api/hierarchy/courses/{course_id}/check-delete",path:{course_id:e},errors:{422:"Validation Error"}})}static checkChapterDeleteSafetyApiHierarchyChaptersChapterIdCheckDeleteGet(e){return ft(tt,{method:"GET",url:"/api/hierarchy/chapters/{chapter_id}/check-delete",path:{chapter_id:e},errors:{422:"Validation Error"}})}static checkAreaDeleteSafetyApiHierarchyAreasAreaIdCheckDeleteGet(e){return ft(tt,{method:"GET",url:"/api/hierarchy/areas/{area_id}/check-delete",path:{area_id:e},errors:{422:"Validation Error"}})}static createCourseApiHierarchyCoursesPost(e){return ft(tt,{method:"POST",url:"/api/hierarchy/courses",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static updateCourseApiHierarchyCoursesCourseIdPut(e,r){return ft(tt,{method:"PUT",url:"/api/hierarchy/courses/{course_id}",path:{course_id:e},body:r,mediaType:"application/json",errors:{422:"Validation Error"}})}static deleteCourseApiHierarchyCoursesCourseIdDelete(e){return ft(tt,{method:"DELETE",url:"/api/hierarchy/courses/{course_id}",path:{course_id:e},errors:{422:"Validation Error"}})}static createChapterApiHierarchyChaptersPost(e){return ft(tt,{method:"POST",url:"/api/hierarchy/chapters",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static updateChapterApiHierarchyChaptersChapterIdPut(e,r){return ft(tt,{method:"PUT",url:"/api/hierarchy/chapters/{chapter_id}",path:{chapter_id:e},body:r,mediaType:"application/json",errors:{422:"Validation Error"}})}static deleteChapterApiHierarchyChaptersChapterIdDelete(e){return ft(tt,{method:"DELETE",url:"/api/hierarchy/chapters/{chapter_id}",path:{chapter_id:e},errors:{422:"Validation Error"}})}static createAreaApiHierarchyAreasPost(e){return ft(tt,{method:"POST",url:"/api/hierarchy/areas",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static updateAreaApiHierarchyAreasAreaIdPut(e,r){return ft(tt,{method:"PUT",url:"/api/hierarchy/areas/{area_id}",path:{area_id:e},body:r,mediaType:"application/json",errors:{422:"Validation Error"}})}static deleteAreaApiHierarchyAreasAreaIdDelete(e){return ft(tt,{method:"DELETE",url:"/api/hierarchy/areas/{area_id}",path:{area_id:e},errors:{422:"Validation Error"}})}static getParentsApiHierarchyParentsTypeIdGet(e,r){return ft(tt,{method:"GET",url:"/api/hierarchy/parents/{type}/{id}",path:{type:e,id:r},errors:{422:"Validation Error"}})}static getChildrenApiHierarchyChildrenTypeIdGet(e,r,n=1){return ft(tt,{method:"GET",url:"/api/hierarchy/children/{type}/{id}",path:{type:e,id:r},query:{depth:n},errors:{422:"Validation Error"}})}static getProblemParentApiHierarchyProblemParentProblemIdGet(e){return ft(tt,{method:"GET",url:"/api/hierarchy/problem-parent/{problem_id}",path:{problem_id:e},errors:{422:"Validation Error"}})}static getDescendantsApiHierarchyDescendantsGet(e,r,n="area"){return ft(tt,{method:"GET",url:"/api/hierarchy/descendants",query:{type:e,id:r,leaf:n},errors:{422:"Validation Error"}})}}const zD=10*60*1e3,p3=new Map;function OD(t,e,r){return`${t}-${e}-d${r}`}const Yr={fetchRootSubjects:async()=>(await po.listSubjectsApiHierarchySubjectsGet()).map(e=>({id:e.id,uid:`subject-${e.id}`,title:e.title,type:"subject",hasChildren:!0,children:[]})),fetchChildren:async(t,e,r=1)=>{const n=OD(t,e,r),a=p3.get(n),i=Date.now();if(a&&i-a.timestamp<zD)return a.data;const l=await po.getChildrenApiHierarchyChildrenTypeIdGet(t,e,r),u=h=>({id:h.id,uid:`${h.type}-${h.id}`,title:h.title,type:h.type,hasChildren:h.type!=="area",children:Array.isArray(h.children)?h.children.map(u):[]}),d=l.children.map(u);return p3.set(n,{timestamp:i,data:d}),d},fetchParentPath:async(t,e)=>{try{const r=await po.getParentsApiHierarchyParentsTypeIdGet(t,e);return{subject_id:r.subject_id,course_id:r.course_id||void 0,chapter_id:r.chapter_id||void 0}}catch(r){return console.warn("Failed to fetch parent path:",r),{}}},fetchPreExpansion:async t=>{const e=[];t.subject_id&&e.push(Yr.fetchChildren("subject",t.subject_id,2)),t.course_id&&e.push(Yr.fetchChildren("course",t.course_id,2)),t.chapter_id&&e.push(Yr.fetchChildren("chapter",t.chapter_id,1)),await Promise.allSettled(e)}},md="hierarchy_tree_persistence";class so{static getStorageKey(e){return e?`${md}_user_${e}`:`${md}_guest`}static loadPersistence(e){try{const r=this.getStorageKey(e),n=localStorage.getItem(r);if(!n)return null;const a=JSON.parse(n);return!a.selectedNodeId||!a.selectedNodeType||!a.selectedNodeTitle?null:e&&a.userId&&a.userId!==e?(this.clearPersistence(e),null):a}catch{return null}}static savePersistence(e,r){try{const n=this.getStorageKey(r),a={...e,userId:r,lastModified:new Date().toISOString()};return localStorage.setItem(n,JSON.stringify(a)),!0}catch{return!1}}static clearPersistence(e){try{const r=this.getStorageKey(e);return localStorage.removeItem(r),!0}catch{return!1}}static clearAllPersistence(){try{const e=[];for(let r=0;r<localStorage.length;r++){const n=localStorage.key(r);n&&n.startsWith(md)&&e.push(n)}return e.forEach(r=>localStorage.removeItem(r)),!0}catch{return!1}}static createPersistenceData(e,r,n,a,i){return{selectedNodeId:e,selectedNodeType:r,selectedNodeTitle:n,parentPath:a,userId:i,lastModified:new Date().toISOString()}}static migrateFromGlobalPersistence(e){try{const r=md,n=localStorage.getItem(r);if(!n)return null;const a=JSON.parse(n);if(!a.selectedNodeId||!a.selectedNodeType||!a.selectedNodeTitle)return null;const i={...a,userId:e,lastModified:new Date().toISOString()},l=this.getStorageKey(e);return localStorage.setItem(l,JSON.stringify(i)),localStorage.removeItem(r),i}catch{return null}}}const k8=({onSelect:t,height:e,selectedNodeId:r,expandedNodes:n})=>{const{user:a,isAuthenticated:i}=Lr(),[l,u]=T.useState([]),[d,h]=T.useState(!0),[p,b]=T.useState(new Set),{data:y,isLoading:x}=lr({queryKey:["hierarchy","root-subjects"],queryFn:Yr.fetchRootSubjects,staleTime:60*1e3,enabled:!!i});T.useEffect(()=>{const C=a?.core_user_id;let N=so.loadPersistence(C);if(!N&&C&&(N=so.migrateFromGlobalPersistence(C)),N){const D=new Set;N.parentPath?.subject_id&&D.add(`subject-${N.parentPath.subject_id}`),N.parentPath?.course_id&&D.add(`course-${N.parentPath.course_id}`),N.parentPath?.chapter_id&&D.add(`chapter-${N.parentPath.chapter_id}`),D.add(`${N.selectedNodeType}-${N.selectedNodeId}`),b(D)}},[a?.core_user_id]),T.useEffect(()=>{if(y){const C=y.map(N=>({id:N.uid,uid:N.uid,title:N.title,type:N.type,numericId:N.id,hasChildren:N.hasChildren,isOpen:n?.has(N.uid)||p.has(N.uid)||!1,parentSubjectId:N.type==="subject"?N.id:void 0}));u(C),h(!1)}},[y,n,p]),T.useEffect(()=>{const C=async()=>{const N=new Set([...n||[],...p]);if(N.size===0)return;const D=l.filter(j=>N.has(j.uid)&&j.hasChildren&&!j.children);for(const j of D)try{const O=j.type==="subject"||j.type==="course"?2:1,F=await Yr.fetchChildren(j.type,j.numericId,O);if(!F||F.length===0)u(R=>{const B=V=>V.map($=>$.id===j.id?{...$,hasChildren:!1}:$.children?{...$,children:B($.children)}:$);return B(R)});else{const R=F.map(V=>({id:`${V.type}-${V.id}`,uid:`${V.type}-${V.id}`,title:V.title,type:V.type,numericId:V.id,hasChildren:V.type!=="area",isOpen:N.has(`${V.type}-${V.id}`)||!1,parentSubjectId:V.type==="subject"?V.id:j.parentSubjectId}));u(V=>{const $=G=>G.map(le=>le.id===j.id?{...le,children:R,isOpen:!0}:le.children?{...le,children:$(le.children)}:le);return $(V)});const B=R.filter(V=>N.has(V.uid)&&V.hasChildren);for(const V of B)try{const $=await Yr.fetchChildren(V.type,V.numericId);if(!$||$.length===0)u(G=>{const le=ie=>ie.map(pe=>pe.id===V.id?{...pe,hasChildren:!1}:pe.children?{...pe,children:le(pe.children)}:pe);return le(G)});else{const G=$.map(ie=>({id:`${ie.type}-${ie.id}`,uid:`${ie.type}-${ie.id}`,title:ie.title,type:ie.type,numericId:ie.id,hasChildren:ie.type!=="area",isOpen:N.has(`${ie.type}-${ie.id}`)||!1,parentSubjectId:ie.type==="subject"?ie.id:V.parentSubjectId}));u(ie=>{const pe=K=>K.map(ue=>ue.id===V.id?{...ue,children:G,isOpen:!0}:ue.children?{...ue,children:pe(ue.children)}:ue);return pe(ie)});const le=G.filter(ie=>ie.type==="chapter"&&N.has(ie.uid)&&ie.hasChildren);for(const ie of le)try{const pe=await Yr.fetchChildren(ie.type,ie.numericId);if(!pe||pe.length===0)u(K=>{const ue=Ce=>Ce.map(ze=>ze.id===ie.id?{...ze,hasChildren:!1}:ze.children?{...ze,children:ue(ze.children)}:ze);return ue(K)});else{const K=pe.map(ue=>({id:`${ue.type}-${ue.id}`,uid:`${ue.type}-${ue.id}`,title:ue.title,type:ue.type,numericId:ue.id,hasChildren:!1,isOpen:!1,parentSubjectId:ie.parentSubjectId}));u(ue=>{const Ce=ze=>ze.map(q=>q.id===ie.id?{...q,children:K,isOpen:!0}:q.children?{...q,children:Ce(q.children)}:q);return Ce(ue)})}}catch(pe){console.error("Failed to load children for chapter node:",pe)}}}catch($){console.error("Failed to load children for child node:",$)}}}catch(O){console.error("Failed to load children for expanded node:",O)}};l.length>0&&C()},[l,n,p]);const _=async C=>{if(t&&t({id:C.numericId,uid:C.uid,title:C.title,type:C.type,hasChildren:C.hasChildren,parentSubjectId:C.parentSubjectId}),C.hasChildren&&!C.children)try{const N=await Yr.fetchChildren(C.type,C.numericId);if(!N||N.length===0)u(D=>{const j=O=>O.map(F=>F.id===C.id?{...F,hasChildren:!1}:F.children?{...F,children:j(F.children)}:F);return j(D)});else{const D=N.map(j=>({id:`${j.type}-${j.id}`,uid:`${j.type}-${j.id}`,title:j.title,type:j.type,numericId:j.id,hasChildren:j.type!=="area",isOpen:n?.has(`${j.type}-${j.id}`)||!1,parentSubjectId:j.type==="subject"?j.id:C.parentSubjectId}));u(j=>{const O=F=>F.map(R=>R.id===C.id?{...R,children:D,isOpen:!0}:R.children?{...R,children:O(R.children)}:R);return O(j)})}}catch(N){console.error("Failed to load children:",N),u(D=>{const j=O=>O.map(F=>F.id===C.id?{...F,hasChildren:!1}:F.children?{...F,children:j(F.children)}:F);return j(D)})}else C.children&&C.children.length>0&&u(N=>{const D=j=>j.map(O=>O.id===C.id?{...O,isOpen:!O.isOpen}:O.children?{...O,children:D(O.children)}:O);return D(N)});t?.({id:C.numericId,uid:C.uid,title:C.title,type:C.type,hasChildren:C.hasChildren,parentSubjectId:C.parentSubjectId})},k=C=>{switch(C){case"subject":return m.jsx(HM,{size:16,style:{color:"var(--accent-primary)"}});case"course":return m.jsx(VN,{size:16,style:{color:"var(--text-secondary)"}});case"chapter":case"area":default:return null}},S=(C,N=0)=>{const D=C.type==="area",j=C.type==="chapter",O=r===C.uid;let F;return D?F=N*26:j?F=N*22:F=N*20,m.jsxs("div",{children:[m.jsxs("div",{className:`hierarchy-node flex items-center py-0 px-0 cursor-pointer rounded-lg transition-all duration-200 group ${O?"hierarchy-node--selected":""}`,style:{marginLeft:`${F}px`,marginRight:"2px",marginTop:D?"-12px":"-4px",marginBottom:D?"-12px":"-4px",background:"var(--bg-panel)",minHeight:"36px",fontSize:"10px"},onClick:()=>_(C),children:[C.hasChildren&&!D&&m.jsx(Fc,{size:16,className:`mr-2 transition-transform duration-200 lucide ${C.isOpen?"rotate-90":""}`}),k(C.type)&&m.jsx("div",{className:"mr-2 flex-shrink-0",children:k(C.type)}),m.jsx("span",{className:`flex-1 overflow-hidden text-ellipsis whitespace-nowrap text-xs transition-colors duration-200 ${D?"":"font-medium"}`,children:C.title})]}),C.isOpen&&C.children&&C.children.length>0&&m.jsx("div",{children:C.children.map(R=>S(R,N+1))})]},C.id)};return d||x?m.jsx("div",{className:"p-6",children:m.jsxs("div",{className:"text-secondary text-sm flex items-center gap-2",children:[m.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2",style:{borderColor:"var(--accent-primary)"}}),"Laddar hierarki..."]})}):m.jsx("div",{className:"p-2",children:m.jsx("div",{className:"hide-scrollbar",style:{maxHeight:e,overflowY:e?"auto":"visible"},children:l.map(C=>S(C))})})},S8={fetchProblemIds:async(t,e,r,n)=>{const i={...Object.fromEntries(Object.entries(t).filter(([d,h])=>h!==void 0)),page:e+1,page_size:r},l=await st("/v1/problems/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)},n);if(!l.ok)throw new Error("Kunde inte hmta problem");const u=await l.json();return{problem_ids:u.problem_ids||[],total_count:u.total_count||0,page:e+1,page_size:r}},fetchProblemDetails:async(t,e)=>{if(t.length===0)return[];const r=await st("/v1/problems/details",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({problem_ids:t})},e);if(!r.ok)throw new Error("Kunde inte hmta problem-detaljer");return((await r.json()).problems||[]).map(a=>({bank_problem_definition_id:a.bank_problem_definition_id,prompt_tex:a.prompt_tex??"",title:a.title??"",assessment_items:a.assessment_items??[],owner_id:a.owner_id??a.core_user_id??a.created_by??null,owner_username:a.owner_username??null,is_np:a.is_np,is_digital:a.is_digital,is_s:a.is_s,is_r:a.is_r,is_elev:a.is_elev,is_fake:a.is_fake,is_whole:a.is_whole,is_public:a.is_public,request_publish:a.request_publish,points_e:a.points_e??0,points_c:a.points_c??0,points_a:a.points_a??0,sub_items:a.sub_items??null}))},fetchProblemById:async(t,e)=>{const r=await st(`/v1/problems/${t}`,{},e);if(!r.ok)throw new Error("Kunde inte hmta problem");const n=await r.json();return{bank_problem_definition_id:n.bank_problem_definition_id,prompt_tex:n.prompt_tex??"",title:n.title??"",assessment_items:n.assessment_items??[],owner_id:n.owner_id??n.core_user_id??n.created_by??null,owner_username:n.owner_username??null,is_np:n.is_np,is_digital:n.is_digital,is_s:n.is_s,is_r:n.is_r,is_elev:n.is_elev,is_fake:n.is_fake,is_whole:n.is_whole,is_public:n.is_public,request_publish:n.request_publish,points_e:n.points_e??0,points_c:n.points_c??0,points_a:n.points_a??0,sub_items:n.sub_items??null}}},_t={all:["problemFetch"],lists:()=>[..._t.all,"list"],list:(t,e,r)=>[..._t.lists(),{filters:t,page:e,pageSize:r}],details:()=>[..._t.all,"details"],detail:t=>[..._t.details(),t],problem:t=>[..._t.all,"problem",t]};function Gt(){const{token:t}=Lr();return t}const RD=(t,e,r)=>{const n=Gt();return lr({queryKey:_t.list(t,e,r),queryFn:()=>S8.fetchProblemIds(t,e,r,n??void 0),staleTime:6e4,enabled:!!t})},jh=t=>{const e=Gt();return lr({queryKey:_t.detail(t),queryFn:()=>S8.fetchProblemDetails(t,e??void 0),staleTime:6e4,enabled:t.length>0})},FD=10;function LD({hierarchyFilter:t,extraFilter:e,page:r,greedyProblemIds:n,onProblemsLoaded:a,onLoadingChange:i,onErrorChange:l}){const u={...t,...e},{data:d,isLoading:h,error:p}=RD(u,r,FD),b=n||d?.problem_ids||[],{data:y,isLoading:x,error:_}=jh(b);return T.useEffect(()=>{i(h||x)},[h,x,i]),T.useEffect(()=>{const k=p?.message||_?.message||null;l(k)},[p,_,l]),T.useEffect(()=>{if(y){const k=n?n.length:d?.total_count||0;a(y,k)}},[y,d,n,a]),T.useEffect(()=>{window.newProblemFetchComponent={}},[]),null}const g3={};function PD(t){let e=g3[t];if(e)return e;e=g3[t]=[];for(let r=0;r<128;r++){const n=String.fromCharCode(r);e.push(n)}for(let r=0;r<t.length;r++){const n=t.charCodeAt(r);e[n]="%"+("0"+n.toString(16).toUpperCase()).slice(-2)}return e}function Sl(t,e){typeof e!="string"&&(e=Sl.defaultChars);const r=PD(e);return t.replace(/(%[a-f0-9]{2})+/gi,function(n){let a="";for(let i=0,l=n.length;i<l;i+=3){const u=parseInt(n.slice(i+1,i+3),16);if(u<128){a+=r[u];continue}if((u&224)===192&&i+3<l){const d=parseInt(n.slice(i+4,i+6),16);if((d&192)===128){const h=u<<6&1984|d&63;h<128?a+="":a+=String.fromCharCode(h),i+=3;continue}}if((u&240)===224&&i+6<l){const d=parseInt(n.slice(i+4,i+6),16),h=parseInt(n.slice(i+7,i+9),16);if((d&192)===128&&(h&192)===128){const p=u<<12&61440|d<<6&4032|h&63;p<2048||p>=55296&&p<=57343?a+="":a+=String.fromCharCode(p),i+=6;continue}}if((u&248)===240&&i+9<l){const d=parseInt(n.slice(i+4,i+6),16),h=parseInt(n.slice(i+7,i+9),16),p=parseInt(n.slice(i+10,i+12),16);if((d&192)===128&&(h&192)===128&&(p&192)===128){let b=u<<18&1835008|d<<12&258048|h<<6&4032|p&63;b<65536||b>1114111?a+="":(b-=65536,a+=String.fromCharCode(55296+(b>>10),56320+(b&1023))),i+=9;continue}}a+=""}return a})}Sl.defaultChars=";/?:@&=+$,#";Sl.componentChars="";const b3={};function BD(t){let e=b3[t];if(e)return e;e=b3[t]=[];for(let r=0;r<128;r++){const n=String.fromCharCode(r);/^[0-9a-z]$/i.test(n)?e.push(n):e.push("%"+("0"+r.toString(16).toUpperCase()).slice(-2))}for(let r=0;r<t.length;r++)e[t.charCodeAt(r)]=t[r];return e}function Ic(t,e,r){typeof e!="string"&&(r=e,e=Ic.defaultChars),typeof r>"u"&&(r=!0);const n=BD(e);let a="";for(let i=0,l=t.length;i<l;i++){const u=t.charCodeAt(i);if(r&&u===37&&i+2<l&&/^[0-9a-f]{2}$/i.test(t.slice(i+1,i+3))){a+=t.slice(i,i+3),i+=2;continue}if(u<128){a+=n[u];continue}if(u>=55296&&u<=57343){if(u>=55296&&u<=56319&&i+1<l){const d=t.charCodeAt(i+1);if(d>=56320&&d<=57343){a+=encodeURIComponent(t[i]+t[i+1]),i++;continue}}a+="%EF%BF%BD";continue}a+=encodeURIComponent(t[i])}return a}Ic.defaultChars=";/?:@&=+$,-_.!~*'()#";Ic.componentChars="-_.!~*'()";function z2(t){let e="";return e+=t.protocol||"",e+=t.slashes?"//":"",e+=t.auth?t.auth+"@":"",t.hostname&&t.hostname.indexOf(":")!==-1?e+="["+t.hostname+"]":e+=t.hostname||"",e+=t.port?":"+t.port:"",e+=t.pathname||"",e+=t.search||"",e+=t.hash||"",e}function uh(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}const ID=/^([a-z0-9.+-]+:)/i,$D=/:[0-9]*$/,qD=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,HD=["<",">",'"',"`"," ","\r",`
`,"	"],UD=["{","}","|","\\","^","`"].concat(HD),VD=["'"].concat(UD),y3=["%","/","?",";","#"].concat(VD),x3=["/","?","#"],GD=255,v3=/^[+a-z0-9A-Z_-]{0,63}$/,ZD=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,_3={javascript:!0,"javascript:":!0},w3={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function O2(t,e){if(t&&t instanceof uh)return t;const r=new uh;return r.parse(t,e),r}uh.prototype.parse=function(t,e){let r,n,a,i=t;if(i=i.trim(),!e&&t.split("#").length===1){const h=qD.exec(i);if(h)return this.pathname=h[1],h[2]&&(this.search=h[2]),this}let l=ID.exec(i);if(l&&(l=l[0],r=l.toLowerCase(),this.protocol=l,i=i.substr(l.length)),(e||l||i.match(/^\/\/[^@\/]+@[^@\/]+/))&&(a=i.substr(0,2)==="//",a&&!(l&&_3[l])&&(i=i.substr(2),this.slashes=!0)),!_3[l]&&(a||l&&!w3[l])){let h=-1;for(let _=0;_<x3.length;_++)n=i.indexOf(x3[_]),n!==-1&&(h===-1||n<h)&&(h=n);let p,b;h===-1?b=i.lastIndexOf("@"):b=i.lastIndexOf("@",h),b!==-1&&(p=i.slice(0,b),i=i.slice(b+1),this.auth=p),h=-1;for(let _=0;_<y3.length;_++)n=i.indexOf(y3[_]),n!==-1&&(h===-1||n<h)&&(h=n);h===-1&&(h=i.length),i[h-1]===":"&&h--;const y=i.slice(0,h);i=i.slice(h),this.parseHost(y),this.hostname=this.hostname||"";const x=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!x){const _=this.hostname.split(/\./);for(let k=0,S=_.length;k<S;k++){const A=_[k];if(A&&!A.match(v3)){let C="";for(let N=0,D=A.length;N<D;N++)A.charCodeAt(N)>127?C+="x":C+=A[N];if(!C.match(v3)){const N=_.slice(0,k),D=_.slice(k+1),j=A.match(ZD);j&&(N.push(j[1]),D.unshift(j[2])),D.length&&(i=D.join(".")+i),this.hostname=N.join(".");break}}}}this.hostname.length>GD&&(this.hostname=""),x&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const u=i.indexOf("#");u!==-1&&(this.hash=i.substr(u),i=i.slice(0,u));const d=i.indexOf("?");return d!==-1&&(this.search=i.substr(d),i=i.slice(0,d)),i&&(this.pathname=i),w3[r]&&this.hostname&&!this.pathname&&(this.pathname=""),this};uh.prototype.parseHost=function(t){let e=$D.exec(t);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};const KD=Object.freeze(Object.defineProperty({__proto__:null,decode:Sl,encode:Ic,format:z2,parse:O2},Symbol.toStringTag,{value:"Module"})),A8=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,E8=/[\0-\x1F\x7F-\x9F]/,YD=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,R2=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,C8=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,T8=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,XD=Object.freeze(Object.defineProperty({__proto__:null,Any:A8,Cc:E8,Cf:YD,P:R2,S:C8,Z:T8},Symbol.toStringTag,{value:"Module"})),QD=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(t=>t.charCodeAt(0))),WD=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(t=>t.charCodeAt(0)));var wm;const JD=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),ez=(wm=String.fromCodePoint)!==null&&wm!==void 0?wm:function(t){let e="";return t>65535&&(t-=65536,e+=String.fromCharCode(t>>>10&1023|55296),t=56320|t&1023),e+=String.fromCharCode(t),e};function tz(t){var e;return t>=55296&&t<=57343||t>1114111?65533:(e=JD.get(t))!==null&&e!==void 0?e:t}var Rr;(function(t){t[t.NUM=35]="NUM",t[t.SEMI=59]="SEMI",t[t.EQUALS=61]="EQUALS",t[t.ZERO=48]="ZERO",t[t.NINE=57]="NINE",t[t.LOWER_A=97]="LOWER_A",t[t.LOWER_F=102]="LOWER_F",t[t.LOWER_X=120]="LOWER_X",t[t.LOWER_Z=122]="LOWER_Z",t[t.UPPER_A=65]="UPPER_A",t[t.UPPER_F=70]="UPPER_F",t[t.UPPER_Z=90]="UPPER_Z"})(Rr||(Rr={}));const rz=32;var gi;(function(t){t[t.VALUE_LENGTH=49152]="VALUE_LENGTH",t[t.BRANCH_LENGTH=16256]="BRANCH_LENGTH",t[t.JUMP_TABLE=127]="JUMP_TABLE"})(gi||(gi={}));function Mp(t){return t>=Rr.ZERO&&t<=Rr.NINE}function nz(t){return t>=Rr.UPPER_A&&t<=Rr.UPPER_F||t>=Rr.LOWER_A&&t<=Rr.LOWER_F}function az(t){return t>=Rr.UPPER_A&&t<=Rr.UPPER_Z||t>=Rr.LOWER_A&&t<=Rr.LOWER_Z||Mp(t)}function sz(t){return t===Rr.EQUALS||az(t)}var Or;(function(t){t[t.EntityStart=0]="EntityStart",t[t.NumericStart=1]="NumericStart",t[t.NumericDecimal=2]="NumericDecimal",t[t.NumericHex=3]="NumericHex",t[t.NamedEntity=4]="NamedEntity"})(Or||(Or={}));var pi;(function(t){t[t.Legacy=0]="Legacy",t[t.Strict=1]="Strict",t[t.Attribute=2]="Attribute"})(pi||(pi={}));class iz{constructor(e,r,n){this.decodeTree=e,this.emitCodePoint=r,this.errors=n,this.state=Or.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=pi.Strict}startEntity(e){this.decodeMode=e,this.state=Or.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,r){switch(this.state){case Or.EntityStart:return e.charCodeAt(r)===Rr.NUM?(this.state=Or.NumericStart,this.consumed+=1,this.stateNumericStart(e,r+1)):(this.state=Or.NamedEntity,this.stateNamedEntity(e,r));case Or.NumericStart:return this.stateNumericStart(e,r);case Or.NumericDecimal:return this.stateNumericDecimal(e,r);case Or.NumericHex:return this.stateNumericHex(e,r);case Or.NamedEntity:return this.stateNamedEntity(e,r)}}stateNumericStart(e,r){return r>=e.length?-1:(e.charCodeAt(r)|rz)===Rr.LOWER_X?(this.state=Or.NumericHex,this.consumed+=1,this.stateNumericHex(e,r+1)):(this.state=Or.NumericDecimal,this.stateNumericDecimal(e,r))}addToNumericResult(e,r,n,a){if(r!==n){const i=n-r;this.result=this.result*Math.pow(a,i)+parseInt(e.substr(r,i),a),this.consumed+=i}}stateNumericHex(e,r){const n=r;for(;r<e.length;){const a=e.charCodeAt(r);if(Mp(a)||nz(a))r+=1;else return this.addToNumericResult(e,n,r,16),this.emitNumericEntity(a,3)}return this.addToNumericResult(e,n,r,16),-1}stateNumericDecimal(e,r){const n=r;for(;r<e.length;){const a=e.charCodeAt(r);if(Mp(a))r+=1;else return this.addToNumericResult(e,n,r,10),this.emitNumericEntity(a,2)}return this.addToNumericResult(e,n,r,10),-1}emitNumericEntity(e,r){var n;if(this.consumed<=r)return(n=this.errors)===null||n===void 0||n.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===Rr.SEMI)this.consumed+=1;else if(this.decodeMode===pi.Strict)return 0;return this.emitCodePoint(tz(this.result),this.consumed),this.errors&&(e!==Rr.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,r){const{decodeTree:n}=this;let a=n[this.treeIndex],i=(a&gi.VALUE_LENGTH)>>14;for(;r<e.length;r++,this.excess++){const l=e.charCodeAt(r);if(this.treeIndex=oz(n,a,this.treeIndex+Math.max(1,i),l),this.treeIndex<0)return this.result===0||this.decodeMode===pi.Attribute&&(i===0||sz(l))?0:this.emitNotTerminatedNamedEntity();if(a=n[this.treeIndex],i=(a&gi.VALUE_LENGTH)>>14,i!==0){if(l===Rr.SEMI)return this.emitNamedEntityData(this.treeIndex,i,this.consumed+this.excess);this.decodeMode!==pi.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:r,decodeTree:n}=this,a=(n[r]&gi.VALUE_LENGTH)>>14;return this.emitNamedEntityData(r,a,this.consumed),(e=this.errors)===null||e===void 0||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,r,n){const{decodeTree:a}=this;return this.emitCodePoint(r===1?a[e]&~gi.VALUE_LENGTH:a[e+1],n),r===3&&this.emitCodePoint(a[e+2],n),n}end(){var e;switch(this.state){case Or.NamedEntity:return this.result!==0&&(this.decodeMode!==pi.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Or.NumericDecimal:return this.emitNumericEntity(0,2);case Or.NumericHex:return this.emitNumericEntity(0,3);case Or.NumericStart:return(e=this.errors)===null||e===void 0||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Or.EntityStart:return 0}}}function N8(t){let e="";const r=new iz(t,n=>e+=ez(n));return function(a,i){let l=0,u=0;for(;(u=a.indexOf("&",u))>=0;){e+=a.slice(l,u),r.startEntity(i);const h=r.write(a,u+1);if(h<0){l=u+r.end();break}l=u+h,u=h===0?l+1:l}const d=e+a.slice(l);return e="",d}}function oz(t,e,r,n){const a=(e&gi.BRANCH_LENGTH)>>7,i=e&gi.JUMP_TABLE;if(a===0)return i!==0&&n===i?r:-1;if(i){const d=n-i;return d<0||d>=a?-1:t[r+d]-1}let l=r,u=l+a-1;for(;l<=u;){const d=l+u>>>1,h=t[d];if(h<n)l=d+1;else if(h>n)u=d-1;else return t[d+a]}return-1}const lz=N8(QD);N8(WD);function M8(t,e=pi.Legacy){return lz(t,e)}function uz(t){return Object.prototype.toString.call(t)}function F2(t){return uz(t)==="[object String]"}const cz=Object.prototype.hasOwnProperty;function dz(t,e){return cz.call(t,e)}function Dh(t){return Array.prototype.slice.call(arguments,1).forEach(function(r){if(r){if(typeof r!="object")throw new TypeError(r+"must be object");Object.keys(r).forEach(function(n){t[n]=r[n]})}}),t}function j8(t,e,r){return[].concat(t.slice(0,e),r,t.slice(e+1))}function L2(t){return!(t>=55296&&t<=57343||t>=64976&&t<=65007||(t&65535)===65535||(t&65535)===65534||t>=0&&t<=8||t===11||t>=14&&t<=31||t>=127&&t<=159||t>1114111)}function ch(t){if(t>65535){t-=65536;const e=55296+(t>>10),r=56320+(t&1023);return String.fromCharCode(e,r)}return String.fromCharCode(t)}const D8=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,hz=/&([a-z#][a-z0-9]{1,31});/gi,fz=new RegExp(D8.source+"|"+hz.source,"gi"),mz=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function pz(t,e){if(e.charCodeAt(0)===35&&mz.test(e)){const n=e[1].toLowerCase()==="x"?parseInt(e.slice(2),16):parseInt(e.slice(1),10);return L2(n)?ch(n):t}const r=M8(t);return r!==t?r:t}function gz(t){return t.indexOf("\\")<0?t:t.replace(D8,"$1")}function Al(t){return t.indexOf("\\")<0&&t.indexOf("&")<0?t:t.replace(fz,function(e,r,n){return r||pz(e,n)})}const bz=/[&<>"]/,yz=/[&<>"]/g,xz={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function vz(t){return xz[t]}function Ci(t){return bz.test(t)?t.replace(yz,vz):t}const _z=/[.?*+^$[\]\\(){}|-]/g;function wz(t){return t.replace(_z,"\\$&")}function It(t){switch(t){case 9:case 32:return!0}return!1}function vc(t){if(t>=8192&&t<=8202)return!0;switch(t){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function _c(t){return R2.test(t)||C8.test(t)}function wc(t){switch(t){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function zh(t){return t=t.trim().replace(/\s+/g," "),"".toLowerCase()===""&&(t=t.replace(//g,"")),t.toLowerCase().toUpperCase()}const kz={mdurl:KD,ucmicro:XD},Sz=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:j8,assign:Dh,escapeHtml:Ci,escapeRE:wz,fromCodePoint:ch,has:dz,isMdAsciiPunct:wc,isPunctChar:_c,isSpace:It,isString:F2,isValidEntityCode:L2,isWhiteSpace:vc,lib:kz,normalizeReference:zh,unescapeAll:Al,unescapeMd:gz},Symbol.toStringTag,{value:"Module"}));function Az(t,e,r){let n,a,i,l;const u=t.posMax,d=t.pos;for(t.pos=e+1,n=1;t.pos<u;){if(i=t.src.charCodeAt(t.pos),i===93&&(n--,n===0)){a=!0;break}if(l=t.pos,t.md.inline.skipToken(t),i===91){if(l===t.pos-1)n++;else if(r)return t.pos=d,-1}}let h=-1;return a&&(h=t.pos),t.pos=d,h}function Ez(t,e,r){let n,a=e;const i={ok:!1,pos:0,str:""};if(t.charCodeAt(a)===60){for(a++;a<r;){if(n=t.charCodeAt(a),n===10||n===60)return i;if(n===62)return i.pos=a+1,i.str=Al(t.slice(e+1,a)),i.ok=!0,i;if(n===92&&a+1<r){a+=2;continue}a++}return i}let l=0;for(;a<r&&(n=t.charCodeAt(a),!(n===32||n<32||n===127));){if(n===92&&a+1<r){if(t.charCodeAt(a+1)===32)break;a+=2;continue}if(n===40&&(l++,l>32))return i;if(n===41){if(l===0)break;l--}a++}return e===a||l!==0||(i.str=Al(t.slice(e,a)),i.pos=a,i.ok=!0),i}function Cz(t,e,r,n){let a,i=e;const l={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(n)l.str=n.str,l.marker=n.marker;else{if(i>=r)return l;let u=t.charCodeAt(i);if(u!==34&&u!==39&&u!==40)return l;e++,i++,u===40&&(u=41),l.marker=u}for(;i<r;){if(a=t.charCodeAt(i),a===l.marker)return l.pos=i+1,l.str+=Al(t.slice(e,i)),l.ok=!0,l;if(a===40&&l.marker===41)return l;a===92&&i+1<r&&i++,i++}return l.can_continue=!0,l.str+=Al(t.slice(e,i)),l}const Tz=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:Ez,parseLinkLabel:Az,parseLinkTitle:Cz},Symbol.toStringTag,{value:"Module"})),Ya={};Ya.code_inline=function(t,e,r,n,a){const i=t[e];return"<code"+a.renderAttrs(i)+">"+Ci(i.content)+"</code>"};Ya.code_block=function(t,e,r,n,a){const i=t[e];return"<pre"+a.renderAttrs(i)+"><code>"+Ci(t[e].content)+`</code></pre>
`};Ya.fence=function(t,e,r,n,a){const i=t[e],l=i.info?Al(i.info).trim():"";let u="",d="";if(l){const p=l.split(/(\s+)/g);u=p[0],d=p.slice(2).join("")}let h;if(r.highlight?h=r.highlight(i.content,u,d)||Ci(i.content):h=Ci(i.content),h.indexOf("<pre")===0)return h+`
`;if(l){const p=i.attrIndex("class"),b=i.attrs?i.attrs.slice():[];p<0?b.push(["class",r.langPrefix+u]):(b[p]=b[p].slice(),b[p][1]+=" "+r.langPrefix+u);const y={attrs:b};return`<pre><code${a.renderAttrs(y)}>${h}</code></pre>
`}return`<pre><code${a.renderAttrs(i)}>${h}</code></pre>
`};Ya.image=function(t,e,r,n,a){const i=t[e];return i.attrs[i.attrIndex("alt")][1]=a.renderInlineAsText(i.children,r,n),a.renderToken(t,e,r)};Ya.hardbreak=function(t,e,r){return r.xhtmlOut?`<br />
`:`<br>
`};Ya.softbreak=function(t,e,r){return r.breaks?r.xhtmlOut?`<br />
`:`<br>
`:`
`};Ya.text=function(t,e){return Ci(t[e].content)};Ya.html_block=function(t,e){return t[e].content};Ya.html_inline=function(t,e){return t[e].content};function Ol(){this.rules=Dh({},Ya)}Ol.prototype.renderAttrs=function(e){let r,n,a;if(!e.attrs)return"";for(a="",r=0,n=e.attrs.length;r<n;r++)a+=" "+Ci(e.attrs[r][0])+'="'+Ci(e.attrs[r][1])+'"';return a};Ol.prototype.renderToken=function(e,r,n){const a=e[r];let i="";if(a.hidden)return"";a.block&&a.nesting!==-1&&r&&e[r-1].hidden&&(i+=`
`),i+=(a.nesting===-1?"</":"<")+a.tag,i+=this.renderAttrs(a),a.nesting===0&&n.xhtmlOut&&(i+=" /");let l=!1;if(a.block&&(l=!0,a.nesting===1&&r+1<e.length)){const u=e[r+1];(u.type==="inline"||u.hidden||u.nesting===-1&&u.tag===a.tag)&&(l=!1)}return i+=l?`>
`:">",i};Ol.prototype.renderInline=function(t,e,r){let n="";const a=this.rules;for(let i=0,l=t.length;i<l;i++){const u=t[i].type;typeof a[u]<"u"?n+=a[u](t,i,e,r,this):n+=this.renderToken(t,i,e)}return n};Ol.prototype.renderInlineAsText=function(t,e,r){let n="";for(let a=0,i=t.length;a<i;a++)switch(t[a].type){case"text":n+=t[a].content;break;case"image":n+=this.renderInlineAsText(t[a].children,e,r);break;case"html_inline":case"html_block":n+=t[a].content;break;case"softbreak":case"hardbreak":n+=`
`;break}return n};Ol.prototype.render=function(t,e,r){let n="";const a=this.rules;for(let i=0,l=t.length;i<l;i++){const u=t[i].type;u==="inline"?n+=this.renderInline(t[i].children,e,r):typeof a[u]<"u"?n+=a[u](t,i,e,r,this):n+=this.renderToken(t,i,e,r)}return n};function vn(){this.__rules__=[],this.__cache__=null}vn.prototype.__find__=function(t){for(let e=0;e<this.__rules__.length;e++)if(this.__rules__[e].name===t)return e;return-1};vn.prototype.__compile__=function(){const t=this,e=[""];t.__rules__.forEach(function(r){r.enabled&&r.alt.forEach(function(n){e.indexOf(n)<0&&e.push(n)})}),t.__cache__={},e.forEach(function(r){t.__cache__[r]=[],t.__rules__.forEach(function(n){n.enabled&&(r&&n.alt.indexOf(r)<0||t.__cache__[r].push(n.fn))})})};vn.prototype.at=function(t,e,r){const n=this.__find__(t),a=r||{};if(n===-1)throw new Error("Parser rule not found: "+t);this.__rules__[n].fn=e,this.__rules__[n].alt=a.alt||[],this.__cache__=null};vn.prototype.before=function(t,e,r,n){const a=this.__find__(t),i=n||{};if(a===-1)throw new Error("Parser rule not found: "+t);this.__rules__.splice(a,0,{name:e,enabled:!0,fn:r,alt:i.alt||[]}),this.__cache__=null};vn.prototype.after=function(t,e,r,n){const a=this.__find__(t),i=n||{};if(a===-1)throw new Error("Parser rule not found: "+t);this.__rules__.splice(a+1,0,{name:e,enabled:!0,fn:r,alt:i.alt||[]}),this.__cache__=null};vn.prototype.push=function(t,e,r){const n=r||{};this.__rules__.push({name:t,enabled:!0,fn:e,alt:n.alt||[]}),this.__cache__=null};vn.prototype.enable=function(t,e){Array.isArray(t)||(t=[t]);const r=[];return t.forEach(function(n){const a=this.__find__(n);if(a<0){if(e)return;throw new Error("Rules manager: invalid rule name "+n)}this.__rules__[a].enabled=!0,r.push(n)},this),this.__cache__=null,r};vn.prototype.enableOnly=function(t,e){Array.isArray(t)||(t=[t]),this.__rules__.forEach(function(r){r.enabled=!1}),this.enable(t,e)};vn.prototype.disable=function(t,e){Array.isArray(t)||(t=[t]);const r=[];return t.forEach(function(n){const a=this.__find__(n);if(a<0){if(e)return;throw new Error("Rules manager: invalid rule name "+n)}this.__rules__[a].enabled=!1,r.push(n)},this),this.__cache__=null,r};vn.prototype.getRules=function(t){return this.__cache__===null&&this.__compile__(),this.__cache__[t]||[]};function Sa(t,e,r){this.type=t,this.tag=e,this.attrs=null,this.map=null,this.nesting=r,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}Sa.prototype.attrIndex=function(e){if(!this.attrs)return-1;const r=this.attrs;for(let n=0,a=r.length;n<a;n++)if(r[n][0]===e)return n;return-1};Sa.prototype.attrPush=function(e){this.attrs?this.attrs.push(e):this.attrs=[e]};Sa.prototype.attrSet=function(e,r){const n=this.attrIndex(e),a=[e,r];n<0?this.attrPush(a):this.attrs[n]=a};Sa.prototype.attrGet=function(e){const r=this.attrIndex(e);let n=null;return r>=0&&(n=this.attrs[r][1]),n};Sa.prototype.attrJoin=function(e,r){const n=this.attrIndex(e);n<0?this.attrPush([e,r]):this.attrs[n][1]=this.attrs[n][1]+" "+r};function z8(t,e,r){this.src=t,this.env=r,this.tokens=[],this.inlineMode=!1,this.md=e}z8.prototype.Token=Sa;const Nz=/\r\n?|\n/g,Mz=/\0/g;function jz(t){let e;e=t.src.replace(Nz,`
`),e=e.replace(Mz,""),t.src=e}function Dz(t){let e;t.inlineMode?(e=new t.Token("inline","",0),e.content=t.src,e.map=[0,1],e.children=[],t.tokens.push(e)):t.md.block.parse(t.src,t.md,t.env,t.tokens)}function zz(t){const e=t.tokens;for(let r=0,n=e.length;r<n;r++){const a=e[r];a.type==="inline"&&t.md.inline.parse(a.content,t.md,t.env,a.children)}}function Oz(t){return/^<a[>\s]/i.test(t)}function Rz(t){return/^<\/a\s*>/i.test(t)}function Fz(t){const e=t.tokens;if(t.md.options.linkify)for(let r=0,n=e.length;r<n;r++){if(e[r].type!=="inline"||!t.md.linkify.pretest(e[r].content))continue;let a=e[r].children,i=0;for(let l=a.length-1;l>=0;l--){const u=a[l];if(u.type==="link_close"){for(l--;a[l].level!==u.level&&a[l].type!=="link_open";)l--;continue}if(u.type==="html_inline"&&(Oz(u.content)&&i>0&&i--,Rz(u.content)&&i++),!(i>0)&&u.type==="text"&&t.md.linkify.test(u.content)){const d=u.content;let h=t.md.linkify.match(d);const p=[];let b=u.level,y=0;h.length>0&&h[0].index===0&&l>0&&a[l-1].type==="text_special"&&(h=h.slice(1));for(let x=0;x<h.length;x++){const _=h[x].url,k=t.md.normalizeLink(_);if(!t.md.validateLink(k))continue;let S=h[x].text;h[x].schema?h[x].schema==="mailto:"&&!/^mailto:/i.test(S)?S=t.md.normalizeLinkText("mailto:"+S).replace(/^mailto:/,""):S=t.md.normalizeLinkText(S):S=t.md.normalizeLinkText("http://"+S).replace(/^http:\/\//,"");const A=h[x].index;if(A>y){const j=new t.Token("text","",0);j.content=d.slice(y,A),j.level=b,p.push(j)}const C=new t.Token("link_open","a",1);C.attrs=[["href",k]],C.level=b++,C.markup="linkify",C.info="auto",p.push(C);const N=new t.Token("text","",0);N.content=S,N.level=b,p.push(N);const D=new t.Token("link_close","a",-1);D.level=--b,D.markup="linkify",D.info="auto",p.push(D),y=h[x].lastIndex}if(y<d.length){const x=new t.Token("text","",0);x.content=d.slice(y),x.level=b,p.push(x)}e[r].children=a=j8(a,l,p)}}}}const O8=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,Lz=/\((c|tm|r)\)/i,Pz=/\((c|tm|r)\)/ig,Bz={c:"",r:"",tm:""};function Iz(t,e){return Bz[e.toLowerCase()]}function $z(t){let e=0;for(let r=t.length-1;r>=0;r--){const n=t[r];n.type==="text"&&!e&&(n.content=n.content.replace(Pz,Iz)),n.type==="link_open"&&n.info==="auto"&&e--,n.type==="link_close"&&n.info==="auto"&&e++}}function qz(t){let e=0;for(let r=t.length-1;r>=0;r--){const n=t[r];n.type==="text"&&!e&&O8.test(n.content)&&(n.content=n.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1").replace(/(^|\s)--(?=\s|$)/mg,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1")),n.type==="link_open"&&n.info==="auto"&&e--,n.type==="link_close"&&n.info==="auto"&&e++}}function Hz(t){let e;if(t.md.options.typographer)for(e=t.tokens.length-1;e>=0;e--)t.tokens[e].type==="inline"&&(Lz.test(t.tokens[e].content)&&$z(t.tokens[e].children),O8.test(t.tokens[e].content)&&qz(t.tokens[e].children))}const Uz=/['"]/,k3=/['"]/g,S3="";function pd(t,e,r){return t.slice(0,e)+r+t.slice(e+1)}function Vz(t,e){let r;const n=[];for(let a=0;a<t.length;a++){const i=t[a],l=t[a].level;for(r=n.length-1;r>=0&&!(n[r].level<=l);r--);if(n.length=r+1,i.type!=="text")continue;let u=i.content,d=0,h=u.length;e:for(;d<h;){k3.lastIndex=d;const p=k3.exec(u);if(!p)break;let b=!0,y=!0;d=p.index+1;const x=p[0]==="'";let _=32;if(p.index-1>=0)_=u.charCodeAt(p.index-1);else for(r=a-1;r>=0&&!(t[r].type==="softbreak"||t[r].type==="hardbreak");r--)if(t[r].content){_=t[r].content.charCodeAt(t[r].content.length-1);break}let k=32;if(d<h)k=u.charCodeAt(d);else for(r=a+1;r<t.length&&!(t[r].type==="softbreak"||t[r].type==="hardbreak");r++)if(t[r].content){k=t[r].content.charCodeAt(0);break}const S=wc(_)||_c(String.fromCharCode(_)),A=wc(k)||_c(String.fromCharCode(k)),C=vc(_),N=vc(k);if(N?b=!1:A&&(C||S||(b=!1)),C?y=!1:S&&(N||A||(y=!1)),k===34&&p[0]==='"'&&_>=48&&_<=57&&(y=b=!1),b&&y&&(b=S,y=A),!b&&!y){x&&(i.content=pd(i.content,p.index,S3));continue}if(y)for(r=n.length-1;r>=0;r--){let D=n[r];if(n[r].level<l)break;if(D.single===x&&n[r].level===l){D=n[r];let j,O;x?(j=e.md.options.quotes[2],O=e.md.options.quotes[3]):(j=e.md.options.quotes[0],O=e.md.options.quotes[1]),i.content=pd(i.content,p.index,O),t[D.token].content=pd(t[D.token].content,D.pos,j),d+=O.length-1,D.token===a&&(d+=j.length-1),u=i.content,h=u.length,n.length=r;continue e}}b?n.push({token:a,pos:p.index,single:x,level:l}):y&&x&&(i.content=pd(i.content,p.index,S3))}}}function Gz(t){if(t.md.options.typographer)for(let e=t.tokens.length-1;e>=0;e--)t.tokens[e].type!=="inline"||!Uz.test(t.tokens[e].content)||Vz(t.tokens[e].children,t)}function Zz(t){let e,r;const n=t.tokens,a=n.length;for(let i=0;i<a;i++){if(n[i].type!=="inline")continue;const l=n[i].children,u=l.length;for(e=0;e<u;e++)l[e].type==="text_special"&&(l[e].type="text");for(e=r=0;e<u;e++)l[e].type==="text"&&e+1<u&&l[e+1].type==="text"?l[e+1].content=l[e].content+l[e+1].content:(e!==r&&(l[r]=l[e]),r++);e!==r&&(l.length=r)}}const km=[["normalize",jz],["block",Dz],["inline",zz],["linkify",Fz],["replacements",Hz],["smartquotes",Gz],["text_join",Zz]];function P2(){this.ruler=new vn;for(let t=0;t<km.length;t++)this.ruler.push(km[t][0],km[t][1])}P2.prototype.process=function(t){const e=this.ruler.getRules("");for(let r=0,n=e.length;r<n;r++)e[r](t)};P2.prototype.State=z8;function Xa(t,e,r,n){this.src=t,this.md=e,this.env=r,this.tokens=n,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const a=this.src;for(let i=0,l=0,u=0,d=0,h=a.length,p=!1;l<h;l++){const b=a.charCodeAt(l);if(!p)if(It(b)){u++,b===9?d+=4-d%4:d++;continue}else p=!0;(b===10||l===h-1)&&(b!==10&&l++,this.bMarks.push(i),this.eMarks.push(l),this.tShift.push(u),this.sCount.push(d),this.bsCount.push(0),p=!1,u=0,d=0,i=l+1)}this.bMarks.push(a.length),this.eMarks.push(a.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}Xa.prototype.push=function(t,e,r){const n=new Sa(t,e,r);return n.block=!0,r<0&&this.level--,n.level=this.level,r>0&&this.level++,this.tokens.push(n),n};Xa.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]};Xa.prototype.skipEmptyLines=function(e){for(let r=this.lineMax;e<r&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e};Xa.prototype.skipSpaces=function(e){for(let r=this.src.length;e<r;e++){const n=this.src.charCodeAt(e);if(!It(n))break}return e};Xa.prototype.skipSpacesBack=function(e,r){if(e<=r)return e;for(;e>r;)if(!It(this.src.charCodeAt(--e)))return e+1;return e};Xa.prototype.skipChars=function(e,r){for(let n=this.src.length;e<n&&this.src.charCodeAt(e)===r;e++);return e};Xa.prototype.skipCharsBack=function(e,r,n){if(e<=n)return e;for(;e>n;)if(r!==this.src.charCodeAt(--e))return e+1;return e};Xa.prototype.getLines=function(e,r,n,a){if(e>=r)return"";const i=new Array(r-e);for(let l=0,u=e;u<r;u++,l++){let d=0;const h=this.bMarks[u];let p=h,b;for(u+1<r||a?b=this.eMarks[u]+1:b=this.eMarks[u];p<b&&d<n;){const y=this.src.charCodeAt(p);if(It(y))y===9?d+=4-(d+this.bsCount[u])%4:d++;else if(p-h<this.tShift[u])d++;else break;p++}d>n?i[l]=new Array(d-n+1).join(" ")+this.src.slice(p,b):i[l]=this.src.slice(p,b)}return i.join("")};Xa.prototype.Token=Sa;const Kz=65536;function Sm(t,e){const r=t.bMarks[e]+t.tShift[e],n=t.eMarks[e];return t.src.slice(r,n)}function A3(t){const e=[],r=t.length;let n=0,a=t.charCodeAt(n),i=!1,l=0,u="";for(;n<r;)a===124&&(i?(u+=t.substring(l,n-1),l=n):(e.push(u+t.substring(l,n)),u="",l=n+1)),i=a===92,n++,a=t.charCodeAt(n);return e.push(u+t.substring(l)),e}function Yz(t,e,r,n){if(e+2>r)return!1;let a=e+1;if(t.sCount[a]<t.blkIndent||t.sCount[a]-t.blkIndent>=4)return!1;let i=t.bMarks[a]+t.tShift[a];if(i>=t.eMarks[a])return!1;const l=t.src.charCodeAt(i++);if(l!==124&&l!==45&&l!==58||i>=t.eMarks[a])return!1;const u=t.src.charCodeAt(i++);if(u!==124&&u!==45&&u!==58&&!It(u)||l===45&&It(u))return!1;for(;i<t.eMarks[a];){const D=t.src.charCodeAt(i);if(D!==124&&D!==45&&D!==58&&!It(D))return!1;i++}let d=Sm(t,e+1),h=d.split("|");const p=[];for(let D=0;D<h.length;D++){const j=h[D].trim();if(!j){if(D===0||D===h.length-1)continue;return!1}if(!/^:?-+:?$/.test(j))return!1;j.charCodeAt(j.length-1)===58?p.push(j.charCodeAt(0)===58?"center":"right"):j.charCodeAt(0)===58?p.push("left"):p.push("")}if(d=Sm(t,e).trim(),d.indexOf("|")===-1||t.sCount[e]-t.blkIndent>=4)return!1;h=A3(d),h.length&&h[0]===""&&h.shift(),h.length&&h[h.length-1]===""&&h.pop();const b=h.length;if(b===0||b!==p.length)return!1;if(n)return!0;const y=t.parentType;t.parentType="table";const x=t.md.block.ruler.getRules("blockquote"),_=t.push("table_open","table",1),k=[e,0];_.map=k;const S=t.push("thead_open","thead",1);S.map=[e,e+1];const A=t.push("tr_open","tr",1);A.map=[e,e+1];for(let D=0;D<h.length;D++){const j=t.push("th_open","th",1);p[D]&&(j.attrs=[["style","text-align:"+p[D]]]);const O=t.push("inline","",0);O.content=h[D].trim(),O.children=[],t.push("th_close","th",-1)}t.push("tr_close","tr",-1),t.push("thead_close","thead",-1);let C,N=0;for(a=e+2;a<r&&!(t.sCount[a]<t.blkIndent);a++){let D=!1;for(let O=0,F=x.length;O<F;O++)if(x[O](t,a,r,!0)){D=!0;break}if(D||(d=Sm(t,a).trim(),!d)||t.sCount[a]-t.blkIndent>=4||(h=A3(d),h.length&&h[0]===""&&h.shift(),h.length&&h[h.length-1]===""&&h.pop(),N+=b-h.length,N>Kz))break;if(a===e+2){const O=t.push("tbody_open","tbody",1);O.map=C=[e+2,0]}const j=t.push("tr_open","tr",1);j.map=[a,a+1];for(let O=0;O<b;O++){const F=t.push("td_open","td",1);p[O]&&(F.attrs=[["style","text-align:"+p[O]]]);const R=t.push("inline","",0);R.content=h[O]?h[O].trim():"",R.children=[],t.push("td_close","td",-1)}t.push("tr_close","tr",-1)}return C&&(t.push("tbody_close","tbody",-1),C[1]=a),t.push("table_close","table",-1),k[1]=a,t.parentType=y,t.line=a,!0}function Xz(t,e,r){if(t.sCount[e]-t.blkIndent<4)return!1;let n=e+1,a=n;for(;n<r;){if(t.isEmpty(n)){n++;continue}if(t.sCount[n]-t.blkIndent>=4){n++,a=n;continue}break}t.line=a;const i=t.push("code_block","code",0);return i.content=t.getLines(e,a,4+t.blkIndent,!1)+`
`,i.map=[e,t.line],!0}function Qz(t,e,r,n){let a=t.bMarks[e]+t.tShift[e],i=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4||a+3>i)return!1;const l=t.src.charCodeAt(a);if(l!==126&&l!==96)return!1;let u=a;a=t.skipChars(a,l);let d=a-u;if(d<3)return!1;const h=t.src.slice(u,a),p=t.src.slice(a,i);if(l===96&&p.indexOf(String.fromCharCode(l))>=0)return!1;if(n)return!0;let b=e,y=!1;for(;b++,!(b>=r||(a=u=t.bMarks[b]+t.tShift[b],i=t.eMarks[b],a<i&&t.sCount[b]<t.blkIndent));)if(t.src.charCodeAt(a)===l&&!(t.sCount[b]-t.blkIndent>=4)&&(a=t.skipChars(a,l),!(a-u<d)&&(a=t.skipSpaces(a),!(a<i)))){y=!0;break}d=t.sCount[e],t.line=b+(y?1:0);const x=t.push("fence","code",0);return x.info=p,x.content=t.getLines(e+1,b,d,!0),x.markup=h,x.map=[e,t.line],!0}function Wz(t,e,r,n){let a=t.bMarks[e]+t.tShift[e],i=t.eMarks[e];const l=t.lineMax;if(t.sCount[e]-t.blkIndent>=4||t.src.charCodeAt(a)!==62)return!1;if(n)return!0;const u=[],d=[],h=[],p=[],b=t.md.block.ruler.getRules("blockquote"),y=t.parentType;t.parentType="blockquote";let x=!1,_;for(_=e;_<r;_++){const N=t.sCount[_]<t.blkIndent;if(a=t.bMarks[_]+t.tShift[_],i=t.eMarks[_],a>=i)break;if(t.src.charCodeAt(a++)===62&&!N){let j=t.sCount[_]+1,O,F;t.src.charCodeAt(a)===32?(a++,j++,F=!1,O=!0):t.src.charCodeAt(a)===9?(O=!0,(t.bsCount[_]+j)%4===3?(a++,j++,F=!1):F=!0):O=!1;let R=j;for(u.push(t.bMarks[_]),t.bMarks[_]=a;a<i;){const B=t.src.charCodeAt(a);if(It(B))B===9?R+=4-(R+t.bsCount[_]+(F?1:0))%4:R++;else break;a++}x=a>=i,d.push(t.bsCount[_]),t.bsCount[_]=t.sCount[_]+1+(O?1:0),h.push(t.sCount[_]),t.sCount[_]=R-j,p.push(t.tShift[_]),t.tShift[_]=a-t.bMarks[_];continue}if(x)break;let D=!1;for(let j=0,O=b.length;j<O;j++)if(b[j](t,_,r,!0)){D=!0;break}if(D){t.lineMax=_,t.blkIndent!==0&&(u.push(t.bMarks[_]),d.push(t.bsCount[_]),p.push(t.tShift[_]),h.push(t.sCount[_]),t.sCount[_]-=t.blkIndent);break}u.push(t.bMarks[_]),d.push(t.bsCount[_]),p.push(t.tShift[_]),h.push(t.sCount[_]),t.sCount[_]=-1}const k=t.blkIndent;t.blkIndent=0;const S=t.push("blockquote_open","blockquote",1);S.markup=">";const A=[e,0];S.map=A,t.md.block.tokenize(t,e,_);const C=t.push("blockquote_close","blockquote",-1);C.markup=">",t.lineMax=l,t.parentType=y,A[1]=t.line;for(let N=0;N<p.length;N++)t.bMarks[N+e]=u[N],t.tShift[N+e]=p[N],t.sCount[N+e]=h[N],t.bsCount[N+e]=d[N];return t.blkIndent=k,!0}function Jz(t,e,r,n){const a=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4)return!1;let i=t.bMarks[e]+t.tShift[e];const l=t.src.charCodeAt(i++);if(l!==42&&l!==45&&l!==95)return!1;let u=1;for(;i<a;){const h=t.src.charCodeAt(i++);if(h!==l&&!It(h))return!1;h===l&&u++}if(u<3)return!1;if(n)return!0;t.line=e+1;const d=t.push("hr","hr",0);return d.map=[e,t.line],d.markup=Array(u+1).join(String.fromCharCode(l)),!0}function E3(t,e){const r=t.eMarks[e];let n=t.bMarks[e]+t.tShift[e];const a=t.src.charCodeAt(n++);if(a!==42&&a!==45&&a!==43)return-1;if(n<r){const i=t.src.charCodeAt(n);if(!It(i))return-1}return n}function C3(t,e){const r=t.bMarks[e]+t.tShift[e],n=t.eMarks[e];let a=r;if(a+1>=n)return-1;let i=t.src.charCodeAt(a++);if(i<48||i>57)return-1;for(;;){if(a>=n)return-1;if(i=t.src.charCodeAt(a++),i>=48&&i<=57){if(a-r>=10)return-1;continue}if(i===41||i===46)break;return-1}return a<n&&(i=t.src.charCodeAt(a),!It(i))?-1:a}function eO(t,e){const r=t.level+2;for(let n=e+2,a=t.tokens.length-2;n<a;n++)t.tokens[n].level===r&&t.tokens[n].type==="paragraph_open"&&(t.tokens[n+2].hidden=!0,t.tokens[n].hidden=!0,n+=2)}function tO(t,e,r,n){let a,i,l,u,d=e,h=!0;if(t.sCount[d]-t.blkIndent>=4||t.listIndent>=0&&t.sCount[d]-t.listIndent>=4&&t.sCount[d]<t.blkIndent)return!1;let p=!1;n&&t.parentType==="paragraph"&&t.sCount[d]>=t.blkIndent&&(p=!0);let b,y,x;if((x=C3(t,d))>=0){if(b=!0,l=t.bMarks[d]+t.tShift[d],y=Number(t.src.slice(l,x-1)),p&&y!==1)return!1}else if((x=E3(t,d))>=0)b=!1;else return!1;if(p&&t.skipSpaces(x)>=t.eMarks[d])return!1;if(n)return!0;const _=t.src.charCodeAt(x-1),k=t.tokens.length;b?(u=t.push("ordered_list_open","ol",1),y!==1&&(u.attrs=[["start",y]])):u=t.push("bullet_list_open","ul",1);const S=[d,0];u.map=S,u.markup=String.fromCharCode(_);let A=!1;const C=t.md.block.ruler.getRules("list"),N=t.parentType;for(t.parentType="list";d<r;){i=x,a=t.eMarks[d];const D=t.sCount[d]+x-(t.bMarks[d]+t.tShift[d]);let j=D;for(;i<a;){const pe=t.src.charCodeAt(i);if(pe===9)j+=4-(j+t.bsCount[d])%4;else if(pe===32)j++;else break;i++}const O=i;let F;O>=a?F=1:F=j-D,F>4&&(F=1);const R=D+F;u=t.push("list_item_open","li",1),u.markup=String.fromCharCode(_);const B=[d,0];u.map=B,b&&(u.info=t.src.slice(l,x-1));const V=t.tight,$=t.tShift[d],G=t.sCount[d],le=t.listIndent;if(t.listIndent=t.blkIndent,t.blkIndent=R,t.tight=!0,t.tShift[d]=O-t.bMarks[d],t.sCount[d]=j,O>=a&&t.isEmpty(d+1)?t.line=Math.min(t.line+2,r):t.md.block.tokenize(t,d,r,!0),(!t.tight||A)&&(h=!1),A=t.line-d>1&&t.isEmpty(t.line-1),t.blkIndent=t.listIndent,t.listIndent=le,t.tShift[d]=$,t.sCount[d]=G,t.tight=V,u=t.push("list_item_close","li",-1),u.markup=String.fromCharCode(_),d=t.line,B[1]=d,d>=r||t.sCount[d]<t.blkIndent||t.sCount[d]-t.blkIndent>=4)break;let ie=!1;for(let pe=0,K=C.length;pe<K;pe++)if(C[pe](t,d,r,!0)){ie=!0;break}if(ie)break;if(b){if(x=C3(t,d),x<0)break;l=t.bMarks[d]+t.tShift[d]}else if(x=E3(t,d),x<0)break;if(_!==t.src.charCodeAt(x-1))break}return b?u=t.push("ordered_list_close","ol",-1):u=t.push("bullet_list_close","ul",-1),u.markup=String.fromCharCode(_),S[1]=d,t.line=d,t.parentType=N,h&&eO(t,k),!0}function rO(t,e,r,n){let a=t.bMarks[e]+t.tShift[e],i=t.eMarks[e],l=e+1;if(t.sCount[e]-t.blkIndent>=4||t.src.charCodeAt(a)!==91)return!1;function u(C){const N=t.lineMax;if(C>=N||t.isEmpty(C))return null;let D=!1;if(t.sCount[C]-t.blkIndent>3&&(D=!0),t.sCount[C]<0&&(D=!0),!D){const F=t.md.block.ruler.getRules("reference"),R=t.parentType;t.parentType="reference";let B=!1;for(let V=0,$=F.length;V<$;V++)if(F[V](t,C,N,!0)){B=!0;break}if(t.parentType=R,B)return null}const j=t.bMarks[C]+t.tShift[C],O=t.eMarks[C];return t.src.slice(j,O+1)}let d=t.src.slice(a,i+1);i=d.length;let h=-1;for(a=1;a<i;a++){const C=d.charCodeAt(a);if(C===91)return!1;if(C===93){h=a;break}else if(C===10){const N=u(l);N!==null&&(d+=N,i=d.length,l++)}else if(C===92&&(a++,a<i&&d.charCodeAt(a)===10)){const N=u(l);N!==null&&(d+=N,i=d.length,l++)}}if(h<0||d.charCodeAt(h+1)!==58)return!1;for(a=h+2;a<i;a++){const C=d.charCodeAt(a);if(C===10){const N=u(l);N!==null&&(d+=N,i=d.length,l++)}else if(!It(C))break}const p=t.md.helpers.parseLinkDestination(d,a,i);if(!p.ok)return!1;const b=t.md.normalizeLink(p.str);if(!t.md.validateLink(b))return!1;a=p.pos;const y=a,x=l,_=a;for(;a<i;a++){const C=d.charCodeAt(a);if(C===10){const N=u(l);N!==null&&(d+=N,i=d.length,l++)}else if(!It(C))break}let k=t.md.helpers.parseLinkTitle(d,a,i);for(;k.can_continue;){const C=u(l);if(C===null)break;d+=C,a=i,i=d.length,l++,k=t.md.helpers.parseLinkTitle(d,a,i,k)}let S;for(a<i&&_!==a&&k.ok?(S=k.str,a=k.pos):(S="",a=y,l=x);a<i;){const C=d.charCodeAt(a);if(!It(C))break;a++}if(a<i&&d.charCodeAt(a)!==10&&S)for(S="",a=y,l=x;a<i;){const C=d.charCodeAt(a);if(!It(C))break;a++}if(a<i&&d.charCodeAt(a)!==10)return!1;const A=zh(d.slice(1,h));return A?(n||(typeof t.env.references>"u"&&(t.env.references={}),typeof t.env.references[A]>"u"&&(t.env.references[A]={title:S,href:b}),t.line=l),!0):!1}const nO=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],aO="[a-zA-Z_:][a-zA-Z0-9:._-]*",sO="[^\"'=<>`\\x00-\\x20]+",iO="'[^']*'",oO='"[^"]*"',lO="(?:"+sO+"|"+iO+"|"+oO+")",uO="(?:\\s+"+aO+"(?:\\s*=\\s*"+lO+")?)",R8="<[A-Za-z][A-Za-z0-9\\-]*"+uO+"*\\s*\\/?>",F8="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",cO="<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->",dO="<[?][\\s\\S]*?[?]>",hO="<![A-Za-z][^>]*>",fO="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",mO=new RegExp("^(?:"+R8+"|"+F8+"|"+cO+"|"+dO+"|"+hO+"|"+fO+")"),pO=new RegExp("^(?:"+R8+"|"+F8+")"),ul=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+nO.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(pO.source+"\\s*$"),/^$/,!1]];function gO(t,e,r,n){let a=t.bMarks[e]+t.tShift[e],i=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4||!t.md.options.html||t.src.charCodeAt(a)!==60)return!1;let l=t.src.slice(a,i),u=0;for(;u<ul.length&&!ul[u][0].test(l);u++);if(u===ul.length)return!1;if(n)return ul[u][2];let d=e+1;if(!ul[u][1].test(l)){for(;d<r&&!(t.sCount[d]<t.blkIndent);d++)if(a=t.bMarks[d]+t.tShift[d],i=t.eMarks[d],l=t.src.slice(a,i),ul[u][1].test(l)){l.length!==0&&d++;break}}t.line=d;const h=t.push("html_block","",0);return h.map=[e,d],h.content=t.getLines(e,d,t.blkIndent,!0),!0}function bO(t,e,r,n){let a=t.bMarks[e]+t.tShift[e],i=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4)return!1;let l=t.src.charCodeAt(a);if(l!==35||a>=i)return!1;let u=1;for(l=t.src.charCodeAt(++a);l===35&&a<i&&u<=6;)u++,l=t.src.charCodeAt(++a);if(u>6||a<i&&!It(l))return!1;if(n)return!0;i=t.skipSpacesBack(i,a);const d=t.skipCharsBack(i,35,a);d>a&&It(t.src.charCodeAt(d-1))&&(i=d),t.line=e+1;const h=t.push("heading_open","h"+String(u),1);h.markup="########".slice(0,u),h.map=[e,t.line];const p=t.push("inline","",0);p.content=t.src.slice(a,i).trim(),p.map=[e,t.line],p.children=[];const b=t.push("heading_close","h"+String(u),-1);return b.markup="########".slice(0,u),!0}function yO(t,e,r){const n=t.md.block.ruler.getRules("paragraph");if(t.sCount[e]-t.blkIndent>=4)return!1;const a=t.parentType;t.parentType="paragraph";let i=0,l,u=e+1;for(;u<r&&!t.isEmpty(u);u++){if(t.sCount[u]-t.blkIndent>3)continue;if(t.sCount[u]>=t.blkIndent){let x=t.bMarks[u]+t.tShift[u];const _=t.eMarks[u];if(x<_&&(l=t.src.charCodeAt(x),(l===45||l===61)&&(x=t.skipChars(x,l),x=t.skipSpaces(x),x>=_))){i=l===61?1:2;break}}if(t.sCount[u]<0)continue;let y=!1;for(let x=0,_=n.length;x<_;x++)if(n[x](t,u,r,!0)){y=!0;break}if(y)break}if(!i)return!1;const d=t.getLines(e,u,t.blkIndent,!1).trim();t.line=u+1;const h=t.push("heading_open","h"+String(i),1);h.markup=String.fromCharCode(l),h.map=[e,t.line];const p=t.push("inline","",0);p.content=d,p.map=[e,t.line-1],p.children=[];const b=t.push("heading_close","h"+String(i),-1);return b.markup=String.fromCharCode(l),t.parentType=a,!0}function xO(t,e,r){const n=t.md.block.ruler.getRules("paragraph"),a=t.parentType;let i=e+1;for(t.parentType="paragraph";i<r&&!t.isEmpty(i);i++){if(t.sCount[i]-t.blkIndent>3||t.sCount[i]<0)continue;let h=!1;for(let p=0,b=n.length;p<b;p++)if(n[p](t,i,r,!0)){h=!0;break}if(h)break}const l=t.getLines(e,i,t.blkIndent,!1).trim();t.line=i;const u=t.push("paragraph_open","p",1);u.map=[e,t.line];const d=t.push("inline","",0);return d.content=l,d.map=[e,t.line],d.children=[],t.push("paragraph_close","p",-1),t.parentType=a,!0}const gd=[["table",Yz,["paragraph","reference"]],["code",Xz],["fence",Qz,["paragraph","reference","blockquote","list"]],["blockquote",Wz,["paragraph","reference","blockquote","list"]],["hr",Jz,["paragraph","reference","blockquote","list"]],["list",tO,["paragraph","reference","blockquote"]],["reference",rO],["html_block",gO,["paragraph","reference","blockquote"]],["heading",bO,["paragraph","reference","blockquote"]],["lheading",yO],["paragraph",xO]];function Oh(){this.ruler=new vn;for(let t=0;t<gd.length;t++)this.ruler.push(gd[t][0],gd[t][1],{alt:(gd[t][2]||[]).slice()})}Oh.prototype.tokenize=function(t,e,r){const n=this.ruler.getRules(""),a=n.length,i=t.md.options.maxNesting;let l=e,u=!1;for(;l<r&&(t.line=l=t.skipEmptyLines(l),!(l>=r||t.sCount[l]<t.blkIndent));){if(t.level>=i){t.line=r;break}const d=t.line;let h=!1;for(let p=0;p<a;p++)if(h=n[p](t,l,r,!1),h){if(d>=t.line)throw new Error("block rule didn't increment state.line");break}if(!h)throw new Error("none of the block rules matched");t.tight=!u,t.isEmpty(t.line-1)&&(u=!0),l=t.line,l<r&&t.isEmpty(l)&&(u=!0,l++,t.line=l)}};Oh.prototype.parse=function(t,e,r,n){if(!t)return;const a=new this.State(t,e,r,n);this.tokenize(a,a.line,a.lineMax)};Oh.prototype.State=Xa;function $c(t,e,r,n){this.src=t,this.env=r,this.md=e,this.tokens=n,this.tokens_meta=Array(n.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}$c.prototype.pushPending=function(){const t=new Sa("text","",0);return t.content=this.pending,t.level=this.pendingLevel,this.tokens.push(t),this.pending="",t};$c.prototype.push=function(t,e,r){this.pending&&this.pushPending();const n=new Sa(t,e,r);let a=null;return r<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),n.level=this.level,r>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],a={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(n),this.tokens_meta.push(a),n};$c.prototype.scanDelims=function(t,e){const r=this.posMax,n=this.src.charCodeAt(t),a=t>0?this.src.charCodeAt(t-1):32;let i=t;for(;i<r&&this.src.charCodeAt(i)===n;)i++;const l=i-t,u=i<r?this.src.charCodeAt(i):32,d=wc(a)||_c(String.fromCharCode(a)),h=wc(u)||_c(String.fromCharCode(u)),p=vc(a),b=vc(u),y=!b&&(!h||p||d),x=!p&&(!d||b||h);return{can_open:y&&(e||!x||d),can_close:x&&(e||!y||h),length:l}};$c.prototype.Token=Sa;function vO(t){switch(t){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function _O(t,e){let r=t.pos;for(;r<t.posMax&&!vO(t.src.charCodeAt(r));)r++;return r===t.pos?!1:(e||(t.pending+=t.src.slice(t.pos,r)),t.pos=r,!0)}const wO=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function kO(t,e){if(!t.md.options.linkify||t.linkLevel>0)return!1;const r=t.pos,n=t.posMax;if(r+3>n||t.src.charCodeAt(r)!==58||t.src.charCodeAt(r+1)!==47||t.src.charCodeAt(r+2)!==47)return!1;const a=t.pending.match(wO);if(!a)return!1;const i=a[1],l=t.md.linkify.matchAtStart(t.src.slice(r-i.length));if(!l)return!1;let u=l.url;if(u.length<=i.length)return!1;u=u.replace(/\*+$/,"");const d=t.md.normalizeLink(u);if(!t.md.validateLink(d))return!1;if(!e){t.pending=t.pending.slice(0,-i.length);const h=t.push("link_open","a",1);h.attrs=[["href",d]],h.markup="linkify",h.info="auto";const p=t.push("text","",0);p.content=t.md.normalizeLinkText(u);const b=t.push("link_close","a",-1);b.markup="linkify",b.info="auto"}return t.pos+=u.length-i.length,!0}function SO(t,e){let r=t.pos;if(t.src.charCodeAt(r)!==10)return!1;const n=t.pending.length-1,a=t.posMax;if(!e)if(n>=0&&t.pending.charCodeAt(n)===32)if(n>=1&&t.pending.charCodeAt(n-1)===32){let i=n-1;for(;i>=1&&t.pending.charCodeAt(i-1)===32;)i--;t.pending=t.pending.slice(0,i),t.push("hardbreak","br",0)}else t.pending=t.pending.slice(0,-1),t.push("softbreak","br",0);else t.push("softbreak","br",0);for(r++;r<a&&It(t.src.charCodeAt(r));)r++;return t.pos=r,!0}const B2=[];for(let t=0;t<256;t++)B2.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(t){B2[t.charCodeAt(0)]=1});function AO(t,e){let r=t.pos;const n=t.posMax;if(t.src.charCodeAt(r)!==92||(r++,r>=n))return!1;let a=t.src.charCodeAt(r);if(a===10){for(e||t.push("hardbreak","br",0),r++;r<n&&(a=t.src.charCodeAt(r),!!It(a));)r++;return t.pos=r,!0}let i=t.src[r];if(a>=55296&&a<=56319&&r+1<n){const u=t.src.charCodeAt(r+1);u>=56320&&u<=57343&&(i+=t.src[r+1],r++)}const l="\\"+i;if(!e){const u=t.push("text_special","",0);a<256&&B2[a]!==0?u.content=i:u.content=l,u.markup=l,u.info="escape"}return t.pos=r+1,!0}function EO(t,e){let r=t.pos;if(t.src.charCodeAt(r)!==96)return!1;const a=r;r++;const i=t.posMax;for(;r<i&&t.src.charCodeAt(r)===96;)r++;const l=t.src.slice(a,r),u=l.length;if(t.backticksScanned&&(t.backticks[u]||0)<=a)return e||(t.pending+=l),t.pos+=u,!0;let d=r,h;for(;(h=t.src.indexOf("`",d))!==-1;){for(d=h+1;d<i&&t.src.charCodeAt(d)===96;)d++;const p=d-h;if(p===u){if(!e){const b=t.push("code_inline","code",0);b.markup=l,b.content=t.src.slice(r,h).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return t.pos=d,!0}t.backticks[p]=h}return t.backticksScanned=!0,e||(t.pending+=l),t.pos+=u,!0}function CO(t,e){const r=t.pos,n=t.src.charCodeAt(r);if(e||n!==126)return!1;const a=t.scanDelims(t.pos,!0);let i=a.length;const l=String.fromCharCode(n);if(i<2)return!1;let u;i%2&&(u=t.push("text","",0),u.content=l,i--);for(let d=0;d<i;d+=2)u=t.push("text","",0),u.content=l+l,t.delimiters.push({marker:n,length:0,token:t.tokens.length-1,end:-1,open:a.can_open,close:a.can_close});return t.pos+=a.length,!0}function T3(t,e){let r;const n=[],a=e.length;for(let i=0;i<a;i++){const l=e[i];if(l.marker!==126||l.end===-1)continue;const u=e[l.end];r=t.tokens[l.token],r.type="s_open",r.tag="s",r.nesting=1,r.markup="~~",r.content="",r=t.tokens[u.token],r.type="s_close",r.tag="s",r.nesting=-1,r.markup="~~",r.content="",t.tokens[u.token-1].type==="text"&&t.tokens[u.token-1].content==="~"&&n.push(u.token-1)}for(;n.length;){const i=n.pop();let l=i+1;for(;l<t.tokens.length&&t.tokens[l].type==="s_close";)l++;l--,i!==l&&(r=t.tokens[l],t.tokens[l]=t.tokens[i],t.tokens[i]=r)}}function TO(t){const e=t.tokens_meta,r=t.tokens_meta.length;T3(t,t.delimiters);for(let n=0;n<r;n++)e[n]&&e[n].delimiters&&T3(t,e[n].delimiters)}const L8={tokenize:CO,postProcess:TO};function NO(t,e){const r=t.pos,n=t.src.charCodeAt(r);if(e||n!==95&&n!==42)return!1;const a=t.scanDelims(t.pos,n===42);for(let i=0;i<a.length;i++){const l=t.push("text","",0);l.content=String.fromCharCode(n),t.delimiters.push({marker:n,length:a.length,token:t.tokens.length-1,end:-1,open:a.can_open,close:a.can_close})}return t.pos+=a.length,!0}function N3(t,e){const r=e.length;for(let n=r-1;n>=0;n--){const a=e[n];if(a.marker!==95&&a.marker!==42||a.end===-1)continue;const i=e[a.end],l=n>0&&e[n-1].end===a.end+1&&e[n-1].marker===a.marker&&e[n-1].token===a.token-1&&e[a.end+1].token===i.token+1,u=String.fromCharCode(a.marker),d=t.tokens[a.token];d.type=l?"strong_open":"em_open",d.tag=l?"strong":"em",d.nesting=1,d.markup=l?u+u:u,d.content="";const h=t.tokens[i.token];h.type=l?"strong_close":"em_close",h.tag=l?"strong":"em",h.nesting=-1,h.markup=l?u+u:u,h.content="",l&&(t.tokens[e[n-1].token].content="",t.tokens[e[a.end+1].token].content="",n--)}}function MO(t){const e=t.tokens_meta,r=t.tokens_meta.length;N3(t,t.delimiters);for(let n=0;n<r;n++)e[n]&&e[n].delimiters&&N3(t,e[n].delimiters)}const P8={tokenize:NO,postProcess:MO};function jO(t,e){let r,n,a,i,l="",u="",d=t.pos,h=!0;if(t.src.charCodeAt(t.pos)!==91)return!1;const p=t.pos,b=t.posMax,y=t.pos+1,x=t.md.helpers.parseLinkLabel(t,t.pos,!0);if(x<0)return!1;let _=x+1;if(_<b&&t.src.charCodeAt(_)===40){for(h=!1,_++;_<b&&(r=t.src.charCodeAt(_),!(!It(r)&&r!==10));_++);if(_>=b)return!1;if(d=_,a=t.md.helpers.parseLinkDestination(t.src,_,t.posMax),a.ok){for(l=t.md.normalizeLink(a.str),t.md.validateLink(l)?_=a.pos:l="",d=_;_<b&&(r=t.src.charCodeAt(_),!(!It(r)&&r!==10));_++);if(a=t.md.helpers.parseLinkTitle(t.src,_,t.posMax),_<b&&d!==_&&a.ok)for(u=a.str,_=a.pos;_<b&&(r=t.src.charCodeAt(_),!(!It(r)&&r!==10));_++);}(_>=b||t.src.charCodeAt(_)!==41)&&(h=!0),_++}if(h){if(typeof t.env.references>"u")return!1;if(_<b&&t.src.charCodeAt(_)===91?(d=_+1,_=t.md.helpers.parseLinkLabel(t,_),_>=0?n=t.src.slice(d,_++):_=x+1):_=x+1,n||(n=t.src.slice(y,x)),i=t.env.references[zh(n)],!i)return t.pos=p,!1;l=i.href,u=i.title}if(!e){t.pos=y,t.posMax=x;const k=t.push("link_open","a",1),S=[["href",l]];k.attrs=S,u&&S.push(["title",u]),t.linkLevel++,t.md.inline.tokenize(t),t.linkLevel--,t.push("link_close","a",-1)}return t.pos=_,t.posMax=b,!0}function DO(t,e){let r,n,a,i,l,u,d,h,p="";const b=t.pos,y=t.posMax;if(t.src.charCodeAt(t.pos)!==33||t.src.charCodeAt(t.pos+1)!==91)return!1;const x=t.pos+2,_=t.md.helpers.parseLinkLabel(t,t.pos+1,!1);if(_<0)return!1;if(i=_+1,i<y&&t.src.charCodeAt(i)===40){for(i++;i<y&&(r=t.src.charCodeAt(i),!(!It(r)&&r!==10));i++);if(i>=y)return!1;for(h=i,u=t.md.helpers.parseLinkDestination(t.src,i,t.posMax),u.ok&&(p=t.md.normalizeLink(u.str),t.md.validateLink(p)?i=u.pos:p=""),h=i;i<y&&(r=t.src.charCodeAt(i),!(!It(r)&&r!==10));i++);if(u=t.md.helpers.parseLinkTitle(t.src,i,t.posMax),i<y&&h!==i&&u.ok)for(d=u.str,i=u.pos;i<y&&(r=t.src.charCodeAt(i),!(!It(r)&&r!==10));i++);else d="";if(i>=y||t.src.charCodeAt(i)!==41)return t.pos=b,!1;i++}else{if(typeof t.env.references>"u")return!1;if(i<y&&t.src.charCodeAt(i)===91?(h=i+1,i=t.md.helpers.parseLinkLabel(t,i),i>=0?a=t.src.slice(h,i++):i=_+1):i=_+1,a||(a=t.src.slice(x,_)),l=t.env.references[zh(a)],!l)return t.pos=b,!1;p=l.href,d=l.title}if(!e){n=t.src.slice(x,_);const k=[];t.md.inline.parse(n,t.md,t.env,k);const S=t.push("image","img",0),A=[["src",p],["alt",""]];S.attrs=A,S.children=k,S.content=n,d&&A.push(["title",d])}return t.pos=i,t.posMax=y,!0}const zO=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,OO=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function RO(t,e){let r=t.pos;if(t.src.charCodeAt(r)!==60)return!1;const n=t.pos,a=t.posMax;for(;;){if(++r>=a)return!1;const l=t.src.charCodeAt(r);if(l===60)return!1;if(l===62)break}const i=t.src.slice(n+1,r);if(OO.test(i)){const l=t.md.normalizeLink(i);if(!t.md.validateLink(l))return!1;if(!e){const u=t.push("link_open","a",1);u.attrs=[["href",l]],u.markup="autolink",u.info="auto";const d=t.push("text","",0);d.content=t.md.normalizeLinkText(i);const h=t.push("link_close","a",-1);h.markup="autolink",h.info="auto"}return t.pos+=i.length+2,!0}if(zO.test(i)){const l=t.md.normalizeLink("mailto:"+i);if(!t.md.validateLink(l))return!1;if(!e){const u=t.push("link_open","a",1);u.attrs=[["href",l]],u.markup="autolink",u.info="auto";const d=t.push("text","",0);d.content=t.md.normalizeLinkText(i);const h=t.push("link_close","a",-1);h.markup="autolink",h.info="auto"}return t.pos+=i.length+2,!0}return!1}function FO(t){return/^<a[>\s]/i.test(t)}function LO(t){return/^<\/a\s*>/i.test(t)}function PO(t){const e=t|32;return e>=97&&e<=122}function BO(t,e){if(!t.md.options.html)return!1;const r=t.posMax,n=t.pos;if(t.src.charCodeAt(n)!==60||n+2>=r)return!1;const a=t.src.charCodeAt(n+1);if(a!==33&&a!==63&&a!==47&&!PO(a))return!1;const i=t.src.slice(n).match(mO);if(!i)return!1;if(!e){const l=t.push("html_inline","",0);l.content=i[0],FO(l.content)&&t.linkLevel++,LO(l.content)&&t.linkLevel--}return t.pos+=i[0].length,!0}const IO=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,$O=/^&([a-z][a-z0-9]{1,31});/i;function qO(t,e){const r=t.pos,n=t.posMax;if(t.src.charCodeAt(r)!==38||r+1>=n)return!1;if(t.src.charCodeAt(r+1)===35){const i=t.src.slice(r).match(IO);if(i){if(!e){const l=i[1][0].toLowerCase()==="x"?parseInt(i[1].slice(1),16):parseInt(i[1],10),u=t.push("text_special","",0);u.content=L2(l)?ch(l):ch(65533),u.markup=i[0],u.info="entity"}return t.pos+=i[0].length,!0}}else{const i=t.src.slice(r).match($O);if(i){const l=M8(i[0]);if(l!==i[0]){if(!e){const u=t.push("text_special","",0);u.content=l,u.markup=i[0],u.info="entity"}return t.pos+=i[0].length,!0}}}return!1}function M3(t){const e={},r=t.length;if(!r)return;let n=0,a=-2;const i=[];for(let l=0;l<r;l++){const u=t[l];if(i.push(0),(t[n].marker!==u.marker||a!==u.token-1)&&(n=l),a=u.token,u.length=u.length||0,!u.close)continue;e.hasOwnProperty(u.marker)||(e[u.marker]=[-1,-1,-1,-1,-1,-1]);const d=e[u.marker][(u.open?3:0)+u.length%3];let h=n-i[n]-1,p=h;for(;h>d;h-=i[h]+1){const b=t[h];if(b.marker===u.marker&&b.open&&b.end<0){let y=!1;if((b.close||u.open)&&(b.length+u.length)%3===0&&(b.length%3!==0||u.length%3!==0)&&(y=!0),!y){const x=h>0&&!t[h-1].open?i[h-1]+1:0;i[l]=l-h+x,i[h]=x,u.open=!1,b.end=l,b.close=!1,p=-1,a=-2;break}}}p!==-1&&(e[u.marker][(u.open?3:0)+(u.length||0)%3]=p)}}function HO(t){const e=t.tokens_meta,r=t.tokens_meta.length;M3(t.delimiters);for(let n=0;n<r;n++)e[n]&&e[n].delimiters&&M3(e[n].delimiters)}function UO(t){let e,r,n=0;const a=t.tokens,i=t.tokens.length;for(e=r=0;e<i;e++)a[e].nesting<0&&n--,a[e].level=n,a[e].nesting>0&&n++,a[e].type==="text"&&e+1<i&&a[e+1].type==="text"?a[e+1].content=a[e].content+a[e+1].content:(e!==r&&(a[r]=a[e]),r++);e!==r&&(a.length=r)}const Am=[["text",_O],["linkify",kO],["newline",SO],["escape",AO],["backticks",EO],["strikethrough",L8.tokenize],["emphasis",P8.tokenize],["link",jO],["image",DO],["autolink",RO],["html_inline",BO],["entity",qO]],Em=[["balance_pairs",HO],["strikethrough",L8.postProcess],["emphasis",P8.postProcess],["fragments_join",UO]];function qc(){this.ruler=new vn;for(let t=0;t<Am.length;t++)this.ruler.push(Am[t][0],Am[t][1]);this.ruler2=new vn;for(let t=0;t<Em.length;t++)this.ruler2.push(Em[t][0],Em[t][1])}qc.prototype.skipToken=function(t){const e=t.pos,r=this.ruler.getRules(""),n=r.length,a=t.md.options.maxNesting,i=t.cache;if(typeof i[e]<"u"){t.pos=i[e];return}let l=!1;if(t.level<a){for(let u=0;u<n;u++)if(t.level++,l=r[u](t,!0),t.level--,l){if(e>=t.pos)throw new Error("inline rule didn't increment state.pos");break}}else t.pos=t.posMax;l||t.pos++,i[e]=t.pos};qc.prototype.tokenize=function(t){const e=this.ruler.getRules(""),r=e.length,n=t.posMax,a=t.md.options.maxNesting;for(;t.pos<n;){const i=t.pos;let l=!1;if(t.level<a){for(let u=0;u<r;u++)if(l=e[u](t,!1),l){if(i>=t.pos)throw new Error("inline rule didn't increment state.pos");break}}if(l){if(t.pos>=n)break;continue}t.pending+=t.src[t.pos++]}t.pending&&t.pushPending()};qc.prototype.parse=function(t,e,r,n){const a=new this.State(t,e,r,n);this.tokenize(a);const i=this.ruler2.getRules(""),l=i.length;for(let u=0;u<l;u++)i[u](a)};qc.prototype.State=$c;function VO(t){const e={};t=t||{},e.src_Any=A8.source,e.src_Cc=E8.source,e.src_Z=T8.source,e.src_P=R2.source,e.src_ZPCc=[e.src_Z,e.src_P,e.src_Cc].join("|"),e.src_ZCc=[e.src_Z,e.src_Cc].join("|");const r="[><]";return e.src_pseudo_letter="(?:(?!"+r+"|"+e.src_ZPCc+")"+e.src_Any+")",e.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",e.src_auth="(?:(?:(?!"+e.src_ZCc+"|[@/\\[\\]()]).)+@)?",e.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",e.src_host_terminator="(?=$|"+r+"|"+e.src_ZPCc+")(?!"+(t["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+e.src_ZPCc+"))",e.src_path="(?:[/?#](?:(?!"+e.src_ZCc+"|"+r+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+e.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+e.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+e.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+e.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+e.src_ZCc+"|[']).)+\\'|\\'(?="+e.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+e.src_ZCc+"|[.]|$)|"+(t["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+e.src_ZCc+"|$)|;(?!"+e.src_ZCc+"|$)|\\!+(?!"+e.src_ZCc+"|[!]|$)|\\?(?!"+e.src_ZCc+"|[?]|$))+|\\/)?",e.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',e.src_xn="xn--[a-z0-9\\-]{1,59}",e.src_domain_root="(?:"+e.src_xn+"|"+e.src_pseudo_letter+"{1,63})",e.src_domain="(?:"+e.src_xn+"|(?:"+e.src_pseudo_letter+")|(?:"+e.src_pseudo_letter+"(?:-|"+e.src_pseudo_letter+"){0,61}"+e.src_pseudo_letter+"))",e.src_host="(?:(?:(?:(?:"+e.src_domain+")\\.)*"+e.src_domain+"))",e.tpl_host_fuzzy="(?:"+e.src_ip4+"|(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%)))",e.tpl_host_no_ip_fuzzy="(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%))",e.src_host_strict=e.src_host+e.src_host_terminator,e.tpl_host_fuzzy_strict=e.tpl_host_fuzzy+e.src_host_terminator,e.src_host_port_strict=e.src_host+e.src_port+e.src_host_terminator,e.tpl_host_port_fuzzy_strict=e.tpl_host_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_port_no_ip_fuzzy_strict=e.tpl_host_no_ip_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+e.src_ZPCc+"|>|$))",e.tpl_email_fuzzy="(^|"+r+'|"|\\(|'+e.src_ZCc+")("+e.src_email_name+"@"+e.tpl_host_fuzzy_strict+")",e.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+e.src_ZPCc+"))((?![$+<=>^`|])"+e.tpl_host_port_fuzzy_strict+e.src_path+")",e.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+e.src_ZPCc+"))((?![$+<=>^`|])"+e.tpl_host_port_no_ip_fuzzy_strict+e.src_path+")",e}function jp(t){return Array.prototype.slice.call(arguments,1).forEach(function(r){r&&Object.keys(r).forEach(function(n){t[n]=r[n]})}),t}function Rh(t){return Object.prototype.toString.call(t)}function GO(t){return Rh(t)==="[object String]"}function ZO(t){return Rh(t)==="[object Object]"}function KO(t){return Rh(t)==="[object RegExp]"}function j3(t){return Rh(t)==="[object Function]"}function YO(t){return t.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const B8={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function XO(t){return Object.keys(t||{}).reduce(function(e,r){return e||B8.hasOwnProperty(r)},!1)}const QO={"http:":{validate:function(t,e,r){const n=t.slice(e);return r.re.http||(r.re.http=new RegExp("^\\/\\/"+r.re.src_auth+r.re.src_host_port_strict+r.re.src_path,"i")),r.re.http.test(n)?n.match(r.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(t,e,r){const n=t.slice(e);return r.re.no_http||(r.re.no_http=new RegExp("^"+r.re.src_auth+"(?:localhost|(?:(?:"+r.re.src_domain+")\\.)+"+r.re.src_domain_root+")"+r.re.src_port+r.re.src_host_terminator+r.re.src_path,"i")),r.re.no_http.test(n)?e>=3&&t[e-3]===":"||e>=3&&t[e-3]==="/"?0:n.match(r.re.no_http)[0].length:0}},"mailto:":{validate:function(t,e,r){const n=t.slice(e);return r.re.mailto||(r.re.mailto=new RegExp("^"+r.re.src_email_name+"@"+r.re.src_host_strict,"i")),r.re.mailto.test(n)?n.match(r.re.mailto)[0].length:0}}},WO="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",JO="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function eR(t){t.__index__=-1,t.__text_cache__=""}function tR(t){return function(e,r){const n=e.slice(r);return t.test(n)?n.match(t)[0].length:0}}function D3(){return function(t,e){e.normalize(t)}}function dh(t){const e=t.re=VO(t.__opts__),r=t.__tlds__.slice();t.onCompile(),t.__tlds_replaced__||r.push(WO),r.push(e.src_xn),e.src_tlds=r.join("|");function n(u){return u.replace("%TLDS%",e.src_tlds)}e.email_fuzzy=RegExp(n(e.tpl_email_fuzzy),"i"),e.link_fuzzy=RegExp(n(e.tpl_link_fuzzy),"i"),e.link_no_ip_fuzzy=RegExp(n(e.tpl_link_no_ip_fuzzy),"i"),e.host_fuzzy_test=RegExp(n(e.tpl_host_fuzzy_test),"i");const a=[];t.__compiled__={};function i(u,d){throw new Error('(LinkifyIt) Invalid schema "'+u+'": '+d)}Object.keys(t.__schemas__).forEach(function(u){const d=t.__schemas__[u];if(d===null)return;const h={validate:null,link:null};if(t.__compiled__[u]=h,ZO(d)){KO(d.validate)?h.validate=tR(d.validate):j3(d.validate)?h.validate=d.validate:i(u,d),j3(d.normalize)?h.normalize=d.normalize:d.normalize?i(u,d):h.normalize=D3();return}if(GO(d)){a.push(u);return}i(u,d)}),a.forEach(function(u){t.__compiled__[t.__schemas__[u]]&&(t.__compiled__[u].validate=t.__compiled__[t.__schemas__[u]].validate,t.__compiled__[u].normalize=t.__compiled__[t.__schemas__[u]].normalize)}),t.__compiled__[""]={validate:null,normalize:D3()};const l=Object.keys(t.__compiled__).filter(function(u){return u.length>0&&t.__compiled__[u]}).map(YO).join("|");t.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+e.src_ZPCc+"))("+l+")","i"),t.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+e.src_ZPCc+"))("+l+")","ig"),t.re.schema_at_start=RegExp("^"+t.re.schema_search.source,"i"),t.re.pretest=RegExp("("+t.re.schema_test.source+")|("+t.re.host_fuzzy_test.source+")|@","i"),eR(t)}function rR(t,e){const r=t.__index__,n=t.__last_index__,a=t.__text_cache__.slice(r,n);this.schema=t.__schema__.toLowerCase(),this.index=r+e,this.lastIndex=n+e,this.raw=a,this.text=a,this.url=a}function Dp(t,e){const r=new rR(t,e);return t.__compiled__[r.schema].normalize(r,t),r}function $n(t,e){if(!(this instanceof $n))return new $n(t,e);e||XO(t)&&(e=t,t={}),this.__opts__=jp({},B8,e),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=jp({},QO,t),this.__compiled__={},this.__tlds__=JO,this.__tlds_replaced__=!1,this.re={},dh(this)}$n.prototype.add=function(e,r){return this.__schemas__[e]=r,dh(this),this};$n.prototype.set=function(e){return this.__opts__=jp(this.__opts__,e),this};$n.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;let r,n,a,i,l,u,d,h,p;if(this.re.schema_test.test(e)){for(d=this.re.schema_search,d.lastIndex=0;(r=d.exec(e))!==null;)if(i=this.testSchemaAt(e,r[2],d.lastIndex),i){this.__schema__=r[2],this.__index__=r.index+r[1].length,this.__last_index__=r.index+r[0].length+i;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(h=e.search(this.re.host_fuzzy_test),h>=0&&(this.__index__<0||h<this.__index__)&&(n=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(l=n.index+n[1].length,(this.__index__<0||l<this.__index__)&&(this.__schema__="",this.__index__=l,this.__last_index__=n.index+n[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(p=e.indexOf("@"),p>=0&&(a=e.match(this.re.email_fuzzy))!==null&&(l=a.index+a[1].length,u=a.index+a[0].length,(this.__index__<0||l<this.__index__||l===this.__index__&&u>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=l,this.__last_index__=u))),this.__index__>=0};$n.prototype.pretest=function(e){return this.re.pretest.test(e)};$n.prototype.testSchemaAt=function(e,r,n){return this.__compiled__[r.toLowerCase()]?this.__compiled__[r.toLowerCase()].validate(e,n,this):0};$n.prototype.match=function(e){const r=[];let n=0;this.__index__>=0&&this.__text_cache__===e&&(r.push(Dp(this,n)),n=this.__last_index__);let a=n?e.slice(n):e;for(;this.test(a);)r.push(Dp(this,n)),a=a.slice(this.__last_index__),n+=this.__last_index__;return r.length?r:null};$n.prototype.matchAtStart=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return null;const r=this.re.schema_at_start.exec(e);if(!r)return null;const n=this.testSchemaAt(e,r[2],r[0].length);return n?(this.__schema__=r[2],this.__index__=r.index+r[1].length,this.__last_index__=r.index+r[0].length+n,Dp(this,0)):null};$n.prototype.tlds=function(e,r){return e=Array.isArray(e)?e:[e],r?(this.__tlds__=this.__tlds__.concat(e).sort().filter(function(n,a,i){return n!==i[a-1]}).reverse(),dh(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,dh(this),this)};$n.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),e.schema==="mailto:"&&!/^mailto:/i.test(e.url)&&(e.url="mailto:"+e.url)};$n.prototype.onCompile=function(){};const pl=2147483647,$a=36,I2=1,kc=26,nR=38,aR=700,I8=72,$8=128,q8="-",sR=/^xn--/,iR=/[^\0-\x7F]/,oR=/[\x2E\u3002\uFF0E\uFF61]/g,lR={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Cm=$a-I2,qa=Math.floor,Tm=String.fromCharCode;function fi(t){throw new RangeError(lR[t])}function uR(t,e){const r=[];let n=t.length;for(;n--;)r[n]=e(t[n]);return r}function H8(t,e){const r=t.split("@");let n="";r.length>1&&(n=r[0]+"@",t=r[1]),t=t.replace(oR,".");const a=t.split("."),i=uR(a,e).join(".");return n+i}function U8(t){const e=[];let r=0;const n=t.length;for(;r<n;){const a=t.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){const i=t.charCodeAt(r++);(i&64512)==56320?e.push(((a&1023)<<10)+(i&1023)+65536):(e.push(a),r--)}else e.push(a)}return e}const cR=t=>String.fromCodePoint(...t),dR=function(t){return t>=48&&t<58?26+(t-48):t>=65&&t<91?t-65:t>=97&&t<123?t-97:$a},z3=function(t,e){return t+22+75*(t<26)-((e!=0)<<5)},V8=function(t,e,r){let n=0;for(t=r?qa(t/aR):t>>1,t+=qa(t/e);t>Cm*kc>>1;n+=$a)t=qa(t/Cm);return qa(n+(Cm+1)*t/(t+nR))},G8=function(t){const e=[],r=t.length;let n=0,a=$8,i=I8,l=t.lastIndexOf(q8);l<0&&(l=0);for(let u=0;u<l;++u)t.charCodeAt(u)>=128&&fi("not-basic"),e.push(t.charCodeAt(u));for(let u=l>0?l+1:0;u<r;){const d=n;for(let p=1,b=$a;;b+=$a){u>=r&&fi("invalid-input");const y=dR(t.charCodeAt(u++));y>=$a&&fi("invalid-input"),y>qa((pl-n)/p)&&fi("overflow"),n+=y*p;const x=b<=i?I2:b>=i+kc?kc:b-i;if(y<x)break;const _=$a-x;p>qa(pl/_)&&fi("overflow"),p*=_}const h=e.length+1;i=V8(n-d,h,d==0),qa(n/h)>pl-a&&fi("overflow"),a+=qa(n/h),n%=h,e.splice(n++,0,a)}return String.fromCodePoint(...e)},Z8=function(t){const e=[];t=U8(t);const r=t.length;let n=$8,a=0,i=I8;for(const d of t)d<128&&e.push(Tm(d));const l=e.length;let u=l;for(l&&e.push(q8);u<r;){let d=pl;for(const p of t)p>=n&&p<d&&(d=p);const h=u+1;d-n>qa((pl-a)/h)&&fi("overflow"),a+=(d-n)*h,n=d;for(const p of t)if(p<n&&++a>pl&&fi("overflow"),p===n){let b=a;for(let y=$a;;y+=$a){const x=y<=i?I2:y>=i+kc?kc:y-i;if(b<x)break;const _=b-x,k=$a-x;e.push(Tm(z3(x+_%k,0))),b=qa(_/k)}e.push(Tm(z3(b,0))),i=V8(a,h,u===l),a=0,++u}++a,++n}return e.join("")},hR=function(t){return H8(t,function(e){return sR.test(e)?G8(e.slice(4).toLowerCase()):e})},fR=function(t){return H8(t,function(e){return iR.test(e)?"xn--"+Z8(e):e})},K8={version:"2.3.1",ucs2:{decode:U8,encode:cR},decode:G8,encode:Z8,toASCII:fR,toUnicode:hR},mR={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},pR={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},gR={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},bR={default:mR,zero:pR,commonmark:gR},yR=/^(vbscript|javascript|file|data):/,xR=/^data:image\/(gif|png|jpeg|webp);/;function vR(t){const e=t.trim().toLowerCase();return yR.test(e)?xR.test(e):!0}const Y8=["http:","https:","mailto:"];function _R(t){const e=O2(t,!0);if(e.hostname&&(!e.protocol||Y8.indexOf(e.protocol)>=0))try{e.hostname=K8.toASCII(e.hostname)}catch{}return Ic(z2(e))}function wR(t){const e=O2(t,!0);if(e.hostname&&(!e.protocol||Y8.indexOf(e.protocol)>=0))try{e.hostname=K8.toUnicode(e.hostname)}catch{}return Sl(z2(e),Sl.defaultChars+"%")}function _n(t,e){if(!(this instanceof _n))return new _n(t,e);e||F2(t)||(e=t||{},t="default"),this.inline=new qc,this.block=new Oh,this.core=new P2,this.renderer=new Ol,this.linkify=new $n,this.validateLink=vR,this.normalizeLink=_R,this.normalizeLinkText=wR,this.utils=Sz,this.helpers=Dh({},Tz),this.options={},this.configure(t),e&&this.set(e)}_n.prototype.set=function(t){return Dh(this.options,t),this};_n.prototype.configure=function(t){const e=this;if(F2(t)){const r=t;if(t=bR[r],!t)throw new Error('Wrong `markdown-it` preset "'+r+'", check name')}if(!t)throw new Error("Wrong `markdown-it` preset, can't be empty");return t.options&&e.set(t.options),t.components&&Object.keys(t.components).forEach(function(r){t.components[r].rules&&e[r].ruler.enableOnly(t.components[r].rules),t.components[r].rules2&&e[r].ruler2.enableOnly(t.components[r].rules2)}),this};_n.prototype.enable=function(t,e){let r=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach(function(a){r=r.concat(this[a].ruler.enable(t,!0))},this),r=r.concat(this.inline.ruler2.enable(t,!0));const n=t.filter(function(a){return r.indexOf(a)<0});if(n.length&&!e)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+n);return this};_n.prototype.disable=function(t,e){let r=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach(function(a){r=r.concat(this[a].ruler.disable(t,!0))},this),r=r.concat(this.inline.ruler2.disable(t,!0));const n=t.filter(function(a){return r.indexOf(a)<0});if(n.length&&!e)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+n);return this};_n.prototype.use=function(t){const e=[this].concat(Array.prototype.slice.call(arguments,1));return t.apply(t,e),this};_n.prototype.parse=function(t,e){if(typeof t!="string")throw new Error("Input data should be a String");const r=new this.core.State(t,this,e);return this.core.process(r),r.tokens};_n.prototype.render=function(t,e){return e=e||{},this.renderer.render(this.parse(t,e),this.options,e)};_n.prototype.parseInline=function(t,e){const r=new this.core.State(t,this,e);return r.inlineMode=!0,this.core.process(r),r.tokens};_n.prototype.renderInline=function(t,e){return e=e||{},this.renderer.render(this.parseInline(t,e),this.options,e)};var Nm,O3;function kR(){return O3||(O3=1,Nm=function(e){function r(a,i){var l,u,d,h,p,b=a.pos,y=a.src.charCodeAt(b);if(i||y!==43||(u=a.scanDelims(a.pos,!0),h=u.length,p=String.fromCharCode(y),h<2))return!1;for(h%2&&(d=a.push("text","",0),d.content=p,h--),l=0;l<h;l+=2)d=a.push("text","",0),d.content=p+p,!(!u.can_open&&!u.can_close)&&a.delimiters.push({marker:y,length:0,jump:l/2,token:a.tokens.length-1,end:-1,open:u.can_open,close:u.can_close});return a.pos+=u.length,!0}function n(a,i){var l,u,d,h,p,b=[],y=i.length;for(l=0;l<y;l++)d=i[l],d.marker===43&&d.end!==-1&&(h=i[d.end],p=a.tokens[d.token],p.type="ins_open",p.tag="ins",p.nesting=1,p.markup="++",p.content="",p=a.tokens[h.token],p.type="ins_close",p.tag="ins",p.nesting=-1,p.markup="++",p.content="",a.tokens[h.token-1].type==="text"&&a.tokens[h.token-1].content==="+"&&b.push(h.token-1));for(;b.length;){for(l=b.pop(),u=l+1;u<a.tokens.length&&a.tokens[u].type==="ins_close";)u++;u--,l!==u&&(p=a.tokens[u],a.tokens[u]=a.tokens[l],a.tokens[l]=p)}}e.inline.ruler.before("emphasis","ins",r),e.inline.ruler2.before("emphasis","ins",function(a){var i,l=a.tokens_meta,u=(a.tokens_meta||[]).length;for(n(a,a.delimiters),i=0;i<u;i++)l[i]&&l[i].delimiters&&n(a,l[i].delimiters)})}),Nm}var SR=kR();const AR=Jp(SR);/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */const{entries:X8,setPrototypeOf:R3,isFrozen:ER,getPrototypeOf:CR,getOwnPropertyDescriptor:TR}=Object;let{freeze:sn,seal:aa,create:Q8}=Object,{apply:zp,construct:Op}=typeof Reflect<"u"&&Reflect;sn||(sn=function(e){return e});aa||(aa=function(e){return e});zp||(zp=function(e,r,n){return e.apply(r,n)});Op||(Op=function(e,r){return new e(...r)});const bd=on(Array.prototype.forEach),NR=on(Array.prototype.lastIndexOf),F3=on(Array.prototype.pop),qu=on(Array.prototype.push),MR=on(Array.prototype.splice),Kd=on(String.prototype.toLowerCase),Mm=on(String.prototype.toString),L3=on(String.prototype.match),Hu=on(String.prototype.replace),jR=on(String.prototype.indexOf),DR=on(String.prototype.trim),pa=on(Object.prototype.hasOwnProperty),Wr=on(RegExp.prototype.test),Uu=zR(TypeError);function on(t){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return zp(t,e,n)}}function zR(t){return function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return Op(t,r)}}function dt(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Kd;R3&&R3(t,null);let n=e.length;for(;n--;){let a=e[n];if(typeof a=="string"){const i=r(a);i!==a&&(ER(e)||(e[n]=i),a=i)}t[a]=!0}return t}function OR(t){for(let e=0;e<t.length;e++)pa(t,e)||(t[e]=null);return t}function _s(t){const e=Q8(null);for(const[r,n]of X8(t))pa(t,r)&&(Array.isArray(n)?e[r]=OR(n):n&&typeof n=="object"&&n.constructor===Object?e[r]=_s(n):e[r]=n);return e}function Vu(t,e){for(;t!==null;){const n=TR(t,e);if(n){if(n.get)return on(n.get);if(typeof n.value=="function")return on(n.value)}t=CR(t)}function r(){return null}return r}const P3=sn(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),jm=sn(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Dm=sn(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),RR=sn(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),zm=sn(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),FR=sn(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),B3=sn(["#text"]),I3=sn(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Om=sn(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),$3=sn(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),yd=sn(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),LR=aa(/\{\{[\w\W]*|[\w\W]*\}\}/gm),PR=aa(/<%[\w\W]*|[\w\W]*%>/gm),BR=aa(/\$\{[\w\W]*/gm),IR=aa(/^data-[\-\w.\u00B7-\uFFFF]+$/),$R=aa(/^aria-[\-\w]+$/),W8=aa(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),qR=aa(/^(?:\w+script|data):/i),HR=aa(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),J8=aa(/^html$/i),UR=aa(/^[a-z][.\w]*(-[.\w]+)+$/i);var q3=Object.freeze({__proto__:null,ARIA_ATTR:$R,ATTR_WHITESPACE:HR,CUSTOM_ELEMENT:UR,DATA_ATTR:IR,DOCTYPE_NAME:J8,ERB_EXPR:PR,IS_ALLOWED_URI:W8,IS_SCRIPT_OR_DATA:qR,MUSTACHE_EXPR:LR,TMPLIT_EXPR:BR});const Gu={element:1,text:3,progressingInstruction:7,comment:8,document:9},VR=function(){return typeof window>"u"?null:window},GR=function(e,r){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let n=null;const a="data-tt-policy-suffix";r&&r.hasAttribute(a)&&(n=r.getAttribute(a));const i="dompurify"+(n?"#"+n:"");try{return e.createPolicy(i,{createHTML(l){return l},createScriptURL(l){return l}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}},H3=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function e7(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:VR();const e=$e=>e7($e);if(e.version="3.2.6",e.removed=[],!t||!t.document||t.document.nodeType!==Gu.document||!t.Element)return e.isSupported=!1,e;let{document:r}=t;const n=r,a=n.currentScript,{DocumentFragment:i,HTMLTemplateElement:l,Node:u,Element:d,NodeFilter:h,NamedNodeMap:p=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:b,DOMParser:y,trustedTypes:x}=t,_=d.prototype,k=Vu(_,"cloneNode"),S=Vu(_,"remove"),A=Vu(_,"nextSibling"),C=Vu(_,"childNodes"),N=Vu(_,"parentNode");if(typeof l=="function"){const $e=r.createElement("template");$e.content&&$e.content.ownerDocument&&(r=$e.content.ownerDocument)}let D,j="";const{implementation:O,createNodeIterator:F,createDocumentFragment:R,getElementsByTagName:B}=r,{importNode:V}=n;let $=H3();e.isSupported=typeof X8=="function"&&typeof N=="function"&&O&&O.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:G,ERB_EXPR:le,TMPLIT_EXPR:ie,DATA_ATTR:pe,ARIA_ATTR:K,IS_SCRIPT_OR_DATA:ue,ATTR_WHITESPACE:Ce,CUSTOM_ELEMENT:ze}=q3;let{IS_ALLOWED_URI:q}=q3,ae=null;const we=dt({},[...P3,...jm,...Dm,...zm,...B3]);let be=null;const Se=dt({},[...I3,...Om,...$3,...yd]);let W=Object.seal(Q8(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ce=null,Ne=null,Ze=!0,Et=!0,wt=!1,kt=!0,St=!1,ur=!0,cr=!1,Sn=!1,Hn=!1,qt=!1,un=!1,Pr=!1,Z=!0,re=!1;const he="user-content-";let de=!0,fe=!1,xe={},De=null;const Ke=dt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let et=null;const it=dt({},["audio","video","img","source","image","track"]);let dr=null;const An=dt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Fs="http://www.w3.org/1998/Math/MathML",En="http://www.w3.org/2000/svg",Mr="http://www.w3.org/1999/xhtml";let Ur=Mr,la=!1,ua=null;const Co=dt({},[Fs,En,Mr],Mm);let zi=dt({},["mi","mo","mn","ms","mtext"]),Oi=dt({},["annotation-xml"]);const Pl=dt({},["title","style","font","a","script"]);let ca=null;const Zh=["application/xhtml+xml","text/html"],Yc="text/html";let hr=null,Ea=null;const Bl=r.createElement("form"),Il=function(Q){return Q instanceof RegExp||Q instanceof Function},$l=function(){let Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Ea&&Ea===Q)){if((!Q||typeof Q!="object")&&(Q={}),Q=_s(Q),ca=Zh.indexOf(Q.PARSER_MEDIA_TYPE)===-1?Yc:Q.PARSER_MEDIA_TYPE,hr=ca==="application/xhtml+xml"?Mm:Kd,ae=pa(Q,"ALLOWED_TAGS")?dt({},Q.ALLOWED_TAGS,hr):we,be=pa(Q,"ALLOWED_ATTR")?dt({},Q.ALLOWED_ATTR,hr):Se,ua=pa(Q,"ALLOWED_NAMESPACES")?dt({},Q.ALLOWED_NAMESPACES,Mm):Co,dr=pa(Q,"ADD_URI_SAFE_ATTR")?dt(_s(An),Q.ADD_URI_SAFE_ATTR,hr):An,et=pa(Q,"ADD_DATA_URI_TAGS")?dt(_s(it),Q.ADD_DATA_URI_TAGS,hr):it,De=pa(Q,"FORBID_CONTENTS")?dt({},Q.FORBID_CONTENTS,hr):Ke,ce=pa(Q,"FORBID_TAGS")?dt({},Q.FORBID_TAGS,hr):_s({}),Ne=pa(Q,"FORBID_ATTR")?dt({},Q.FORBID_ATTR,hr):_s({}),xe=pa(Q,"USE_PROFILES")?Q.USE_PROFILES:!1,Ze=Q.ALLOW_ARIA_ATTR!==!1,Et=Q.ALLOW_DATA_ATTR!==!1,wt=Q.ALLOW_UNKNOWN_PROTOCOLS||!1,kt=Q.ALLOW_SELF_CLOSE_IN_ATTR!==!1,St=Q.SAFE_FOR_TEMPLATES||!1,ur=Q.SAFE_FOR_XML!==!1,cr=Q.WHOLE_DOCUMENT||!1,qt=Q.RETURN_DOM||!1,un=Q.RETURN_DOM_FRAGMENT||!1,Pr=Q.RETURN_TRUSTED_TYPE||!1,Hn=Q.FORCE_BODY||!1,Z=Q.SANITIZE_DOM!==!1,re=Q.SANITIZE_NAMED_PROPS||!1,de=Q.KEEP_CONTENT!==!1,fe=Q.IN_PLACE||!1,q=Q.ALLOWED_URI_REGEXP||W8,Ur=Q.NAMESPACE||Mr,zi=Q.MATHML_TEXT_INTEGRATION_POINTS||zi,Oi=Q.HTML_INTEGRATION_POINTS||Oi,W=Q.CUSTOM_ELEMENT_HANDLING||{},Q.CUSTOM_ELEMENT_HANDLING&&Il(Q.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(W.tagNameCheck=Q.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Q.CUSTOM_ELEMENT_HANDLING&&Il(Q.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(W.attributeNameCheck=Q.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Q.CUSTOM_ELEMENT_HANDLING&&typeof Q.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(W.allowCustomizedBuiltInElements=Q.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),St&&(Et=!1),un&&(qt=!0),xe&&(ae=dt({},B3),be=[],xe.html===!0&&(dt(ae,P3),dt(be,I3)),xe.svg===!0&&(dt(ae,jm),dt(be,Om),dt(be,yd)),xe.svgFilters===!0&&(dt(ae,Dm),dt(be,Om),dt(be,yd)),xe.mathMl===!0&&(dt(ae,zm),dt(be,$3),dt(be,yd))),Q.ADD_TAGS&&(ae===we&&(ae=_s(ae)),dt(ae,Q.ADD_TAGS,hr)),Q.ADD_ATTR&&(be===Se&&(be=_s(be)),dt(be,Q.ADD_ATTR,hr)),Q.ADD_URI_SAFE_ATTR&&dt(dr,Q.ADD_URI_SAFE_ATTR,hr),Q.FORBID_CONTENTS&&(De===Ke&&(De=_s(De)),dt(De,Q.FORBID_CONTENTS,hr)),de&&(ae["#text"]=!0),cr&&dt(ae,["html","head","body"]),ae.table&&(dt(ae,["tbody"]),delete ce.tbody),Q.TRUSTED_TYPES_POLICY){if(typeof Q.TRUSTED_TYPES_POLICY.createHTML!="function")throw Uu('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Q.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Uu('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');D=Q.TRUSTED_TYPES_POLICY,j=D.createHTML("")}else D===void 0&&(D=GR(x,a)),D!==null&&typeof j=="string"&&(j=D.createHTML(""));sn&&sn(Q),Ea=Q}},da=dt({},[...jm,...Dm,...RR]),Sr=dt({},[...zm,...FR]),Vr=function(Q){let Ae=N(Q);(!Ae||!Ae.tagName)&&(Ae={namespaceURI:Ur,tagName:"template"});const Be=Kd(Q.tagName),Lt=Kd(Ae.tagName);return ua[Q.namespaceURI]?Q.namespaceURI===En?Ae.namespaceURI===Mr?Be==="svg":Ae.namespaceURI===Fs?Be==="svg"&&(Lt==="annotation-xml"||zi[Lt]):!!da[Be]:Q.namespaceURI===Fs?Ae.namespaceURI===Mr?Be==="math":Ae.namespaceURI===En?Be==="math"&&Oi[Lt]:!!Sr[Be]:Q.namespaceURI===Mr?Ae.namespaceURI===En&&!Oi[Lt]||Ae.namespaceURI===Fs&&!zi[Lt]?!1:!Sr[Be]&&(Pl[Be]||!da[Be]):!!(ca==="application/xhtml+xml"&&ua[Q.namespaceURI]):!1},Br=function(Q){qu(e.removed,{element:Q});try{N(Q).removeChild(Q)}catch{S(Q)}},Ca=function(Q,Ae){try{qu(e.removed,{attribute:Ae.getAttributeNode(Q),from:Ae})}catch{qu(e.removed,{attribute:null,from:Ae})}if(Ae.removeAttribute(Q),Q==="is")if(qt||un)try{Br(Ae)}catch{}else try{Ae.setAttribute(Q,"")}catch{}},Xc=function(Q){let Ae=null,Be=null;if(Hn)Q="<remove></remove>"+Q;else{const ar=L3(Q,/^[\r\n\t ]+/);Be=ar&&ar[0]}ca==="application/xhtml+xml"&&Ur===Mr&&(Q='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Q+"</body></html>");const Lt=D?D.createHTML(Q):Q;if(Ur===Mr)try{Ae=new y().parseFromString(Lt,ca)}catch{}if(!Ae||!Ae.documentElement){Ae=O.createDocument(Ur,"template",null);try{Ae.documentElement.innerHTML=la?j:Lt}catch{}}const Ar=Ae.body||Ae.documentElement;return Q&&Be&&Ar.insertBefore(r.createTextNode(Be),Ar.childNodes[0]||null),Ur===Mr?B.call(Ae,cr?"html":"body")[0]:cr?Ae.documentElement:Ar},Qc=function(Q){return F.call(Q.ownerDocument||Q,Q,h.SHOW_ELEMENT|h.SHOW_COMMENT|h.SHOW_TEXT|h.SHOW_PROCESSING_INSTRUCTION|h.SHOW_CDATA_SECTION,null)},To=function(Q){return Q instanceof b&&(typeof Q.nodeName!="string"||typeof Q.textContent!="string"||typeof Q.removeChild!="function"||!(Q.attributes instanceof p)||typeof Q.removeAttribute!="function"||typeof Q.setAttribute!="function"||typeof Q.namespaceURI!="string"||typeof Q.insertBefore!="function"||typeof Q.hasChildNodes!="function")},Ls=function(Q){return typeof u=="function"&&Q instanceof u};function Cn($e,Q,Ae){bd($e,Be=>{Be.call(e,Q,Ae,Ea)})}const es=function(Q){let Ae=null;if(Cn($.beforeSanitizeElements,Q,null),To(Q))return Br(Q),!0;const Be=hr(Q.nodeName);if(Cn($.uponSanitizeElement,Q,{tagName:Be,allowedTags:ae}),ur&&Q.hasChildNodes()&&!Ls(Q.firstElementChild)&&Wr(/<[/\w!]/g,Q.innerHTML)&&Wr(/<[/\w!]/g,Q.textContent)||Q.nodeType===Gu.progressingInstruction||ur&&Q.nodeType===Gu.comment&&Wr(/<[/\w]/g,Q.data))return Br(Q),!0;if(!ae[Be]||ce[Be]){if(!ce[Be]&&Ps(Be)&&(W.tagNameCheck instanceof RegExp&&Wr(W.tagNameCheck,Be)||W.tagNameCheck instanceof Function&&W.tagNameCheck(Be)))return!1;if(de&&!De[Be]){const Lt=N(Q)||Q.parentNode,Ar=C(Q)||Q.childNodes;if(Ar&&Lt){const ar=Ar.length;for(let Gr=ar-1;Gr>=0;--Gr){const cn=k(Ar[Gr],!0);cn.__removalCount=(Q.__removalCount||0)+1,Lt.insertBefore(cn,A(Q))}}}return Br(Q),!0}return Q instanceof d&&!Vr(Q)||(Be==="noscript"||Be==="noembed"||Be==="noframes")&&Wr(/<\/no(script|embed|frames)/i,Q.innerHTML)?(Br(Q),!0):(St&&Q.nodeType===Gu.text&&(Ae=Q.textContent,bd([G,le,ie],Lt=>{Ae=Hu(Ae,Lt," ")}),Q.textContent!==Ae&&(qu(e.removed,{element:Q.cloneNode()}),Q.textContent=Ae)),Cn($.afterSanitizeElements,Q,null),!1)},ts=function(Q,Ae,Be){if(Z&&(Ae==="id"||Ae==="name")&&(Be in r||Be in Bl))return!1;if(!(Et&&!Ne[Ae]&&Wr(pe,Ae))){if(!(Ze&&Wr(K,Ae))){if(!be[Ae]||Ne[Ae]){if(!(Ps(Q)&&(W.tagNameCheck instanceof RegExp&&Wr(W.tagNameCheck,Q)||W.tagNameCheck instanceof Function&&W.tagNameCheck(Q))&&(W.attributeNameCheck instanceof RegExp&&Wr(W.attributeNameCheck,Ae)||W.attributeNameCheck instanceof Function&&W.attributeNameCheck(Ae))||Ae==="is"&&W.allowCustomizedBuiltInElements&&(W.tagNameCheck instanceof RegExp&&Wr(W.tagNameCheck,Be)||W.tagNameCheck instanceof Function&&W.tagNameCheck(Be))))return!1}else if(!dr[Ae]){if(!Wr(q,Hu(Be,Ce,""))){if(!((Ae==="src"||Ae==="xlink:href"||Ae==="href")&&Q!=="script"&&jR(Be,"data:")===0&&et[Q])){if(!(wt&&!Wr(ue,Hu(Be,Ce,"")))){if(Be)return!1}}}}}}return!0},Ps=function(Q){return Q!=="annotation-xml"&&L3(Q,ze)},rs=function(Q){Cn($.beforeSanitizeAttributes,Q,null);const{attributes:Ae}=Q;if(!Ae||To(Q))return;const Be={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:be,forceKeepAttr:void 0};let Lt=Ae.length;for(;Lt--;){const Ar=Ae[Lt],{name:ar,namespaceURI:Gr,value:cn}=Ar,Ta=hr(ar),Tn=cn;let vr=ar==="value"?Tn:DR(Tn);if(Be.attrName=Ta,Be.attrValue=vr,Be.keepAttr=!0,Be.forceKeepAttr=void 0,Cn($.uponSanitizeAttribute,Q,Be),vr=Be.attrValue,re&&(Ta==="id"||Ta==="name")&&(Ca(ar,Q),vr=he+vr),ur&&Wr(/((--!?|])>)|<\/(style|title)/i,vr)){Ca(ar,Q);continue}if(Be.forceKeepAttr)continue;if(!Be.keepAttr){Ca(ar,Q);continue}if(!kt&&Wr(/\/>/i,vr)){Ca(ar,Q);continue}St&&bd([G,le,ie],ns=>{vr=Hu(vr,ns," ")});const ql=hr(Q.nodeName);if(!ts(ql,Ta,vr)){Ca(ar,Q);continue}if(D&&typeof x=="object"&&typeof x.getAttributeType=="function"&&!Gr)switch(x.getAttributeType(ql,Ta)){case"TrustedHTML":{vr=D.createHTML(vr);break}case"TrustedScriptURL":{vr=D.createScriptURL(vr);break}}if(vr!==Tn)try{Gr?Q.setAttributeNS(Gr,ar,vr):Q.setAttribute(ar,vr),To(Q)?Br(Q):F3(e.removed)}catch{Ca(ar,Q)}}Cn($.afterSanitizeAttributes,Q,null)},xr=function $e(Q){let Ae=null;const Be=Qc(Q);for(Cn($.beforeSanitizeShadowDOM,Q,null);Ae=Be.nextNode();)Cn($.uponSanitizeShadowNode,Ae,null),es(Ae),rs(Ae),Ae.content instanceof i&&$e(Ae.content);Cn($.afterSanitizeShadowDOM,Q,null)};return e.sanitize=function($e){let Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ae=null,Be=null,Lt=null,Ar=null;if(la=!$e,la&&($e="<!-->"),typeof $e!="string"&&!Ls($e))if(typeof $e.toString=="function"){if($e=$e.toString(),typeof $e!="string")throw Uu("dirty is not a string, aborting")}else throw Uu("toString is not a function");if(!e.isSupported)return $e;if(Sn||$l(Q),e.removed=[],typeof $e=="string"&&(fe=!1),fe){if($e.nodeName){const cn=hr($e.nodeName);if(!ae[cn]||ce[cn])throw Uu("root node is forbidden and cannot be sanitized in-place")}}else if($e instanceof u)Ae=Xc("<!---->"),Be=Ae.ownerDocument.importNode($e,!0),Be.nodeType===Gu.element&&Be.nodeName==="BODY"||Be.nodeName==="HTML"?Ae=Be:Ae.appendChild(Be);else{if(!qt&&!St&&!cr&&$e.indexOf("<")===-1)return D&&Pr?D.createHTML($e):$e;if(Ae=Xc($e),!Ae)return qt?null:Pr?j:""}Ae&&Hn&&Br(Ae.firstChild);const ar=Qc(fe?$e:Ae);for(;Lt=ar.nextNode();)es(Lt),rs(Lt),Lt.content instanceof i&&xr(Lt.content);if(fe)return $e;if(qt){if(un)for(Ar=R.call(Ae.ownerDocument);Ae.firstChild;)Ar.appendChild(Ae.firstChild);else Ar=Ae;return(be.shadowroot||be.shadowrootmode)&&(Ar=V.call(n,Ar,!0)),Ar}let Gr=cr?Ae.outerHTML:Ae.innerHTML;return cr&&ae["!doctype"]&&Ae.ownerDocument&&Ae.ownerDocument.doctype&&Ae.ownerDocument.doctype.name&&Wr(J8,Ae.ownerDocument.doctype.name)&&(Gr="<!DOCTYPE "+Ae.ownerDocument.doctype.name+`>
`+Gr),St&&bd([G,le,ie],cn=>{Gr=Hu(Gr,cn," ")}),D&&Pr?D.createHTML(Gr):Gr},e.setConfig=function(){let $e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};$l($e),Sn=!0},e.clearConfig=function(){Ea=null,Sn=!1},e.isValidAttribute=function($e,Q,Ae){Ea||$l({});const Be=hr($e),Lt=hr(Q);return ts(Be,Lt,Ae)},e.addHook=function($e,Q){typeof Q=="function"&&qu($[$e],Q)},e.removeHook=function($e,Q){if(Q!==void 0){const Ae=NR($[$e],Q);return Ae===-1?void 0:MR($[$e],Ae,1)[0]}return F3($[$e])},e.removeHooks=function($e){$[$e]=[]},e.removeAllHooks=function(){$=H3()},e}var t7=e7();const ZR="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function KR(t){return!t.startsWith("/media/")&&!t.startsWith("/media/")?t:tt.BASE.replace(/\/$/,"")+t}function YR(t,e){return t.replace(/\\includegraphics(?:\[[^\]]*\])?\{\s*([^}]+?)\s*\}/g,(r,n)=>{let a=n.trim();return a.startsWith("@")&&(a=a.substring(1)),/^img_\d+_[a-z0-9]+$/.test(a)?`![](${a})`:(/^(data\/)?bank\/\d+\//i.test(a)&&(a=a.replace(/^(?:data\/)?bank\/(\d+)\//i,"/media/bank/$1/")),e?.baseImageUrl&&!/^https?:\/\//i.test(a)&&!/^(blob:|data:|\/)/i.test(a)&&(a=e.baseImageUrl.replace(/\/media\/(\d+)\//,"/media/bank/$1/").replace(/\/$/,"")+"/"+a.replace(/^\/?/,"")),a.startsWith("/media/")&&(a=KR(a)),`![](${a})`)})}function wi(t,e,r){if(t.includes("")&&(t=t.replace(//g,"'")),t=YR(t,r),e?.length)for(const y of e){const x=new RegExp(y.id,"g");t=t.replace(x,y.blobUrl)}let n=t.replace(/\\\[([\s\S]+?)\\\]/g,(y,x)=>`$$${x}$$`);n=n.replace(/\\u\{([\s\S]+?)\}/g,(y,x)=>`++${x}++`);const a=/```[\s\S]*?```/g,i=[];n=n.replace(a,y=>`@@CODE_BLOCK_${i.push(y)-1}@@`);const l=/((?:^\|.*\|.*\n)+^\|.*\|.*$)/gm,u=[];n=n.replace(l,y=>`@@TABLE_BLOCK_${u.push(y)-1}@@`);const d=/\$\$([\s\S]*?)\$\$|\$([^$\n]*?)\$/g,h=[];n=n.replace(d,y=>`@@MATH_BLOCK_${h.push(y)-1}@@`),n=n.replace(/\\n(?!\\s*(?:[-*+]\\s|\\d+\\.\\s|[a-z]\\.\\s))/g,`

<br>

`),n=n.replace(/@@MATH_BLOCK_(\d+)@@/g,(y,x)=>h[Number(x)]),n=n.replace(/@@CODE_BLOCK_(\d+)@@/g,(y,x)=>i[Number(x)]),n=n.replace(/@@TABLE_BLOCK_(\d+)@@/g,(y,x)=>u[Number(x)]);const p=new _n({html:!0,breaks:!0,linkify:!0}).use(AR);p.enable("table"),n=n.replace(/^(\s*[a-z]\. .+(?:\n\s*[a-z]\. .+)*)/gim,y=>`<ol type="a" class="alpha-list">${y.split(/\n/).filter(k=>k.trim()).map(k=>k.replace(/^\s*[a-z]\.\s*/i,"")).map(k=>`<li>${p.renderInline(k)}</li>`).join("")}</ol>`);let b=p.render(n);return b=b.replace(/<img([^>]+?)src=["']((?:blob:|data:image)[^"']+)["']([^>]*?)>/g,(y,x,_,k)=>`<img${x}src="${ZR}" data-orig="${_}"${k}>`),t7.sanitize(b)}const fl={plus:'<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>',minus:'<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"/></svg>',edit:'<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="m18.5 2.5 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>'};function XR(t,e=!1){if(!t?.length)return"";const r=t.map(n=>{const a=`${n.max_points}\\,\\mathcal{${n.ability_code}}_{${n.level_code}}`,i=wi(n.description_text??"");return`<div class="assessment-item"><span class="assessment-prefix">$${a}$</span> : ${i}</div>`});return e?`<div class="assessment-details expanded">${r.join("")}</div>`:`<details class="assessment-details"><summary>Visa bedmning</summary>${r.join("")}</details>`}function QR(t){return Array.from(new Set(t))}function WR(t){if(!t?.length)return"";const e=["E","C","A"],r=QR(t.map(l=>l.ability_code)),n=new Set;t.forEach(l=>{n.add(`${l.ability_code}|${l.level_code}`)});const a=`<tr><th></th>${e.map(l=>`<th>${l}</th>`).join("")}</tr>`,i=r.map(l=>{const u=e.map(d=>{const h=`${l}|${d}`;return`<td class="${n.has(h)?"filled":"empty"}"></td>`}).join("");return`<tr><td class="ability-label">${l}</td>${u}</tr>`});return`<table class="heatmap-table"><tbody>${a}${i.join("")}</tbody></table>`}function JR(t){const e={is_np:"NP",is_digital:"Digital",is_s:"Original",is_r:"Ln",is_elev:"Formativ",is_fake:"AI",is_whole:"Helhet"},r=[];Object.keys(e).forEach(i=>{t[i]&&r.push(e[i])});const n=t.is_public??!1,a=t.request_publish??!1;return!a&&!n&&r.push("Hemlig"),a&&r.push("Delad"),r.length?`<div class="flags">
    ${r.map(i=>`<span class="flag">${i}</span>`).join(" ")}
  </div>`:""}function eF(t,e,r,n,a=!1){const i=WR(e),l=JR(r),u=n?`<button class="edit-btn" data-problem-id="${t}" title="Redigera">${fl.edit}</button>`:"";return`<div class="card-controls">
    <div class="button-row">
      ${a?`<button class="remove-btn" data-problem-id="${t}" title="Ta bort frn minnet">${fl.minus}</button>`:`<button class="add-btn-1" data-problem-id="${t}" title="Lgg till i Del 1">${fl.plus}</button>
       <button class="add-btn-2" data-problem-id="${t}" title="Lgg till i Del 2">${fl.plus}</button>`}
      ${u}
    </div>
    ${i}
    ${l}
  </div>`}function tF(t,e={}){const r=e.hiddenProblemIds?.has(Number(t.bank_problem_definition_id))??!1,n=t.sub_items?.source_reference,a=n?`<div class="source-reference">frn: ${n}</div>`:"",i=wi(t.prompt_tex,[],{baseImageUrl:`${tt.BASE}/media/bank/${t.bank_problem_definition_id}`}),l=XR(t.assessment_items,e.isEditing??!1),u=eF(t.bank_problem_definition_id,t.assessment_items,t,e.canEdit??!1,e.showRemoveButtons??!1),d=t.owner_id??"",h=t.owner_username??"",p=h?`${h}(@${d})`:d?`@${d}`:"",y=t.is_np||t.is_r?"Inlagd av":"Skapad av",x=p?`${y} ${p}`:"",_=`<div class="card-header"><span class="problem-id">#${t.bank_problem_definition_id}</span>${x?`<span class="problem-id">${x}${a}</span>`:""}</div>`,k=t.points_e??0,S=t.points_c??0,A=t.points_a??0,C=k+S+A>0?`(${k}/${S}/${A})`:"",N=C?`<div class="prompt-points-container">${C}</div>`:"";return r?`
<div class="problem-card-container problem-content problem-hidden" data-problem-id="${t.bank_problem_definition_id}">
  ${_}
  <div class="card-content">
    <div class="prompt-wrapper">
      <div class="prompt-text-container">${i}</div>
      <div class="controls-container">${N}
        <div class="card-controls">
          <div class="button-row">
            <button class="add-btn-1 disabled" data-problem-id="${t.bank_problem_definition_id}" title="Redan i minnet" disabled>${fl.plus}</button>
            <button class="add-btn-2 disabled" data-problem-id="${t.bank_problem_definition_id}" title="Redan i minnet" disabled>${fl.plus}</button>
          </div>
        </div>
      </div>
    </div>
    ${l}
  </div>
</div>
    `:`
<div class="problem-card-container problem-content" data-problem-id="${t.bank_problem_definition_id}">
  ${_}
  <div class="card-content">
    <div class="prompt-wrapper">
      <div class="prompt-text-container">${i}</div>
      <div class="controls-container">${N}${u}</div>
    </div>
    ${l}
  </div>
</div>
  `}function Fh({problem:t,problems:e,mode:r,pendingImages:n=[],onEdit:a,onAddToMemory:i,onRemoveFromMemory:l,showRemoveButtons:u=!1,hiddenProblemIds:d,canEdit:h}){const p=T.useRef(null),b=T.useRef(void 0),{token:y}=Lr(),x=T.useRef(new Map),_=T.useCallback(R=>{const B=[],V=/\\includegraphics(?:\[[^\]]*\])?\{\s*([^}]+?)\s*\}/g;let $;for(;($=V.exec(R))!==null;){let G=$[1].trim();if(G.startsWith("@")&&(G=G.slice(1)),/^img_\d+_[a-z0-9]+$/.test(G))continue;const le=G.match(/^(?:data\/)?bank\/(\d+)\/(.+)$/i);if(le){const[,ie,pe]=le;G=`/media/bank/${ie}/${pe}`}G.startsWith("/media/")?G=tt.BASE.replace(/\/$/,"")+G:!/^https?:/i.test(G)&&!G.startsWith("blob:")&&!G.startsWith("data:")&&(G.startsWith("/")?G=tt.BASE.replace(/\/$/,"")+G:G=`${`${tt.BASE.replace(/\/$/,"")}/media/bank/${t?.bank_problem_definition_id??""}`.replace(/\/$/,"")}/${G}`),B.push(G)}return B},[t?.bank_problem_definition_id]),k=T.useCallback(R=>{const B=wi(R.prompt_tex,n,{baseImageUrl:`${tt.BASE}/media/bank/${R.bank_problem_definition_id}`}),V=R.assessment_items?.filter(K=>K.level_code==="E").reduce((K,ue)=>K+ue.max_points,0)??0,$=R.assessment_items?.filter(K=>K.level_code==="C").reduce((K,ue)=>K+ue.max_points,0)??0,G=R.assessment_items?.filter(K=>K.level_code==="A").reduce((K,ue)=>K+ue.max_points,0)??0,le=V+$+G>0?`(${V}/${$}/${G})`:"",ie=le?`<div class="prompt-points-container">${le}</div>`:"",pe=R.assessment_items?.length?`<div class="assessment-details expanded" style="border: none; background: none; padding: 0; margin: 16px 0 0 0;">
           <hr style="border: none; height: 1px; background: var(--border-secondary); margin: 0 0 16px 0;">
           ${R.assessment_items.map(K=>{const ue=`\\mathcal{${K.max_points}\\,${K.ability_code}}_{${K.level_code}}`,Ce=wi(K.description_text??"");return`<div class="assessment-item">
                       <div class="prefix-container">
                         <span class="prefix-math">$${ue}$</span>
                         <span class="prefix-colon">:</span>
                       </div>
                       <span class="desc">${Ce}</span>
                     </div>`}).join("")}
         </div>`:"";return`
      <div class="problem-card-container problem-content" data-problem-id="${R.bank_problem_definition_id}">
        <div class="card-content">
          <div class="prompt-wrapper">
            <div class="prompt-text-container">${B}</div>
            <div class="controls-container">${ie}</div>
          </div>
          ${pe}
        </div>
      </div>
    `},[]),S=T.useCallback(R=>`
      <div class="problem-list-container">
        ${R.map(V=>V.type==="separator"?`
          <div class="problem-separator">
            <h3 class="separator-title">${V.title}</h3>
          </div>
        `:tF(V,{canEdit:h?h(V):!!a,showRemoveButtons:u,isEditing:!1,hiddenProblemIds:d})).join("")}
      </div>
    `,[a,u,d,h]),A="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",C=T.useCallback((R,B)=>{let V=R;if(n&&n.length&&n.forEach($=>{const G=$.blobUrl.replace(/[.*+?^${}()|[\\]\\]/g,"\\$&"),le=$.id.replace(/[.*+?^${}()|[\\]\\]/g,"\\$&");[G,le].forEach(ie=>{const pe=new RegExp(`(src\\s*=\\s*)(['"]?)${ie}\\2`,"g");V=V.replace(pe,`$1$2${A}$2 data-orig="${$.blobUrl}"`)})}),B){const $=G=>G.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");_(B.prompt_tex).filter(G=>G.startsWith("http")).forEach(G=>{const le=new RegExp(`(src\\s*=\\s*)(["']?)${$(G)}\\2`,"g");V=V.replace(le,`$1$2${A}$2 data-orig="${G}"`)})}else V=V.replace(/(src\s*=\s*)(["'])(https?:[^"']+)\2/gi,($,G,le,ie)=>`${G}${le}${A}${le} data-orig="${ie}"`);return V},[n,_]),N=T.useCallback(()=>r==="preview"&&t?k(t):r==="list"&&e?S(e):"",[r,t,e,k,S]),D=T.useCallback(()=>{if(!p.current)return;const R=p.current,B=`
      <!DOCTYPE html>
      <html>
      <head>
        <meta charset="utf-8">
        <meta http-equiv="Content-Security-Policy" content="default-src 'none'; style-src 'self' 'unsafe-inline' http://localhost:8000 https://dekkkz.github.io; font-src 'self' data: http://localhost:8000 https://dekkkz.github.io; script-src 'self' http://localhost:8000 https://dekkkz.github.io; img-src blob: data: http://localhost:5173 http://localhost:8000 https://83.251.173.209.nip.io; connect-src 'self';">
        <link rel="stylesheet" href="./katex/katex.min.css">
        <link rel="stylesheet" href="./static/problem-iframe.css">
        <script src="./katex/katex.min.js"><\/script>
        <script src="./katex/auto-render.min.js"><\/script>
        <script src="./katex/contrib/mhchem.min.js"><\/script>
        <script src="./static/iframe-init.js"><\/script>
        <style>
          @font-face {
            font-family: 'Latin Modern Roman';
            src: url('./fonts/latin-modern/lmroman10-regular.otf') format('opentype');
            font-weight: 400;
            font-style: normal;
          }
          @font-face {
            font-family: 'Latin Modern Roman';
            src: url('./fonts/latin-modern/lmroman10-italic.otf') format('opentype');
            font-weight: 400;
            font-style: italic;
          }
          @font-face {
            font-family: 'Latin Modern Roman';
            src: url('./fonts/latin-modern/lmroman12-bold.otf') format('opentype');
            font-weight: 700;
            font-style: normal;
          }
          body {
            font-family: 'Latin Modern Roman', 'CMU Serif', serif !important;
          }
        </style>
      </head>
      <body>
        <div id="content"></div>
      </body>
      </html>
    `;R.srcdoc=B},[]),j=T.useCallback((R,B=!1)=>{if(!p.current)return;const $=p.current.contentWindow;$&&$.postMessage({type:"html",payload:R,mode:r,resetScroll:B},"*")},[r]),[O,F]=T.useState(!1);return T.useEffect(()=>{D()},[D]),T.useEffect(()=>{const R=B=>{B.data.type==="iframe-ready"&&F(!0)};return window.addEventListener("message",R),()=>window.removeEventListener("message",R)},[]),T.useEffect(()=>{if(!O)return;(()=>{const B=N(),V=C(B,r==="preview"?t:void 0);let $=!1;if(r==="list"&&e&&e.length){const G=e.find(le=>le&&"bank_problem_definition_id"in le)?.bank_problem_definition_id;b.current!==void 0&&G!==b.current&&($=!0),b.current=G}j(V,$)})()},[N,C,j,O,r,e,t]),T.useEffect(()=>{if(!O||r!=="preview"||!t)return;const B=_(t.prompt_tex).filter(V=>V.startsWith("http")).filter(V=>!x.current.has(V));B.length!==0&&(async()=>{for(const V of B)try{const $=await fetch(V,y?{headers:{Authorization:`Bearer ${y}`}}:void 0);if(!$.ok)continue;const G=await $.blob();x.current.set(V,G),p.current?.contentWindow?.postMessage({type:"img-blob",orig:V,blob:G},"*")}catch{}})()},[O,r,t?.prompt_tex,y,_]),T.useEffect(()=>{if(r!=="list")return;const R=B=>{if(B.data.type==="add-to-memory-1"&&i)i(B.data.problemId,1);else if(B.data.type==="add-to-memory-2"&&i)i(B.data.problemId,2);else if(B.data.type==="remove-from-memory"&&l)l(B.data.problemId,1),l(B.data.problemId,2);else if(B.data.type==="edit"&&a&&e){const V=e.find($=>"bank_problem_definition_id"in $&&$.bank_problem_definition_id===B.data.problemId);V&&"bank_problem_definition_id"in V&&a(V)}};return window.addEventListener("message",R),()=>window.removeEventListener("message",R)},[r,i,l,a,e]),T.useEffect(()=>{if(r!=="list"||!t)return;const R=p.current;if(!R)return;const B=new IntersectionObserver(async([V])=>{if(!V.isIntersecting)return;const $=_(t.prompt_tex);await Promise.all($.map(async G=>{if(!x.current.has(G))try{const le=await fetch(G,{headers:{Authorization:`Bearer ${y}`}});if(!le.ok)throw new Error(le.statusText);const ie=await le.blob();x.current.set(G,ie),R.contentWindow?.postMessage({type:"img-blob",orig:G,blob:ie},"*")}catch(le){console.error("lazy-img error",le)}}))},{rootMargin:"200px"});return B.observe(R),()=>B.disconnect()},[r,t,y,_]),T.useEffect(()=>{const R=async B=>{if(B.data?.type!=="request-img")return;const V=B.data.url;try{if(x.current.has(V)){const le=x.current.get(V);p.current?.contentWindow?.postMessage({type:"img-blob",orig:V,blob:le},"*");return}const $=await fetch(V,y?{headers:{Authorization:`Bearer ${y}`}}:void 0);if(!$.ok)throw new Error($.statusText);const G=await $.blob();x.current.set(V,G),p.current?.contentWindow?.postMessage({type:"img-blob",orig:V,blob:G},"*")}catch($){console.error("request-img fetch error",$)}};return window.addEventListener("message",R),()=>window.removeEventListener("message",R)},[y]),T.useEffect(()=>{if(!O||!n?.length)return;const R=p.current;R&&n.forEach(B=>{x.current.has(B.blobUrl)||(x.current.set(B.blobUrl,B.file),R.contentWindow?.postMessage({type:"img-blob",orig:B.blobUrl,blob:B.file},"*"))})},[O,n]),T.useEffect(()=>()=>{p.current?.contentWindow?.postMessage({type:"clear-blobs"},"*")},[]),m.jsx("iframe",{ref:p,className:"preview-iframe",style:{width:"100%",height:"100%",minHeight:"400px",maxWidth:"100%",border:"none",outline:"none",backgroundColor:"transparent",boxShadow:"none",overflow:"auto"},sandbox:"allow-scripts",title:"Problem preview"})}const r7=t=>lr({queryKey:["subject-abilities-by-id",t],queryFn:async()=>{if(!t)throw new Error("No subject ID provided");try{const e=await DD.listAbilitiesAbilitiesGet(t);if(e&&e.length)return e.map(r=>({ability_code:r.code,ability_name:r.name,description:r.description||"",subject_id:t}))}catch(e){console.warn("abilities endpoint error:",e)}try{return(await po.getSubjectCompleteApiHierarchySubjectsSubjectIdCompleteGet(t)).abilities||[]}catch(e){return console.warn("hierarchy fallback also failed:",e),[]}},enabled:!!t,retry:!1,staleTime:1/0}),rF=r7;function oc(t,e){const{isAuthenticated:r}=Lr(),{data:n,isLoading:a,error:i}=lr({queryKey:["hierarchy","parents",t,e],enabled:!!e&&!!r,staleTime:10*60*1e3,queryFn:async()=>{if(!e)throw new Error("ID is required for parent lookup");const l=await po.getParentsApiHierarchyParentsTypeIdGet(t,e);return{subject_id:l.subject_id??null,course_id:l.course_id??null,chapter_id:l.chapter_id??null,area_id:l.area_id??null}}});return{parentPath:n,loading:a,error:i}}const nF=({hierarchyFilter:t,onFilterChange:e})=>{const[r,n]=T.useState(""),[a,i]=T.useState(null),[l,u]=T.useState([]),[d,h]=T.useState({}),[p,b]=T.useState(!1),[y,x]=T.useState(""),[_,k]=T.useState({abilities:!1,flags:!1,exclude:!1}),[S,A]=T.useState(!1),[C,N]=T.useState(!1),D=t.area_ids?.[0],j=t.chapter_ids?.[0],O=t.course_ids?.[0],F=t.subject_ids?.[0],{parentPath:R}=oc("area",D||null),{parentPath:B}=oc("chapter",j||null),{parentPath:V}=oc("course",O||null),$=F||R?.subject_id||B?.subject_id||V?.subject_id||null,{data:G}=rF($),le=G?.map(Se=>Se.ability_code)||[];T.useEffect(()=>{const Se=y?y.split(",").map(ce=>parseInt(ce.trim())).filter(ce=>!isNaN(ce)):[],W={...t,search:r||void 0,max_level:a,abilities:l.length>0?l:void 0,flags_allowed:Object.keys(d).length>0?d:void 0,own_only:p?!0:void 0,exclude_ids:Se.length>0?Se:void 0};e(W)},[r,a,l,d,p,y,t,e]);const ie=T.useCallback(Se=>{n(Se)},[]),pe=T.useCallback(Se=>{i(Se)},[]),K=T.useCallback(Se=>{u(Se)},[]),ue=T.useCallback(Se=>{h(Se)},[]),Ce=T.useCallback(()=>{b(Se=>!Se)},[]),ze=T.useCallback(Se=>{x(Se)},[]),q=T.useCallback(()=>{n(""),i(null),u([]),h({}),b(!1),x("")},[]),ae=T.useCallback(Se=>{k(W=>({...W,[Se]:!W[Se]}))},[]),we=T.useCallback(()=>{A(Se=>!Se)},[]),be=T.useCallback(()=>{N(Se=>!Se)},[]);return{search:r,level:a,abilities:l,flags:d,ownOnly:p,excludeIdsText:y,openTabs:_,levelFilterOpen:S,excludeFilterOpen:C,availableAbilities:le,subjectId:$,handleSearchChange:ie,handleLevelChange:pe,handleAbilitiesChange:K,handleFlagsChange:ue,handleOwnOnlyToggle:Ce,handleExcludeIdsChange:ze,handleReset:q,toggleTab:ae,toggleLevelFilter:we,toggleExcludeFilter:be}},aF=({hierarchyFilter:t,onGreedyResult:e})=>{const[r,n]=T.useState({}),[a,i]=T.useState([]),l=T.useMemo(()=>({...t,...r,exclude_ids:[...t.exclude_ids||[],...r.exclude_ids||[],...a].length>0?[...t.exclude_ids||[],...r.exclude_ids||[],...a]:void 0}),[t,r,a]),u=T.useCallback(p=>{n(p)},[]),d=T.useCallback(p=>{i(b=>[...b,...p]),e?.(p)},[e]),h=T.useCallback(()=>{i([])},[]);return{hierarchyFilter:t,problemFilter:r,fullFilter:l,greedyExclusions:a,handleGreedyResult:d,resetGreedyExclusions:h,handleProblemFilterChange:u}},sF=({subjectId:t,fullFilter:e,excludeIds:r,greedyExclusions:n=[],memory:a,onGreedyResult:i})=>{const[l,u]=T.useState(!1),d=Gt();return{handleGreedy:async()=>{if(!t){alert("Vlj ett mne (subject) frst.");return}u(!0);try{async function p(){const A={...e},C=100;let N=1,D=[];for(;;)try{const j=await st("/v1/problems/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...A,page:N,page_size:C})},d??void 0);if(!j.ok)throw new Error("Kunde inte hmta problem");const O=await j.json();if(D=D.concat(O.problem_ids),O.problem_ids.length<C||D.length>=1e3)break;N+=1}catch(j){console.error(j);break}return D.slice(0,1e3)}const b=await p();if(!b.length){alert("Inga problem matchar nuvarande filter.");return}const x=[...Array.from(r||[]),...n],_={subject_id:t,problem_ids:b.slice(0,1e3),temp_test:[...a?.part1Ids||[],...a?.part2Ids||[]],exclude_ids:x.length>0?x:void 0,max_suggestions:4},k=await st("/v1/suggestions/greedy",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(_)},d??void 0);if(!k.ok){const A=await k.json().catch(()=>({detail:k.statusText}));throw new Error(A.detail??k.statusText)}const S=await k.json();i?i(S.suggested_ids):alert(`Greedy freslog ${S.suggested_ids.length} problem
`+S.suggested_ids.join(", "))}catch(p){console.error(p),alert("Greedy-frslag misslyckades")}finally{u(!1)}},isLoading:l}},iF=({value:t,onChange:e})=>m.jsx("div",{className:"flex-1 min-w-[120px]",children:m.jsxs("div",{className:"relative",children:[m.jsx(fj,{size:14,className:"absolute left-2 top-1/2 transform -translate-y-1/2",style:{color:"var(--text-muted)"}}),m.jsx("input",{type:"text",className:"w-full pl-8 pr-2 py-1 text-sm rounded border",style:{fontFamily:"Roboto, sans-serif",fontSize:"12px",backgroundColor:"var(--bg-panel)",color:"var(--text-primary)",borderColor:"var(--border-primary)",borderStyle:"solid",borderWidth:"1px"},placeholder:"Sk i uppgiftstext",value:t,onChange:r=>e(r.target.value)})]})}),oF=[{label:"Niv",value:null},{label:"E",value:"E"},{label:"C",value:"C"},{label:"A",value:"A"}],lF=({value:t,onChange:e,isOpen:r,onToggle:n})=>{const a=T.useRef(null);return T.useEffect(()=>{const i=l=>{r&&a.current&&!a.current.contains(l.target)&&n()};return r&&document.addEventListener("mousedown",i),()=>{document.removeEventListener("mousedown",i)}},[r,n]),m.jsxs("div",{className:"relative",ref:a,children:[m.jsxs("button",{className:"text-sm flex items-center gap-1 px-2 py-1 rounded border",style:{fontFamily:"Roboto, sans-serif",fontSize:"12px",color:"var(--text-secondary)",backgroundColor:r?"var(--bg-secondary)":"transparent",borderColor:"var(--border-primary)",borderStyle:"solid",borderWidth:"1px"},onClick:n,title:"Niv",children:[t||"Niv",m.jsx(ko,{size:14})]}),r&&m.jsx("div",{className:"absolute top-full left-0 mt-1 z-50 rounded-lg border shadow-lg",style:{backgroundColor:"var(--bg-panel)",borderColor:"var(--border-primary)",borderStyle:"solid",borderWidth:"1px",boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",minWidth:"50px"},children:m.jsx("div",{className:"p-3",children:m.jsx("div",{className:"flex flex-col gap-1",children:oF.map(i=>m.jsx("button",{className:"px-3 py-2 rounded text-sm border cursor-pointer transition-all duration-200 hover:bg-accent-primary/10",style:{fontFamily:"Roboto, sans-serif",fontSize:"12px",backgroundColor:t===i.value?"var(--accent-primary)":"transparent",color:t===i.value?"var(--button-text)":"var(--text-primary)",borderColor:t===i.value?"var(--accent-primary)":"var(--border-primary)",borderStyle:"solid",borderWidth:"1px",textAlign:"center"},onClick:()=>{e(i.value),n()},children:i.label},i.label))})})})]})},uF=({abilities:t,availableAbilities:e,onChange:r,isOpen:n,onToggle:a})=>{const i=T.useRef(null);T.useEffect(()=>{const u=d=>{n&&i.current&&!i.current.contains(d.target)&&a()};return n&&document.addEventListener("mousedown",u),()=>{document.removeEventListener("mousedown",u)}},[n,a]);const l=u=>{const h=t.includes(u)?t.filter(p=>p!==u):[...t,u];r(h)};return m.jsxs("div",{className:"relative",ref:i,children:[m.jsx("button",{className:"text-sm flex items-center gap-1 px-2 py-1 rounded border",style:{fontFamily:"Roboto, sans-serif",fontSize:"12px",color:"var(--text-secondary)",backgroundColor:n?"var(--bg-secondary)":"transparent",borderColor:"var(--border-primary)",borderStyle:"solid",borderWidth:"1px"},onClick:a,title:"Frmgor",children:m.jsx(k2,{size:14})}),n&&m.jsx("div",{className:"absolute top-full left-0 mt-1 z-50 rounded-lg border shadow-lg",style:{backgroundColor:"var(--bg-panel)",borderColor:"var(--border-primary)",borderStyle:"solid",borderWidth:"1px",boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",minWidth:"210px"},children:m.jsx("div",{className:"p-3",children:m.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.map(u=>m.jsx("button",{className:"px-2 py-1 rounded text-sm border cursor-pointer flex items-center gap-1.5 transition-all duration-200 hover:scale-105 active:scale-95",style:{fontFamily:"Roboto, sans-serif",fontSize:"12px",backgroundColor:t.includes(u)?"var(--accent-primary)":"var(--bg-panel)",color:t.includes(u)?"var(--button-text)":"var(--text-primary)",borderColor:t.includes(u)?"var(--accent-primary)":"var(--border-primary)",borderStyle:"solid",borderWidth:"1px"},onClick:()=>l(u),title:`Frmga: ${u}`,children:m.jsx("span",{className:"font-mono",children:u})},u)),e.length===0&&m.jsx("span",{className:"text-sm",style:{color:"var(--text-muted)"},children:"Inga frmgor tillgngliga fr valt mne"})]})})})]})},cF={is_digital:m.jsx(u8,{size:12}),is_np:m.jsx(xc,{size:12}),is_s:m.jsx(vl,{size:12}),is_r:m.jsx(Lc,{size:12}),is_fake:m.jsx(a8,{size:12}),is_elev:m.jsx(o8,{size:12}),is_whole:m.jsx(k2,{size:12}),request_publish:m.jsx(_l,{size:12})},dF=[{key:"is_s",label:"Original"},{key:"is_np",label:"NP"},{key:"is_r",label:"Ln"},{key:"is_fake",label:"AI"},{key:"is_digital",label:"Digital"},{key:"is_elev",label:"Formativ"},{key:"is_whole",label:"Helhet"},{key:"request_publish",label:"Delad"}],hF=({flags:t,onChange:e,isOpen:r,onToggle:n})=>{const a=T.useRef(null);T.useEffect(()=>{const l=u=>{r&&a.current&&!a.current.contains(u.target)&&n()};return r&&document.addEventListener("mousedown",l),()=>{document.removeEventListener("mousedown",l)}},[r,n]);const i=l=>{const u=t[l],d={...t};u===void 0?d[l]=!0:u===!0?d[l]=!1:delete d[l],e(d)};return m.jsxs("div",{className:"relative",ref:a,children:[m.jsx("button",{className:"text-sm flex items-center gap-1 px-2 py-1 rounded border",style:{fontFamily:"Roboto, sans-serif",fontSize:"12px",color:"var(--text-secondary)",backgroundColor:r?"var(--bg-secondary)":"transparent",borderColor:"var(--border-primary)",borderStyle:"solid",borderWidth:"1px"},onClick:n,title:"Flaggor",children:m.jsx(_2,{size:14})}),r&&m.jsx("div",{className:"absolute top-full left-0 mt-1 z-50 rounded-lg border shadow-lg",style:{backgroundColor:"var(--bg-panel)",borderColor:"var(--border-primary)",borderStyle:"solid",borderWidth:"1px",boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",minWidth:"250px",maxHeight:"300px",overflowY:"auto"},children:m.jsx("div",{className:"p-3",children:m.jsx("div",{className:"flex flex-wrap gap-1",children:dF.map(l=>{const u=t[l.key],d=u===!0,h=u===!1;return m.jsxs("button",{className:"px-2 py-1 rounded text-sm border cursor-pointer flex items-center gap-1.5 transition-all duration-200 hover:scale-105 active:scale-95",style:{fontFamily:"Roboto, sans-serif",fontSize:"12px",backgroundColor:d?"var(--accent-primary)":h?"var(--bg-secondary)":"var(--bg-panel)",color:d?"var(--button-text)":h?"var(--text-muted)":"var(--text-primary)",borderColor:d?"var(--accent-primary)":h?"var(--text-muted)":"var(--border-primary)",borderStyle:"solid",borderWidth:"1px",opacity:h?.6:1,textDecoration:h?"line-through":"none"},onClick:()=>i(l.key),title:`${l.key}: ${l.label}${d?" (krvs)":h?" (exkluderad)":" (neutral)"}`,children:[cF[l.key],m.jsx("span",{className:"font-mono",children:l.label})]},l.key)})})})})]})},fF=({value:t,onChange:e,isOpen:r,onToggle:n})=>{const a=T.useRef(null);return T.useEffect(()=>{const i=l=>{r&&a.current&&!a.current.contains(l.target)&&n()};return r&&document.addEventListener("mousedown",i),()=>{document.removeEventListener("mousedown",i)}},[r,n]),m.jsxs("div",{className:"relative",ref:a,children:[m.jsx("button",{className:"text-sm flex items-center gap-1 px-2 py-1 rounded border",style:{fontFamily:"Roboto, sans-serif",fontSize:"12px",color:"var(--text-secondary)",backgroundColor:r?"var(--bg-secondary)":"transparent",borderColor:"var(--border-primary)",borderStyle:"solid",borderWidth:"1px"},onClick:n,title:"Exkludera problem-ID:n",children:m.jsx(BN,{size:14})}),r&&m.jsx("div",{className:"absolute top-full left-0 mt-1 z-50 rounded-lg border shadow-lg",style:{backgroundColor:"var(--bg-panel)",borderColor:"var(--border-primary)",borderStyle:"solid",borderWidth:"1px",boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",minWidth:"250px"},children:m.jsxs("div",{className:"p-3",children:[m.jsx("div",{className:"text-sm font-medium mb-2",style:{color:"var(--text-primary)"},children:"Exkludera problem-ID:n"}),m.jsx("input",{type:"text",className:"w-full px-2 py-1 rounded text-sm border font-mono",style:{fontSize:"12px",backgroundColor:"var(--bg-panel)",color:"var(--text-primary)",borderColor:"var(--border-primary)",borderStyle:"solid",borderWidth:"1px"},placeholder:"201, 211, 25, 37",value:t,onChange:i=>e(i.target.value)}),m.jsx("div",{className:"text-xs mt-1",style:{color:"var(--text-muted)"},children:"Ange problem-ID:n separerade med komma som ska exkluderas"})]})})]})},mF=({onTrigger:t,disabled:e=!1})=>m.jsxs("button",{className:"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs font-medium transition-all duration-200 hover:scale-105 active:scale-95",style:{fontFamily:"Roboto, sans-serif",fontSize:"12px",backgroundColor:"var(--accent-primary)",color:"var(--button-text)",borderColor:"var(--accent-primary)",borderStyle:"solid",borderWidth:"1px",opacity:e?.5:1,cursor:e?"not-allowed":"pointer",transformOrigin:"center"},onClick:t,disabled:e,title:"Greedy-frslag",children:[m.jsx(s8,{size:14}),m.jsx("span",{className:"font-mono text-xs leading-none",style:{fontFamily:"Roboto Mono, monospace"},children:"GREEDY"})]}),pF=({hierarchyFilter:t,onFilterChange:e,onGreedyResult:r,greedyExclusions:n,memory:a})=>{const{search:i,level:l,abilities:u,flags:d,ownOnly:h,excludeIdsText:p,openTabs:b,levelFilterOpen:y,excludeFilterOpen:x,availableAbilities:_,subjectId:k,handleSearchChange:S,handleLevelChange:A,handleAbilitiesChange:C,handleFlagsChange:N,handleOwnOnlyToggle:D,handleExcludeIdsChange:j,handleReset:O,toggleTab:F,toggleLevelFilter:R,toggleExcludeFilter:B}=nF({hierarchyFilter:t,onFilterChange:e}),{handleGreedy:V,isLoading:$}=sF({subjectId:k,fullFilter:{...t,search:i,max_level:l,abilities:u,flags_allowed:Object.keys(d).length>0?Object.fromEntries(Object.entries(d).filter(([,G])=>G!==void 0)):void 0,own_only:h,exclude_ids:p?p.split(",").map(G=>parseInt(G.trim())).filter(G=>!isNaN(G)):void 0},excludeIds:new Set(p?p.split(",").map(G=>parseInt(G.trim())).filter(G=>!isNaN(G)):[]),greedyExclusions:n,memory:a,onGreedyResult:r});return m.jsx("div",{className:"w-full",children:m.jsxs("div",{className:"flex justify-between items-center gap-3 flex-wrap",children:[m.jsx(iF,{value:i,onChange:S}),m.jsx(lF,{value:l,onChange:A,isOpen:y,onToggle:R}),m.jsxs("div",{className:"flex gap-1 items-center flex-wrap",children:[m.jsx("button",{className:"px-2 py-1 rounded text-sm border flex items-center gap-1",style:{fontFamily:"Roboto, sans-serif",fontSize:"12px",backgroundColor:h?"var(--accent-primary)":"var(--bg-secondary)",color:h?"var(--button-text)":"var(--text-primary)",borderColor:"var(--border-primary)",borderStyle:"solid",borderWidth:"1px"},onClick:D,title:"Visa endast mina problem",children:m.jsx(kl,{size:14})}),m.jsx(mF,{onTrigger:V,disabled:!k||$}),m.jsx("button",{className:"px-2 py-1 rounded text-sm border flex items-center gap-1",style:{fontFamily:"Roboto, sans-serif",fontSize:"12px",backgroundColor:"var(--bg-secondary)",color:"var(--text-primary)",borderColor:"var(--border-primary)",borderStyle:"solid",borderWidth:"1px"},onClick:O,title:"terstll filter",children:m.jsx(cj,{size:14})})]}),m.jsxs("div",{className:"flex gap-1 items-center",children:[m.jsx(uF,{abilities:u,availableAbilities:_,onChange:C,isOpen:b.abilities,onToggle:()=>F("abilities")}),m.jsx(hF,{flags:d,onChange:N,isOpen:b.flags,onToggle:()=>F("flags")}),m.jsx(fF,{value:p,onChange:j,isOpen:x,onToggle:B})]})]})})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Hc(t){return t+.5|0}const bi=(t,e,r)=>Math.max(Math.min(t,r),e);function ec(t){return bi(Hc(t*2.55),0,255)}function ki(t){return bi(Hc(t*255),0,255)}function Ss(t){return bi(Hc(t/2.55)/100,0,1)}function U3(t){return bi(Hc(t*100),0,100)}const Jn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Rp=[..."0123456789ABCDEF"],gF=t=>Rp[t&15],bF=t=>Rp[(t&240)>>4]+Rp[t&15],xd=t=>(t&240)>>4===(t&15),yF=t=>xd(t.r)&&xd(t.g)&&xd(t.b)&&xd(t.a);function xF(t){var e=t.length,r;return t[0]==="#"&&(e===4||e===5?r={r:255&Jn[t[1]]*17,g:255&Jn[t[2]]*17,b:255&Jn[t[3]]*17,a:e===5?Jn[t[4]]*17:255}:(e===7||e===9)&&(r={r:Jn[t[1]]<<4|Jn[t[2]],g:Jn[t[3]]<<4|Jn[t[4]],b:Jn[t[5]]<<4|Jn[t[6]],a:e===9?Jn[t[7]]<<4|Jn[t[8]]:255})),r}const vF=(t,e)=>t<255?e(t):"";function _F(t){var e=yF(t)?gF:bF;return t?"#"+e(t.r)+e(t.g)+e(t.b)+vF(t.a,e):void 0}const wF=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function n7(t,e,r){const n=e*Math.min(r,1-r),a=(i,l=(i+t/30)%12)=>r-n*Math.max(Math.min(l-3,9-l,1),-1);return[a(0),a(8),a(4)]}function kF(t,e,r){const n=(a,i=(a+t/60)%6)=>r-r*e*Math.max(Math.min(i,4-i,1),0);return[n(5),n(3),n(1)]}function SF(t,e,r){const n=n7(t,1,.5);let a;for(e+r>1&&(a=1/(e+r),e*=a,r*=a),a=0;a<3;a++)n[a]*=1-e-r,n[a]+=e;return n}function AF(t,e,r,n,a){return t===a?(e-r)/n+(e<r?6:0):e===a?(r-t)/n+2:(t-e)/n+4}function $2(t){const r=t.r/255,n=t.g/255,a=t.b/255,i=Math.max(r,n,a),l=Math.min(r,n,a),u=(i+l)/2;let d,h,p;return i!==l&&(p=i-l,h=u>.5?p/(2-i-l):p/(i+l),d=AF(r,n,a,p,i),d=d*60+.5),[d|0,h||0,u]}function q2(t,e,r,n){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,r,n)).map(ki)}function H2(t,e,r){return q2(n7,t,e,r)}function EF(t,e,r){return q2(SF,t,e,r)}function CF(t,e,r){return q2(kF,t,e,r)}function a7(t){return(t%360+360)%360}function TF(t){const e=wF.exec(t);let r=255,n;if(!e)return;e[5]!==n&&(r=e[6]?ec(+e[5]):ki(+e[5]));const a=a7(+e[2]),i=+e[3]/100,l=+e[4]/100;return e[1]==="hwb"?n=EF(a,i,l):e[1]==="hsv"?n=CF(a,i,l):n=H2(a,i,l),{r:n[0],g:n[1],b:n[2],a:r}}function NF(t,e){var r=$2(t);r[0]=a7(r[0]+e),r=H2(r),t.r=r[0],t.g=r[1],t.b=r[2]}function MF(t){if(!t)return;const e=$2(t),r=e[0],n=U3(e[1]),a=U3(e[2]);return t.a<255?`hsla(${r}, ${n}%, ${a}%, ${Ss(t.a)})`:`hsl(${r}, ${n}%, ${a}%)`}const V3={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},G3={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function jF(){const t={},e=Object.keys(G3),r=Object.keys(V3);let n,a,i,l,u;for(n=0;n<e.length;n++){for(l=u=e[n],a=0;a<r.length;a++)i=r[a],u=u.replace(i,V3[i]);i=parseInt(G3[l],16),t[u]=[i>>16&255,i>>8&255,i&255]}return t}let vd;function DF(t){vd||(vd=jF(),vd.transparent=[0,0,0,0]);const e=vd[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const zF=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function OF(t){const e=zF.exec(t);let r=255,n,a,i;if(e){if(e[7]!==n){const l=+e[7];r=e[8]?ec(l):bi(l*255,0,255)}return n=+e[1],a=+e[3],i=+e[5],n=255&(e[2]?ec(n):bi(n,0,255)),a=255&(e[4]?ec(a):bi(a,0,255)),i=255&(e[6]?ec(i):bi(i,0,255)),{r:n,g:a,b:i,a:r}}}function RF(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Ss(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Rm=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,cl=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function FF(t,e,r){const n=cl(Ss(t.r)),a=cl(Ss(t.g)),i=cl(Ss(t.b));return{r:ki(Rm(n+r*(cl(Ss(e.r))-n))),g:ki(Rm(a+r*(cl(Ss(e.g))-a))),b:ki(Rm(i+r*(cl(Ss(e.b))-i))),a:t.a+r*(e.a-t.a)}}function _d(t,e,r){if(t){let n=$2(t);n[e]=Math.max(0,Math.min(n[e]+n[e]*r,e===0?360:1)),n=H2(n),t.r=n[0],t.g=n[1],t.b=n[2]}}function s7(t,e){return t&&Object.assign(e||{},t)}function Z3(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=ki(t[3]))):(e=s7(t,{r:0,g:0,b:0,a:1}),e.a=ki(e.a)),e}function LF(t){return t.charAt(0)==="r"?OF(t):TF(t)}class Sc{constructor(e){if(e instanceof Sc)return e;const r=typeof e;let n;r==="object"?n=Z3(e):r==="string"&&(n=xF(e)||DF(e)||LF(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=s7(this._rgb);return e&&(e.a=Ss(e.a)),e}set rgb(e){this._rgb=Z3(e)}rgbString(){return this._valid?RF(this._rgb):void 0}hexString(){return this._valid?_F(this._rgb):void 0}hslString(){return this._valid?MF(this._rgb):void 0}mix(e,r){if(e){const n=this.rgb,a=e.rgb;let i;const l=r===i?.5:r,u=2*l-1,d=n.a-a.a,h=((u*d===-1?u:(u+d)/(1+u*d))+1)/2;i=1-h,n.r=255&h*n.r+i*a.r+.5,n.g=255&h*n.g+i*a.g+.5,n.b=255&h*n.b+i*a.b+.5,n.a=l*n.a+(1-l)*a.a,this.rgb=n}return this}interpolate(e,r){return e&&(this._rgb=FF(this._rgb,e._rgb,r)),this}clone(){return new Sc(this.rgb)}alpha(e){return this._rgb.a=ki(e),this}clearer(e){const r=this._rgb;return r.a*=1-e,this}greyscale(){const e=this._rgb,r=Hc(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=r,this}opaquer(e){const r=this._rgb;return r.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return _d(this._rgb,2,e),this}darken(e){return _d(this._rgb,2,-e),this}saturate(e){return _d(this._rgb,1,e),this}desaturate(e){return _d(this._rgb,1,-e),this}rotate(e){return NF(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function xs(){}const PF=(()=>{let t=0;return()=>t++})();function At(t){return t==null}function Fr(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function yt(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function sa(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Oa(t,e){return sa(t)?t:e}function ht(t,e){return typeof t>"u"?e:t}const BF=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Ht(t,e,r){if(t&&typeof t.call=="function")return t.apply(r,e)}function Mt(t,e,r,n){let a,i,l;if(Fr(t))for(i=t.length,a=0;a<i;a++)e.call(r,t[a],a);else if(yt(t))for(l=Object.keys(t),i=l.length,a=0;a<i;a++)e.call(r,t[l[a]],l[a])}function hh(t,e){let r,n,a,i;if(!t||!e||t.length!==e.length)return!1;for(r=0,n=t.length;r<n;++r)if(a=t[r],i=e[r],a.datasetIndex!==i.datasetIndex||a.index!==i.index)return!1;return!0}function fh(t){if(Fr(t))return t.map(fh);if(yt(t)){const e=Object.create(null),r=Object.keys(t),n=r.length;let a=0;for(;a<n;++a)e[r[a]]=fh(t[r[a]]);return e}return t}function i7(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function IF(t,e,r,n){if(!i7(t))return;const a=e[t],i=r[t];yt(a)&&yt(i)?Ac(a,i,n):e[t]=fh(i)}function Ac(t,e,r){const n=Fr(e)?e:[e],a=n.length;if(!yt(t))return t;r=r||{};const i=r.merger||IF;let l;for(let u=0;u<a;++u){if(l=n[u],!yt(l))continue;const d=Object.keys(l);for(let h=0,p=d.length;h<p;++h)i(d[h],t,l,r)}return t}function lc(t,e){return Ac(t,e,{merger:$F})}function $F(t,e,r){if(!i7(t))return;const n=e[t],a=r[t];yt(n)&&yt(a)?lc(n,a):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=fh(a))}const K3={"":t=>t,x:t=>t.x,y:t=>t.y};function qF(t){const e=t.split("."),r=[];let n="";for(const a of e)n+=a,n.endsWith("\\")?n=n.slice(0,-1)+".":(r.push(n),n="");return r}function HF(t){const e=qF(t);return r=>{for(const n of e){if(n==="")break;r=r&&r[n]}return r}}function El(t,e){return(K3[e]||(K3[e]=HF(e)))(t)}function U2(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Ec=t=>typeof t<"u",Ti=t=>typeof t=="function",Y3=(t,e)=>{if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0};function UF(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Xr=Math.PI,Va=2*Xr,VF=Va+Xr,mh=Number.POSITIVE_INFINITY,GF=Xr/180,ya=Xr/2,Qi=Xr/4,X3=Xr*2/3,o7=Math.log10,Ga=Math.sign;function uc(t,e,r){return Math.abs(t-e)<r}function Q3(t){const e=Math.round(t);t=uc(t,e,t/1e3)?e:t;const r=Math.pow(10,Math.floor(o7(t))),n=t/r;return(n<=1?1:n<=2?2:n<=5?5:10)*r}function ZF(t){const e=[],r=Math.sqrt(t);let n;for(n=1;n<r;n++)t%n===0&&(e.push(n),e.push(t/n));return r===(r|0)&&e.push(r),e.sort((a,i)=>a-i).pop(),e}function KF(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Cc(t){return!KF(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function YF(t,e){const r=Math.round(t);return r-e<=t&&r+e>=t}function XF(t,e,r){let n,a,i;for(n=0,a=t.length;n<a;n++)i=t[n][r],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function lo(t){return t*(Xr/180)}function QF(t){return t*(180/Xr)}function W3(t){if(!sa(t))return;let e=1,r=0;for(;Math.round(t*e)/e!==t;)e*=10,r++;return r}function WF(t,e){const r=e.x-t.x,n=e.y-t.y,a=Math.sqrt(r*r+n*n);let i=Math.atan2(n,r);return i<-.5*Xr&&(i+=Va),{angle:i,distance:a}}function Fp(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function JF(t,e){return(t-e+VF)%Va-Xr}function di(t){return(t%Va+Va)%Va}function l7(t,e,r,n){const a=di(t),i=di(e),l=di(r),u=di(i-a),d=di(l-a),h=di(a-i),p=di(a-l);return a===i||a===l||n&&i===l||u>d&&h<p}function Bn(t,e,r){return Math.max(e,Math.min(r,t))}function eL(t){return Bn(t,-32768,32767)}function uo(t,e,r,n=1e-6){return t>=Math.min(e,r)-n&&t<=Math.max(e,r)+n}function V2(t,e,r){r=r||(l=>t[l]<e);let n=t.length-1,a=0,i;for(;n-a>1;)i=a+n>>1,r(i)?a=i:n=i;return{lo:a,hi:n}}const co=(t,e,r,n)=>V2(t,r,n?a=>{const i=t[a][e];return i<r||i===r&&t[a+1][e]===r}:a=>t[a][e]<r),tL=(t,e,r)=>V2(t,r,n=>t[n][e]>=r);function rL(t,e,r){let n=0,a=t.length;for(;n<a&&t[n]<e;)n++;for(;a>n&&t[a-1]>r;)a--;return n>0||a<t.length?t.slice(n,a):t}const u7=["push","pop","shift","splice","unshift"];function nL(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),u7.forEach(r=>{const n="_onData"+U2(r),a=t[r];Object.defineProperty(t,r,{configurable:!0,enumerable:!1,value(...i){const l=a.apply(this,i);return t._chartjs.listeners.forEach(u=>{typeof u[n]=="function"&&u[n](...i)}),l}})})}function J3(t,e){const r=t._chartjs;if(!r)return;const n=r.listeners,a=n.indexOf(e);a!==-1&&n.splice(a,1),!(n.length>0)&&(u7.forEach(i=>{delete t[i]}),delete t._chartjs)}function c7(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const d7=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function h7(t,e){let r=[],n=!1;return function(...a){r=a,n||(n=!0,d7.call(window,()=>{n=!1,t.apply(e,r)}))}}function aL(t,e){let r;return function(...n){return e?(clearTimeout(r),r=setTimeout(t,e,n)):t.apply(this,n),e}}const f7=t=>t==="start"?"left":t==="end"?"right":"center",Fn=(t,e,r)=>t==="start"?e:t==="end"?r:(e+r)/2,sL=(t,e,r,n)=>t===(n?"left":"right")?r:t==="center"?(e+r)/2:e;function iL(t,e,r){const n=e.length;let a=0,i=n;if(t._sorted){const{iScale:l,vScale:u,_parsed:d}=t,h=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,p=l.axis,{min:b,max:y,minDefined:x,maxDefined:_}=l.getUserBounds();if(x){if(a=Math.min(co(d,p,b).lo,r?n:co(e,p,l.getPixelForValue(b)).lo),h){const k=d.slice(0,a+1).reverse().findIndex(S=>!At(S[u.axis]));a-=Math.max(0,k)}a=Bn(a,0,n-1)}if(_){let k=Math.max(co(d,l.axis,y,!0).hi+1,r?0:co(e,p,l.getPixelForValue(y),!0).hi+1);if(h){const S=d.slice(k-1).findIndex(A=>!At(A[u.axis]));k+=Math.max(0,S)}i=Bn(k,a,n)-a}else i=n-a}return{start:a,count:i}}function oL(t){const{xScale:e,yScale:r,_scaleRanges:n}=t,a={xmin:e.min,xmax:e.max,ymin:r.min,ymax:r.max};if(!n)return t._scaleRanges=a,!0;const i=n.xmin!==e.min||n.xmax!==e.max||n.ymin!==r.min||n.ymax!==r.max;return Object.assign(n,a),i}const wd=t=>t===0||t===1,ev=(t,e,r)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Va/r)),tv=(t,e,r)=>Math.pow(2,-10*t)*Math.sin((t-e)*Va/r)+1,cc={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*ya)+1,easeOutSine:t=>Math.sin(t*ya),easeInOutSine:t=>-.5*(Math.cos(Xr*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>wd(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>wd(t)?t:ev(t,.075,.3),easeOutElastic:t=>wd(t)?t:tv(t,.075,.3),easeInOutElastic(t){return wd(t)?t:t<.5?.5*ev(t*2,.1125,.45):.5+.5*tv(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-cc.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?cc.easeInBounce(t*2)*.5:cc.easeOutBounce(t*2-1)*.5+.5};function G2(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function rv(t){return G2(t)?t:new Sc(t)}function Fm(t){return G2(t)?t:new Sc(t).saturate(.5).darken(.1).hexString()}const lL=["x","y","borderWidth","radius","tension"],uL=["color","borderColor","backgroundColor"];function cL(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:uL},numbers:{type:"number",properties:lL}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function dL(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const nv=new Map;function hL(t,e){e=e||{};const r=t+JSON.stringify(e);let n=nv.get(r);return n||(n=new Intl.NumberFormat(t,e),nv.set(r,n)),n}function m7(t,e,r){return hL(e,r).format(t)}const fL={values(t){return Fr(t)?t:""+t},numeric(t,e,r){if(t===0)return"0";const n=this.chart.options.locale;let a,i=t;if(r.length>1){const h=Math.max(Math.abs(r[0].value),Math.abs(r[r.length-1].value));(h<1e-4||h>1e15)&&(a="scientific"),i=mL(t,r)}const l=o7(Math.abs(i)),u=isNaN(l)?1:Math.max(Math.min(-1*Math.floor(l),20),0),d={notation:a,minimumFractionDigits:u,maximumFractionDigits:u};return Object.assign(d,this.options.ticks.format),m7(t,n,d)}};function mL(t,e){let r=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(r)>=1&&t!==Math.floor(t)&&(r=t-Math.floor(t)),r}var p7={formatters:fL};function pL(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,r)=>r.lineWidth,tickColor:(e,r)=>r.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:p7.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const vo=Object.create(null),Lp=Object.create(null);function dc(t,e){if(!e)return t;const r=e.split(".");for(let n=0,a=r.length;n<a;++n){const i=r[n];t=t[i]||(t[i]=Object.create(null))}return t}function Lm(t,e,r){return typeof e=="string"?Ac(dc(t,e),r):Ac(dc(t,""),e)}class gL{constructor(e,r){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,a)=>Fm(a.backgroundColor),this.hoverBorderColor=(n,a)=>Fm(a.borderColor),this.hoverColor=(n,a)=>Fm(a.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(r)}set(e,r){return Lm(this,e,r)}get(e){return dc(this,e)}describe(e,r){return Lm(Lp,e,r)}override(e,r){return Lm(vo,e,r)}route(e,r,n,a){const i=dc(this,e),l=dc(this,n),u="_"+r;Object.defineProperties(i,{[u]:{value:i[r],writable:!0},[r]:{enumerable:!0,get(){const d=this[u],h=l[a];return yt(d)?Object.assign({},h,d):ht(d,h)},set(d){this[u]=d}}})}apply(e){e.forEach(r=>r(this))}}var gr=new gL({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[cL,dL,pL]);function bL(t){return!t||At(t.size)||At(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function av(t,e,r,n,a){let i=e[a];return i||(i=e[a]=t.measureText(a).width,r.push(a)),i>n&&(n=i),n}function Wi(t,e,r){const n=t.currentDevicePixelRatio,a=r!==0?Math.max(r/2,.5):0;return Math.round((e-a)*n)/n+a}function sv(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Pp(t,e,r,n){g7(t,e,r,n,null)}function g7(t,e,r,n,a){let i,l,u,d,h,p,b,y;const x=e.pointStyle,_=e.rotation,k=e.radius;let S=(_||0)*GF;if(x&&typeof x=="object"&&(i=x.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(r,n),t.rotate(S),t.drawImage(x,-x.width/2,-x.height/2,x.width,x.height),t.restore();return}if(!(isNaN(k)||k<=0)){switch(t.beginPath(),x){default:a?t.ellipse(r,n,a/2,k,0,0,Va):t.arc(r,n,k,0,Va),t.closePath();break;case"triangle":p=a?a/2:k,t.moveTo(r+Math.sin(S)*p,n-Math.cos(S)*k),S+=X3,t.lineTo(r+Math.sin(S)*p,n-Math.cos(S)*k),S+=X3,t.lineTo(r+Math.sin(S)*p,n-Math.cos(S)*k),t.closePath();break;case"rectRounded":h=k*.516,d=k-h,l=Math.cos(S+Qi)*d,b=Math.cos(S+Qi)*(a?a/2-h:d),u=Math.sin(S+Qi)*d,y=Math.sin(S+Qi)*(a?a/2-h:d),t.arc(r-b,n-u,h,S-Xr,S-ya),t.arc(r+y,n-l,h,S-ya,S),t.arc(r+b,n+u,h,S,S+ya),t.arc(r-y,n+l,h,S+ya,S+Xr),t.closePath();break;case"rect":if(!_){d=Math.SQRT1_2*k,p=a?a/2:d,t.rect(r-p,n-d,2*p,2*d);break}S+=Qi;case"rectRot":b=Math.cos(S)*(a?a/2:k),l=Math.cos(S)*k,u=Math.sin(S)*k,y=Math.sin(S)*(a?a/2:k),t.moveTo(r-b,n-u),t.lineTo(r+y,n-l),t.lineTo(r+b,n+u),t.lineTo(r-y,n+l),t.closePath();break;case"crossRot":S+=Qi;case"cross":b=Math.cos(S)*(a?a/2:k),l=Math.cos(S)*k,u=Math.sin(S)*k,y=Math.sin(S)*(a?a/2:k),t.moveTo(r-b,n-u),t.lineTo(r+b,n+u),t.moveTo(r+y,n-l),t.lineTo(r-y,n+l);break;case"star":b=Math.cos(S)*(a?a/2:k),l=Math.cos(S)*k,u=Math.sin(S)*k,y=Math.sin(S)*(a?a/2:k),t.moveTo(r-b,n-u),t.lineTo(r+b,n+u),t.moveTo(r+y,n-l),t.lineTo(r-y,n+l),S+=Qi,b=Math.cos(S)*(a?a/2:k),l=Math.cos(S)*k,u=Math.sin(S)*k,y=Math.sin(S)*(a?a/2:k),t.moveTo(r-b,n-u),t.lineTo(r+b,n+u),t.moveTo(r+y,n-l),t.lineTo(r-y,n+l);break;case"line":l=a?a/2:Math.cos(S)*k,u=Math.sin(S)*k,t.moveTo(r-l,n-u),t.lineTo(r+l,n+u);break;case"dash":t.moveTo(r,n),t.lineTo(r+Math.cos(S)*(a?a/2:k),n+Math.sin(S)*k);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Tc(t,e,r){return r=r||.5,!e||t&&t.x>e.left-r&&t.x<e.right+r&&t.y>e.top-r&&t.y<e.bottom+r}function Z2(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function K2(t){t.restore()}function yL(t,e,r,n,a){if(!e)return t.lineTo(r.x,r.y);if(a==="middle"){const i=(e.x+r.x)/2;t.lineTo(i,e.y),t.lineTo(i,r.y)}else a==="after"!=!!n?t.lineTo(e.x,r.y):t.lineTo(r.x,e.y);t.lineTo(r.x,r.y)}function xL(t,e,r,n){if(!e)return t.lineTo(r.x,r.y);t.bezierCurveTo(n?e.cp1x:e.cp2x,n?e.cp1y:e.cp2y,n?r.cp2x:r.cp1x,n?r.cp2y:r.cp1y,r.x,r.y)}function vL(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),At(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function _L(t,e,r,n,a){if(a.strikethrough||a.underline){const i=t.measureText(n),l=e-i.actualBoundingBoxLeft,u=e+i.actualBoundingBoxRight,d=r-i.actualBoundingBoxAscent,h=r+i.actualBoundingBoxDescent,p=a.strikethrough?(d+h)/2:h;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=a.decorationWidth||2,t.moveTo(l,p),t.lineTo(u,p),t.stroke()}}function wL(t,e){const r=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=r}function ph(t,e,r,n,a,i={}){const l=Fr(e)?e:[e],u=i.strokeWidth>0&&i.strokeColor!=="";let d,h;for(t.save(),t.font=a.string,vL(t,i),d=0;d<l.length;++d)h=l[d],i.backdrop&&wL(t,i.backdrop),u&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),At(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(h,r,n,i.maxWidth)),t.fillText(h,r,n,i.maxWidth),_L(t,r,n,h,i),n+=Number(a.lineHeight);t.restore()}function gh(t,e){const{x:r,y:n,w:a,h:i,radius:l}=e;t.arc(r+l.topLeft,n+l.topLeft,l.topLeft,1.5*Xr,Xr,!0),t.lineTo(r,n+i-l.bottomLeft),t.arc(r+l.bottomLeft,n+i-l.bottomLeft,l.bottomLeft,Xr,ya,!0),t.lineTo(r+a-l.bottomRight,n+i),t.arc(r+a-l.bottomRight,n+i-l.bottomRight,l.bottomRight,ya,0,!0),t.lineTo(r+a,n+l.topRight),t.arc(r+a-l.topRight,n+l.topRight,l.topRight,0,-ya,!0),t.lineTo(r+l.topLeft,n)}const kL=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,SL=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function AL(t,e){const r=(""+t).match(kL);if(!r||r[1]==="normal")return e*1.2;switch(t=+r[2],r[3]){case"px":return t;case"%":t/=100;break}return e*t}const EL=t=>+t||0;function b7(t,e){const r={},n=yt(e),a=n?Object.keys(e):e,i=yt(t)?n?l=>ht(t[l],t[e[l]]):l=>t[l]:()=>t;for(const l of a)r[l]=EL(i(l));return r}function y7(t){return b7(t,{top:"y",right:"x",bottom:"y",left:"x"})}function gl(t){return b7(t,["topLeft","topRight","bottomLeft","bottomRight"])}function _a(t){const e=y7(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function xn(t,e){t=t||{},e=e||gr.font;let r=ht(t.size,e.size);typeof r=="string"&&(r=parseInt(r,10));let n=ht(t.style,e.style);n&&!(""+n).match(SL)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const a={family:ht(t.family,e.family),lineHeight:AL(ht(t.lineHeight,e.lineHeight),r),size:r,style:n,weight:ht(t.weight,e.weight),string:""};return a.string=bL(a),a}function kd(t,e,r,n){let a,i,l;for(a=0,i=t.length;a<i;++a)if(l=t[a],l!==void 0&&l!==void 0)return l}function CL(t,e,r){const{min:n,max:a}=t,i=BF(e,(a-n)/2),l=(u,d)=>r&&u===0?0:u+d;return{min:l(n,-Math.abs(i)),max:l(a,i)}}function So(t,e){return Object.assign(Object.create(t),e)}function Y2(t,e=[""],r,n,a=()=>t[0]){const i=r||t;typeof n>"u"&&(n=w7("_fallback",t));const l={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:n,_getTarget:a,override:u=>Y2([u,...t],e,i,n)};return new Proxy(l,{deleteProperty(u,d){return delete u[d],delete u._keys,delete t[0][d],!0},get(u,d){return v7(u,d,()=>RL(d,e,t,u))},getOwnPropertyDescriptor(u,d){return Reflect.getOwnPropertyDescriptor(u._scopes[0],d)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(u,d){return ov(u).includes(d)},ownKeys(u){return ov(u)},set(u,d,h){const p=u._storage||(u._storage=a());return u[d]=p[d]=h,delete u._keys,!0}})}function Cl(t,e,r,n){const a={_cacheable:!1,_proxy:t,_context:e,_subProxy:r,_stack:new Set,_descriptors:x7(t,n),setContext:i=>Cl(t,i,r,n),override:i=>Cl(t.override(i),e,r,n)};return new Proxy(a,{deleteProperty(i,l){return delete i[l],delete t[l],!0},get(i,l,u){return v7(i,l,()=>NL(i,l,u))},getOwnPropertyDescriptor(i,l){return i._descriptors.allKeys?Reflect.has(t,l)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,l)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,l){return Reflect.has(t,l)},ownKeys(){return Reflect.ownKeys(t)},set(i,l,u){return t[l]=u,delete i[l],!0}})}function x7(t,e={scriptable:!0,indexable:!0}){const{_scriptable:r=e.scriptable,_indexable:n=e.indexable,_allKeys:a=e.allKeys}=t;return{allKeys:a,scriptable:r,indexable:n,isScriptable:Ti(r)?r:()=>r,isIndexable:Ti(n)?n:()=>n}}const TL=(t,e)=>t?t+U2(e):e,X2=(t,e)=>yt(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function v7(t,e,r){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const n=r();return t[e]=n,n}function NL(t,e,r){const{_proxy:n,_context:a,_subProxy:i,_descriptors:l}=t;let u=n[e];return Ti(u)&&l.isScriptable(e)&&(u=ML(e,u,t,r)),Fr(u)&&u.length&&(u=jL(e,u,t,l.isIndexable)),X2(e,u)&&(u=Cl(u,a,i&&i[e],l)),u}function ML(t,e,r,n){const{_proxy:a,_context:i,_subProxy:l,_stack:u}=r;if(u.has(t))throw new Error("Recursion detected: "+Array.from(u).join("->")+"->"+t);u.add(t);let d=e(i,l||n);return u.delete(t),X2(t,d)&&(d=Q2(a._scopes,a,t,d)),d}function jL(t,e,r,n){const{_proxy:a,_context:i,_subProxy:l,_descriptors:u}=r;if(typeof i.index<"u"&&n(t))return e[i.index%e.length];if(yt(e[0])){const d=e,h=a._scopes.filter(p=>p!==d);e=[];for(const p of d){const b=Q2(h,a,t,p);e.push(Cl(b,i,l&&l[t],u))}}return e}function _7(t,e,r){return Ti(t)?t(e,r):t}const DL=(t,e)=>t===!0?e:typeof t=="string"?El(e,t):void 0;function zL(t,e,r,n,a){for(const i of e){const l=DL(r,i);if(l){t.add(l);const u=_7(l._fallback,r,a);if(typeof u<"u"&&u!==r&&u!==n)return u}else if(l===!1&&typeof n<"u"&&r!==n)return null}return!1}function Q2(t,e,r,n){const a=e._rootScopes,i=_7(e._fallback,r,n),l=[...t,...a],u=new Set;u.add(n);let d=iv(u,l,r,i||r,n);return d===null||typeof i<"u"&&i!==r&&(d=iv(u,l,i,d,n),d===null)?!1:Y2(Array.from(u),[""],a,i,()=>OL(e,r,n))}function iv(t,e,r,n,a){for(;r;)r=zL(t,e,r,n,a);return r}function OL(t,e,r){const n=t._getTarget();e in n||(n[e]={});const a=n[e];return Fr(a)&&yt(r)?r:a||{}}function RL(t,e,r,n){let a;for(const i of e)if(a=w7(TL(i,t),r),typeof a<"u")return X2(t,a)?Q2(r,n,t,a):a}function w7(t,e){for(const r of e){if(!r)continue;const n=r[t];if(typeof n<"u")return n}}function ov(t){let e=t._keys;return e||(e=t._keys=FL(t._scopes)),e}function FL(t){const e=new Set;for(const r of t)for(const n of Object.keys(r).filter(a=>!a.startsWith("_")))e.add(n);return Array.from(e)}const LL=Number.EPSILON||1e-14,Tl=(t,e)=>e<t.length&&!t[e].skip&&t[e],k7=t=>t==="x"?"y":"x";function PL(t,e,r,n){const a=t.skip?e:t,i=e,l=r.skip?e:r,u=Fp(i,a),d=Fp(l,i);let h=u/(u+d),p=d/(u+d);h=isNaN(h)?0:h,p=isNaN(p)?0:p;const b=n*h,y=n*p;return{previous:{x:i.x-b*(l.x-a.x),y:i.y-b*(l.y-a.y)},next:{x:i.x+y*(l.x-a.x),y:i.y+y*(l.y-a.y)}}}function BL(t,e,r){const n=t.length;let a,i,l,u,d,h=Tl(t,0);for(let p=0;p<n-1;++p)if(d=h,h=Tl(t,p+1),!(!d||!h)){if(uc(e[p],0,LL)){r[p]=r[p+1]=0;continue}a=r[p]/e[p],i=r[p+1]/e[p],u=Math.pow(a,2)+Math.pow(i,2),!(u<=9)&&(l=3/Math.sqrt(u),r[p]=a*l*e[p],r[p+1]=i*l*e[p])}}function IL(t,e,r="x"){const n=k7(r),a=t.length;let i,l,u,d=Tl(t,0);for(let h=0;h<a;++h){if(l=u,u=d,d=Tl(t,h+1),!u)continue;const p=u[r],b=u[n];l&&(i=(p-l[r])/3,u[`cp1${r}`]=p-i,u[`cp1${n}`]=b-i*e[h]),d&&(i=(d[r]-p)/3,u[`cp2${r}`]=p+i,u[`cp2${n}`]=b+i*e[h])}}function $L(t,e="x"){const r=k7(e),n=t.length,a=Array(n).fill(0),i=Array(n);let l,u,d,h=Tl(t,0);for(l=0;l<n;++l)if(u=d,d=h,h=Tl(t,l+1),!!d){if(h){const p=h[e]-d[e];a[l]=p!==0?(h[r]-d[r])/p:0}i[l]=u?h?Ga(a[l-1])!==Ga(a[l])?0:(a[l-1]+a[l])/2:a[l-1]:a[l]}BL(t,a,i),IL(t,i,e)}function Sd(t,e,r){return Math.max(Math.min(t,r),e)}function qL(t,e){let r,n,a,i,l,u=Tc(t[0],e);for(r=0,n=t.length;r<n;++r)l=i,i=u,u=r<n-1&&Tc(t[r+1],e),i&&(a=t[r],l&&(a.cp1x=Sd(a.cp1x,e.left,e.right),a.cp1y=Sd(a.cp1y,e.top,e.bottom)),u&&(a.cp2x=Sd(a.cp2x,e.left,e.right),a.cp2y=Sd(a.cp2y,e.top,e.bottom)))}function HL(t,e,r,n,a){let i,l,u,d;if(e.spanGaps&&(t=t.filter(h=>!h.skip)),e.cubicInterpolationMode==="monotone")$L(t,a);else{let h=n?t[t.length-1]:t[0];for(i=0,l=t.length;i<l;++i)u=t[i],d=PL(h,u,t[Math.min(i+1,l-(n?0:1))%l],e.tension),u.cp1x=d.previous.x,u.cp1y=d.previous.y,u.cp2x=d.next.x,u.cp2y=d.next.y,h=u}e.capBezierPoints&&qL(t,r)}function W2(){return typeof window<"u"&&typeof document<"u"}function J2(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function bh(t,e,r){let n;return typeof t=="string"?(n=parseInt(t,10),t.indexOf("%")!==-1&&(n=n/100*e.parentNode[r])):n=t,n}const Lh=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function UL(t,e){return Lh(t).getPropertyValue(e)}const VL=["top","right","bottom","left"];function go(t,e,r){const n={};r=r?"-"+r:"";for(let a=0;a<4;a++){const i=VL[a];n[i]=parseFloat(t[e+"-"+i+r])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const GL=(t,e,r)=>(t>0||e>0)&&(!r||!r.shadowRoot);function ZL(t,e){const r=t.touches,n=r&&r.length?r[0]:t,{offsetX:a,offsetY:i}=n;let l=!1,u,d;if(GL(a,i,t.target))u=a,d=i;else{const h=e.getBoundingClientRect();u=n.clientX-h.left,d=n.clientY-h.top,l=!0}return{x:u,y:d,box:l}}function ro(t,e){if("native"in t)return t;const{canvas:r,currentDevicePixelRatio:n}=e,a=Lh(r),i=a.boxSizing==="border-box",l=go(a,"padding"),u=go(a,"border","width"),{x:d,y:h,box:p}=ZL(t,r),b=l.left+(p&&u.left),y=l.top+(p&&u.top);let{width:x,height:_}=e;return i&&(x-=l.width+u.width,_-=l.height+u.height),{x:Math.round((d-b)/x*r.width/n),y:Math.round((h-y)/_*r.height/n)}}function KL(t,e,r){let n,a;if(e===void 0||r===void 0){const i=t&&J2(t);if(!i)e=t.clientWidth,r=t.clientHeight;else{const l=i.getBoundingClientRect(),u=Lh(i),d=go(u,"border","width"),h=go(u,"padding");e=l.width-h.width-d.width,r=l.height-h.height-d.height,n=bh(u.maxWidth,i,"clientWidth"),a=bh(u.maxHeight,i,"clientHeight")}}return{width:e,height:r,maxWidth:n||mh,maxHeight:a||mh}}const Ad=t=>Math.round(t*10)/10;function YL(t,e,r,n){const a=Lh(t),i=go(a,"margin"),l=bh(a.maxWidth,t,"clientWidth")||mh,u=bh(a.maxHeight,t,"clientHeight")||mh,d=KL(t,e,r);let{width:h,height:p}=d;if(a.boxSizing==="content-box"){const y=go(a,"border","width"),x=go(a,"padding");h-=x.width+y.width,p-=x.height+y.height}return h=Math.max(0,h-i.width),p=Math.max(0,n?h/n:p-i.height),h=Ad(Math.min(h,l,d.maxWidth)),p=Ad(Math.min(p,u,d.maxHeight)),h&&!p&&(p=Ad(h/2)),(e!==void 0||r!==void 0)&&n&&d.height&&p>d.height&&(p=d.height,h=Ad(Math.floor(p*n))),{width:h,height:p}}function lv(t,e,r){const n=e||1,a=Math.floor(t.height*n),i=Math.floor(t.width*n);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const l=t.canvas;return l.style&&(r||!l.style.height&&!l.style.width)&&(l.style.height=`${t.height}px`,l.style.width=`${t.width}px`),t.currentDevicePixelRatio!==n||l.height!==a||l.width!==i?(t.currentDevicePixelRatio=n,l.height=a,l.width=i,t.ctx.setTransform(n,0,0,n,0,0),!0):!1}const XL=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};W2()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function uv(t,e){const r=UL(t,e),n=r&&r.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function no(t,e,r,n){return{x:t.x+r*(e.x-t.x),y:t.y+r*(e.y-t.y)}}function QL(t,e,r,n){return{x:t.x+r*(e.x-t.x),y:n==="middle"?r<.5?t.y:e.y:n==="after"?r<1?t.y:e.y:r>0?e.y:t.y}}function WL(t,e,r,n){const a={x:t.cp2x,y:t.cp2y},i={x:e.cp1x,y:e.cp1y},l=no(t,a,r),u=no(a,i,r),d=no(i,e,r),h=no(l,u,r),p=no(u,d,r);return no(h,p,r)}const JL=function(t,e){return{x(r){return t+t+e-r},setWidth(r){e=r},textAlign(r){return r==="center"?r:r==="right"?"left":"right"},xPlus(r,n){return r-n},leftForLtr(r,n){return r-n}}},eP=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function bl(t,e,r){return t?JL(e,r):eP()}function S7(t,e){let r,n;(e==="ltr"||e==="rtl")&&(r=t.canvas.style,n=[r.getPropertyValue("direction"),r.getPropertyPriority("direction")],r.setProperty("direction",e,"important"),t.prevTextDirection=n)}function A7(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function E7(t){return t==="angle"?{between:l7,compare:JF,normalize:di}:{between:uo,compare:(e,r)=>e-r,normalize:e=>e}}function cv({start:t,end:e,count:r,loop:n,style:a}){return{start:t%r,end:e%r,loop:n&&(e-t+1)%r===0,style:a}}function tP(t,e,r){const{property:n,start:a,end:i}=r,{between:l,normalize:u}=E7(n),d=e.length;let{start:h,end:p,loop:b}=t,y,x;if(b){for(h+=d,p+=d,y=0,x=d;y<x&&l(u(e[h%d][n]),a,i);++y)h--,p--;h%=d,p%=d}return p<h&&(p+=d),{start:h,end:p,loop:b,style:t.style}}function rP(t,e,r){if(!r)return[t];const{property:n,start:a,end:i}=r,l=e.length,{compare:u,between:d,normalize:h}=E7(n),{start:p,end:b,loop:y,style:x}=tP(t,e,r),_=[];let k=!1,S=null,A,C,N;const D=()=>d(a,N,A)&&u(a,N)!==0,j=()=>u(i,A)===0||d(i,N,A),O=()=>k||D(),F=()=>!k||j();for(let R=p,B=p;R<=b;++R)C=e[R%l],!C.skip&&(A=h(C[n]),A!==N&&(k=d(A,a,i),S===null&&O()&&(S=u(A,a)===0?R:B),S!==null&&F()&&(_.push(cv({start:S,end:R,loop:y,count:l,style:x})),S=null),B=R,N=A));return S!==null&&_.push(cv({start:S,end:b,loop:y,count:l,style:x})),_}function nP(t,e){const r=[],n=t.segments;for(let a=0;a<n.length;a++){const i=rP(n[a],t.points,e);i.length&&r.push(...i)}return r}function aP(t,e,r,n){let a=0,i=e-1;if(r&&!n)for(;a<e&&!t[a].skip;)a++;for(;a<e&&t[a].skip;)a++;for(a%=e,r&&(i+=a);i>a&&t[i%e].skip;)i--;return i%=e,{start:a,end:i}}function sP(t,e,r,n){const a=t.length,i=[];let l=e,u=t[e],d;for(d=e+1;d<=r;++d){const h=t[d%a];h.skip||h.stop?u.skip||(n=!1,i.push({start:e%a,end:(d-1)%a,loop:n}),e=l=h.stop?d:null):(l=d,u.skip&&(e=d)),u=h}return l!==null&&i.push({start:e%a,end:l%a,loop:n}),i}function iP(t,e){const r=t.points,n=t.options.spanGaps,a=r.length;if(!a)return[];const i=!!t._loop,{start:l,end:u}=aP(r,a,i,n);if(n===!0)return dv(t,[{start:l,end:u,loop:i}],r,e);const d=u<l?u+a:u,h=!!t._fullLoop&&l===0&&u===a-1;return dv(t,sP(r,l,d,h),r,e)}function dv(t,e,r,n){return!n||!n.setContext||!r?e:oP(t,e,r,n)}function oP(t,e,r,n){const a=t._chart.getContext(),i=hv(t.options),{_datasetIndex:l,options:{spanGaps:u}}=t,d=r.length,h=[];let p=i,b=e[0].start,y=b;function x(_,k,S,A){const C=u?-1:1;if(_!==k){for(_+=d;r[_%d].skip;)_-=C;for(;r[k%d].skip;)k+=C;_%d!==k%d&&(h.push({start:_%d,end:k%d,loop:S,style:A}),p=A,b=k%d)}}for(const _ of e){b=u?b:_.start;let k=r[b%d],S;for(y=b+1;y<=_.end;y++){const A=r[y%d];S=hv(n.setContext(So(a,{type:"segment",p0:k,p1:A,p0DataIndex:(y-1)%d,p1DataIndex:y%d,datasetIndex:l}))),lP(S,p)&&x(b,y-1,_.loop,p),k=A,p=S}b<y-1&&x(b,y-1,_.loop,p)}return h}function hv(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function lP(t,e){if(!e)return!1;const r=[],n=function(a,i){return G2(i)?(r.includes(i)||r.push(i),r.indexOf(i)):i};return JSON.stringify(t,n)!==JSON.stringify(e,n)}function Ed(t,e,r){return t.options.clip?t[r]:e[r]}function uP(t,e){const{xScale:r,yScale:n}=t;return r&&n?{left:Ed(r,e,"left"),right:Ed(r,e,"right"),top:Ed(n,e,"top"),bottom:Ed(n,e,"bottom")}:e}function cP(t,e){const r=e._clip;if(r.disabled)return!1;const n=uP(e,t.chartArea);return{left:r.left===!1?0:n.left-(r.left===!0?0:r.left),right:r.right===!1?t.width:n.right+(r.right===!0?0:r.right),top:r.top===!1?0:n.top-(r.top===!0?0:r.top),bottom:r.bottom===!1?t.height:n.bottom+(r.bottom===!0?0:r.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class dP{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,r,n,a){const i=r.listeners[a],l=r.duration;i.forEach(u=>u({chart:e,initial:r.initial,numSteps:l,currentStep:Math.min(n-r.start,l)}))}_refresh(){this._request||(this._running=!0,this._request=d7.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let r=0;this._charts.forEach((n,a)=>{if(!n.running||!n.items.length)return;const i=n.items;let l=i.length-1,u=!1,d;for(;l>=0;--l)d=i[l],d._active?(d._total>n.duration&&(n.duration=d._total),d.tick(e),u=!0):(i[l]=i[i.length-1],i.pop());u&&(a.draw(),this._notify(a,n,e,"progress")),i.length||(n.running=!1,this._notify(a,n,e,"complete"),n.initial=!1),r+=i.length}),this._lastDate=e,r===0&&(this._running=!1)}_getAnims(e){const r=this._charts;let n=r.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},r.set(e,n)),n}listen(e,r,n){this._getAnims(e).listeners[r].push(n)}add(e,r){!r||!r.length||this._getAnims(e).items.push(...r)}has(e){return this._getAnims(e).items.length>0}start(e){const r=this._charts.get(e);r&&(r.running=!0,r.start=Date.now(),r.duration=r.items.reduce((n,a)=>Math.max(n,a._duration),0),this._refresh())}running(e){if(!this._running)return!1;const r=this._charts.get(e);return!(!r||!r.running||!r.items.length)}stop(e){const r=this._charts.get(e);if(!r||!r.items.length)return;const n=r.items;let a=n.length-1;for(;a>=0;--a)n[a].cancel();r.items=[],this._notify(e,r,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var ws=new dP;const fv="transparent",hP={boolean(t,e,r){return r>.5?e:t},color(t,e,r){const n=rv(t||fv),a=n.valid&&rv(e||fv);return a&&a.valid?a.mix(n,r).hexString():e},number(t,e,r){return t+(e-t)*r}};class fP{constructor(e,r,n,a){const i=r[n];a=kd([e.to,a,i,e.from]);const l=kd([e.from,i,a]);this._active=!0,this._fn=e.fn||hP[e.type||typeof l],this._easing=cc[e.easing]||cc.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=r,this._prop=n,this._from=l,this._to=a,this._promises=void 0}active(){return this._active}update(e,r,n){if(this._active){this._notify(!1);const a=this._target[this._prop],i=n-this._start,l=this._duration-i;this._start=n,this._duration=Math.floor(Math.max(l,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=kd([e.to,r,a,e.from]),this._from=kd([e.from,a,r])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const r=e-this._start,n=this._duration,a=this._prop,i=this._from,l=this._loop,u=this._to;let d;if(this._active=i!==u&&(l||r<n),!this._active){this._target[a]=u,this._notify(!0);return}if(r<0){this._target[a]=i;return}d=r/n%2,d=l&&d>1?2-d:d,d=this._easing(Math.min(1,Math.max(0,d))),this._target[a]=this._fn(i,u,d)}wait(){const e=this._promises||(this._promises=[]);return new Promise((r,n)=>{e.push({res:r,rej:n})})}_notify(e){const r=e?"res":"rej",n=this._promises||[];for(let a=0;a<n.length;a++)n[a][r]()}}class C7{constructor(e,r){this._chart=e,this._properties=new Map,this.configure(r)}configure(e){if(!yt(e))return;const r=Object.keys(gr.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(a=>{const i=e[a];if(!yt(i))return;const l={};for(const u of r)l[u]=i[u];(Fr(i.properties)&&i.properties||[a]).forEach(u=>{(u===a||!n.has(u))&&n.set(u,l)})})}_animateOptions(e,r){const n=r.options,a=pP(e,n);if(!a)return[];const i=this._createAnimations(a,n);return n.$shared&&mP(e.options.$animations,n).then(()=>{e.options=n},()=>{}),i}_createAnimations(e,r){const n=this._properties,a=[],i=e.$animations||(e.$animations={}),l=Object.keys(r),u=Date.now();let d;for(d=l.length-1;d>=0;--d){const h=l[d];if(h.charAt(0)==="$")continue;if(h==="options"){a.push(...this._animateOptions(e,r));continue}const p=r[h];let b=i[h];const y=n.get(h);if(b)if(y&&b.active()){b.update(y,p,u);continue}else b.cancel();if(!y||!y.duration){e[h]=p;continue}i[h]=b=new fP(y,e,h,p),a.push(b)}return a}update(e,r){if(this._properties.size===0){Object.assign(e,r);return}const n=this._createAnimations(e,r);if(n.length)return ws.add(this._chart,n),!0}}function mP(t,e){const r=[],n=Object.keys(e);for(let a=0;a<n.length;a++){const i=t[n[a]];i&&i.active()&&r.push(i.wait())}return Promise.all(r)}function pP(t,e){if(!e)return;let r=t.options;if(!r){t.options=e;return}return r.$shared&&(t.options=r=Object.assign({},r,{$shared:!1,$animations:{}})),r}function mv(t,e){const r=t&&t.options||{},n=r.reverse,a=r.min===void 0?e:0,i=r.max===void 0?e:0;return{start:n?i:a,end:n?a:i}}function gP(t,e,r){if(r===!1)return!1;const n=mv(t,r),a=mv(e,r);return{top:a.end,right:n.end,bottom:a.start,left:n.start}}function bP(t){let e,r,n,a;return yt(t)?(e=t.top,r=t.right,n=t.bottom,a=t.left):e=r=n=a=t,{top:e,right:r,bottom:n,left:a,disabled:t===!1}}function T7(t,e){const r=[],n=t._getSortedDatasetMetas(e);let a,i;for(a=0,i=n.length;a<i;++a)r.push(n[a].index);return r}function pv(t,e,r,n={}){const a=t.keys,i=n.mode==="single";let l,u,d,h;if(e===null)return;let p=!1;for(l=0,u=a.length;l<u;++l){if(d=+a[l],d===r){if(p=!0,n.all)continue;break}h=t.values[d],sa(h)&&(i||e===0||Ga(e)===Ga(h))&&(e+=h)}return!p&&!n.all?0:e}function yP(t,e){const{iScale:r,vScale:n}=e,a=r.axis==="x"?"x":"y",i=n.axis==="x"?"x":"y",l=Object.keys(t),u=new Array(l.length);let d,h,p;for(d=0,h=l.length;d<h;++d)p=l[d],u[d]={[a]:p,[i]:t[p]};return u}function Pm(t,e){const r=t&&t.options.stacked;return r||r===void 0&&e.stack!==void 0}function xP(t,e,r){return`${t.id}.${e.id}.${r.stack||r.type}`}function vP(t){const{min:e,max:r,minDefined:n,maxDefined:a}=t.getUserBounds();return{min:n?e:Number.NEGATIVE_INFINITY,max:a?r:Number.POSITIVE_INFINITY}}function _P(t,e,r){const n=t[e]||(t[e]={});return n[r]||(n[r]={})}function gv(t,e,r,n){for(const a of e.getMatchingVisibleMetas(n).reverse()){const i=t[a.index];if(r&&i>0||!r&&i<0)return a.index}return null}function bv(t,e){const{chart:r,_cachedMeta:n}=t,a=r._stacks||(r._stacks={}),{iScale:i,vScale:l,index:u}=n,d=i.axis,h=l.axis,p=xP(i,l,n),b=e.length;let y;for(let x=0;x<b;++x){const _=e[x],{[d]:k,[h]:S}=_,A=_._stacks||(_._stacks={});y=A[h]=_P(a,p,k),y[u]=S,y._top=gv(y,l,!0,n.type),y._bottom=gv(y,l,!1,n.type);const C=y._visualValues||(y._visualValues={});C[u]=S}}function Bm(t,e){const r=t.scales;return Object.keys(r).filter(n=>r[n].axis===e).shift()}function wP(t,e){return So(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function kP(t,e,r){return So(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:r,index:e,mode:"default",type:"data"})}function Zu(t,e){const r=t.controller.index,n=t.vScale&&t.vScale.axis;if(n){e=e||t._parsed;for(const a of e){const i=a._stacks;if(!i||i[n]===void 0||i[n][r]===void 0)return;delete i[n][r],i[n]._visualValues!==void 0&&i[n]._visualValues[r]!==void 0&&delete i[n]._visualValues[r]}}}const Im=t=>t==="reset"||t==="none",yv=(t,e)=>e?t:Object.assign({},t),SP=(t,e,r)=>t&&!e.hidden&&e._stacked&&{keys:T7(r,!0),values:null};class eg{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,r){this.chart=e,this._ctx=e.ctx,this.index=r,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Pm(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Zu(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,r=this._cachedMeta,n=this.getDataset(),a=(b,y,x,_)=>b==="x"?y:b==="r"?_:x,i=r.xAxisID=ht(n.xAxisID,Bm(e,"x")),l=r.yAxisID=ht(n.yAxisID,Bm(e,"y")),u=r.rAxisID=ht(n.rAxisID,Bm(e,"r")),d=r.indexAxis,h=r.iAxisID=a(d,i,l,u),p=r.vAxisID=a(d,l,i,u);r.xScale=this.getScaleForId(i),r.yScale=this.getScaleForId(l),r.rScale=this.getScaleForId(u),r.iScale=this.getScaleForId(h),r.vScale=this.getScaleForId(p)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const r=this._cachedMeta;return e===r.iScale?r.vScale:r.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&J3(this._data,this),e._stacked&&Zu(e)}_dataCheck(){const e=this.getDataset(),r=e.data||(e.data=[]),n=this._data;if(yt(r)){const a=this._cachedMeta;this._data=yP(r,a)}else if(n!==r){if(n){J3(n,this);const a=this._cachedMeta;Zu(a),a._parsed=[]}r&&Object.isExtensible(r)&&nL(r,this),this._syncList=[],this._data=r}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const r=this._cachedMeta,n=this.getDataset();let a=!1;this._dataCheck();const i=r._stacked;r._stacked=Pm(r.vScale,r),r.stack!==n.stack&&(a=!0,Zu(r),r.stack=n.stack),this._resyncElements(e),(a||i!==r._stacked)&&(bv(this,r._parsed),r._stacked=Pm(r.vScale,r))}configure(){const e=this.chart.config,r=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),r,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,r){const{_cachedMeta:n,_data:a}=this,{iScale:i,_stacked:l}=n,u=i.axis;let d=e===0&&r===a.length?!0:n._sorted,h=e>0&&n._parsed[e-1],p,b,y;if(this._parsing===!1)n._parsed=a,n._sorted=!0,y=a;else{Fr(a[e])?y=this.parseArrayData(n,a,e,r):yt(a[e])?y=this.parseObjectData(n,a,e,r):y=this.parsePrimitiveData(n,a,e,r);const x=()=>b[u]===null||h&&b[u]<h[u];for(p=0;p<r;++p)n._parsed[p+e]=b=y[p],d&&(x()&&(d=!1),h=b);n._sorted=d}l&&bv(this,y)}parsePrimitiveData(e,r,n,a){const{iScale:i,vScale:l}=e,u=i.axis,d=l.axis,h=i.getLabels(),p=i===l,b=new Array(a);let y,x,_;for(y=0,x=a;y<x;++y)_=y+n,b[y]={[u]:p||i.parse(h[_],_),[d]:l.parse(r[_],_)};return b}parseArrayData(e,r,n,a){const{xScale:i,yScale:l}=e,u=new Array(a);let d,h,p,b;for(d=0,h=a;d<h;++d)p=d+n,b=r[p],u[d]={x:i.parse(b[0],p),y:l.parse(b[1],p)};return u}parseObjectData(e,r,n,a){const{xScale:i,yScale:l}=e,{xAxisKey:u="x",yAxisKey:d="y"}=this._parsing,h=new Array(a);let p,b,y,x;for(p=0,b=a;p<b;++p)y=p+n,x=r[y],h[p]={x:i.parse(El(x,u),y),y:l.parse(El(x,d),y)};return h}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,r,n){const a=this.chart,i=this._cachedMeta,l=r[e.axis],u={keys:T7(a,!0),values:r._stacks[e.axis]._visualValues};return pv(u,l,i.index,{mode:n})}updateRangeFromParsed(e,r,n,a){const i=n[r.axis];let l=i===null?NaN:i;const u=a&&n._stacks[r.axis];a&&u&&(a.values=u,l=pv(a,i,this._cachedMeta.index)),e.min=Math.min(e.min,l),e.max=Math.max(e.max,l)}getMinMax(e,r){const n=this._cachedMeta,a=n._parsed,i=n._sorted&&e===n.iScale,l=a.length,u=this._getOtherScale(e),d=SP(r,n,this.chart),h={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:p,max:b}=vP(u);let y,x;function _(){x=a[y];const k=x[u.axis];return!sa(x[e.axis])||p>k||b<k}for(y=0;y<l&&!(!_()&&(this.updateRangeFromParsed(h,e,x,d),i));++y);if(i){for(y=l-1;y>=0;--y)if(!_()){this.updateRangeFromParsed(h,e,x,d);break}}return h}getAllParsedValues(e){const r=this._cachedMeta._parsed,n=[];let a,i,l;for(a=0,i=r.length;a<i;++a)l=r[a][e.axis],sa(l)&&n.push(l);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const r=this._cachedMeta,n=r.iScale,a=r.vScale,i=this.getParsed(e);return{label:n?""+n.getLabelForValue(i[n.axis]):"",value:a?""+a.getLabelForValue(i[a.axis]):""}}_update(e){const r=this._cachedMeta;this.update(e||"default"),r._clip=bP(ht(this.options.clip,gP(r.xScale,r.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,r=this.chart,n=this._cachedMeta,a=n.data||[],i=r.chartArea,l=[],u=this._drawStart||0,d=this._drawCount||a.length-u,h=this.options.drawActiveElementsOnTop;let p;for(n.dataset&&n.dataset.draw(e,i,u,d),p=u;p<u+d;++p){const b=a[p];b.hidden||(b.active&&h?l.push(b):b.draw(e,i))}for(p=0;p<l.length;++p)l[p].draw(e,i)}getStyle(e,r){const n=r?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,r,n){const a=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const l=this._cachedMeta.data[e];i=l.$context||(l.$context=kP(this.getContext(),e,l)),i.parsed=this.getParsed(e),i.raw=a.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=wP(this.chart.getContext(),this.index)),i.dataset=a,i.index=i.datasetIndex=this.index;return i.active=!!r,i.mode=n,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,r){return this._resolveElementOptions(this.dataElementType.id,r,e)}_resolveElementOptions(e,r="default",n){const a=r==="active",i=this._cachedDataOpts,l=e+"-"+r,u=i[l],d=this.enableOptionSharing&&Ec(n);if(u)return yv(u,d);const h=this.chart.config,p=h.datasetElementScopeKeys(this._type,e),b=a?[`${e}Hover`,"hover",e,""]:[e,""],y=h.getOptionScopes(this.getDataset(),p),x=Object.keys(gr.elements[e]),_=()=>this.getContext(n,a,r),k=h.resolveNamedOptions(y,x,_,b);return k.$shared&&(k.$shared=d,i[l]=Object.freeze(yv(k,d))),k}_resolveAnimations(e,r,n){const a=this.chart,i=this._cachedDataOpts,l=`animation-${r}`,u=i[l];if(u)return u;let d;if(a.options.animation!==!1){const p=this.chart.config,b=p.datasetAnimationScopeKeys(this._type,r),y=p.getOptionScopes(this.getDataset(),b);d=p.createResolver(y,this.getContext(e,n,r))}const h=new C7(a,d&&d.animations);return d&&d._cacheable&&(i[l]=Object.freeze(h)),h}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,r){return!r||Im(e)||this.chart._animationsDisabled}_getSharedOptions(e,r){const n=this.resolveDataElementOptions(e,r),a=this._sharedOptions,i=this.getSharedOptions(n),l=this.includeOptions(r,i)||i!==a;return this.updateSharedOptions(i,r,n),{sharedOptions:i,includeOptions:l}}updateElement(e,r,n,a){Im(a)?Object.assign(e,n):this._resolveAnimations(r,a).update(e,n)}updateSharedOptions(e,r,n){e&&!Im(r)&&this._resolveAnimations(void 0,r).update(e,n)}_setStyle(e,r,n,a){e.active=a;const i=this.getStyle(r,a);this._resolveAnimations(r,n,a).update(e,{options:!a&&this.getSharedOptions(i)||i})}removeHoverStyle(e,r,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,r,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const r=this._data,n=this._cachedMeta.data;for(const[u,d,h]of this._syncList)this[u](d,h);this._syncList=[];const a=n.length,i=r.length,l=Math.min(i,a);l&&this.parse(0,l),i>a?this._insertElements(a,i-a,e):i<a&&this._removeElements(i,a-i)}_insertElements(e,r,n=!0){const a=this._cachedMeta,i=a.data,l=e+r;let u;const d=h=>{for(h.length+=r,u=h.length-1;u>=l;u--)h[u]=h[u-r]};for(d(i),u=e;u<l;++u)i[u]=new this.dataElementType;this._parsing&&d(a._parsed),this.parse(e,r),n&&this.updateElements(i,e,r,"reset")}updateElements(e,r,n,a){}_removeElements(e,r){const n=this._cachedMeta;if(this._parsing){const a=n._parsed.splice(e,r);n._stacked&&Zu(n,a)}n.data.splice(e,r)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[r,n,a]=e;this[r](n,a)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,r){r&&this._sync(["_removeElements",e,r]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function AP(t,e){if(!t._cache.$bar){const r=t.getMatchingVisibleMetas(e);let n=[];for(let a=0,i=r.length;a<i;a++)n=n.concat(r[a].controller.getAllParsedValues(t));t._cache.$bar=c7(n.sort((a,i)=>a-i))}return t._cache.$bar}function EP(t){const e=t.iScale,r=AP(e,t.type);let n=e._length,a,i,l,u;const d=()=>{l===32767||l===-32768||(Ec(u)&&(n=Math.min(n,Math.abs(l-u)||n)),u=l)};for(a=0,i=r.length;a<i;++a)l=e.getPixelForValue(r[a]),d();for(u=void 0,a=0,i=e.ticks.length;a<i;++a)l=e.getPixelForTick(a),d();return n}function CP(t,e,r,n){const a=r.barThickness;let i,l;return At(a)?(i=e.min*r.categoryPercentage,l=r.barPercentage):(i=a*n,l=1),{chunk:i/n,ratio:l,start:e.pixels[t]-i/2}}function TP(t,e,r,n){const a=e.pixels,i=a[t];let l=t>0?a[t-1]:null,u=t<a.length-1?a[t+1]:null;const d=r.categoryPercentage;l===null&&(l=i-(u===null?e.end-e.start:u-i)),u===null&&(u=i+i-l);const h=i-(i-Math.min(l,u))/2*d;return{chunk:Math.abs(u-l)/2*d/n,ratio:r.barPercentage,start:h}}function NP(t,e,r,n){const a=r.parse(t[0],n),i=r.parse(t[1],n),l=Math.min(a,i),u=Math.max(a,i);let d=l,h=u;Math.abs(l)>Math.abs(u)&&(d=u,h=l),e[r.axis]=h,e._custom={barStart:d,barEnd:h,start:a,end:i,min:l,max:u}}function N7(t,e,r,n){return Fr(t)?NP(t,e,r,n):e[r.axis]=r.parse(t,n),e}function xv(t,e,r,n){const a=t.iScale,i=t.vScale,l=a.getLabels(),u=a===i,d=[];let h,p,b,y;for(h=r,p=r+n;h<p;++h)y=e[h],b={},b[a.axis]=u||a.parse(l[h],h),d.push(N7(y,b,i,h));return d}function $m(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function MP(t,e,r){return t!==0?Ga(t):(e.isHorizontal()?1:-1)*(e.min>=r?1:-1)}function jP(t){let e,r,n,a,i;return t.horizontal?(e=t.base>t.x,r="left",n="right"):(e=t.base<t.y,r="bottom",n="top"),e?(a="end",i="start"):(a="start",i="end"),{start:r,end:n,reverse:e,top:a,bottom:i}}function DP(t,e,r,n){let a=e.borderSkipped;const i={};if(!a){t.borderSkipped=i;return}if(a===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:l,end:u,reverse:d,top:h,bottom:p}=jP(t);a==="middle"&&r&&(t.enableBorderRadius=!0,(r._top||0)===n?a=h:(r._bottom||0)===n?a=p:(i[vv(p,l,u,d)]=!0,a=h)),i[vv(a,l,u,d)]=!0,t.borderSkipped=i}function vv(t,e,r,n){return n?(t=zP(t,e,r),t=_v(t,r,e)):t=_v(t,e,r),t}function zP(t,e,r){return t===e?r:t===r?e:t}function _v(t,e,r){return t==="start"?e:t==="end"?r:t}function OP(t,{inflateAmount:e},r){t.inflateAmount=e==="auto"?r===1?.33:0:e}class RP extends eg{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,r,n,a){return xv(e,r,n,a)}parseArrayData(e,r,n,a){return xv(e,r,n,a)}parseObjectData(e,r,n,a){const{iScale:i,vScale:l}=e,{xAxisKey:u="x",yAxisKey:d="y"}=this._parsing,h=i.axis==="x"?u:d,p=l.axis==="x"?u:d,b=[];let y,x,_,k;for(y=n,x=n+a;y<x;++y)k=r[y],_={},_[i.axis]=i.parse(El(k,h),y),b.push(N7(El(k,p),_,l,y));return b}updateRangeFromParsed(e,r,n,a){super.updateRangeFromParsed(e,r,n,a);const i=n._custom;i&&r===this._cachedMeta.vScale&&(e.min=Math.min(e.min,i.min),e.max=Math.max(e.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const r=this._cachedMeta,{iScale:n,vScale:a}=r,i=this.getParsed(e),l=i._custom,u=$m(l)?"["+l.start+", "+l.end+"]":""+a.getLabelForValue(i[a.axis]);return{label:""+n.getLabelForValue(i[n.axis]),value:u}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const r=this._cachedMeta;this.updateElements(r.data,0,r.data.length,e)}updateElements(e,r,n,a){const i=a==="reset",{index:l,_cachedMeta:{vScale:u}}=this,d=u.getBasePixel(),h=u.isHorizontal(),p=this._getRuler(),{sharedOptions:b,includeOptions:y}=this._getSharedOptions(r,a);for(let x=r;x<r+n;x++){const _=this.getParsed(x),k=i||At(_[u.axis])?{base:d,head:d}:this._calculateBarValuePixels(x),S=this._calculateBarIndexPixels(x,p),A=(_._stacks||{})[u.axis],C={horizontal:h,base:k.base,enableBorderRadius:!A||$m(_._custom)||l===A._top||l===A._bottom,x:h?k.head:S.center,y:h?S.center:k.head,height:h?S.size:Math.abs(k.size),width:h?Math.abs(k.size):S.size};y&&(C.options=b||this.resolveDataElementOptions(x,e[x].active?"active":a));const N=C.options||e[x].options;DP(C,N,A,l),OP(C,N,p.ratio),this.updateElement(e[x],x,C,a)}}_getStacks(e,r){const{iScale:n}=this._cachedMeta,a=n.getMatchingVisibleMetas(this._type).filter(p=>p.controller.options.grouped),i=n.options.stacked,l=[],u=this._cachedMeta.controller.getParsed(r),d=u&&u[n.axis],h=p=>{const b=p._parsed.find(x=>x[n.axis]===d),y=b&&b[p.vScale.axis];if(At(y)||isNaN(y))return!0};for(const p of a)if(!(r!==void 0&&h(p))&&((i===!1||l.indexOf(p.stack)===-1||i===void 0&&p.stack===void 0)&&l.push(p.stack),p.index===e))break;return l.length||l.push(void 0),l}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,r=this.chart.options.indexAxis;return Object.keys(e).filter(n=>e[n].axis===r).shift()}_getAxis(){const e={},r=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)e[ht(this.chart.options.indexAxis==="x"?n.xAxisID:n.yAxisID,r)]=!0;return Object.keys(e)}_getStackIndex(e,r,n){const a=this._getStacks(e,n),i=r!==void 0?a.indexOf(r):-1;return i===-1?a.length-1:i}_getRuler(){const e=this.options,r=this._cachedMeta,n=r.iScale,a=[];let i,l;for(i=0,l=r.data.length;i<l;++i)a.push(n.getPixelForValue(this.getParsed(i)[n.axis],i));const u=e.barThickness;return{min:u||EP(r),pixels:a,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:u?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:r,_stacked:n,index:a},options:{base:i,minBarLength:l}}=this,u=i||0,d=this.getParsed(e),h=d._custom,p=$m(h);let b=d[r.axis],y=0,x=n?this.applyStack(r,d,n):b,_,k;x!==b&&(y=x-b,x=b),p&&(b=h.barStart,x=h.barEnd-h.barStart,b!==0&&Ga(b)!==Ga(h.barEnd)&&(y=0),y+=b);const S=!At(i)&&!p?i:y;let A=r.getPixelForValue(S);if(this.chart.getDataVisibility(e)?_=r.getPixelForValue(y+x):_=A,k=_-A,Math.abs(k)<l){k=MP(k,r,u)*l,b===u&&(A-=k/2);const C=r.getPixelForDecimal(0),N=r.getPixelForDecimal(1),D=Math.min(C,N),j=Math.max(C,N);A=Math.max(Math.min(A,j),D),_=A+k,n&&!p&&(d._stacks[r.axis]._visualValues[a]=r.getValueForPixel(_)-r.getValueForPixel(A))}if(A===r.getPixelForValue(u)){const C=Ga(k)*r.getLineWidthForValue(u)/2;A+=C,k-=C}return{size:k,base:A,head:_,center:_+k/2}}_calculateBarIndexPixels(e,r){const n=r.scale,a=this.options,i=a.skipNull,l=ht(a.maxBarThickness,1/0);let u,d;const h=this._getAxisCount();if(r.grouped){const p=i?this._getStackCount(e):r.stackCount,b=a.barThickness==="flex"?TP(e,r,a,p*h):CP(e,r,a,p*h),y=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,x=this._getAxis().indexOf(ht(y,this.getFirstScaleIdForIndexAxis())),_=this._getStackIndex(this.index,this._cachedMeta.stack,i?e:void 0)+x;u=b.start+b.chunk*_+b.chunk/2,d=Math.min(l,b.chunk*b.ratio)}else u=n.getPixelForValue(this.getParsed(e)[n.axis],e),d=Math.min(l,r.min*r.ratio);return{base:u-d/2,head:u+d/2,center:u,size:d}}draw(){const e=this._cachedMeta,r=e.vScale,n=e.data,a=n.length;let i=0;for(;i<a;++i)this.getParsed(i)[r.axis]!==null&&!n[i].hidden&&n[i].draw(this._ctx)}}class FP extends eg{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const r=this._cachedMeta,{dataset:n,data:a=[],_dataset:i}=r,l=this.chart._animationsDisabled;let{start:u,count:d}=iL(r,a,l);this._drawStart=u,this._drawCount=d,oL(r)&&(u=0,d=a.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!i._decimated,n.points=a;const h=this.resolveDatasetElementOptions(e);this.options.showLine||(h.borderWidth=0),h.segment=this.options.segment,this.updateElement(n,void 0,{animated:!l,options:h},e),this.updateElements(a,u,d,e)}updateElements(e,r,n,a){const i=a==="reset",{iScale:l,vScale:u,_stacked:d,_dataset:h}=this._cachedMeta,{sharedOptions:p,includeOptions:b}=this._getSharedOptions(r,a),y=l.axis,x=u.axis,{spanGaps:_,segment:k}=this.options,S=Cc(_)?_:Number.POSITIVE_INFINITY,A=this.chart._animationsDisabled||i||a==="none",C=r+n,N=e.length;let D=r>0&&this.getParsed(r-1);for(let j=0;j<N;++j){const O=e[j],F=A?O:{};if(j<r||j>=C){F.skip=!0;continue}const R=this.getParsed(j),B=At(R[x]),V=F[y]=l.getPixelForValue(R[y],j),$=F[x]=i||B?u.getBasePixel():u.getPixelForValue(d?this.applyStack(u,R,d):R[x],j);F.skip=isNaN(V)||isNaN($)||B,F.stop=j>0&&Math.abs(R[y]-D[y])>S,k&&(F.parsed=R,F.raw=h.data[j]),b&&(F.options=p||this.resolveDataElementOptions(j,O.active?"active":a)),A||this.updateElement(O,j,F,a),D=R}}getMaxOverflow(){const e=this._cachedMeta,r=e.dataset,n=r.options&&r.options.borderWidth||0,a=e.data||[];if(!a.length)return n;const i=a[0].size(this.resolveDataElementOptions(0)),l=a[a.length-1].size(this.resolveDataElementOptions(a.length-1));return Math.max(n,i,l)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}function Ji(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class tg{static override(e){Object.assign(tg.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return Ji()}parse(){return Ji()}format(){return Ji()}add(){return Ji()}diff(){return Ji()}startOf(){return Ji()}endOf(){return Ji()}}var LP={_date:tg};function PP(t,e,r,n){const{controller:a,data:i,_sorted:l}=t,u=a._cachedMeta.iScale,d=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(u&&e===u.axis&&e!=="r"&&l&&i.length){const h=u._reversePixels?tL:co;if(n){if(a._sharedOptions){const p=i[0],b=typeof p.getRange=="function"&&p.getRange(e);if(b){const y=h(i,e,r-b),x=h(i,e,r+b);return{lo:y.lo,hi:x.hi}}}}else{const p=h(i,e,r);if(d){const{vScale:b}=a._cachedMeta,{_parsed:y}=t,x=y.slice(0,p.lo+1).reverse().findIndex(k=>!At(k[b.axis]));p.lo-=Math.max(0,x);const _=y.slice(p.hi).findIndex(k=>!At(k[b.axis]));p.hi+=Math.max(0,_)}return p}}return{lo:0,hi:i.length-1}}function Ph(t,e,r,n,a){const i=t.getSortedVisibleDatasetMetas(),l=r[e];for(let u=0,d=i.length;u<d;++u){const{index:h,data:p}=i[u],{lo:b,hi:y}=PP(i[u],e,l,a);for(let x=b;x<=y;++x){const _=p[x];_.skip||n(_,h,x)}}}function BP(t){const e=t.indexOf("x")!==-1,r=t.indexOf("y")!==-1;return function(n,a){const i=e?Math.abs(n.x-a.x):0,l=r?Math.abs(n.y-a.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(l,2))}}function qm(t,e,r,n,a){const i=[];return!a&&!t.isPointInArea(e)||Ph(t,r,e,function(u,d,h){!a&&!Tc(u,t.chartArea,0)||u.inRange(e.x,e.y,n)&&i.push({element:u,datasetIndex:d,index:h})},!0),i}function IP(t,e,r,n){let a=[];function i(l,u,d){const{startAngle:h,endAngle:p}=l.getProps(["startAngle","endAngle"],n),{angle:b}=WF(l,{x:e.x,y:e.y});l7(b,h,p)&&a.push({element:l,datasetIndex:u,index:d})}return Ph(t,r,e,i),a}function $P(t,e,r,n,a,i){let l=[];const u=BP(r);let d=Number.POSITIVE_INFINITY;function h(p,b,y){const x=p.inRange(e.x,e.y,a);if(n&&!x)return;const _=p.getCenterPoint(a);if(!(!!i||t.isPointInArea(_))&&!x)return;const S=u(e,_);S<d?(l=[{element:p,datasetIndex:b,index:y}],d=S):S===d&&l.push({element:p,datasetIndex:b,index:y})}return Ph(t,r,e,h),l}function Hm(t,e,r,n,a,i){return!i&&!t.isPointInArea(e)?[]:r==="r"&&!n?IP(t,e,r,a):$P(t,e,r,n,a,i)}function wv(t,e,r,n,a){const i=[],l=r==="x"?"inXRange":"inYRange";let u=!1;return Ph(t,r,e,(d,h,p)=>{d[l]&&d[l](e[r],a)&&(i.push({element:d,datasetIndex:h,index:p}),u=u||d.inRange(e.x,e.y,a))}),n&&!u?[]:i}var qP={modes:{index(t,e,r,n){const a=ro(e,t),i=r.axis||"x",l=r.includeInvisible||!1,u=r.intersect?qm(t,a,i,n,l):Hm(t,a,i,!1,n,l),d=[];return u.length?(t.getSortedVisibleDatasetMetas().forEach(h=>{const p=u[0].index,b=h.data[p];b&&!b.skip&&d.push({element:b,datasetIndex:h.index,index:p})}),d):[]},dataset(t,e,r,n){const a=ro(e,t),i=r.axis||"xy",l=r.includeInvisible||!1;let u=r.intersect?qm(t,a,i,n,l):Hm(t,a,i,!1,n,l);if(u.length>0){const d=u[0].datasetIndex,h=t.getDatasetMeta(d).data;u=[];for(let p=0;p<h.length;++p)u.push({element:h[p],datasetIndex:d,index:p})}return u},point(t,e,r,n){const a=ro(e,t),i=r.axis||"xy",l=r.includeInvisible||!1;return qm(t,a,i,n,l)},nearest(t,e,r,n){const a=ro(e,t),i=r.axis||"xy",l=r.includeInvisible||!1;return Hm(t,a,i,r.intersect,n,l)},x(t,e,r,n){const a=ro(e,t);return wv(t,a,"x",r.intersect,n)},y(t,e,r,n){const a=ro(e,t);return wv(t,a,"y",r.intersect,n)}}};const M7=["left","top","right","bottom"];function Ku(t,e){return t.filter(r=>r.pos===e)}function kv(t,e){return t.filter(r=>M7.indexOf(r.pos)===-1&&r.box.axis===e)}function Yu(t,e){return t.sort((r,n)=>{const a=e?n:r,i=e?r:n;return a.weight===i.weight?a.index-i.index:a.weight-i.weight})}function HP(t){const e=[];let r,n,a,i,l,u;for(r=0,n=(t||[]).length;r<n;++r)a=t[r],{position:i,options:{stack:l,stackWeight:u=1}}=a,e.push({index:r,box:a,pos:i,horizontal:a.isHorizontal(),weight:a.weight,stack:l&&i+l,stackWeight:u});return e}function UP(t){const e={};for(const r of t){const{stack:n,pos:a,stackWeight:i}=r;if(!n||!M7.includes(a))continue;const l=e[n]||(e[n]={count:0,placed:0,weight:0,size:0});l.count++,l.weight+=i}return e}function VP(t,e){const r=UP(t),{vBoxMaxWidth:n,hBoxMaxHeight:a}=e;let i,l,u;for(i=0,l=t.length;i<l;++i){u=t[i];const{fullSize:d}=u.box,h=r[u.stack],p=h&&u.stackWeight/h.weight;u.horizontal?(u.width=p?p*n:d&&e.availableWidth,u.height=a):(u.width=n,u.height=p?p*a:d&&e.availableHeight)}return r}function GP(t){const e=HP(t),r=Yu(e.filter(h=>h.box.fullSize),!0),n=Yu(Ku(e,"left"),!0),a=Yu(Ku(e,"right")),i=Yu(Ku(e,"top"),!0),l=Yu(Ku(e,"bottom")),u=kv(e,"x"),d=kv(e,"y");return{fullSize:r,leftAndTop:n.concat(i),rightAndBottom:a.concat(d).concat(l).concat(u),chartArea:Ku(e,"chartArea"),vertical:n.concat(a).concat(d),horizontal:i.concat(l).concat(u)}}function Sv(t,e,r,n){return Math.max(t[r],e[r])+Math.max(t[n],e[n])}function j7(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function ZP(t,e,r,n){const{pos:a,box:i}=r,l=t.maxPadding;if(!yt(a)){r.size&&(t[a]-=r.size);const b=n[r.stack]||{size:0,count:1};b.size=Math.max(b.size,r.horizontal?i.height:i.width),r.size=b.size/b.count,t[a]+=r.size}i.getPadding&&j7(l,i.getPadding());const u=Math.max(0,e.outerWidth-Sv(l,t,"left","right")),d=Math.max(0,e.outerHeight-Sv(l,t,"top","bottom")),h=u!==t.w,p=d!==t.h;return t.w=u,t.h=d,r.horizontal?{same:h,other:p}:{same:p,other:h}}function KP(t){const e=t.maxPadding;function r(n){const a=Math.max(e[n]-t[n],0);return t[n]+=a,a}t.y+=r("top"),t.x+=r("left"),r("right"),r("bottom")}function YP(t,e){const r=e.maxPadding;function n(a){const i={left:0,top:0,right:0,bottom:0};return a.forEach(l=>{i[l]=Math.max(e[l],r[l])}),i}return n(t?["left","right"]:["top","bottom"])}function tc(t,e,r,n){const a=[];let i,l,u,d,h,p;for(i=0,l=t.length,h=0;i<l;++i){u=t[i],d=u.box,d.update(u.width||e.w,u.height||e.h,YP(u.horizontal,e));const{same:b,other:y}=ZP(e,r,u,n);h|=b&&a.length,p=p||y,d.fullSize||a.push(u)}return h&&tc(a,e,r,n)||p}function Cd(t,e,r,n,a){t.top=r,t.left=e,t.right=e+n,t.bottom=r+a,t.width=n,t.height=a}function Av(t,e,r,n){const a=r.padding;let{x:i,y:l}=e;for(const u of t){const d=u.box,h=n[u.stack]||{placed:0,weight:1},p=u.stackWeight/h.weight||1;if(u.horizontal){const b=e.w*p,y=h.size||d.height;Ec(h.start)&&(l=h.start),d.fullSize?Cd(d,a.left,l,r.outerWidth-a.right-a.left,y):Cd(d,e.left+h.placed,l,b,y),h.start=l,h.placed+=b,l=d.bottom}else{const b=e.h*p,y=h.size||d.width;Ec(h.start)&&(i=h.start),d.fullSize?Cd(d,i,a.top,y,r.outerHeight-a.bottom-a.top):Cd(d,i,e.top+h.placed,y,b),h.start=i,h.placed+=b,i=d.right}}e.x=i,e.y=l}var yi={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(r){e.draw(r)}}]},t.boxes.push(e)},removeBox(t,e){const r=t.boxes?t.boxes.indexOf(e):-1;r!==-1&&t.boxes.splice(r,1)},configure(t,e,r){e.fullSize=r.fullSize,e.position=r.position,e.weight=r.weight},update(t,e,r,n){if(!t)return;const a=_a(t.options.layout.padding),i=Math.max(e-a.width,0),l=Math.max(r-a.height,0),u=GP(t.boxes),d=u.vertical,h=u.horizontal;Mt(t.boxes,k=>{typeof k.beforeLayout=="function"&&k.beforeLayout()});const p=d.reduce((k,S)=>S.box.options&&S.box.options.display===!1?k:k+1,0)||1,b=Object.freeze({outerWidth:e,outerHeight:r,padding:a,availableWidth:i,availableHeight:l,vBoxMaxWidth:i/2/p,hBoxMaxHeight:l/2}),y=Object.assign({},a);j7(y,_a(n));const x=Object.assign({maxPadding:y,w:i,h:l,x:a.left,y:a.top},a),_=VP(d.concat(h),b);tc(u.fullSize,x,b,_),tc(d,x,b,_),tc(h,x,b,_)&&tc(d,x,b,_),KP(x),Av(u.leftAndTop,x,b,_),x.x+=x.w,x.y+=x.h,Av(u.rightAndBottom,x,b,_),t.chartArea={left:x.left,top:x.top,right:x.left+x.w,bottom:x.top+x.h,height:x.h,width:x.w},Mt(u.chartArea,k=>{const S=k.box;Object.assign(S,t.chartArea),S.update(x.w,x.h,{left:0,top:0,right:0,bottom:0})})}};class D7{acquireContext(e,r){}releaseContext(e){return!1}addEventListener(e,r,n){}removeEventListener(e,r,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,r,n,a){return r=Math.max(0,r||e.width),n=n||e.height,{width:r,height:Math.max(0,a?Math.floor(r/a):n)}}isAttached(e){return!0}updateConfig(e){}}class XP extends D7{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Yd="$chartjs",QP={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Ev=t=>t===null||t==="";function WP(t,e){const r=t.style,n=t.getAttribute("height"),a=t.getAttribute("width");if(t[Yd]={initial:{height:n,width:a,style:{display:r.display,height:r.height,width:r.width}}},r.display=r.display||"block",r.boxSizing=r.boxSizing||"border-box",Ev(a)){const i=uv(t,"width");i!==void 0&&(t.width=i)}if(Ev(n))if(t.style.height==="")t.height=t.width/(e||2);else{const i=uv(t,"height");i!==void 0&&(t.height=i)}return t}const z7=XL?{passive:!0}:!1;function JP(t,e,r){t&&t.addEventListener(e,r,z7)}function eB(t,e,r){t&&t.canvas&&t.canvas.removeEventListener(e,r,z7)}function tB(t,e){const r=QP[t.type]||t.type,{x:n,y:a}=ro(t,e);return{type:r,chart:e,native:t,x:n!==void 0?n:null,y:a!==void 0?a:null}}function yh(t,e){for(const r of t)if(r===e||r.contains(e))return!0}function rB(t,e,r){const n=t.canvas,a=new MutationObserver(i=>{let l=!1;for(const u of i)l=l||yh(u.addedNodes,n),l=l&&!yh(u.removedNodes,n);l&&r()});return a.observe(document,{childList:!0,subtree:!0}),a}function nB(t,e,r){const n=t.canvas,a=new MutationObserver(i=>{let l=!1;for(const u of i)l=l||yh(u.removedNodes,n),l=l&&!yh(u.addedNodes,n);l&&r()});return a.observe(document,{childList:!0,subtree:!0}),a}const Nc=new Map;let Cv=0;function O7(){const t=window.devicePixelRatio;t!==Cv&&(Cv=t,Nc.forEach((e,r)=>{r.currentDevicePixelRatio!==t&&e()}))}function aB(t,e){Nc.size||window.addEventListener("resize",O7),Nc.set(t,e)}function sB(t){Nc.delete(t),Nc.size||window.removeEventListener("resize",O7)}function iB(t,e,r){const n=t.canvas,a=n&&J2(n);if(!a)return;const i=h7((u,d)=>{const h=a.clientWidth;r(u,d),h<a.clientWidth&&r()},window),l=new ResizeObserver(u=>{const d=u[0],h=d.contentRect.width,p=d.contentRect.height;h===0&&p===0||i(h,p)});return l.observe(a),aB(t,i),l}function Um(t,e,r){r&&r.disconnect(),e==="resize"&&sB(t)}function oB(t,e,r){const n=t.canvas,a=h7(i=>{t.ctx!==null&&r(tB(i,t))},t);return JP(n,e,a),a}class lB extends D7{acquireContext(e,r){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(WP(e,r),n):null}releaseContext(e){const r=e.canvas;if(!r[Yd])return!1;const n=r[Yd].initial;["height","width"].forEach(i=>{const l=n[i];At(l)?r.removeAttribute(i):r.setAttribute(i,l)});const a=n.style||{};return Object.keys(a).forEach(i=>{r.style[i]=a[i]}),r.width=r.width,delete r[Yd],!0}addEventListener(e,r,n){this.removeEventListener(e,r);const a=e.$proxies||(e.$proxies={}),l={attach:rB,detach:nB,resize:iB}[r]||oB;a[r]=l(e,r,n)}removeEventListener(e,r){const n=e.$proxies||(e.$proxies={}),a=n[r];if(!a)return;({attach:Um,detach:Um,resize:Um}[r]||eB)(e,r,a),n[r]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,r,n,a){return YL(e,r,n,a)}isAttached(e){const r=e&&J2(e);return!!(r&&r.isConnected)}}function uB(t){return!W2()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?XP:lB}class Ao{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:r,y:n}=this.getProps(["x","y"],e);return{x:r,y:n}}hasValue(){return Cc(this.x)&&Cc(this.y)}getProps(e,r){const n=this.$animations;if(!r||!n)return this;const a={};return e.forEach(i=>{a[i]=n[i]&&n[i].active()?n[i]._to:this[i]}),a}}function cB(t,e){const r=t.options.ticks,n=dB(t),a=Math.min(r.maxTicksLimit||n,n),i=r.major.enabled?fB(e):[],l=i.length,u=i[0],d=i[l-1],h=[];if(l>a)return mB(e,h,i,l/a),h;const p=hB(i,e,a);if(l>0){let b,y;const x=l>1?Math.round((d-u)/(l-1)):null;for(Td(e,h,p,At(x)?0:u-x,u),b=0,y=l-1;b<y;b++)Td(e,h,p,i[b],i[b+1]);return Td(e,h,p,d,At(x)?e.length:d+x),h}return Td(e,h,p),h}function dB(t){const e=t.options.offset,r=t._tickSize(),n=t._length/r+(e?0:1),a=t._maxLength/r;return Math.floor(Math.min(n,a))}function hB(t,e,r){const n=pB(t),a=e.length/r;if(!n)return Math.max(a,1);const i=ZF(n);for(let l=0,u=i.length-1;l<u;l++){const d=i[l];if(d>a)return d}return Math.max(a,1)}function fB(t){const e=[];let r,n;for(r=0,n=t.length;r<n;r++)t[r].major&&e.push(r);return e}function mB(t,e,r,n){let a=0,i=r[0],l;for(n=Math.ceil(n),l=0;l<t.length;l++)l===i&&(e.push(t[l]),a++,i=r[a*n])}function Td(t,e,r,n,a){const i=ht(n,0),l=Math.min(ht(a,t.length),t.length);let u=0,d,h,p;for(r=Math.ceil(r),a&&(d=a-n,r=d/Math.floor(d/r)),p=i;p<0;)u++,p=Math.round(i+u*r);for(h=Math.max(i,0);h<l;h++)h===p&&(e.push(t[h]),u++,p=Math.round(i+u*r))}function pB(t){const e=t.length;let r,n;if(e<2)return!1;for(n=t[0],r=1;r<e;++r)if(t[r]-t[r-1]!==n)return!1;return n}const gB=t=>t==="left"?"right":t==="right"?"left":t,Tv=(t,e,r)=>e==="top"||e==="left"?t[e]+r:t[e]-r,Nv=(t,e)=>Math.min(e||t,t);function Mv(t,e){const r=[],n=t.length/e,a=t.length;let i=0;for(;i<a;i+=n)r.push(t[Math.floor(i)]);return r}function bB(t,e,r){const n=t.ticks.length,a=Math.min(e,n-1),i=t._startPixel,l=t._endPixel,u=1e-6;let d=t.getPixelForTick(a),h;if(!(r&&(n===1?h=Math.max(d-i,l-d):e===0?h=(t.getPixelForTick(1)-d)/2:h=(d-t.getPixelForTick(a-1))/2,d+=a<e?h:-h,d<i-u||d>l+u)))return d}function yB(t,e){Mt(t,r=>{const n=r.gc,a=n.length/2;let i;if(a>e){for(i=0;i<a;++i)delete r.data[n[i]];n.splice(0,a)}})}function Xu(t){return t.drawTicks?t.tickLength:0}function jv(t,e){if(!t.display)return 0;const r=xn(t.font,e),n=_a(t.padding);return(Fr(t.text)?t.text.length:1)*r.lineHeight+n.height}function xB(t,e){return So(t,{scale:e,type:"scale"})}function vB(t,e,r){return So(t,{tick:r,index:e,type:"tick"})}function _B(t,e,r){let n=f7(t);return(r&&e!=="right"||!r&&e==="right")&&(n=gB(n)),n}function wB(t,e,r,n){const{top:a,left:i,bottom:l,right:u,chart:d}=t,{chartArea:h,scales:p}=d;let b=0,y,x,_;const k=l-a,S=u-i;if(t.isHorizontal()){if(x=Fn(n,i,u),yt(r)){const A=Object.keys(r)[0],C=r[A];_=p[A].getPixelForValue(C)+k-e}else r==="center"?_=(h.bottom+h.top)/2+k-e:_=Tv(t,r,e);y=u-i}else{if(yt(r)){const A=Object.keys(r)[0],C=r[A];x=p[A].getPixelForValue(C)-S+e}else r==="center"?x=(h.left+h.right)/2-S+e:x=Tv(t,r,e);_=Fn(n,l,a),b=r==="left"?-ya:ya}return{titleX:x,titleY:_,maxWidth:y,rotation:b}}class Rl extends Ao{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,r){return e}getUserBounds(){let{_userMin:e,_userMax:r,_suggestedMin:n,_suggestedMax:a}=this;return e=Oa(e,Number.POSITIVE_INFINITY),r=Oa(r,Number.NEGATIVE_INFINITY),n=Oa(n,Number.POSITIVE_INFINITY),a=Oa(a,Number.NEGATIVE_INFINITY),{min:Oa(e,n),max:Oa(r,a),minDefined:sa(e),maxDefined:sa(r)}}getMinMax(e){let{min:r,max:n,minDefined:a,maxDefined:i}=this.getUserBounds(),l;if(a&&i)return{min:r,max:n};const u=this.getMatchingVisibleMetas();for(let d=0,h=u.length;d<h;++d)l=u[d].controller.getMinMax(this,e),a||(r=Math.min(r,l.min)),i||(n=Math.max(n,l.max));return r=i&&r>n?n:r,n=a&&r>n?r:n,{min:Oa(r,Oa(n,r)),max:Oa(n,Oa(r,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ht(this.options.beforeUpdate,[this])}update(e,r,n){const{beginAtZero:a,grace:i,ticks:l}=this.options,u=l.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=r,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=CL(this,i,a),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const d=u<this.ticks.length;this._convertTicksToLabels(d?Mv(this.ticks,u):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),l.display&&(l.autoSkip||l.source==="auto")&&(this.ticks=cB(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),d&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,r,n;this.isHorizontal()?(r=this.left,n=this.right):(r=this.top,n=this.bottom,e=!e),this._startPixel=r,this._endPixel=n,this._reversePixels=e,this._length=n-r,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ht(this.options.afterUpdate,[this])}beforeSetDimensions(){Ht(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ht(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Ht(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ht(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const r=this.options.ticks;let n,a,i;for(n=0,a=e.length;n<a;n++)i=e[n],i.label=Ht(r.callback,[i.value,n,e],this)}afterTickToLabelConversion(){Ht(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ht(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,r=e.ticks,n=Nv(this.ticks.length,e.ticks.maxTicksLimit),a=r.minRotation||0,i=r.maxRotation;let l=a,u,d,h;if(!this._isVisible()||!r.display||a>=i||n<=1||!this.isHorizontal()){this.labelRotation=a;return}const p=this._getLabelSizes(),b=p.widest.width,y=p.highest.height,x=Bn(this.chart.width-b,0,this.maxWidth);u=e.offset?this.maxWidth/n:x/(n-1),b+6>u&&(u=x/(n-(e.offset?.5:1)),d=this.maxHeight-Xu(e.grid)-r.padding-jv(e.title,this.chart.options.font),h=Math.sqrt(b*b+y*y),l=QF(Math.min(Math.asin(Bn((p.highest.height+6)/u,-1,1)),Math.asin(Bn(d/h,-1,1))-Math.asin(Bn(y/h,-1,1)))),l=Math.max(a,Math.min(i,l))),this.labelRotation=l}afterCalculateLabelRotation(){Ht(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ht(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:r,options:{ticks:n,title:a,grid:i}}=this,l=this._isVisible(),u=this.isHorizontal();if(l){const d=jv(a,r.options.font);if(u?(e.width=this.maxWidth,e.height=Xu(i)+d):(e.height=this.maxHeight,e.width=Xu(i)+d),n.display&&this.ticks.length){const{first:h,last:p,widest:b,highest:y}=this._getLabelSizes(),x=n.padding*2,_=lo(this.labelRotation),k=Math.cos(_),S=Math.sin(_);if(u){const A=n.mirror?0:S*b.width+k*y.height;e.height=Math.min(this.maxHeight,e.height+A+x)}else{const A=n.mirror?0:k*b.width+S*y.height;e.width=Math.min(this.maxWidth,e.width+A+x)}this._calculatePadding(h,p,S,k)}}this._handleMargins(),u?(this.width=this._length=r.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=r.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,r,n,a){const{ticks:{align:i,padding:l},position:u}=this.options,d=this.labelRotation!==0,h=u!=="top"&&this.axis==="x";if(this.isHorizontal()){const p=this.getPixelForTick(0)-this.left,b=this.right-this.getPixelForTick(this.ticks.length-1);let y=0,x=0;d?h?(y=a*e.width,x=n*r.height):(y=n*e.height,x=a*r.width):i==="start"?x=r.width:i==="end"?y=e.width:i!=="inner"&&(y=e.width/2,x=r.width/2),this.paddingLeft=Math.max((y-p+l)*this.width/(this.width-p),0),this.paddingRight=Math.max((x-b+l)*this.width/(this.width-b),0)}else{let p=r.height/2,b=e.height/2;i==="start"?(p=0,b=e.height):i==="end"&&(p=r.height,b=0),this.paddingTop=p+l,this.paddingBottom=b+l}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ht(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:r}=this.options;return r==="top"||r==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let r,n;for(r=0,n=e.length;r<n;r++)At(e[r].label)&&(e.splice(r,1),n--,r--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const r=this.options.ticks.sampleSize;let n=this.ticks;r<n.length&&(n=Mv(n,r)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,r,n){const{ctx:a,_longestTextCache:i}=this,l=[],u=[],d=Math.floor(r/Nv(r,n));let h=0,p=0,b,y,x,_,k,S,A,C,N,D,j;for(b=0;b<r;b+=d){if(_=e[b].label,k=this._resolveTickFontOptions(b),a.font=S=k.string,A=i[S]=i[S]||{data:{},gc:[]},C=k.lineHeight,N=D=0,!At(_)&&!Fr(_))N=av(a,A.data,A.gc,N,_),D=C;else if(Fr(_))for(y=0,x=_.length;y<x;++y)j=_[y],!At(j)&&!Fr(j)&&(N=av(a,A.data,A.gc,N,j),D+=C);l.push(N),u.push(D),h=Math.max(N,h),p=Math.max(D,p)}yB(i,r);const O=l.indexOf(h),F=u.indexOf(p),R=B=>({width:l[B]||0,height:u[B]||0});return{first:R(0),last:R(r-1),widest:R(O),highest:R(F),widths:l,heights:u}}getLabelForValue(e){return e}getPixelForValue(e,r){return NaN}getValueForPixel(e){}getPixelForTick(e){const r=this.ticks;return e<0||e>r.length-1?null:this.getPixelForValue(r[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const r=this._startPixel+e*this._length;return eL(this._alignToPixels?Wi(this.chart,r,0):r)}getDecimalForPixel(e){const r=(e-this._startPixel)/this._length;return this._reversePixels?1-r:r}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:r}=this;return e<0&&r<0?r:e>0&&r>0?e:0}getContext(e){const r=this.ticks||[];if(e>=0&&e<r.length){const n=r[e];return n.$context||(n.$context=vB(this.getContext(),e,n))}return this.$context||(this.$context=xB(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,r=lo(this.labelRotation),n=Math.abs(Math.cos(r)),a=Math.abs(Math.sin(r)),i=this._getLabelSizes(),l=e.autoSkipPadding||0,u=i?i.widest.width+l:0,d=i?i.highest.height+l:0;return this.isHorizontal()?d*n>u*a?u/n:d/a:d*a<u*n?d/n:u/a}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const r=this.axis,n=this.chart,a=this.options,{grid:i,position:l,border:u}=a,d=i.offset,h=this.isHorizontal(),b=this.ticks.length+(d?1:0),y=Xu(i),x=[],_=u.setContext(this.getContext()),k=_.display?_.width:0,S=k/2,A=function(K){return Wi(n,K,k)};let C,N,D,j,O,F,R,B,V,$,G,le;if(l==="top")C=A(this.bottom),F=this.bottom-y,B=C-S,$=A(e.top)+S,le=e.bottom;else if(l==="bottom")C=A(this.top),$=e.top,le=A(e.bottom)-S,F=C+S,B=this.top+y;else if(l==="left")C=A(this.right),O=this.right-y,R=C-S,V=A(e.left)+S,G=e.right;else if(l==="right")C=A(this.left),V=e.left,G=A(e.right)-S,O=C+S,R=this.left+y;else if(r==="x"){if(l==="center")C=A((e.top+e.bottom)/2+.5);else if(yt(l)){const K=Object.keys(l)[0],ue=l[K];C=A(this.chart.scales[K].getPixelForValue(ue))}$=e.top,le=e.bottom,F=C+S,B=F+y}else if(r==="y"){if(l==="center")C=A((e.left+e.right)/2);else if(yt(l)){const K=Object.keys(l)[0],ue=l[K];C=A(this.chart.scales[K].getPixelForValue(ue))}O=C-S,R=O-y,V=e.left,G=e.right}const ie=ht(a.ticks.maxTicksLimit,b),pe=Math.max(1,Math.ceil(b/ie));for(N=0;N<b;N+=pe){const K=this.getContext(N),ue=i.setContext(K),Ce=u.setContext(K),ze=ue.lineWidth,q=ue.color,ae=Ce.dash||[],we=Ce.dashOffset,be=ue.tickWidth,Se=ue.tickColor,W=ue.tickBorderDash||[],ce=ue.tickBorderDashOffset;D=bB(this,N,d),D!==void 0&&(j=Wi(n,D,ze),h?O=R=V=G=j:F=B=$=le=j,x.push({tx1:O,ty1:F,tx2:R,ty2:B,x1:V,y1:$,x2:G,y2:le,width:ze,color:q,borderDash:ae,borderDashOffset:we,tickWidth:be,tickColor:Se,tickBorderDash:W,tickBorderDashOffset:ce}))}return this._ticksLength=b,this._borderValue=C,x}_computeLabelItems(e){const r=this.axis,n=this.options,{position:a,ticks:i}=n,l=this.isHorizontal(),u=this.ticks,{align:d,crossAlign:h,padding:p,mirror:b}=i,y=Xu(n.grid),x=y+p,_=b?-p:x,k=-lo(this.labelRotation),S=[];let A,C,N,D,j,O,F,R,B,V,$,G,le="middle";if(a==="top")O=this.bottom-_,F=this._getXAxisLabelAlignment();else if(a==="bottom")O=this.top+_,F=this._getXAxisLabelAlignment();else if(a==="left"){const pe=this._getYAxisLabelAlignment(y);F=pe.textAlign,j=pe.x}else if(a==="right"){const pe=this._getYAxisLabelAlignment(y);F=pe.textAlign,j=pe.x}else if(r==="x"){if(a==="center")O=(e.top+e.bottom)/2+x;else if(yt(a)){const pe=Object.keys(a)[0],K=a[pe];O=this.chart.scales[pe].getPixelForValue(K)+x}F=this._getXAxisLabelAlignment()}else if(r==="y"){if(a==="center")j=(e.left+e.right)/2-x;else if(yt(a)){const pe=Object.keys(a)[0],K=a[pe];j=this.chart.scales[pe].getPixelForValue(K)}F=this._getYAxisLabelAlignment(y).textAlign}r==="y"&&(d==="start"?le="top":d==="end"&&(le="bottom"));const ie=this._getLabelSizes();for(A=0,C=u.length;A<C;++A){N=u[A],D=N.label;const pe=i.setContext(this.getContext(A));R=this.getPixelForTick(A)+i.labelOffset,B=this._resolveTickFontOptions(A),V=B.lineHeight,$=Fr(D)?D.length:1;const K=$/2,ue=pe.color,Ce=pe.textStrokeColor,ze=pe.textStrokeWidth;let q=F;l?(j=R,F==="inner"&&(A===C-1?q=this.options.reverse?"left":"right":A===0?q=this.options.reverse?"right":"left":q="center"),a==="top"?h==="near"||k!==0?G=-$*V+V/2:h==="center"?G=-ie.highest.height/2-K*V+V:G=-ie.highest.height+V/2:h==="near"||k!==0?G=V/2:h==="center"?G=ie.highest.height/2-K*V:G=ie.highest.height-$*V,b&&(G*=-1),k!==0&&!pe.showLabelBackdrop&&(j+=V/2*Math.sin(k))):(O=R,G=(1-$)*V/2);let ae;if(pe.showLabelBackdrop){const we=_a(pe.backdropPadding),be=ie.heights[A],Se=ie.widths[A];let W=G-we.top,ce=0-we.left;switch(le){case"middle":W-=be/2;break;case"bottom":W-=be;break}switch(F){case"center":ce-=Se/2;break;case"right":ce-=Se;break;case"inner":A===C-1?ce-=Se:A>0&&(ce-=Se/2);break}ae={left:ce,top:W,width:Se+we.width,height:be+we.height,color:pe.backdropColor}}S.push({label:D,font:B,textOffset:G,options:{rotation:k,color:ue,strokeColor:Ce,strokeWidth:ze,textAlign:q,textBaseline:le,translation:[j,O],backdrop:ae}})}return S}_getXAxisLabelAlignment(){const{position:e,ticks:r}=this.options;if(-lo(this.labelRotation))return e==="top"?"left":"right";let a="center";return r.align==="start"?a="left":r.align==="end"?a="right":r.align==="inner"&&(a="inner"),a}_getYAxisLabelAlignment(e){const{position:r,ticks:{crossAlign:n,mirror:a,padding:i}}=this.options,l=this._getLabelSizes(),u=e+i,d=l.widest.width;let h,p;return r==="left"?a?(p=this.right+i,n==="near"?h="left":n==="center"?(h="center",p+=d/2):(h="right",p+=d)):(p=this.right-u,n==="near"?h="right":n==="center"?(h="center",p-=d/2):(h="left",p=this.left)):r==="right"?a?(p=this.left+i,n==="near"?h="right":n==="center"?(h="center",p-=d/2):(h="left",p-=d)):(p=this.left+u,n==="near"?h="left":n==="center"?(h="center",p+=d/2):(h="right",p=this.right)):h="right",{textAlign:h,x:p}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,r=this.options.position;if(r==="left"||r==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(r==="top"||r==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:r},left:n,top:a,width:i,height:l}=this;r&&(e.save(),e.fillStyle=r,e.fillRect(n,a,i,l),e.restore())}getLineWidthForValue(e){const r=this.options.grid;if(!this._isVisible()||!r.display)return 0;const a=this.ticks.findIndex(i=>i.value===e);return a>=0?r.setContext(this.getContext(a)).lineWidth:0}drawGrid(e){const r=this.options.grid,n=this.ctx,a=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,l;const u=(d,h,p)=>{!p.width||!p.color||(n.save(),n.lineWidth=p.width,n.strokeStyle=p.color,n.setLineDash(p.borderDash||[]),n.lineDashOffset=p.borderDashOffset,n.beginPath(),n.moveTo(d.x,d.y),n.lineTo(h.x,h.y),n.stroke(),n.restore())};if(r.display)for(i=0,l=a.length;i<l;++i){const d=a[i];r.drawOnChartArea&&u({x:d.x1,y:d.y1},{x:d.x2,y:d.y2},d),r.drawTicks&&u({x:d.tx1,y:d.ty1},{x:d.tx2,y:d.ty2},{color:d.tickColor,width:d.tickWidth,borderDash:d.tickBorderDash,borderDashOffset:d.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:r,options:{border:n,grid:a}}=this,i=n.setContext(this.getContext()),l=n.display?i.width:0;if(!l)return;const u=a.setContext(this.getContext(0)).lineWidth,d=this._borderValue;let h,p,b,y;this.isHorizontal()?(h=Wi(e,this.left,l)-l/2,p=Wi(e,this.right,u)+u/2,b=y=d):(b=Wi(e,this.top,l)-l/2,y=Wi(e,this.bottom,u)+u/2,h=p=d),r.save(),r.lineWidth=i.width,r.strokeStyle=i.color,r.beginPath(),r.moveTo(h,b),r.lineTo(p,y),r.stroke(),r.restore()}drawLabels(e){if(!this.options.ticks.display)return;const n=this.ctx,a=this._computeLabelArea();a&&Z2(n,a);const i=this.getLabelItems(e);for(const l of i){const u=l.options,d=l.font,h=l.label,p=l.textOffset;ph(n,h,0,p,d,u)}a&&K2(n)}drawTitle(){const{ctx:e,options:{position:r,title:n,reverse:a}}=this;if(!n.display)return;const i=xn(n.font),l=_a(n.padding),u=n.align;let d=i.lineHeight/2;r==="bottom"||r==="center"||yt(r)?(d+=l.bottom,Fr(n.text)&&(d+=i.lineHeight*(n.text.length-1))):d+=l.top;const{titleX:h,titleY:p,maxWidth:b,rotation:y}=wB(this,d,r,u);ph(e,n.text,0,0,i,{color:n.color,maxWidth:b,rotation:y,textAlign:_B(u,r,a),textBaseline:"middle",translation:[h,p]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,r=e.ticks&&e.ticks.z||0,n=ht(e.grid&&e.grid.z,-1),a=ht(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Rl.prototype.draw?[{z:r,draw:i=>{this.draw(i)}}]:[{z:n,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:a,draw:()=>{this.drawBorder()}},{z:r,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const r=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",a=[];let i,l;for(i=0,l=r.length;i<l;++i){const u=r[i];u[n]===this.id&&(!e||u.type===e)&&a.push(u)}return a}_resolveTickFontOptions(e){const r=this.options.ticks.setContext(this.getContext(e));return xn(r.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Nd{constructor(e,r,n){this.type=e,this.scope=r,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const r=Object.getPrototypeOf(e);let n;AB(r)&&(n=this.register(r));const a=this.items,i=e.id,l=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in a||(a[i]=e,kB(e,l,n),this.override&&gr.override(e.id,e.overrides)),l}get(e){return this.items[e]}unregister(e){const r=this.items,n=e.id,a=this.scope;n in r&&delete r[n],a&&n in gr[a]&&(delete gr[a][n],this.override&&delete vo[n])}}function kB(t,e,r){const n=Ac(Object.create(null),[r?gr.get(r):{},gr.get(e),t.defaults]);gr.set(e,n),t.defaultRoutes&&SB(e,t.defaultRoutes),t.descriptors&&gr.describe(e,t.descriptors)}function SB(t,e){Object.keys(e).forEach(r=>{const n=r.split("."),a=n.pop(),i=[t].concat(n).join("."),l=e[r].split("."),u=l.pop(),d=l.join(".");gr.route(i,a,d,u)})}function AB(t){return"id"in t&&"defaults"in t}class EB{constructor(){this.controllers=new Nd(eg,"datasets",!0),this.elements=new Nd(Ao,"elements"),this.plugins=new Nd(Object,"plugins"),this.scales=new Nd(Rl,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,r,n){[...r].forEach(a=>{const i=n||this._getRegistryForType(a);n||i.isForType(a)||i===this.plugins&&a.id?this._exec(e,i,a):Mt(a,l=>{const u=n||this._getRegistryForType(l);this._exec(e,u,l)})})}_exec(e,r,n){const a=U2(e);Ht(n["before"+a],[],n),r[e](n),Ht(n["after"+a],[],n)}_getRegistryForType(e){for(let r=0;r<this._typedRegistries.length;r++){const n=this._typedRegistries[r];if(n.isForType(e))return n}return this.plugins}_get(e,r,n){const a=r.get(e);if(a===void 0)throw new Error('"'+e+'" is not a registered '+n+".");return a}}var Fa=new EB;class CB{constructor(){this._init=[]}notify(e,r,n,a){r==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=a?this._descriptors(e).filter(a):this._descriptors(e),l=this._notify(i,e,r,n);return r==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),l}_notify(e,r,n,a){a=a||{};for(const i of e){const l=i.plugin,u=l[n],d=[r,a,i.options];if(Ht(u,d,l)===!1&&a.cancelable)return!1}return!0}invalidate(){At(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const r=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),r}_createDescriptors(e,r){const n=e&&e.config,a=ht(n.options&&n.options.plugins,{}),i=TB(n);return a===!1&&!r?[]:MB(e,i,a,r)}_notifyStateChanges(e){const r=this._oldCache||[],n=this._cache,a=(i,l)=>i.filter(u=>!l.some(d=>u.plugin.id===d.plugin.id));this._notify(a(r,n),e,"stop"),this._notify(a(n,r),e,"start")}}function TB(t){const e={},r=[],n=Object.keys(Fa.plugins.items);for(let i=0;i<n.length;i++)r.push(Fa.getPlugin(n[i]));const a=t.plugins||[];for(let i=0;i<a.length;i++){const l=a[i];r.indexOf(l)===-1&&(r.push(l),e[l.id]=!0)}return{plugins:r,localIds:e}}function NB(t,e){return!e&&t===!1?null:t===!0?{}:t}function MB(t,{plugins:e,localIds:r},n,a){const i=[],l=t.getContext();for(const u of e){const d=u.id,h=NB(n[d],a);h!==null&&i.push({plugin:u,options:jB(t.config,{plugin:u,local:r[d]},h,l)})}return i}function jB(t,{plugin:e,local:r},n,a){const i=t.pluginScopeKeys(e),l=t.getOptionScopes(n,i);return r&&e.defaults&&l.push(e.defaults),t.createResolver(l,a,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Bp(t,e){const r=gr.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||r.indexAxis||"x"}function DB(t,e){let r=t;return t==="_index_"?r=e:t==="_value_"&&(r=e==="x"?"y":"x"),r}function zB(t,e){return t===e?"_index_":"_value_"}function Dv(t){if(t==="x"||t==="y"||t==="r")return t}function OB(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Ip(t,...e){if(Dv(t))return t;for(const r of e){const n=r.axis||OB(r.position)||t.length>1&&Dv(t[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function zv(t,e,r){if(r[e+"AxisID"]===t)return{axis:e}}function RB(t,e){if(e.data&&e.data.datasets){const r=e.data.datasets.filter(n=>n.xAxisID===t||n.yAxisID===t);if(r.length)return zv(t,"x",r[0])||zv(t,"y",r[0])}return{}}function FB(t,e){const r=vo[t.type]||{scales:{}},n=e.scales||{},a=Bp(t.type,e),i=Object.create(null);return Object.keys(n).forEach(l=>{const u=n[l];if(!yt(u))return console.error(`Invalid scale configuration for scale: ${l}`);if(u._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${l}`);const d=Ip(l,u,RB(l,t),gr.scales[u.type]),h=zB(d,a),p=r.scales||{};i[l]=lc(Object.create(null),[{axis:d},u,p[d],p[h]])}),t.data.datasets.forEach(l=>{const u=l.type||t.type,d=l.indexAxis||Bp(u,e),p=(vo[u]||{}).scales||{};Object.keys(p).forEach(b=>{const y=DB(b,d),x=l[y+"AxisID"]||y;i[x]=i[x]||Object.create(null),lc(i[x],[{axis:y},n[x],p[b]])})}),Object.keys(i).forEach(l=>{const u=i[l];lc(u,[gr.scales[u.type],gr.scale])}),i}function R7(t){const e=t.options||(t.options={});e.plugins=ht(e.plugins,{}),e.scales=FB(t,e)}function F7(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function LB(t){return t=t||{},t.data=F7(t.data),R7(t),t}const Ov=new Map,L7=new Set;function Md(t,e){let r=Ov.get(t);return r||(r=e(),Ov.set(t,r),L7.add(r)),r}const Qu=(t,e,r)=>{const n=El(e,r);n!==void 0&&t.add(n)};class PB{constructor(e){this._config=LB(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=F7(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),R7(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Md(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,r){return Md(`${e}.transition.${r}`,()=>[[`datasets.${e}.transitions.${r}`,`transitions.${r}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,r){return Md(`${e}-${r}`,()=>[[`datasets.${e}.elements.${r}`,`datasets.${e}`,`elements.${r}`,""]])}pluginScopeKeys(e){const r=e.id,n=this.type;return Md(`${n}-plugin-${r}`,()=>[[`plugins.${r}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,r){const n=this._scopeCache;let a=n.get(e);return(!a||r)&&(a=new Map,n.set(e,a)),a}getOptionScopes(e,r,n){const{options:a,type:i}=this,l=this._cachedScopes(e,n),u=l.get(r);if(u)return u;const d=new Set;r.forEach(p=>{e&&(d.add(e),p.forEach(b=>Qu(d,e,b))),p.forEach(b=>Qu(d,a,b)),p.forEach(b=>Qu(d,vo[i]||{},b)),p.forEach(b=>Qu(d,gr,b)),p.forEach(b=>Qu(d,Lp,b))});const h=Array.from(d);return h.length===0&&h.push(Object.create(null)),L7.has(r)&&l.set(r,h),h}chartOptionScopes(){const{options:e,type:r}=this;return[e,vo[r]||{},gr.datasets[r]||{},{type:r},gr,Lp]}resolveNamedOptions(e,r,n,a=[""]){const i={$shared:!0},{resolver:l,subPrefixes:u}=Rv(this._resolverCache,e,a);let d=l;if(IB(l,r)){i.$shared=!1,n=Ti(n)?n():n;const h=this.createResolver(e,n,u);d=Cl(l,n,h)}for(const h of r)i[h]=d[h];return i}createResolver(e,r,n=[""],a){const{resolver:i}=Rv(this._resolverCache,e,n);return yt(r)?Cl(i,r,void 0,a):i}}function Rv(t,e,r){let n=t.get(e);n||(n=new Map,t.set(e,n));const a=r.join();let i=n.get(a);return i||(i={resolver:Y2(e,r),subPrefixes:r.filter(u=>!u.toLowerCase().includes("hover"))},n.set(a,i)),i}const BB=t=>yt(t)&&Object.getOwnPropertyNames(t).some(e=>Ti(t[e]));function IB(t,e){const{isScriptable:r,isIndexable:n}=x7(t);for(const a of e){const i=r(a),l=n(a),u=(l||i)&&t[a];if(i&&(Ti(u)||BB(u))||l&&Fr(u))return!0}return!1}var $B="4.5.0";const qB=["top","bottom","left","right","chartArea"];function Fv(t,e){return t==="top"||t==="bottom"||qB.indexOf(t)===-1&&e==="x"}function Lv(t,e){return function(r,n){return r[t]===n[t]?r[e]-n[e]:r[t]-n[t]}}function Pv(t){const e=t.chart,r=e.options.animation;e.notifyPlugins("afterRender"),Ht(r&&r.onComplete,[t],e)}function HB(t){const e=t.chart,r=e.options.animation;Ht(r&&r.onProgress,[t],e)}function P7(t){return W2()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Xd={},Bv=t=>{const e=P7(t);return Object.values(Xd).filter(r=>r.canvas===e).pop()};function UB(t,e,r){const n=Object.keys(t);for(const a of n){const i=+a;if(i>=e){const l=t[a];delete t[a],(r>0||i>e)&&(t[i+r]=l)}}}function VB(t,e,r,n){return!r||t.type==="mouseout"?null:n?e:t}let Uc=class{static defaults=gr;static instances=Xd;static overrides=vo;static registry=Fa;static version=$B;static getChart=Bv;static register(...e){Fa.add(...e),Iv()}static unregister(...e){Fa.remove(...e),Iv()}constructor(e,r){const n=this.config=new PB(r),a=P7(e),i=Bv(a);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const l=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||uB(a)),this.platform.updateConfig(n);const u=this.platform.acquireContext(a,l.aspectRatio),d=u&&u.canvas,h=d&&d.height,p=d&&d.width;if(this.id=PF(),this.ctx=u,this.canvas=d,this.width=p,this.height=h,this._options=l,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new CB,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=aL(b=>this.update(b),l.resizeDelay||0),this._dataChanges=[],Xd[this.id]=this,!u||!d){console.error("Failed to create chart: can't acquire context from the given item");return}ws.listen(this,"complete",Pv),ws.listen(this,"progress",HB),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:r},width:n,height:a,_aspectRatio:i}=this;return At(e)?r&&i?i:a?n/a:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Fa}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():lv(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return sv(this.canvas,this.ctx),this}stop(){return ws.stop(this),this}resize(e,r){ws.running(this)?this._resizeBeforeDraw={width:e,height:r}:this._resize(e,r)}_resize(e,r){const n=this.options,a=this.canvas,i=n.maintainAspectRatio&&this.aspectRatio,l=this.platform.getMaximumSize(a,e,r,i),u=n.devicePixelRatio||this.platform.getDevicePixelRatio(),d=this.width?"resize":"attach";this.width=l.width,this.height=l.height,this._aspectRatio=this.aspectRatio,lv(this,u,!0)&&(this.notifyPlugins("resize",{size:l}),Ht(n.onResize,[this,l],this),this.attached&&this._doResize(d)&&this.render())}ensureScalesHaveIDs(){const r=this.options.scales||{};Mt(r,(n,a)=>{n.id=a})}buildOrUpdateScales(){const e=this.options,r=e.scales,n=this.scales,a=Object.keys(n).reduce((l,u)=>(l[u]=!1,l),{});let i=[];r&&(i=i.concat(Object.keys(r).map(l=>{const u=r[l],d=Ip(l,u),h=d==="r",p=d==="x";return{options:u,dposition:h?"chartArea":p?"bottom":"left",dtype:h?"radialLinear":p?"category":"linear"}}))),Mt(i,l=>{const u=l.options,d=u.id,h=Ip(d,u),p=ht(u.type,l.dtype);(u.position===void 0||Fv(u.position,h)!==Fv(l.dposition))&&(u.position=l.dposition),a[d]=!0;let b=null;if(d in n&&n[d].type===p)b=n[d];else{const y=Fa.getScale(p);b=new y({id:d,type:p,ctx:this.ctx,chart:this}),n[b.id]=b}b.init(u,e)}),Mt(a,(l,u)=>{l||delete n[u]}),Mt(n,l=>{yi.configure(this,l,l.options),yi.addBox(this,l)})}_updateMetasets(){const e=this._metasets,r=this.data.datasets.length,n=e.length;if(e.sort((a,i)=>a.index-i.index),n>r){for(let a=r;a<n;++a)this._destroyDatasetMeta(a);e.splice(r,n-r)}this._sortedMetasets=e.slice(0).sort(Lv("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:r}}=this;e.length>r.length&&delete this._stacks,e.forEach((n,a)=>{r.filter(i=>i===n._dataset).length===0&&this._destroyDatasetMeta(a)})}buildOrUpdateControllers(){const e=[],r=this.data.datasets;let n,a;for(this._removeUnreferencedMetasets(),n=0,a=r.length;n<a;n++){const i=r[n];let l=this.getDatasetMeta(n);const u=i.type||this.config.type;if(l.type&&l.type!==u&&(this._destroyDatasetMeta(n),l=this.getDatasetMeta(n)),l.type=u,l.indexAxis=i.indexAxis||Bp(u,this.options),l.order=i.order||0,l.index=n,l.label=""+i.label,l.visible=this.isDatasetVisible(n),l.controller)l.controller.updateIndex(n),l.controller.linkScales();else{const d=Fa.getController(u),{datasetElementType:h,dataElementType:p}=gr.datasets[u];Object.assign(d,{dataElementType:Fa.getElement(p),datasetElementType:h&&Fa.getElement(h)}),l.controller=new d(this,n),e.push(l.controller)}}return this._updateMetasets(),e}_resetElements(){Mt(this.data.datasets,(e,r)=>{this.getDatasetMeta(r).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const r=this.config;r.update();const n=this._options=r.createResolver(r.chartOptionScopes(),this.getContext()),a=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let l=0;for(let h=0,p=this.data.datasets.length;h<p;h++){const{controller:b}=this.getDatasetMeta(h),y=!a&&i.indexOf(b)===-1;b.buildOrUpdateElements(y),l=Math.max(+b.getMaxOverflow(),l)}l=this._minPadding=n.layout.autoPadding?l:0,this._updateLayout(l),a||Mt(i,h=>{h.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Lv("z","_idx"));const{_active:u,_lastEvent:d}=this;d?this._eventHandler(d,!0):u.length&&this._updateHoverStyles(u,u,!0),this.render()}_updateScales(){Mt(this.scales,e=>{yi.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,r=new Set(Object.keys(this._listeners)),n=new Set(e.events);(!Y3(r,n)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,r=this._getUniformDataChanges()||[];for(const{method:n,start:a,count:i}of r){const l=n==="_removeElements"?-i:i;UB(e,a,l)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const r=this.data.datasets.length,n=i=>new Set(e.filter(l=>l[0]===i).map((l,u)=>u+","+l.splice(1).join(","))),a=n(0);for(let i=1;i<r;i++)if(!Y3(a,n(i)))return;return Array.from(a).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;yi.update(this,this.width,this.height,e);const r=this.chartArea,n=r.width<=0||r.height<=0;this._layers=[],Mt(this.boxes,a=>{n&&a.position==="chartArea"||(a.configure&&a.configure(),this._layers.push(...a._layers()))},this),this._layers.forEach((a,i)=>{a._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let r=0,n=this.data.datasets.length;r<n;++r)this.getDatasetMeta(r).controller.configure();for(let r=0,n=this.data.datasets.length;r<n;++r)this._updateDataset(r,Ti(e)?e({datasetIndex:r}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,r){const n=this.getDatasetMeta(e),a={meta:n,index:e,mode:r,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",a)!==!1&&(n.controller._update(r),a.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",a))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ws.has(this)?this.attached&&!ws.running(this)&&ws.start(this):(this.draw(),Pv({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:n,height:a}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,a)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const r=this._layers;for(e=0;e<r.length&&r[e].z<=0;++e)r[e].draw(this.chartArea);for(this._drawDatasets();e<r.length;++e)r[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const r=this._sortedMetasets,n=[];let a,i;for(a=0,i=r.length;a<i;++a){const l=r[a];(!e||l.visible)&&n.push(l)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let r=e.length-1;r>=0;--r)this._drawDataset(e[r]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const r=this.ctx,n={meta:e,index:e.index,cancelable:!0},a=cP(this,e);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(a&&Z2(r,a),e.controller.draw(),a&&K2(r),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return Tc(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,r,n,a){const i=qP.modes[r];return typeof i=="function"?i(this,e,n,a):[]}getDatasetMeta(e){const r=this.data.datasets[e],n=this._metasets;let a=n.filter(i=>i&&i._dataset===r).pop();return a||(a={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:r&&r.order||0,index:e,_dataset:r,_parsed:[],_sorted:!1},n.push(a)),a}getContext(){return this.$context||(this.$context=So(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const r=this.data.datasets[e];if(!r)return!1;const n=this.getDatasetMeta(e);return typeof n.hidden=="boolean"?!n.hidden:!r.hidden}setDatasetVisibility(e,r){const n=this.getDatasetMeta(e);n.hidden=!r}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,r,n){const a=n?"show":"hide",i=this.getDatasetMeta(e),l=i.controller._resolveAnimations(void 0,a);Ec(r)?(i.data[r].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),l.update(i,{visible:n}),this.update(u=>u.datasetIndex===e?a:void 0))}hide(e,r){this._updateVisibility(e,r,!1)}show(e,r){this._updateVisibility(e,r,!0)}_destroyDatasetMeta(e){const r=this._metasets[e];r&&r.controller&&r.controller._destroy(),delete this._metasets[e]}_stop(){let e,r;for(this.stop(),ws.remove(this),e=0,r=this.data.datasets.length;e<r;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:r}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),sv(e,r),this.platform.releaseContext(r),this.canvas=null,this.ctx=null),delete Xd[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,r=this.platform,n=(i,l)=>{r.addEventListener(this,i,l),e[i]=l},a=(i,l,u)=>{i.offsetX=l,i.offsetY=u,this._eventHandler(i)};Mt(this.options.events,i=>n(i,a))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,r=this.platform,n=(d,h)=>{r.addEventListener(this,d,h),e[d]=h},a=(d,h)=>{e[d]&&(r.removeEventListener(this,d,h),delete e[d])},i=(d,h)=>{this.canvas&&this.resize(d,h)};let l;const u=()=>{a("attach",u),this.attached=!0,this.resize(),n("resize",i),n("detach",l)};l=()=>{this.attached=!1,a("resize",i),this._stop(),this._resize(0,0),n("attach",u)},r.isAttached(this.canvas)?u():l()}unbindEvents(){Mt(this._listeners,(e,r)=>{this.platform.removeEventListener(this,r,e)}),this._listeners={},Mt(this._responsiveListeners,(e,r)=>{this.platform.removeEventListener(this,r,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,r,n){const a=n?"set":"remove";let i,l,u,d;for(r==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+a+"DatasetHoverStyle"]()),u=0,d=e.length;u<d;++u){l=e[u];const h=l&&this.getDatasetMeta(l.datasetIndex).controller;h&&h[a+"HoverStyle"](l.element,l.datasetIndex,l.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const r=this._active||[],n=e.map(({datasetIndex:i,index:l})=>{const u=this.getDatasetMeta(i);if(!u)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:u.data[l],index:l}});!hh(n,r)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,r))}notifyPlugins(e,r,n){return this._plugins.notify(this,e,r,n)}isPluginEnabled(e){return this._plugins._cache.filter(r=>r.plugin.id===e).length===1}_updateHoverStyles(e,r,n){const a=this.options.hover,i=(d,h)=>d.filter(p=>!h.some(b=>p.datasetIndex===b.datasetIndex&&p.index===b.index)),l=i(r,e),u=n?e:i(e,r);l.length&&this.updateHoverStyle(l,a.mode,!1),u.length&&a.mode&&this.updateHoverStyle(u,a.mode,!0)}_eventHandler(e,r){const n={event:e,replay:r,cancelable:!0,inChartArea:this.isPointInArea(e)},a=l=>(l.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",n,a)===!1)return;const i=this._handleEvent(e,r,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,a),(i||n.changed)&&this.render(),this}_handleEvent(e,r,n){const{_active:a=[],options:i}=this,l=r,u=this._getActiveElements(e,a,n,l),d=UF(e),h=VB(e,this._lastEvent,n,d);n&&(this._lastEvent=null,Ht(i.onHover,[e,u,this],this),d&&Ht(i.onClick,[e,u,this],this));const p=!hh(u,a);return(p||r)&&(this._active=u,this._updateHoverStyles(u,a,r)),this._lastEvent=h,p}_getActiveElements(e,r,n,a){if(e.type==="mouseout")return[];if(!n)return r;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,a)}};function Iv(){return Mt(Uc.instances,t=>t._plugins.invalidate())}function B7(t,e,r=e){t.lineCap=ht(r.borderCapStyle,e.borderCapStyle),t.setLineDash(ht(r.borderDash,e.borderDash)),t.lineDashOffset=ht(r.borderDashOffset,e.borderDashOffset),t.lineJoin=ht(r.borderJoinStyle,e.borderJoinStyle),t.lineWidth=ht(r.borderWidth,e.borderWidth),t.strokeStyle=ht(r.borderColor,e.borderColor)}function GB(t,e,r){t.lineTo(r.x,r.y)}function ZB(t){return t.stepped?yL:t.tension||t.cubicInterpolationMode==="monotone"?xL:GB}function I7(t,e,r={}){const n=t.length,{start:a=0,end:i=n-1}=r,{start:l,end:u}=e,d=Math.max(a,l),h=Math.min(i,u),p=a<l&&i<l||a>u&&i>u;return{count:n,start:d,loop:e.loop,ilen:h<d&&!p?n+h-d:h-d}}function KB(t,e,r,n){const{points:a,options:i}=e,{count:l,start:u,loop:d,ilen:h}=I7(a,r,n),p=ZB(i);let{move:b=!0,reverse:y}=n||{},x,_,k;for(x=0;x<=h;++x)_=a[(u+(y?h-x:x))%l],!_.skip&&(b?(t.moveTo(_.x,_.y),b=!1):p(t,k,_,y,i.stepped),k=_);return d&&(_=a[(u+(y?h:0))%l],p(t,k,_,y,i.stepped)),!!d}function YB(t,e,r,n){const a=e.points,{count:i,start:l,ilen:u}=I7(a,r,n),{move:d=!0,reverse:h}=n||{};let p=0,b=0,y,x,_,k,S,A;const C=D=>(l+(h?u-D:D))%i,N=()=>{k!==S&&(t.lineTo(p,S),t.lineTo(p,k),t.lineTo(p,A))};for(d&&(x=a[C(0)],t.moveTo(x.x,x.y)),y=0;y<=u;++y){if(x=a[C(y)],x.skip)continue;const D=x.x,j=x.y,O=D|0;O===_?(j<k?k=j:j>S&&(S=j),p=(b*p+D)/++b):(N(),t.lineTo(D,j),_=O,b=0,k=S=j),A=j}N()}function $p(t){const e=t.options,r=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!r?YB:KB}function XB(t){return t.stepped?QL:t.tension||t.cubicInterpolationMode==="monotone"?WL:no}function QB(t,e,r,n){let a=e._path;a||(a=e._path=new Path2D,e.path(a,r,n)&&a.closePath()),B7(t,e.options),t.stroke(a)}function WB(t,e,r,n){const{segments:a,options:i}=e,l=$p(e);for(const u of a)B7(t,i,u.style),t.beginPath(),l(t,e,u,{start:r,end:r+n-1})&&t.closePath(),t.stroke()}const JB=typeof Path2D=="function";function eI(t,e,r,n){JB&&!e.options.segment?QB(t,e,r,n):WB(t,e,r,n)}class tI extends Ao{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,r){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const a=n.spanGaps?this._loop:this._fullLoop;HL(this._points,n,e,a,r),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=iP(this,this.options.segment))}first(){const e=this.segments,r=this.points;return e.length&&r[e[0].start]}last(){const e=this.segments,r=this.points,n=e.length;return n&&r[e[n-1].end]}interpolate(e,r){const n=this.options,a=e[r],i=this.points,l=nP(this,{property:r,start:a,end:a});if(!l.length)return;const u=[],d=XB(n);let h,p;for(h=0,p=l.length;h<p;++h){const{start:b,end:y}=l[h],x=i[b],_=i[y];if(x===_){u.push(x);continue}const k=Math.abs((a-x[r])/(_[r]-x[r])),S=d(x,_,k,n.stepped);S[r]=e[r],u.push(S)}return u.length===1?u[0]:u}pathSegment(e,r,n){return $p(this)(e,this,r,n)}path(e,r,n){const a=this.segments,i=$p(this);let l=this._loop;r=r||0,n=n||this.points.length-r;for(const u of a)l&=i(e,this,u,{start:r,end:r+n-1});return!!l}draw(e,r,n,a){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),eI(e,this,n,a),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function $v(t,e,r,n){const a=t.options,{[r]:i}=t.getProps([r],n);return Math.abs(e-i)<a.radius+a.hitRadius}class rI extends Ao{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,r,n){const a=this.options,{x:i,y:l}=this.getProps(["x","y"],n);return Math.pow(e-i,2)+Math.pow(r-l,2)<Math.pow(a.hitRadius+a.radius,2)}inXRange(e,r){return $v(this,e,"x",r)}inYRange(e,r){return $v(this,e,"y",r)}getCenterPoint(e){const{x:r,y:n}=this.getProps(["x","y"],e);return{x:r,y:n}}size(e){e=e||this.options||{};let r=e.radius||0;r=Math.max(r,r&&e.hoverRadius||0);const n=r&&e.borderWidth||0;return(r+n)*2}draw(e,r){const n=this.options;this.skip||n.radius<.1||!Tc(this,r,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,Pp(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function $7(t,e){const{x:r,y:n,base:a,width:i,height:l}=t.getProps(["x","y","base","width","height"],e);let u,d,h,p,b;return t.horizontal?(b=l/2,u=Math.min(r,a),d=Math.max(r,a),h=n-b,p=n+b):(b=i/2,u=r-b,d=r+b,h=Math.min(n,a),p=Math.max(n,a)),{left:u,top:h,right:d,bottom:p}}function xi(t,e,r,n){return t?0:Bn(e,r,n)}function nI(t,e,r){const n=t.options.borderWidth,a=t.borderSkipped,i=y7(n);return{t:xi(a.top,i.top,0,r),r:xi(a.right,i.right,0,e),b:xi(a.bottom,i.bottom,0,r),l:xi(a.left,i.left,0,e)}}function aI(t,e,r){const{enableBorderRadius:n}=t.getProps(["enableBorderRadius"]),a=t.options.borderRadius,i=gl(a),l=Math.min(e,r),u=t.borderSkipped,d=n||yt(a);return{topLeft:xi(!d||u.top||u.left,i.topLeft,0,l),topRight:xi(!d||u.top||u.right,i.topRight,0,l),bottomLeft:xi(!d||u.bottom||u.left,i.bottomLeft,0,l),bottomRight:xi(!d||u.bottom||u.right,i.bottomRight,0,l)}}function sI(t){const e=$7(t),r=e.right-e.left,n=e.bottom-e.top,a=nI(t,r/2,n/2),i=aI(t,r/2,n/2);return{outer:{x:e.left,y:e.top,w:r,h:n,radius:i},inner:{x:e.left+a.l,y:e.top+a.t,w:r-a.l-a.r,h:n-a.t-a.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(a.t,a.l)),topRight:Math.max(0,i.topRight-Math.max(a.t,a.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(a.b,a.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(a.b,a.r))}}}}function Vm(t,e,r,n){const a=e===null,i=r===null,u=t&&!(a&&i)&&$7(t,n);return u&&(a||uo(e,u.left,u.right))&&(i||uo(r,u.top,u.bottom))}function iI(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function oI(t,e){t.rect(e.x,e.y,e.w,e.h)}function Gm(t,e,r={}){const n=t.x!==r.x?-e:0,a=t.y!==r.y?-e:0,i=(t.x+t.w!==r.x+r.w?e:0)-n,l=(t.y+t.h!==r.y+r.h?e:0)-a;return{x:t.x+n,y:t.y+a,w:t.w+i,h:t.h+l,radius:t.radius}}class lI extends Ao{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:r,options:{borderColor:n,backgroundColor:a}}=this,{inner:i,outer:l}=sI(this),u=iI(l.radius)?gh:oI;e.save(),(l.w!==i.w||l.h!==i.h)&&(e.beginPath(),u(e,Gm(l,r,i)),e.clip(),u(e,Gm(i,-r,l)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),u(e,Gm(i,r)),e.fillStyle=a,e.fill(),e.restore()}inRange(e,r,n){return Vm(this,e,r,n)}inXRange(e,r){return Vm(this,e,null,r)}inYRange(e,r){return Vm(this,null,e,r)}getCenterPoint(e){const{x:r,y:n,base:a,horizontal:i}=this.getProps(["x","y","base","horizontal"],e);return{x:i?(r+a)/2:r,y:i?n:(n+a)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}const qv=(t,e)=>{let{boxHeight:r=e,boxWidth:n=e}=t;return t.usePointStyle&&(r=Math.min(r,e),n=t.pointStyleWidth||Math.min(n,e)),{boxWidth:n,boxHeight:r,itemHeight:Math.max(e,r)}},uI=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class Hv extends Ao{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,r,n){this.maxWidth=e,this.maxHeight=r,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let r=Ht(e.generateLabels,[this.chart],this)||[];e.filter&&(r=r.filter(n=>e.filter(n,this.chart.data))),e.sort&&(r=r.sort((n,a)=>e.sort(n,a,this.chart.data))),this.options.reverse&&r.reverse(),this.legendItems=r}fit(){const{options:e,ctx:r}=this;if(!e.display){this.width=this.height=0;return}const n=e.labels,a=xn(n.font),i=a.size,l=this._computeTitleHeight(),{boxWidth:u,itemHeight:d}=qv(n,i);let h,p;r.font=a.string,this.isHorizontal()?(h=this.maxWidth,p=this._fitRows(l,i,u,d)+10):(p=this.maxHeight,h=this._fitCols(l,a,u,d)+10),this.width=Math.min(h,e.maxWidth||this.maxWidth),this.height=Math.min(p,e.maxHeight||this.maxHeight)}_fitRows(e,r,n,a){const{ctx:i,maxWidth:l,options:{labels:{padding:u}}}=this,d=this.legendHitBoxes=[],h=this.lineWidths=[0],p=a+u;let b=e;i.textAlign="left",i.textBaseline="middle";let y=-1,x=-p;return this.legendItems.forEach((_,k)=>{const S=n+r/2+i.measureText(_.text).width;(k===0||h[h.length-1]+S+2*u>l)&&(b+=p,h[h.length-(k>0?0:1)]=0,x+=p,y++),d[k]={left:0,top:x,row:y,width:S,height:a},h[h.length-1]+=S+u}),b}_fitCols(e,r,n,a){const{ctx:i,maxHeight:l,options:{labels:{padding:u}}}=this,d=this.legendHitBoxes=[],h=this.columnSizes=[],p=l-e;let b=u,y=0,x=0,_=0,k=0;return this.legendItems.forEach((S,A)=>{const{itemWidth:C,itemHeight:N}=cI(n,r,i,S,a);A>0&&x+N+2*u>p&&(b+=y+u,h.push({width:y,height:x}),_+=y+u,k++,y=x=0),d[A]={left:_,top:x,col:k,width:C,height:N},y=Math.max(y,C),x+=N+u}),b+=y,h.push({width:y,height:x}),b}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:r,options:{align:n,labels:{padding:a},rtl:i}}=this,l=bl(i,this.left,this.width);if(this.isHorizontal()){let u=0,d=Fn(n,this.left+a,this.right-this.lineWidths[u]);for(const h of r)u!==h.row&&(u=h.row,d=Fn(n,this.left+a,this.right-this.lineWidths[u])),h.top+=this.top+e+a,h.left=l.leftForLtr(l.x(d),h.width),d+=h.width+a}else{let u=0,d=Fn(n,this.top+e+a,this.bottom-this.columnSizes[u].height);for(const h of r)h.col!==u&&(u=h.col,d=Fn(n,this.top+e+a,this.bottom-this.columnSizes[u].height)),h.top=d,h.left+=this.left+a,h.left=l.leftForLtr(l.x(h.left),h.width),d+=h.height+a}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Z2(e,this),this._draw(),K2(e)}}_draw(){const{options:e,columnSizes:r,lineWidths:n,ctx:a}=this,{align:i,labels:l}=e,u=gr.color,d=bl(e.rtl,this.left,this.width),h=xn(l.font),{padding:p}=l,b=h.size,y=b/2;let x;this.drawTitle(),a.textAlign=d.textAlign("left"),a.textBaseline="middle",a.lineWidth=.5,a.font=h.string;const{boxWidth:_,boxHeight:k,itemHeight:S}=qv(l,b),A=function(O,F,R){if(isNaN(_)||_<=0||isNaN(k)||k<0)return;a.save();const B=ht(R.lineWidth,1);if(a.fillStyle=ht(R.fillStyle,u),a.lineCap=ht(R.lineCap,"butt"),a.lineDashOffset=ht(R.lineDashOffset,0),a.lineJoin=ht(R.lineJoin,"miter"),a.lineWidth=B,a.strokeStyle=ht(R.strokeStyle,u),a.setLineDash(ht(R.lineDash,[])),l.usePointStyle){const V={radius:k*Math.SQRT2/2,pointStyle:R.pointStyle,rotation:R.rotation,borderWidth:B},$=d.xPlus(O,_/2),G=F+y;g7(a,V,$,G,l.pointStyleWidth&&_)}else{const V=F+Math.max((b-k)/2,0),$=d.leftForLtr(O,_),G=gl(R.borderRadius);a.beginPath(),Object.values(G).some(le=>le!==0)?gh(a,{x:$,y:V,w:_,h:k,radius:G}):a.rect($,V,_,k),a.fill(),B!==0&&a.stroke()}a.restore()},C=function(O,F,R){ph(a,R.text,O,F+S/2,h,{strikethrough:R.hidden,textAlign:d.textAlign(R.textAlign)})},N=this.isHorizontal(),D=this._computeTitleHeight();N?x={x:Fn(i,this.left+p,this.right-n[0]),y:this.top+p+D,line:0}:x={x:this.left+p,y:Fn(i,this.top+D+p,this.bottom-r[0].height),line:0},S7(this.ctx,e.textDirection);const j=S+p;this.legendItems.forEach((O,F)=>{a.strokeStyle=O.fontColor,a.fillStyle=O.fontColor;const R=a.measureText(O.text).width,B=d.textAlign(O.textAlign||(O.textAlign=l.textAlign)),V=_+y+R;let $=x.x,G=x.y;d.setWidth(this.width),N?F>0&&$+V+p>this.right&&(G=x.y+=j,x.line++,$=x.x=Fn(i,this.left+p,this.right-n[x.line])):F>0&&G+j>this.bottom&&($=x.x=$+r[x.line].width+p,x.line++,G=x.y=Fn(i,this.top+D+p,this.bottom-r[x.line].height));const le=d.x($);if(A(le,G,O),$=sL(B,$+_+y,N?$+V:this.right,e.rtl),C(d.x($),G,O),N)x.x+=V+p;else if(typeof O.text!="string"){const ie=h.lineHeight;x.y+=q7(O,ie)+p}else x.y+=j}),A7(this.ctx,e.textDirection)}drawTitle(){const e=this.options,r=e.title,n=xn(r.font),a=_a(r.padding);if(!r.display)return;const i=bl(e.rtl,this.left,this.width),l=this.ctx,u=r.position,d=n.size/2,h=a.top+d;let p,b=this.left,y=this.width;if(this.isHorizontal())y=Math.max(...this.lineWidths),p=this.top+h,b=Fn(e.align,b,this.right-y);else{const _=this.columnSizes.reduce((k,S)=>Math.max(k,S.height),0);p=h+Fn(e.align,this.top,this.bottom-_-e.labels.padding-this._computeTitleHeight())}const x=Fn(u,b,b+y);l.textAlign=i.textAlign(f7(u)),l.textBaseline="middle",l.strokeStyle=r.color,l.fillStyle=r.color,l.font=n.string,ph(l,r.text,x,p,n)}_computeTitleHeight(){const e=this.options.title,r=xn(e.font),n=_a(e.padding);return e.display?r.lineHeight+n.height:0}_getLegendItemAt(e,r){let n,a,i;if(uo(e,this.left,this.right)&&uo(r,this.top,this.bottom)){for(i=this.legendHitBoxes,n=0;n<i.length;++n)if(a=i[n],uo(e,a.left,a.left+a.width)&&uo(r,a.top,a.top+a.height))return this.legendItems[n]}return null}handleEvent(e){const r=this.options;if(!fI(e.type,r))return;const n=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const a=this._hoveredItem,i=uI(a,n);a&&!i&&Ht(r.onLeave,[e,a,this],this),this._hoveredItem=n,n&&!i&&Ht(r.onHover,[e,n,this],this)}else n&&Ht(r.onClick,[e,n,this],this)}}function cI(t,e,r,n,a){const i=dI(n,t,e,r),l=hI(a,n,e.lineHeight);return{itemWidth:i,itemHeight:l}}function dI(t,e,r,n){let a=t.text;return a&&typeof a!="string"&&(a=a.reduce((i,l)=>i.length>l.length?i:l)),e+r.size/2+n.measureText(a).width}function hI(t,e,r){let n=t;return typeof e.text!="string"&&(n=q7(e,r)),n}function q7(t,e){const r=t.text?t.text.length:0;return e*r}function fI(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var mI={id:"legend",_element:Hv,start(t,e,r){const n=t.legend=new Hv({ctx:t.ctx,options:r,chart:t});yi.configure(t,n,r),yi.addBox(t,n)},stop(t){yi.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,r){const n=t.legend;yi.configure(t,n,r),n.options=r},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,r){const n=e.datasetIndex,a=r.chart;a.isDatasetVisible(n)?(a.hide(n),e.hidden=!0):(a.show(n),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:r,pointStyle:n,textAlign:a,color:i,useBorderRadius:l,borderRadius:u}}=t.legend.options;return t._getSortedDatasetMetas().map(d=>{const h=d.controller.getStyle(r?0:void 0),p=_a(h.borderWidth);return{text:e[d.index].label,fillStyle:h.backgroundColor,fontColor:i,hidden:!d.visible,lineCap:h.borderCapStyle,lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:(p.width+p.height)/4,strokeStyle:h.borderColor,pointStyle:n||h.pointStyle,rotation:h.rotation,textAlign:a||h.textAlign,borderRadius:l&&(u||h.borderRadius),datasetIndex:d.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};const rc={average(t){if(!t.length)return!1;let e,r,n=new Set,a=0,i=0;for(e=0,r=t.length;e<r;++e){const u=t[e].element;if(u&&u.hasValue()){const d=u.tooltipPosition();n.add(d.x),a+=d.y,++i}}return i===0||n.size===0?!1:{x:[...n].reduce((u,d)=>u+d)/n.size,y:a/i}},nearest(t,e){if(!t.length)return!1;let r=e.x,n=e.y,a=Number.POSITIVE_INFINITY,i,l,u;for(i=0,l=t.length;i<l;++i){const d=t[i].element;if(d&&d.hasValue()){const h=d.getCenterPoint(),p=Fp(e,h);p<a&&(a=p,u=d)}}if(u){const d=u.tooltipPosition();r=d.x,n=d.y}return{x:r,y:n}}};function Ra(t,e){return e&&(Fr(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function ks(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function pI(t,e){const{element:r,datasetIndex:n,index:a}=e,i=t.getDatasetMeta(n).controller,{label:l,value:u}=i.getLabelAndValue(a);return{chart:t,label:l,parsed:i.getParsed(a),raw:t.data.datasets[n].data[a],formattedValue:u,dataset:i.getDataset(),dataIndex:a,datasetIndex:n,element:r}}function Uv(t,e){const r=t.chart.ctx,{body:n,footer:a,title:i}=t,{boxWidth:l,boxHeight:u}=e,d=xn(e.bodyFont),h=xn(e.titleFont),p=xn(e.footerFont),b=i.length,y=a.length,x=n.length,_=_a(e.padding);let k=_.height,S=0,A=n.reduce((D,j)=>D+j.before.length+j.lines.length+j.after.length,0);if(A+=t.beforeBody.length+t.afterBody.length,b&&(k+=b*h.lineHeight+(b-1)*e.titleSpacing+e.titleMarginBottom),A){const D=e.displayColors?Math.max(u,d.lineHeight):d.lineHeight;k+=x*D+(A-x)*d.lineHeight+(A-1)*e.bodySpacing}y&&(k+=e.footerMarginTop+y*p.lineHeight+(y-1)*e.footerSpacing);let C=0;const N=function(D){S=Math.max(S,r.measureText(D).width+C)};return r.save(),r.font=h.string,Mt(t.title,N),r.font=d.string,Mt(t.beforeBody.concat(t.afterBody),N),C=e.displayColors?l+2+e.boxPadding:0,Mt(n,D=>{Mt(D.before,N),Mt(D.lines,N),Mt(D.after,N)}),C=0,r.font=p.string,Mt(t.footer,N),r.restore(),S+=_.width,{width:S,height:k}}function gI(t,e){const{y:r,height:n}=e;return r<n/2?"top":r>t.height-n/2?"bottom":"center"}function bI(t,e,r,n){const{x:a,width:i}=n,l=r.caretSize+r.caretPadding;if(t==="left"&&a+i+l>e.width||t==="right"&&a-i-l<0)return!0}function yI(t,e,r,n){const{x:a,width:i}=r,{width:l,chartArea:{left:u,right:d}}=t;let h="center";return n==="center"?h=a<=(u+d)/2?"left":"right":a<=i/2?h="left":a>=l-i/2&&(h="right"),bI(h,t,e,r)&&(h="center"),h}function Vv(t,e,r){const n=r.yAlign||e.yAlign||gI(t,r);return{xAlign:r.xAlign||e.xAlign||yI(t,e,r,n),yAlign:n}}function xI(t,e){let{x:r,width:n}=t;return e==="right"?r-=n:e==="center"&&(r-=n/2),r}function vI(t,e,r){let{y:n,height:a}=t;return e==="top"?n+=r:e==="bottom"?n-=a+r:n-=a/2,n}function Gv(t,e,r,n){const{caretSize:a,caretPadding:i,cornerRadius:l}=t,{xAlign:u,yAlign:d}=r,h=a+i,{topLeft:p,topRight:b,bottomLeft:y,bottomRight:x}=gl(l);let _=xI(e,u);const k=vI(e,d,h);return d==="center"?u==="left"?_+=h:u==="right"&&(_-=h):u==="left"?_-=Math.max(p,y)+a:u==="right"&&(_+=Math.max(b,x)+a),{x:Bn(_,0,n.width-e.width),y:Bn(k,0,n.height-e.height)}}function jd(t,e,r){const n=_a(r.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-n.right:t.x+n.left}function Zv(t){return Ra([],ks(t))}function _I(t,e,r){return So(t,{tooltip:e,tooltipItems:r,type:"tooltip"})}function Kv(t,e){const r=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return r?t.override(r):t}const H7={beforeTitle:xs,title(t){if(t.length>0){const e=t[0],r=e.chart.data.labels,n=r?r.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(n>0&&e.dataIndex<n)return r[e.dataIndex]}return""},afterTitle:xs,beforeBody:xs,beforeLabel:xs,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const r=t.formattedValue;return At(r)||(e+=r),e},labelColor(t){const r=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:r.borderColor,backgroundColor:r.backgroundColor,borderWidth:r.borderWidth,borderDash:r.borderDash,borderDashOffset:r.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const r=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:r.pointStyle,rotation:r.rotation}},afterLabel:xs,afterBody:xs,beforeFooter:xs,footer:xs,afterFooter:xs};function pn(t,e,r,n){const a=t[e].call(r,n);return typeof a>"u"?H7[e].call(r,n):a}class Yv extends Ao{static positioners=rc;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const r=this.chart,n=this.options.setContext(this.getContext()),a=n.enabled&&r.options.animation&&n.animations,i=new C7(this.chart,a);return a._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=_I(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,r){const{callbacks:n}=r,a=pn(n,"beforeTitle",this,e),i=pn(n,"title",this,e),l=pn(n,"afterTitle",this,e);let u=[];return u=Ra(u,ks(a)),u=Ra(u,ks(i)),u=Ra(u,ks(l)),u}getBeforeBody(e,r){return Zv(pn(r.callbacks,"beforeBody",this,e))}getBody(e,r){const{callbacks:n}=r,a=[];return Mt(e,i=>{const l={before:[],lines:[],after:[]},u=Kv(n,i);Ra(l.before,ks(pn(u,"beforeLabel",this,i))),Ra(l.lines,pn(u,"label",this,i)),Ra(l.after,ks(pn(u,"afterLabel",this,i))),a.push(l)}),a}getAfterBody(e,r){return Zv(pn(r.callbacks,"afterBody",this,e))}getFooter(e,r){const{callbacks:n}=r,a=pn(n,"beforeFooter",this,e),i=pn(n,"footer",this,e),l=pn(n,"afterFooter",this,e);let u=[];return u=Ra(u,ks(a)),u=Ra(u,ks(i)),u=Ra(u,ks(l)),u}_createItems(e){const r=this._active,n=this.chart.data,a=[],i=[],l=[];let u=[],d,h;for(d=0,h=r.length;d<h;++d)u.push(pI(this.chart,r[d]));return e.filter&&(u=u.filter((p,b,y)=>e.filter(p,b,y,n))),e.itemSort&&(u=u.sort((p,b)=>e.itemSort(p,b,n))),Mt(u,p=>{const b=Kv(e.callbacks,p);a.push(pn(b,"labelColor",this,p)),i.push(pn(b,"labelPointStyle",this,p)),l.push(pn(b,"labelTextColor",this,p))}),this.labelColors=a,this.labelPointStyles=i,this.labelTextColors=l,this.dataPoints=u,u}update(e,r){const n=this.options.setContext(this.getContext()),a=this._active;let i,l=[];if(!a.length)this.opacity!==0&&(i={opacity:0});else{const u=rc[n.position].call(this,a,this._eventPosition);l=this._createItems(n),this.title=this.getTitle(l,n),this.beforeBody=this.getBeforeBody(l,n),this.body=this.getBody(l,n),this.afterBody=this.getAfterBody(l,n),this.footer=this.getFooter(l,n);const d=this._size=Uv(this,n),h=Object.assign({},u,d),p=Vv(this.chart,n,h),b=Gv(n,h,p,this.chart);this.xAlign=p.xAlign,this.yAlign=p.yAlign,i={opacity:1,x:b.x,y:b.y,width:d.width,height:d.height,caretX:u.x,caretY:u.y}}this._tooltipItems=l,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:r})}drawCaret(e,r,n,a){const i=this.getCaretPosition(e,n,a);r.lineTo(i.x1,i.y1),r.lineTo(i.x2,i.y2),r.lineTo(i.x3,i.y3)}getCaretPosition(e,r,n){const{xAlign:a,yAlign:i}=this,{caretSize:l,cornerRadius:u}=n,{topLeft:d,topRight:h,bottomLeft:p,bottomRight:b}=gl(u),{x:y,y:x}=e,{width:_,height:k}=r;let S,A,C,N,D,j;return i==="center"?(D=x+k/2,a==="left"?(S=y,A=S-l,N=D+l,j=D-l):(S=y+_,A=S+l,N=D-l,j=D+l),C=S):(a==="left"?A=y+Math.max(d,p)+l:a==="right"?A=y+_-Math.max(h,b)-l:A=this.caretX,i==="top"?(N=x,D=N-l,S=A-l,C=A+l):(N=x+k,D=N+l,S=A+l,C=A-l),j=N),{x1:S,x2:A,x3:C,y1:N,y2:D,y3:j}}drawTitle(e,r,n){const a=this.title,i=a.length;let l,u,d;if(i){const h=bl(n.rtl,this.x,this.width);for(e.x=jd(this,n.titleAlign,n),r.textAlign=h.textAlign(n.titleAlign),r.textBaseline="middle",l=xn(n.titleFont),u=n.titleSpacing,r.fillStyle=n.titleColor,r.font=l.string,d=0;d<i;++d)r.fillText(a[d],h.x(e.x),e.y+l.lineHeight/2),e.y+=l.lineHeight+u,d+1===i&&(e.y+=n.titleMarginBottom-u)}}_drawColorBox(e,r,n,a,i){const l=this.labelColors[n],u=this.labelPointStyles[n],{boxHeight:d,boxWidth:h}=i,p=xn(i.bodyFont),b=jd(this,"left",i),y=a.x(b),x=d<p.lineHeight?(p.lineHeight-d)/2:0,_=r.y+x;if(i.usePointStyle){const k={radius:Math.min(h,d)/2,pointStyle:u.pointStyle,rotation:u.rotation,borderWidth:1},S=a.leftForLtr(y,h)+h/2,A=_+d/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,Pp(e,k,S,A),e.strokeStyle=l.borderColor,e.fillStyle=l.backgroundColor,Pp(e,k,S,A)}else{e.lineWidth=yt(l.borderWidth)?Math.max(...Object.values(l.borderWidth)):l.borderWidth||1,e.strokeStyle=l.borderColor,e.setLineDash(l.borderDash||[]),e.lineDashOffset=l.borderDashOffset||0;const k=a.leftForLtr(y,h),S=a.leftForLtr(a.xPlus(y,1),h-2),A=gl(l.borderRadius);Object.values(A).some(C=>C!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,gh(e,{x:k,y:_,w:h,h:d,radius:A}),e.fill(),e.stroke(),e.fillStyle=l.backgroundColor,e.beginPath(),gh(e,{x:S,y:_+1,w:h-2,h:d-2,radius:A}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(k,_,h,d),e.strokeRect(k,_,h,d),e.fillStyle=l.backgroundColor,e.fillRect(S,_+1,h-2,d-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,r,n){const{body:a}=this,{bodySpacing:i,bodyAlign:l,displayColors:u,boxHeight:d,boxWidth:h,boxPadding:p}=n,b=xn(n.bodyFont);let y=b.lineHeight,x=0;const _=bl(n.rtl,this.x,this.width),k=function(R){r.fillText(R,_.x(e.x+x),e.y+y/2),e.y+=y+i},S=_.textAlign(l);let A,C,N,D,j,O,F;for(r.textAlign=l,r.textBaseline="middle",r.font=b.string,e.x=jd(this,S,n),r.fillStyle=n.bodyColor,Mt(this.beforeBody,k),x=u&&S!=="right"?l==="center"?h/2+p:h+2+p:0,D=0,O=a.length;D<O;++D){for(A=a[D],C=this.labelTextColors[D],r.fillStyle=C,Mt(A.before,k),N=A.lines,u&&N.length&&(this._drawColorBox(r,e,D,_,n),y=Math.max(b.lineHeight,d)),j=0,F=N.length;j<F;++j)k(N[j]),y=b.lineHeight;Mt(A.after,k)}x=0,y=b.lineHeight,Mt(this.afterBody,k),e.y-=i}drawFooter(e,r,n){const a=this.footer,i=a.length;let l,u;if(i){const d=bl(n.rtl,this.x,this.width);for(e.x=jd(this,n.footerAlign,n),e.y+=n.footerMarginTop,r.textAlign=d.textAlign(n.footerAlign),r.textBaseline="middle",l=xn(n.footerFont),r.fillStyle=n.footerColor,r.font=l.string,u=0;u<i;++u)r.fillText(a[u],d.x(e.x),e.y+l.lineHeight/2),e.y+=l.lineHeight+n.footerSpacing}}drawBackground(e,r,n,a){const{xAlign:i,yAlign:l}=this,{x:u,y:d}=e,{width:h,height:p}=n,{topLeft:b,topRight:y,bottomLeft:x,bottomRight:_}=gl(a.cornerRadius);r.fillStyle=a.backgroundColor,r.strokeStyle=a.borderColor,r.lineWidth=a.borderWidth,r.beginPath(),r.moveTo(u+b,d),l==="top"&&this.drawCaret(e,r,n,a),r.lineTo(u+h-y,d),r.quadraticCurveTo(u+h,d,u+h,d+y),l==="center"&&i==="right"&&this.drawCaret(e,r,n,a),r.lineTo(u+h,d+p-_),r.quadraticCurveTo(u+h,d+p,u+h-_,d+p),l==="bottom"&&this.drawCaret(e,r,n,a),r.lineTo(u+x,d+p),r.quadraticCurveTo(u,d+p,u,d+p-x),l==="center"&&i==="left"&&this.drawCaret(e,r,n,a),r.lineTo(u,d+b),r.quadraticCurveTo(u,d,u+b,d),r.closePath(),r.fill(),a.borderWidth>0&&r.stroke()}_updateAnimationTarget(e){const r=this.chart,n=this.$animations,a=n&&n.x,i=n&&n.y;if(a||i){const l=rc[e.position].call(this,this._active,this._eventPosition);if(!l)return;const u=this._size=Uv(this,e),d=Object.assign({},l,this._size),h=Vv(r,e,d),p=Gv(e,d,h,r);(a._to!==p.x||i._to!==p.y)&&(this.xAlign=h.xAlign,this.yAlign=h.yAlign,this.width=u.width,this.height=u.height,this.caretX=l.x,this.caretY=l.y,this._resolveAnimations().update(this,p))}}_willRender(){return!!this.opacity}draw(e){const r=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(r);const a={width:this.width,height:this.height},i={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const l=_a(r.padding),u=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;r.enabled&&u&&(e.save(),e.globalAlpha=n,this.drawBackground(i,e,a,r),S7(e,r.textDirection),i.y+=l.top,this.drawTitle(i,e,r),this.drawBody(i,e,r),this.drawFooter(i,e,r),A7(e,r.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,r){const n=this._active,a=e.map(({datasetIndex:u,index:d})=>{const h=this.chart.getDatasetMeta(u);if(!h)throw new Error("Cannot find a dataset at index "+u);return{datasetIndex:u,element:h.data[d],index:d}}),i=!hh(n,a),l=this._positionChanged(a,r);(i||l)&&(this._active=a,this._eventPosition=r,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,r,n=!0){if(r&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const a=this.options,i=this._active||[],l=this._getActiveElements(e,i,r,n),u=this._positionChanged(l,e),d=r||!hh(l,i)||u;return d&&(this._active=l,(a.enabled||a.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,r))),d}_getActiveElements(e,r,n,a){const i=this.options;if(e.type==="mouseout")return[];if(!a)return r.filter(u=>this.chart.data.datasets[u.datasetIndex]&&this.chart.getDatasetMeta(u.datasetIndex).controller.getParsed(u.index)!==void 0);const l=this.chart.getElementsAtEventForMode(e,i.mode,i,n);return i.reverse&&l.reverse(),l}_positionChanged(e,r){const{caretX:n,caretY:a,options:i}=this,l=rc[i.position].call(this,e,r);return l!==!1&&(n!==l.x||a!==l.y)}}var wI={id:"tooltip",_element:Yv,positioners:rc,afterInit(t,e,r){r&&(t.tooltip=new Yv({chart:t,options:r}))},beforeUpdate(t,e,r){t.tooltip&&t.tooltip.initialize(r)},reset(t,e,r){t.tooltip&&t.tooltip.initialize(r)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const r={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...r,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",r)}},afterEvent(t,e){if(t.tooltip){const r=e.replay;t.tooltip.handleEvent(e.event,r,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:H7},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const kI=(t,e,r,n)=>(typeof e=="string"?(r=t.push(e)-1,n.unshift({index:r,label:e})):isNaN(e)&&(r=null),r);function SI(t,e,r,n){const a=t.indexOf(e);if(a===-1)return kI(t,e,r,n);const i=t.lastIndexOf(e);return a!==i?r:a}const AI=(t,e)=>t===null?null:Bn(Math.round(t),0,e);function Xv(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class EI extends Rl{static id="category";static defaults={ticks:{callback:Xv}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const r=this._addedLabels;if(r.length){const n=this.getLabels();for(const{index:a,label:i}of r)n[a]===i&&n.splice(a,1);this._addedLabels=[]}super.init(e)}parse(e,r){if(At(e))return null;const n=this.getLabels();return r=isFinite(r)&&n[r]===e?r:SI(n,e,ht(r,e),this._addedLabels),AI(r,n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:r}=this.getUserBounds();let{min:n,max:a}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(n=0),r||(a=this.getLabels().length-1)),this.min=n,this.max=a}buildTicks(){const e=this.min,r=this.max,n=this.options.offset,a=[];let i=this.getLabels();i=e===0&&r===i.length-1?i:i.slice(e,r+1),this._valueRange=Math.max(i.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let l=e;l<=r;l++)a.push({value:l});return a}getLabelForValue(e){return Xv.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const r=this.ticks;return e<0||e>r.length-1?null:this.getPixelForValue(r[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function CI(t,e){const r=[],{bounds:a,step:i,min:l,max:u,precision:d,count:h,maxTicks:p,maxDigits:b,includeBounds:y}=t,x=i||1,_=p-1,{min:k,max:S}=e,A=!At(l),C=!At(u),N=!At(h),D=(S-k)/(b+1);let j=Q3((S-k)/_/x)*x,O,F,R,B;if(j<1e-14&&!A&&!C)return[{value:k},{value:S}];B=Math.ceil(S/j)-Math.floor(k/j),B>_&&(j=Q3(B*j/_/x)*x),At(d)||(O=Math.pow(10,d),j=Math.ceil(j*O)/O),a==="ticks"?(F=Math.floor(k/j)*j,R=Math.ceil(S/j)*j):(F=k,R=S),A&&C&&i&&YF((u-l)/i,j/1e3)?(B=Math.round(Math.min((u-l)/j,p)),j=(u-l)/B,F=l,R=u):N?(F=A?l:F,R=C?u:R,B=h-1,j=(R-F)/B):(B=(R-F)/j,uc(B,Math.round(B),j/1e3)?B=Math.round(B):B=Math.ceil(B));const V=Math.max(W3(j),W3(F));O=Math.pow(10,At(d)?V:d),F=Math.round(F*O)/O,R=Math.round(R*O)/O;let $=0;for(A&&(y&&F!==l?(r.push({value:l}),F<l&&$++,uc(Math.round((F+$*j)*O)/O,l,Qv(l,D,t))&&$++):F<l&&$++);$<B;++$){const G=Math.round((F+$*j)*O)/O;if(C&&G>u)break;r.push({value:G})}return C&&y&&R!==u?r.length&&uc(r[r.length-1].value,u,Qv(u,D,t))?r[r.length-1].value=u:r.push({value:u}):(!C||R===u)&&r.push({value:R}),r}function Qv(t,e,{horizontal:r,minRotation:n}){const a=lo(n),i=(r?Math.sin(a):Math.cos(a))||.001,l=.75*e*(""+t).length;return Math.min(e/i,l)}class TI extends Rl{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,r){return At(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:r,maxDefined:n}=this.getUserBounds();let{min:a,max:i}=this;const l=d=>a=r?a:d,u=d=>i=n?i:d;if(e){const d=Ga(a),h=Ga(i);d<0&&h<0?u(0):d>0&&h>0&&l(0)}if(a===i){let d=i===0?1:Math.abs(i*.05);u(i+d),e||l(a-d)}this.min=a,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:r,stepSize:n}=e,a;return n?(a=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,a>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${a} ticks. Limiting to 1000.`),a=1e3)):(a=this.computeTickLimit(),r=r||11),r&&(a=Math.min(r,a)),a}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,r=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const a={maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:r.precision,step:r.stepSize,count:r.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:r.minRotation||0,includeBounds:r.includeBounds!==!1},i=this._range||this,l=CI(a,i);return e.bounds==="ticks"&&XF(l,this,"value"),e.reverse?(l.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),l}configure(){const e=this.ticks;let r=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const a=(n-r)/Math.max(e.length-1,1)/2;r-=a,n+=a}this._startValue=r,this._endValue=n,this._valueRange=n-r}getLabelForValue(e){return m7(e,this.chart.options.locale,this.options.ticks.format)}}class NI extends TI{static id="linear";static defaults={ticks:{callback:p7.formatters.numeric}};determineDataLimits(){const{min:e,max:r}=this.getMinMax(!0);this.min=sa(e)?e:0,this.max=sa(r)?r:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),r=e?this.width:this.height,n=lo(this.options.ticks.minRotation),a=(e?Math.sin(n):Math.cos(n))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(r/Math.min(40,i.lineHeight/a))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const Bh={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},bn=Object.keys(Bh);function Wv(t,e){return t-e}function Jv(t,e){if(At(e))return null;const r=t._adapter,{parser:n,round:a,isoWeekday:i}=t._parseOpts;let l=e;return typeof n=="function"&&(l=n(l)),sa(l)||(l=typeof n=="string"?r.parse(l,n):r.parse(l)),l===null?null:(a&&(l=a==="week"&&(Cc(i)||i===!0)?r.startOf(l,"isoWeek",i):r.startOf(l,a)),+l)}function e6(t,e,r,n){const a=bn.length;for(let i=bn.indexOf(t);i<a-1;++i){const l=Bh[bn[i]],u=l.steps?l.steps:Number.MAX_SAFE_INTEGER;if(l.common&&Math.ceil((r-e)/(u*l.size))<=n)return bn[i]}return bn[a-1]}function MI(t,e,r,n,a){for(let i=bn.length-1;i>=bn.indexOf(r);i--){const l=bn[i];if(Bh[l].common&&t._adapter.diff(a,n,l)>=e-1)return l}return bn[r?bn.indexOf(r):0]}function jI(t){for(let e=bn.indexOf(t)+1,r=bn.length;e<r;++e)if(Bh[bn[e]].common)return bn[e]}function t6(t,e,r){if(!r)t[e]=!0;else if(r.length){const{lo:n,hi:a}=V2(r,e),i=r[n]>=e?r[n]:r[a];t[i]=!0}}function DI(t,e,r,n){const a=t._adapter,i=+a.startOf(e[0].value,n),l=e[e.length-1].value;let u,d;for(u=i;u<=l;u=+a.add(u,1,n))d=r[u],d>=0&&(e[d].major=!0);return e}function r6(t,e,r){const n=[],a={},i=e.length;let l,u;for(l=0;l<i;++l)u=e[l],a[u]=l,n.push({value:u,major:!1});return i===0||!r?n:DI(t,n,a,r)}class n6 extends Rl{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,r={}){const n=e.time||(e.time={}),a=this._adapter=new LP._date(e.adapters.date);a.init(r),lc(n.displayFormats,a.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=r.normalized}parse(e,r){return e===void 0?null:Jv(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,r=this._adapter,n=e.time.unit||"day";let{min:a,max:i,minDefined:l,maxDefined:u}=this.getUserBounds();function d(h){!l&&!isNaN(h.min)&&(a=Math.min(a,h.min)),!u&&!isNaN(h.max)&&(i=Math.max(i,h.max))}(!l||!u)&&(d(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&d(this.getMinMax(!1))),a=sa(a)&&!isNaN(a)?a:+r.startOf(Date.now(),n),i=sa(i)&&!isNaN(i)?i:+r.endOf(Date.now(),n)+1,this.min=Math.min(a,i-1),this.max=Math.max(a+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let r=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(r=e[0],n=e[e.length-1]),{min:r,max:n}}buildTicks(){const e=this.options,r=e.time,n=e.ticks,a=n.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&a.length&&(this.min=this._userMin||a[0],this.max=this._userMax||a[a.length-1]);const i=this.min,l=this.max,u=rL(a,i,l);return this._unit=r.unit||(n.autoSkip?e6(r.minUnit,this.min,this.max,this._getLabelCapacity(i)):MI(this,u.length,r.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:jI(this._unit),this.initOffsets(a),e.reverse&&u.reverse(),r6(this,u,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let r=0,n=0,a,i;this.options.offset&&e.length&&(a=this.getDecimalForValue(e[0]),e.length===1?r=1-a:r=(this.getDecimalForValue(e[1])-a)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?n=i:n=(i-this.getDecimalForValue(e[e.length-2]))/2);const l=e.length<3?.5:.25;r=Bn(r,0,l),n=Bn(n,0,l),this._offsets={start:r,end:n,factor:1/(r+1+n)}}_generate(){const e=this._adapter,r=this.min,n=this.max,a=this.options,i=a.time,l=i.unit||e6(i.minUnit,r,n,this._getLabelCapacity(r)),u=ht(a.ticks.stepSize,1),d=l==="week"?i.isoWeekday:!1,h=Cc(d)||d===!0,p={};let b=r,y,x;if(h&&(b=+e.startOf(b,"isoWeek",d)),b=+e.startOf(b,h?"day":l),e.diff(n,r,l)>1e5*u)throw new Error(r+" and "+n+" are too far apart with stepSize of "+u+" "+l);const _=a.ticks.source==="data"&&this.getDataTimestamps();for(y=b,x=0;y<n;y=+e.add(y,u,l),x++)t6(p,y,_);return(y===n||a.bounds==="ticks"||x===1)&&t6(p,y,_),Object.keys(p).sort(Wv).map(k=>+k)}getLabelForValue(e){const r=this._adapter,n=this.options.time;return n.tooltipFormat?r.format(e,n.tooltipFormat):r.format(e,n.displayFormats.datetime)}format(e,r){const a=this.options.time.displayFormats,i=this._unit,l=r||a[i];return this._adapter.format(e,l)}_tickFormatFunction(e,r,n,a){const i=this.options,l=i.ticks.callback;if(l)return Ht(l,[e,r,n],this);const u=i.time.displayFormats,d=this._unit,h=this._majorUnit,p=d&&u[d],b=h&&u[h],y=n[r],x=h&&b&&y&&y.major;return this._adapter.format(e,a||(x?b:p))}generateTickLabels(e){let r,n,a;for(r=0,n=e.length;r<n;++r)a=e[r],a.label=this._tickFormatFunction(a.value,r,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const r=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((r.start+n)*r.factor)}getValueForPixel(e){const r=this._offsets,n=this.getDecimalForPixel(e)/r.factor-r.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const r=this.options.ticks,n=this.ctx.measureText(e).width,a=lo(this.isHorizontal()?r.maxRotation:r.minRotation),i=Math.cos(a),l=Math.sin(a),u=this._resolveTickFontOptions(0).size;return{w:n*i+u*l,h:n*l+u*i}}_getLabelCapacity(e){const r=this.options.time,n=r.displayFormats,a=n[r.unit]||n.millisecond,i=this._tickFormatFunction(e,0,r6(this,[e],this._majorUnit),a),l=this._getLabelSize(i),u=Math.floor(this.isHorizontal()?this.width/l.w:this.height/l.h)-1;return u>0?u:1}getDataTimestamps(){let e=this._cache.data||[],r,n;if(e.length)return e;const a=this.getMatchingVisibleMetas();if(this._normalized&&a.length)return this._cache.data=a[0].controller.getAllParsedValues(this);for(r=0,n=a.length;r<n;++r)e=e.concat(a[r].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let r,n;if(e.length)return e;const a=this.getLabels();for(r=0,n=a.length;r<n;++r)e.push(Jv(this,a[r]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return c7(e.sort(Wv))}}function Dd(t,e,r){let n=0,a=t.length-1,i,l,u,d;r?(e>=t[n].pos&&e<=t[a].pos&&({lo:n,hi:a}=co(t,"pos",e)),{pos:i,time:u}=t[n],{pos:l,time:d}=t[a]):(e>=t[n].time&&e<=t[a].time&&({lo:n,hi:a}=co(t,"time",e)),{time:i,pos:u}=t[n],{time:l,pos:d}=t[a]);const h=l-i;return h?u+(d-u)*(e-i)/h:u}class XU extends n6{static id="timeseries";static defaults=n6.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),r=this._table=this.buildLookupTable(e);this._minPos=Dd(r,this.min),this._tableRange=Dd(r,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:r,max:n}=this,a=[],i=[];let l,u,d,h,p;for(l=0,u=e.length;l<u;++l)h=e[l],h>=r&&h<=n&&a.push(h);if(a.length<2)return[{time:r,pos:0},{time:n,pos:1}];for(l=0,u=a.length;l<u;++l)p=a[l+1],d=a[l-1],h=a[l],Math.round((p+d)/2)!==h&&i.push({time:h,pos:l/(u-1)});return i}_generate(){const e=this.min,r=this.max;let n=super.getDataTimestamps();return(!n.includes(e)||!n.length)&&n.splice(0,0,e),(!n.includes(r)||n.length===1)&&n.push(r),n.sort((a,i)=>a-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const r=this.getDataTimestamps(),n=this.getLabelTimestamps();return r.length&&n.length?e=this.normalize(r.concat(n)):e=r.length?r:n,e=this._cache.all=e,e}getDecimalForValue(e){return(Dd(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const r=this._offsets,n=this.getDecimalForPixel(e)/r.factor-r.end;return Dd(this._table,n*this._tableRange+this._minPos,!0)}}const U7="label";function a6(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function zI(t,e){const r=t.options;r&&e&&Object.assign(r,e)}function V7(t,e){t.labels=e}function G7(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:U7;const n=[];t.datasets=e.map(a=>{const i=t.datasets.find(l=>l[r]===a[r]);return!i||!a.data||n.includes(i)?{...a}:(n.push(i),Object.assign(i,a),i)})}function OI(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:U7;const r={labels:[],datasets:[]};return V7(r,t.labels),G7(r,t.datasets,e),r}function RI(t,e){const{height:r=150,width:n=300,redraw:a=!1,datasetIdKey:i,type:l,data:u,options:d,plugins:h=[],fallbackContent:p,updateMode:b,...y}=t,x=T.useRef(null),_=T.useRef(null),k=()=>{x.current&&(_.current=new Uc(x.current,{type:l,data:OI(u,i),options:d&&{...d},plugins:h}),a6(e,_.current))},S=()=>{a6(e,null),_.current&&(_.current.destroy(),_.current=null)};return T.useEffect(()=>{!a&&_.current&&d&&zI(_.current,d)},[a,d]),T.useEffect(()=>{!a&&_.current&&V7(_.current.config.data,u.labels)},[a,u.labels]),T.useEffect(()=>{!a&&_.current&&u.datasets&&G7(_.current.config.data,u.datasets,i)},[a,u.datasets]),T.useEffect(()=>{_.current&&(a?(S(),setTimeout(k)):_.current.update(b))},[a,d,u.labels,u.datasets,b]),T.useEffect(()=>{_.current&&(S(),setTimeout(k))},[l]),T.useEffect(()=>(k(),()=>S()),[]),rt.createElement("canvas",{ref:x,role:"img",height:r,width:n,...y},p)}const FI=T.forwardRef(RI);function Z7(t,e){return Uc.register(e),T.forwardRef((r,n)=>rt.createElement(FI,{...r,ref:n,type:t}))}const LI=Z7("line",FP),PI=Z7("bar",RP);function BI(t){const e=Gt();return lr({queryKey:["statisticsByIds",t.slice().sort((r,n)=>r-n).join(",")],enabled:t.length>0&&!!e,staleTime:3e4,placeholderData:Sk,queryFn:async()=>{const r=await st("/statistics/problems/by_ids",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({problem_ids:t})},e??void 0);if(!r.ok){const a=await r.json().catch(()=>({detail:r.statusText}));throw new Error(a.detail??r.statusText)}return(await r.json()).statistics}})}Uc.register(tI,rI,EI,NI,lI,wI,mI);const II={id:"referenceLines",afterDraw(t,e,r){const n=r?.means;if(!n)return;const{ctx:a,scales:i}=t,l=i.x,u=i.y;if(!l||!u)return;a.save(),a.strokeStyle="#10a37f",a.fillStyle="#10a37f",a.lineWidth=1,a.font="12px sans-serif";const h=(l.getLabels?.()||[]).map(p=>Number(p));Object.entries(n).forEach(([p,b])=>{if(b==null)return;let y;if(l.type==="category"){const k=h[0],S=h[h.length-1],C=(Number(b)-k)/(S-k),N=Math.max(0,Math.min(1,C));y=l.left+N*(l.right-l.left)}else y=l.getPixelForValue(b);a.beginPath(),a.moveTo(y,u.top),a.lineTo(y,u.bottom),a.stroke();const x=a.measureText(p).width,_=u.top+25;a.fillStyle="white",a.fillRect(y-x/2-2,_-14,x+4,18),a.fillStyle="#6b7280",a.fillText(p,y-x/2,_)}),a.restore()}};Uc.register(II);const $I=T.forwardRef(({ids:t},e)=>{const{data:r,isLoading:n,isError:a}=BI(t),i=T.useMemo(()=>{if(!r)return null;const h=r.level_chart.weighted_vec;if(!h.length)return null;const p=h.reduce((D,j)=>D+j,0)/h.length,b=h.reduce((D,j)=>D+(j-p)**2,0)/h.length,y=Math.sqrt(b||1),x=p-3*y,_=p+3*y,k=60,S=[],A=[],C=1/(y*Math.sqrt(2*Math.PI)),N=(_-x)/k;for(let D=0;D<=k;D++){const j=x+D*N,O=C*Math.exp(-.5*((j-p)/y)**2)*h.length*N;S.push(j),A.push(O)}return{labels:S,datasets:[{label:"Nivfrdelning",data:A,borderColor:"#10A37F",backgroundColor:"rgba(16, 163, 127, 0.2)",tension:.4,pointRadius:0}]}},[r]),l=T.useMemo(()=>({responsive:!0,plugins:{legend:{display:!1},...r?{referenceLines:{means:r.level_chart.mean_positions}}:{}},scales:{x:{display:!1},y:{display:!0,ticks:{precision:0}}}}),[r]),u=T.useMemo(()=>{if(!r)return null;const h=Object.keys(r.ability_totals).sort(),p=h.map(x=>r.ability_totals[x]?.E??0),b=h.map(x=>r.ability_totals[x]?.C??0),y=h.map(x=>r.ability_totals[x]?.A??0);return{labels:h,datasets:[{label:"E",data:p,backgroundColor:"#10c37f"},{label:"C",data:b,backgroundColor:"#08a66b"},{label:"A",data:y,backgroundColor:"#0b6b52"}]}},[r]),d={responsive:!0,plugins:{legend:{position:"bottom"}},scales:{x:{stacked:!0},y:{stacked:!0,ticks:{precision:0}}}};return T.useEffect(()=>{const h=()=>{e&&typeof e=="object"&&e.current&&(window.Chart?.instances||[]).forEach(_=>{_&&typeof _.resize=="function"&&_.resize()})};let p;const b=()=>{clearTimeout(p),p=setTimeout(h,100)};window.addEventListener("resize",b);const y=setTimeout(h,50);return()=>{window.removeEventListener("resize",b),clearTimeout(p),clearTimeout(y)}},[r,e]),n?m.jsx("div",{className:"flex items-center justify-center p-8",children:m.jsxs("div",{className:"flex flex-col items-center gap-3 text-center",children:[m.jsx("div",{className:"animate-spin rounded-full h-8 w-8"}),m.jsx("span",{className:"text-sm",style:{color:"var(--text-secondary)"},children:"Laddar statistik..."})]})}):a?m.jsx("div",{className:"flex items-center justify-center p-8",children:m.jsx("div",{className:"flex flex-col items-center gap-3 text-center",children:m.jsx("span",{className:"text-sm",style:{color:"var(--text-secondary)"},children:"Kunde inte ladda statistik"})})}):r?m.jsxs("div",{className:"space-y-6",ref:e,children:[(()=>{const h={E:0,C:0,A:0};Object.values(r.ability_totals).forEach(y=>{h.E+=y.E,h.C+=y.C,h.A+=y.A});const p=h.E+h.C+h.A,b={E:r.e_only??0,C:r.c_only??0,A:r.a_problems??0};return m.jsx("div",{className:"",children:m.jsx("div",{className:"p-4",children:m.jsxs("table",{className:"w-full text-sm",children:[m.jsx("thead",{children:m.jsxs("tr",{className:"border-b",style:{borderColor:"var(--border-primary)"},children:[m.jsx("th",{className:"text-left font-medium pb-2",style:{color:"var(--text-primary)"},children:" "}),m.jsx("th",{className:"text-center font-medium pb-2 px-2",style:{color:"var(--text-primary)"},children:"E"}),m.jsx("th",{className:"text-center font-medium pb-2 px-2",style:{color:"var(--text-primary)"},children:"C"}),m.jsx("th",{className:"text-center font-medium pb-2 px-2",style:{color:"var(--text-primary)"},children:"A"}),m.jsx("th",{className:"text-center font-medium pb-2 px-2",style:{color:"var(--accent-primary)"},children:"TOT"})]})}),m.jsxs("tbody",{children:[m.jsxs("tr",{children:[m.jsx("td",{className:"text-left font-medium py-1",style:{color:"var(--text-primary)"},children:"Uppgifter"}),m.jsx("td",{className:"text-center py-1 px-2",style:{color:"var(--text-secondary)"},children:b.E}),m.jsx("td",{className:"text-center py-1 px-2",style:{color:"var(--text-secondary)"},children:b.C}),m.jsx("td",{className:"text-center py-1 px-2",style:{color:"var(--text-secondary)"},children:b.A}),m.jsx("td",{className:"text-center py-1 px-2 font-semibold",style:{color:"var(--accent-primary)"},children:b.E+b.C+b.A})]}),m.jsxs("tr",{children:[m.jsx("td",{className:"text-left font-medium py-1",style:{color:"var(--text-primary)"},children:"Pong"}),m.jsx("td",{className:"text-center py-1 px-2",style:{color:"var(--text-secondary)"},children:h.E}),m.jsx("td",{className:"text-center py-1 px-2",style:{color:"var(--text-secondary)"},children:h.C}),m.jsx("td",{className:"text-center py-1 px-2",style:{color:"var(--text-secondary)"},children:h.A}),m.jsx("td",{className:"text-center py-1 px-2 font-semibold",style:{color:"var(--accent-primary)"},children:p})]})]})]})})})})(),i&&m.jsx("div",{className:"",children:m.jsx(LI,{data:i,options:l,height:250})}),u&&m.jsx("div",{className:"",children:m.jsx(PI,{data:u,options:d,height:300})})]}):m.jsx("div",{className:"flex items-center justify-center p-8",children:m.jsx("div",{className:"flex flex-col items-center gap-3 text-center",children:m.jsx("span",{className:"text-sm",style:{color:"var(--text-secondary)"},children:"Ingen data tillgnglig"})})})});function qI(t){const e=[],r=[];let n=1;t.forEach(i=>{if("type"in i&&i.type==="separator"){e.push(`<h2 class="print-separator">${i.title}</h2>`);return}const l=i,u=l.points_e??0,d=l.points_c??0,h=l.points_a??0,p=u+d+h>0?`(${u}/${d}/${h})`:"",b=wi(l.prompt_tex,[],{baseImageUrl:`${tt.BASE}/media/bank/${l.bank_problem_definition_id}`});e.push(`
      <div class="problem-prompt" data-problem-number="${n}">
        <div class="prompt-wrapper">
          <div class="problem-number-container">
            <span class="problem-number">${n}.</span>
          </div>
          <div class="prompt-text-container">
            ${b.replace(/^<p>/,"").replace(/<\/p>$/,"")}
          </div>
          ${p?`<div class="controls-container"><div class="prompt-points-container">${p}</div></div>`:""}
        </div>
      </div>
    `),l.assessment_items?.length&&r.push({problemNumber:n,items:l.assessment_items}),n++});let a="";return r.length&&(a=`
      <div class="assessment-section">
        <h2 class="assessment-title">Bedmning</h2>
        <div class="assessment-details expanded">${r.map(({problemNumber:l,items:u})=>{const d=u.map(h=>{const p=`${h.max_points}\\ \\mathcal{${h.ability_code}}_{${h.level_code}}`,b=wi(h.description_text??"");return`<div class="assessment-item"><span class="assessment-prefix">${wi(`$${p}$`).replace(/^<p>/,"").replace(/<\/p>$/,"")}</span> : ${b}</div>`}).join("");return`
        <div class="problem-assessment-group">
          <div class="problem-assessment-header">Uppgift ${l}:</div>
          ${d}
        </div>`}).join("")}</div>
      </div>`),`
    <div class="preview-container">
      <div class="prompts-section">${e.join("")}</div>
      ${a}
    </div>`}async function HI(t,e){const r=/<img[^>]+src=["']([^"']+)["'][^>]*>/gi,n=new Set;let a;for(;(a=r.exec(t))!==null;){const u=a[1];u.startsWith("data:")||u.startsWith("blob:")||n.add(u)}const i={};return await Promise.all(Array.from(n).map(async u=>{try{const d=await fetch(u,e?{headers:{Authorization:`Bearer ${e}`}}:void 0);if(!d.ok)throw new Error(d.statusText);const h=await d.blob(),p=await new Promise(b=>{const y=new FileReader;y.onload=()=>b(y.result),y.readAsDataURL(h)});i[u]=p}catch(d){console.warn("convertImagesToBase64 failed for",u,d)}})),t.replace(/(src=["'])(https?:[^"']+)(["'])/gi,(u,d,h,p)=>i[h]?`${d}${i[h]}${p}`:`${d}${h}${p}`)}async function UI(t,e=""){try{const r=`
      <!DOCTYPE html>
      <html>
        <meta charset="UTF-8">
        <meta name="robots" content="noindex,nofollow">
        <head>
          <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css" integrity="sha384-GvrOXuhMATgEsSwCs4smul74iXGOixntILdUW9XmUC6+HX0sLNAK3q71HotJqlAn" crossorigin="anonymous">
          <style>
            ${e}
          </style>
        </head>
        <body>
          ${t}
          <script src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js" integrity="sha384-cpW21h6RZv/phavutF+AuVYrr+dA8xD9zs6FwLpaCct6O9ctzYFfFr4dgmgccOTx" crossorigin="anonymous"><\/script>
          <script>
            // Rendera alla KaTeX-uttryck nr sidan laddas
            document.addEventListener('DOMContentLoaded', function() {
              // Konvertera HTML-entities tillbaka till vanliga tecken
              function decodeHtmlEntities(text) {
                const textarea = document.createElement('textarea');
                textarea.innerHTML = text;
                return textarea.value;
              }
              
              // Hitta alla element som innehller LaTeX
              const mathElements = document.querySelectorAll('*');
              mathElements.forEach(element => {
                if (element.textContent && (element.textContent.includes('$') || element.textContent.includes('\\\\'))) {
                  // Rendera inline math - matcha endast proper $...$ delimiters
                  element.innerHTML = element.innerHTML.replace(/(?<!\\$)\\$(?!\\$)([^$\\n]+?)(?<!\\$)\\$(?!\\$)/g, function(match, tex) {
                    try {
                      const decodedTex = decodeHtmlEntities(tex);
                      return katex.renderToString(decodedTex, { displayMode: false, throwOnError: false });
                    } catch (e) {
                      return match; // Fallback till original om rendering misslyckas
                    }
                  });
                  
                  // Rendera display math - matcha endast proper $$...$$ delimiters
                  element.innerHTML = element.innerHTML.replace(/\\$\\$([\\s\\S]+?)\\$\\$/g, function(match, tex) {
                    try {
                      const decodedTex = decodeHtmlEntities(tex);
                      return katex.renderToString(decodedTex, { displayMode: true, throwOnError: false });
                    } catch (e) {
                      return match; // Fallback till original om rendering misslyckas
                    }
                  });
                  
                  // Rendera display math - matcha endast proper [...] delimiters
                  element.innerHTML = element.innerHTML.replace(/\\\\\\[([\\s\\S]+?)\\\\\\]/g, function(match, tex) {
                    try {
                      const decodedTex = decodeHtmlEntities(tex);
                      return katex.renderToString(decodedTex, { displayMode: true, throwOnError: false });
                    } catch (e) {
                      return match; // Fallback till original om rendering misslyckas
                    }
                  });
                }
              });
            });
          <\/script>
        </body>
      </html>
    `,n=new Blob([r],{type:"text/html"}),a=URL.createObjectURL(n),i=window.open(a,"_blank");return setTimeout(()=>{i&&(i.focus(),i.print())},1e3),n}catch(r){throw console.error("HTML generation error:",r),console.error("Error details:",r instanceof Error?r.message:String(r)),r}}const VI=({problems:t,onClose:e,onRemoveFromMemory:r,memory:n,onClearMemory:a,onExport:i})=>{const[l,u]=T.useState(!1),[d,h]=T.useState(!1),[p,b]=T.useState(!1),y=Gt(),x=T.useMemo(()=>{if(!t||t.length===0)return[];const S=j=>{const O=j.points_e??0,F=j.points_c??0;return(j.points_a??0)>0?"A":F>0?"C":(O>0,"E")},A=(j,O)=>{const F={E:0,C:1,A:2},R=S(j),B=S(O);return F[R]-F[B]},C=[],N=[];t.forEach(j=>{const O=Number(j.bank_problem_definition_id);n?.part1Ids.has(O)&&C.push(j),n?.part2Ids.has(O)&&N.push(j)}),C.sort(A),N.sort(A);const D=[];return C.length>0&&(D.push({type:"separator",title:"Del 1"}),D.push(...C)),N.length>0&&(D.push({type:"separator",title:"Del 2"}),D.push(...N)),D},[t,n]),_=T.useMemo(()=>t.map(S=>Number(S.bank_problem_definition_id)),[t]),k=async()=>{b(!0);try{const S=[],A=$=>{const G=$.points_e??0,le=$.points_c??0;return($.points_a??0)>0?"A":le>0?"C":(G>0,"E")},C=($,G)=>{const le={E:0,C:1,A:2},ie=A($),pe=A(G);return le[ie]-le[pe]},N=[],D=[];t.forEach($=>{const G=Number($.bank_problem_definition_id);n?.part1Ids.has(G)&&N.push($),n?.part2Ids.has(G)&&D.push($)}),N.sort(C),D.sort(C),N.length>0&&(S.push({type:"separator",title:"Del 1"}),S.push(...N)),D.length>0&&(S.push({type:"separator",title:"Del 2"}),S.push(...D)),S.length===0&&S.push(...t);const j=qI(S),O=await HI(j,y??void 0),F=await fetch("./static/pdf-export.css").then($=>$.text()),R=await UI(O,F),B=URL.createObjectURL(R),V=window.open(B,"_blank");setTimeout(()=>{V&&(V.focus(),V.print())},1e3)}catch(S){console.error("Print failed",S),alert("Skriv ut misslyckades")}finally{b(!1)}};return T.useEffect(()=>{const S=A=>{A.key==="Escape"&&e()};return window.addEventListener("keydown",S),()=>window.removeEventListener("keydown",S)},[e]),T.useEffect(()=>{const S=A=>{A.data.type==="iframe-ready"&&(h(!0),setTimeout(()=>{u(!0)},50))};return window.addEventListener("message",S),()=>window.removeEventListener("message",S)},[]),!t||t.length===0?gc.createPortal(m.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center transition-all duration-200",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},children:m.jsxs("div",{className:"h-[90vh] w-full max-w-3xl rounded-xl shadow-xl flex flex-col transition-all duration-200",style:{backgroundColor:"var(--bg-panel)"},children:[m.jsx("div",{className:"flex-shrink-0 p-4 border-b rounded-t-xl",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-primary)"},children:m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"flex items-center justify-center",style:{height:"24px"},children:m.jsx(Gd,{size:20,style:{color:"var(--accent-primary)"}})}),m.jsx("h3",{className:"text-lg font-semibold",style:{color:"var(--text-primary)",lineHeight:"24px",margin:0},children:"Frhandsvisning av problem i minnet"})]}),m.jsx("button",{className:"w-8 h-8 flex items-center justify-center rounded-lg transition-all duration-200 hover:bg-accent-primary/10",style:{color:"var(--text-secondary)"},onClick:e,"aria-label":"Stng",children:m.jsx(va,{size:18})})]})}),m.jsx("div",{className:"flex-1 overflow-y-auto",children:m.jsx("div",{className:"flex items-center justify-center h-full",children:m.jsxs("div",{className:"flex flex-col items-center gap-3 text-center",children:[m.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2",style:{borderColor:"var(--accent-primary)"}}),m.jsx("span",{className:"text-sm",style:{color:"var(--text-secondary)"},children:"Inga problem att visa"})]})})})]})}),document.body):gc.createPortal(m.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center transition-all duration-200",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},children:m.jsxs("div",{className:"h-[95vh] w-[95vw] max-w-7xl rounded-xl shadow-xl flex flex-col transition-all duration-200",style:{backgroundColor:"var(--bg-panel)"},children:[m.jsx("div",{className:"flex-shrink-0 p-4 border-b rounded-t-xl",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-primary)"},children:m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"flex items-center justify-center",style:{height:"24px"},children:m.jsx(Gd,{size:20,style:{color:"var(--accent-primary)"}})}),m.jsx("h3",{className:"text-lg font-semibold",style:{color:"var(--text-primary)",lineHeight:"24px",margin:0},children:"Frhandsvisning av problem i minnet"})]}),m.jsx("button",{className:"w-8 h-8 flex items-center justify-center rounded-lg transition-all duration-200 hover:bg-accent-primary/10",style:{color:"var(--text-secondary)"},onClick:e,"aria-label":"Stng",children:m.jsx(va,{size:18})})]})}),m.jsxs("div",{className:"flex-1 overflow-hidden",children:[!l&&m.jsx("div",{className:"absolute inset-0 bg-white/80 dark:bg-gray-900/80 flex items-center justify-center z-10",children:m.jsxs("div",{className:"flex flex-col items-center gap-3 text-center",children:[m.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2",style:{borderColor:"var(--accent-primary)"}}),m.jsx("span",{className:"text-sm",style:{color:"var(--text-secondary)"},children:"Vntar p rendering..."})]})}),t.length===0?m.jsx("div",{className:"flex items-center justify-center h-full",children:m.jsxs("div",{className:"flex flex-col items-center gap-3 text-center",children:[m.jsx(Gd,{size:24,style:{color:"var(--text-muted)"}}),m.jsx("span",{className:"text-sm",style:{color:"var(--text-secondary)"},children:"Inga problem att visa"}),m.jsx("span",{className:"text-xs",style:{color:"var(--text-muted)"},children:"Lgg till problem i minnet frst"})]})}):m.jsxs("div",{className:"h-full grid grid-cols-4 gap-4 p-4",children:[m.jsxs("div",{className:"col-span-3 flex flex-col h-full",children:[m.jsx("div",{className:"flex items-center justify-between p-4 border-b mb-4",style:{borderColor:"var(--border-primary)"},children:m.jsxs("div",{className:"flex items-center gap-2",children:[a&&m.jsx("button",{onClick:a,className:"p-2 rounded-lg hover:bg-accent-primary/10 transition-colors",title:"Rensa minne",children:m.jsx(xa,{size:20,style:{color:"var(--text-secondary)"}})}),i&&m.jsx("button",{onClick:i,className:"p-2 rounded-lg hover:bg-accent-primary/10 transition-colors",title:"Exportera ZIP",children:m.jsx(gM,{size:20,style:{color:"var(--text-secondary)"}})}),m.jsx("button",{onClick:()=>alert("Frsttsblad kommer snart!"),className:"p-2 rounded-lg hover:bg-accent-primary/10 transition-colors",title:"Frsttsblad",children:m.jsx(HN,{size:20,style:{color:"var(--text-secondary)"}})}),m.jsx("button",{onClick:k,disabled:p,className:"p-2 rounded-lg hover:bg-accent-primary/10 transition-colors disabled:opacity-50",title:p?"Exporterar...":"Skriv ut till PDF",children:m.jsx(oj,{size:20,style:{color:"var(--text-secondary)"}})})]})}),m.jsxs("div",{className:"flex-1 overflow-y-auto",children:[!d&&m.jsx("iframe",{srcDoc:`
                        <!DOCTYPE html>
                        <html>
                        <head>
                          <meta charset="utf-8">
                          <script src="./static/iframe-init.js"><\/script>
                          <style>
                            @font-face {
                              font-family: 'Latin Modern Roman';
                              src: url('./fonts/latin-modern/lmroman10-regular.otf') format('opentype');
                              font-weight: 400;
                              font-style: normal;
                            }
                            @font-face {
                              font-family: 'Latin Modern Roman';
                              src: url('./fonts/latin-modern/lmroman10-italic.otf') format('opentype');
                              font-weight: 400;
                              font-style: italic;
                            }
                            @font-face {
                              font-family: 'Latin Modern Roman';
                              src: url('./fonts/latin-modern/lmroman12-bold.otf') format('opentype');
                              font-weight: 700;
                              font-style: normal;
                            }
                            body {
                              font-family: 'Latin Modern Roman', 'CMU Serif', serif !important;
                            }
                          </style>
                        </head>
                        <body>
                          <div id="content"></div>
                        </body>
                        </html>
                      `,style:{width:"1px",height:"1px",position:"absolute",left:"-9999px"},onLoad:()=>{}}),l?m.jsx(Fh,{problems:x,mode:"list",showRemoveButtons:!0,onRemoveFromMemory:r,hiddenProblemIds:new Set},n?.lastModified?.getTime()??0):m.jsx("div",{className:"flex items-center justify-center h-full",children:m.jsxs("div",{className:"flex flex-col items-center gap-3 text-center",children:[m.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2",style:{borderColor:"var(--accent-primary)"}}),m.jsx("span",{className:"text-sm",style:{color:"var(--text-secondary)"},children:"Vntar p rendering..."})]})})]})]}),m.jsx("div",{className:"col-span-1 h-full overflow-y-auto",children:m.jsx("div",{className:"p-4",children:m.jsx($I,{ids:_})})})]})]})]})}),document.body)},GI=({memory:t,onClearMemory:e,onRemoveFromMemory:r})=>{const[n,a]=T.useState(!1),i=t||{part1Ids:new Set,part2Ids:new Set},l=Array.from([...i.part1Ids,...i.part2Ids]),{data:u=[]}=jh(l),d=()=>u,h=()=>{u.length>0&&a(!0)},p=async()=>{const b=Array.from(i.part1Ids),y=Array.from(i.part2Ids);if(b.length+y.length!==0)try{const x=await st("/v1/export_markdown/test?format=zip",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({del1_problem_ids:b,del2_problem_ids:y,title:"Export"})});if(!x.ok)throw new Error(`HTTP ${x.status}`);const _=await x.blob(),k=window.URL.createObjectURL(_),S=document.createElement("a");S.href=k,S.download=`export_${Date.now()}.zip`,document.body.appendChild(S),S.click(),S.remove(),window.URL.revokeObjectURL(k),alert("Export nedladdad!")}catch(x){console.error(x),alert("Export misslyckades")}};return m.jsxs("div",{className:"w-full",children:[m.jsx("div",{className:"flex justify-between items-center gap-3 flex-wrap",children:m.jsx("div",{className:"flex items-center gap-2",children:m.jsxs("button",{className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-all duration-200 hover:bg-accent-primary/10 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 ${u.length>0?"ring-2 ring-accent-primary/20 hover:ring-accent-primary/40":""}`,disabled:u.length===0,onClick:h,title:u.length>0?"Visa frhandsvisning":"Inga problem att visa",children:[m.jsx(Gd,{size:20,style:{color:u.length>0?"var(--accent-primary)":"var(--text-secondary)"}}),m.jsxs("div",{className:"flex items-center text-sm",children:[m.jsx("span",{style:{color:i.part1Ids.size>0?"var(--accent-primary)":"var(--text-muted)"},children:i.part1Ids.size}),m.jsx("span",{style:{color:"var(--text-secondary)",padding:"0 4px"},children:" | "}),m.jsx("span",{style:{color:i.part2Ids.size>0?"var(--accent-primary)":"var(--text-muted)"},children:i.part2Ids.size})]})]})})}),n&&m.jsx(VI,{problems:d(),onClose:()=>a(!1),onRemoveFromMemory:r||(()=>{}),memory:t,onClearMemory:e,onExport:p})]})},ZI=1,K7="jd_problem_drafts_v1";let ao=null;const qp=new Set;function Wu(){if(ao)return ao;try{const t=localStorage.getItem(K7);return t?(ao=JSON.parse(t).filter(r=>r.schema_version===ZI),ao):ao=[]}catch{return ao=[]}}function zd(t){ao=t;try{localStorage.setItem(K7,JSON.stringify(t))}catch(e){console.warn("draftStorage write error",e)}qp.forEach(e=>e(t))}const rg=()=>{const[t,e]=T.useState(Wu());return T.useEffect(()=>(d=>(qp.add(d),d(Wu()),()=>{qp.delete(d)}))(e),[]),{drafts:t,save:l=>{const u=Wu();zd([...u,l])},update:(l,u)=>{const d=Wu(),h=d.findIndex(b=>b.id===l);if(h===-1)return;const p={...d[h],updated_at:new Date().toISOString(),data:{...d[h].data,...u}};d[h]=p,zd([...d])},remove:l=>{const u=Wu().filter(d=>d.id!==l);zd(u)},clear:()=>{zd([])}}},KI=({onOpenDraft:t,onNewDraft:e})=>{const{drafts:r,remove:n}=rg(),[a,i]=T.useState(!1),l=T.useRef(null),u=()=>i(h=>!h);T.useEffect(()=>{const h=p=>{a&&l.current&&!l.current.contains(p.target)&&i(!1)};return a&&document.addEventListener("mousedown",h),()=>{document.removeEventListener("mousedown",h)}},[a]);const d=h=>{const p=r.find(x=>x.id===h);if(!p)return h;const{title:b,prompt_tex:y}=p.data;return b&&b.trim()?b:y.replace(/\s+/g," ").slice(0,40)+(y.length>40?"":"")};return m.jsxs("div",{className:"text-sm relative",ref:l,children:[!a&&m.jsxs("button",{className:"relative flex items-center justify-center w-10 h-8 rounded-lg transition-all duration-200 ease-in-out hover:scale-105 active:scale-95",style:{fontFamily:"Roboto, sans-serif",fontSize:"12px",backgroundColor:"var(--bg-secondary)",color:"var(--text-primary)",borderColor:"var(--border-primary)",borderStyle:"solid",borderWidth:"1px",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)"},onClick:u,title:"Utkast",children:[m.jsx(dm,{size:14,className:"transition-colors duration-200"}),r.length>0&&m.jsx("span",{className:"absolute -top-1 -right-1 text-xs leading-none rounded-full px-1.5 py-0.5 font-medium transition-all duration-200",style:{backgroundColor:"var(--accent-primary)",color:"var(--button-text)",boxShadow:"0 2px 4px 0 rgba(0, 0, 0, 0.1)"},children:r.length})]}),a&&m.jsxs("div",{className:"absolute top-0 left-0 z-50 border rounded-xl w-72 max-h-80 overflow-hidden transition-all duration-300 ease-out",style:{backgroundColor:"var(--bg-panel)",borderColor:"var(--border-primary)",borderStyle:"solid",borderWidth:"1px",boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)"},children:[m.jsxs("div",{className:"flex justify-between items-center p-3 border-b",style:{borderColor:"var(--border-secondary)"},children:[m.jsxs("span",{className:"font-medium flex items-center gap-2 text-sm",style:{color:"var(--text-primary)"},children:[m.jsx(dm,{size:16,style:{color:"var(--accent-primary)"}}),"Utkast (",r.length,")",m.jsx("button",{onClick:()=>{e&&e(),u()},title:"Nytt utkast",className:"p-1.5 rounded-lg transition-all duration-200 hover:bg-accent-primary/10 hover:scale-105 active:scale-95",style:{color:"var(--accent-primary)"},children:m.jsx(Za,{size:14})})]}),m.jsx("button",{onClick:u,className:"p-1.5 rounded-lg transition-all duration-200 hover:bg-accent-primary/10 hover:scale-105 active:scale-95",style:{color:"var(--text-secondary)"},children:m.jsx(va,{size:14})})]}),m.jsxs("div",{className:"p-2 max-h-64 overflow-y-auto",children:[r.length===0&&m.jsxs("div",{className:"text-center py-8 text-sm",style:{color:"var(--text-muted)"},children:[m.jsx(dm,{size:24,className:"mx-auto mb-2 opacity-50"}),"Inga utkast"]}),r.map((h,p)=>m.jsxs("div",{className:"flex justify-between items-center gap-2 group p-2 rounded-lg transition-all duration-200 hover:bg-accent-primary/5",style:{opacity:0,transform:"translateY(10px)",animation:`fadeInUp 0.3s ease-out ${p*50}ms forwards`},children:[m.jsx("button",{className:"flex-1 text-left truncate hover:underline transition-colors duration-200 text-sm",style:{color:"var(--text-primary)"},onClick:()=>t&&t(h.id),title:"ppna utkast",children:d(h.id)}),m.jsx("button",{className:"opacity-0 group-hover:opacity-100 p-1.5 rounded-lg transition-all duration-200 hover:bg-red-500/10 hover:scale-105 active:scale-95",style:{color:"var(--text-secondary)"},onClick:()=>n(h.id),title:"Ta bort",children:m.jsx(xa,{size:12})})]},h.id))]})]})]})};let YI=0;const hc=[];let bo=[];const Y7=t=>{const e=YI++,r={...t,id:e};bo=[...bo,r],hc.forEach(n=>n(bo))},XI=t=>{bo=bo.filter((e,r)=>r!==t),hc.forEach(e=>e(bo))},QI=()=>{const[t,e]=T.useState([]);return T.useEffect(()=>{const r=n=>{e(n)};return hc.push(r),e(bo),()=>{const n=hc.indexOf(r);n>-1&&hc.splice(n,1)}},[]),{notifications:t,addNotification:Y7,removeNotification:XI}},Me=(t,e,r,n=5e3)=>{Y7({type:t,title:e,message:r,duration:n})},s6={admin:4,trusted:3,user:2,guest:1},Vc=(t,e)=>s6[t]>=s6[e],WI=t=>Vc(t,"admin"),JI=t=>Vc(t,"trusted"),e$=t=>Vc(t,"user"),Aa=()=>{const{user:t}=Lr(),e=t?.role||"guest";return{userRole:e,hasRole:r=>Vc(e,r),isAdmin:()=>WI(e),isTrustedOrHigher:()=>JI(e),isUserOrHigher:()=>e$(e)}},t$=xt({problem_ids:an(Je()).min(1,"Minst ett problem krvs"),max_drafts:Je().min(1).max(10).default(3),comment:Oe().optional(),model_name:Ei(["gpt-4o","gemini-1.5-pro-latest"]).default("gpt-4o"),provider:Ei(["openai","gemini"]).default("openai"),temperature:Je().min(0).max(2).default(1.4),top_p:Je().min(0).max(1).default(.95),presence_penalty:Je().min(-2).max(2).default(1.2),max_tokens:Je().min(16).max(4096).default(4e3)}),r$=xt({max_points:Je(),ability_code:Oe(),level_code:Oe(),description_text:Oe().optional()}),n$=W5(Oe(),Q5([Oe(),Bt()])).optional(),a$=xt({prompt_tex:Oe(),assessment_items:an(r$),area_id:Je().optional(),title:Oe().optional(),flags:n$,is_public:Bt().default(!1)});xt({clean_drafts:an(a$),raw_draft:Oe()});xt({id:Oe(),created_at:Oe(),updated_at:Oe(),schema_version:Je().default(1),data:xt({title:Oe().optional(),prompt_tex:Oe(),area_id:Je().optional(),flags:W5(Oe(),Bt()).default({}),assessment:an(xt({max_points:Je(),ability_code:Oe(),level_code:Oe(),description_text:Oe().optional()})),is_public:Bt().default(!1),request_publish:Bt().default(!1),pendingImages:an(xl()).default([])})});const s$=()=>{const{isTrustedOrHigher:t}=Aa(),{save:e}=rg(),r=Gt(),n=pt({mutationFn:async a=>{if(!t())throw new Error("Du mste ha trusted-roll eller hgre fr att anvnda AI-generering");if(!r)throw new Error("Du mste vara inloggad fr att anvnda AI-generering");const i=t$.parse(a),l={problem_ids:i.problem_ids,max_drafts:i.max_drafts,comment:i.comment,model_name:i.model_name,provider:i.provider,temperature:i.temperature,top_p:i.top_p,presence_penalty:i.presence_penalty,max_tokens:i.max_tokens},u=await st("/v1/ai/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)},r);if(!u.ok){const h=await u.json().catch(()=>({detail:"Oknt fel"}));throw new Error(h.detail??"Kunde inte generera AI-utkast")}const d=await u.json();if(!d.clean_drafts||!Array.isArray(d.clean_drafts))throw new Error("Ogiltig response frn AI-generering");return{clean_drafts:d.clean_drafts,raw_draft:d.raw_draft||""}},onSuccess:a=>{a.clean_drafts.forEach(i=>{const l={};i.flags&&typeof i.flags=="object"&&Object.entries(i.flags).forEach(([d,h])=>{typeof h=="string"?l[d]=h.toLowerCase()==="true"||h==="1":typeof h=="boolean"&&(l[d]=h)});const u={id:crypto.randomUUID(),created_at:new Date().toISOString(),updated_at:new Date().toISOString(),schema_version:1,data:{title:i.title||"AI-genererat problem",prompt_tex:i.prompt_tex,area_id:i.area_id,flags:l,assessment:(i.assessment_items||[]).map(d=>({max_points:d.max_points,ability_code:d.ability_code,level_code:d.level_code,description_text:d.description_text})),is_public:!1,request_publish:!1,pendingImages:[]}};e(u)}),Me("success","AI-utkast genererade",`${a.clean_drafts.length} utkast har lagts till i draftstab`)},onError:a=>{let i="Ett fel uppstod vid AI-generering";a.message.includes("rate limit")?i="Fr mnga frfrgningar. Vnta en stund innan du frsker igen.":a.message.includes("validation")?i="Ogiltig data. Kontrollera dina instllningar.":a.message.includes("Ogiltig response")&&(i="AI-generering returnerade ogiltig data. Frsk igen."),Me("error","AI-generering misslyckades",i)}});return{generate:n.mutate,isGenerating:n.isPending,error:n.error,reset:n.reset}},X7=xt({maxDrafts:Je().min(1).max(10).default(3),modelName:Ei(["gpt-4o","gemini-1.5-pro-latest"]).default("gpt-4o"),provider:Ei(["openai","gemini"]).default("openai"),temperature:Je().min(0).max(2).default(1.4),maxTokens:Je().min(16).max(4096).default(4e3),topP:Je().min(0).max(1).default(.95),presencePenalty:Je().min(-2).max(2).default(1.2)}),Q7=1,W7="jd_ai_settings",nc={maxDrafts:3,modelName:"gpt-4o",provider:"openai",temperature:1.4,maxTokens:4e3,topP:.95,presencePenalty:1.2};let hi=null;const Hp=new Set;function Zm(){if(hi)return hi;try{const t=localStorage.getItem(W7);if(!t)return hi=nc;const e=JSON.parse(t);if(e.schema_version!==Q7)return hi=nc;const r=X7.safeParse(e);return hi=r.success?r.data:nc,hi}catch{return hi=nc}}function i6(t){hi=t;try{const e={...t,schema_version:Q7,updated_at:new Date().toISOString()};localStorage.setItem(W7,JSON.stringify(e))}catch(e){console.warn("AI settings write error",e)}Hp.forEach(e=>e(t))}const i$=()=>{const[t,e]=T.useState(Zm());T.useEffect(()=>(l=>(Hp.add(l),l(Zm()),()=>{Hp.delete(l)}))(e),[]);const r=T.useCallback(a=>{const l={...Zm(),...a},u=X7.safeParse(l);u.success?i6(u.data):console.warn("Invalid AI settings update:",u.error)},[]),n=T.useCallback(()=>{i6(nc)},[]);return{settings:t,updateSettings:r,resetSettings:n}},o$=({isOpen:t,onClose:e,memory:r})=>{const{settings:n,updateSettings:a}=i$(),[i,l]=T.useState({maxDrafts:3,comment:"",modelName:"gpt-4o",provider:"openai",temperature:1.4,maxTokens:4e3,topP:.95,presencePenalty:1.2}),{generate:u,isGenerating:d}=s$(),h=T.useRef(null);T.useEffect(()=>{l(A=>({...A,maxDrafts:n.maxDrafts,modelName:n.modelName,provider:n.provider,temperature:n.temperature,maxTokens:n.maxTokens,topP:n.topP,presencePenalty:n.presencePenalty}))},[n]);const p=T.useCallback((A,C)=>{let N;return(...D)=>{clearTimeout(N),N=setTimeout(()=>A(...D),C)}},[]),b=T.useCallback(p(A=>{a(A)},500),[a]),y=T.useCallback((A,C)=>{l(N=>({...N,[A]:C})),A!=="comment"&&b({[A]:C})},[b]);T.useEffect(()=>{const A=C=>{t&&h.current&&!h.current.contains(C.target)&&e()};return t&&document.addEventListener("mousedown",A),()=>{document.removeEventListener("mousedown",A)}},[t,e]);const _=r?Array.from([...r.part1Ids,...r.part2Ids]):[],k=_.length>0,S=async A=>{if(A.preventDefault(),!k)return;const C={problem_ids:_,max_drafts:i.maxDrafts,comment:i.comment||void 0,model_name:i.modelName,provider:i.provider,temperature:i.temperature,max_tokens:i.maxTokens,top_p:i.topP,presence_penalty:i.presencePenalty};try{await u(C),e()}catch{}};return t?m.jsxs("div",{ref:h,className:"absolute top-full left-0 mt-2 z-[9999] border rounded-xl w-80 max-h-[85vh] min-h-[300px] overflow-hidden transition-all duration-300 ease-out",style:{backgroundColor:"var(--bg-panel)",borderColor:"var(--border-primary)",borderStyle:"solid",borderWidth:"1px",boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)"},children:[m.jsx("style",{children:`
        @keyframes shimmer {
          0% { transform: translateX(-100%); }
          100% { transform: translateX(100%); }
        }
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
      `}),m.jsxs("div",{className:"flex justify-between items-center p-3 border-b",style:{borderColor:"var(--border-secondary)"},children:[m.jsxs("span",{className:"font-medium flex items-center gap-2 text-sm",style:{color:"var(--text-primary)"},children:[m.jsx(s8,{size:16,style:{color:"var(--accent-primary)"}}),"AI-generering",!k&&m.jsx("span",{className:"text-xs px-2 py-1 rounded",style:{backgroundColor:"var(--status-error)",color:"var(--button-text)"},children:"Inga problem"})]}),m.jsx("button",{onClick:e,className:"p-1.5 rounded-lg transition-all duration-200 hover:bg-accent-primary/10 hover:scale-105 active:scale-95",style:{color:"var(--text-secondary)"},children:m.jsx(va,{size:14})})]}),m.jsx("div",{className:"p-3 max-h-[calc(85vh-120px)] overflow-y-auto",children:m.jsxs("form",{onSubmit:S,className:"space-y-4",children:[m.jsxs("div",{children:[m.jsxs("label",{className:"block text-xs font-medium mb-2",style:{color:"var(--text-primary)"},children:["Problem IDs (",_.length,")"]}),m.jsx("div",{className:"p-2 rounded text-xs",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-primary)",borderStyle:"solid",borderWidth:"1px",color:"var(--text-secondary)"},children:k?_.join(", "):"Inga problem valda"})]}),m.jsxs("div",{children:[m.jsxs("label",{className:"block text-xs font-medium mb-2",style:{color:"var(--text-primary)"},children:["Antal utkast (",i.maxDrafts,")"]}),m.jsx("input",{type:"range",min:"1",max:"10",value:i.maxDrafts,onChange:A=>y("maxDrafts",parseInt(A.target.value)),className:"w-full",disabled:!k})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium mb-2",style:{color:"var(--text-primary)"},children:"Instruktioner (valfritt)"}),m.jsx("textarea",{value:i.comment,onChange:A=>y("comment",A.target.value),placeholder:"Skapa fler grnsvrdesuppgifter r du snll...",className:"w-full p-2 text-xs rounded resize-none",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-primary)",borderColor:"var(--border-primary)",borderStyle:"solid",borderWidth:"1px",minHeight:"60px"},disabled:!k})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium mb-2",style:{color:"var(--text-primary)"},children:"Modell"}),m.jsxs("select",{value:i.modelName,onChange:A=>{const C=A.target.value,N=C.includes("gpt")?"openai":"gemini";l(D=>({...D,modelName:C,provider:N})),b({modelName:C,provider:N})},className:"w-full p-2 text-xs rounded",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-primary)",borderColor:"var(--border-primary)",borderStyle:"solid",borderWidth:"1px"},disabled:!k,children:[m.jsx("option",{value:"gpt-4o",children:"GPT-4o (OpenAI)"}),m.jsx("option",{value:"gemini-1.5-pro-latest",children:"Gemini 1.5 Pro (Google)"})]})]}),m.jsxs("div",{children:[m.jsxs("label",{className:"block text-xs font-medium mb-2",style:{color:"var(--text-primary)"},children:["Kreativitet - Temperature (",i.temperature,")"]}),m.jsx("input",{type:"range",min:"0",max:"2",step:"0.1",value:i.temperature,onChange:A=>y("temperature",parseFloat(A.target.value)),className:"w-full",disabled:!k,title:"0.0-0.5 = Mycket fokuserat, 0.5-1.2 = Balanserat, 1.2-1.6 = Kreativt, >1.6 = Riskabelt nonsense"}),m.jsx("div",{className:"text-xs mt-1",style:{color:"var(--text-secondary)"},children:"Lgre = mer frutsgbart, hgre = mer kreativt (ver 1.6 kan bli nonsense)"})]}),m.jsxs("div",{children:[m.jsxs("label",{className:"block text-xs font-medium mb-2",style:{color:"var(--text-primary)"},children:["Ordval-diversitet - Top P (",i.topP,")"]}),m.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:i.topP,onChange:A=>y("topP",parseFloat(A.target.value)),className:"w-full",disabled:!k,title:"Hgre vrden = mer variation i ordval (0.9-1.0 rekommenderas)"}),m.jsx("div",{className:"text-xs mt-1",style:{color:"var(--text-secondary)"},children:"Lgre = mer fokuserat, hgre = mer varierat ordval"})]}),m.jsxs("div",{children:[m.jsxs("label",{className:"block text-xs font-medium mb-2",style:{color:"var(--text-primary)"},children:["Upprepning-undvikande (",i.presencePenalty,")"]}),m.jsx("input",{type:"range",min:"-2",max:"2",step:"0.1",value:i.presencePenalty,onChange:A=>y("presencePenalty",parseFloat(A.target.value)),className:"w-full",disabled:!k,title:"Positiva vrden minskar upprepningar, negativa kar dem (1.0-1.5 rekommenderas)"}),m.jsx("div",{className:"text-xs mt-1",style:{color:"var(--text-secondary)"},children:"Positiva vrden = mindre upprepning av fraser och begrepp"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium mb-2",style:{color:"var(--text-primary)"},children:"Max tokens"}),m.jsx("input",{type:"number",min:"16",max:"4096",value:i.maxTokens,onChange:A=>y("maxTokens",parseInt(A.target.value)),className:"w-full p-2 text-xs rounded",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-primary)",borderColor:"var(--border-primary)",borderStyle:"solid",borderWidth:"1px"},disabled:!k})]}),m.jsxs("button",{type:"submit",disabled:!k||d,className:"w-full flex items-center justify-center gap-2 p-3 rounded-lg transition-all duration-200 hover:scale-105 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 relative overflow-hidden",style:{backgroundColor:"var(--accent-primary)",color:"var(--button-text)",border:"none",minHeight:"40px"},children:[d&&m.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent animate-pulse",style:{animation:"shimmer 2s infinite"}}),m.jsx("div",{className:"relative z-10 flex items-center gap-2",children:d?m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"relative",children:[m.jsx(Qx,{size:18,className:"animate-spin",style:{animation:"spin 1s linear infinite"}}),m.jsx("div",{className:"absolute inset-0",children:m.jsx(e3,{size:18,className:"opacity-30"})})]}),m.jsx("span",{className:"text-sm font-medium",children:"Genererar AI-utkast..."})]}):m.jsxs(m.Fragment,{children:[m.jsx(e3,{size:18,className:"transition-transform duration-200 group-hover:rotate-12"}),m.jsx("span",{className:"text-sm font-medium",children:"Generera utkast"})]})})]}),d&&m.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm flex items-center justify-center z-[9999]",children:m.jsx("div",{className:"bg-white/90 dark:bg-gray-800/90 rounded-lg p-4 shadow-lg border",children:m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(Qx,{size:24,className:"animate-spin text-accent-primary"}),m.jsxs("div",{children:[m.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"AI genererar utkast..."}),m.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Detta kan ta upp till 30 sekunder"})]})]})})})]})})]}):null},l$=(t={})=>{const{initialPage:e=0,pageSize:r=10,onPageChange:n}=t,[a,i]=T.useState(e),[l,u]=T.useState(0),d=T.useMemo(()=>Math.ceil(l/r),[l,r]),h=T.useCallback(_=>{const k=Math.max(0,Math.min(_,d-1));i(k),n?.(k)},[d,n]),p=T.useCallback(()=>{a<d-1&&h(a+1)},[a,d,h]),b=T.useCallback(()=>{a>0&&h(a-1)},[a,h]),y=a<d-1,x=a>0;return{page:a,totalCount:l,totalPages:d,pageSize:r,setPage:h,setTotalCount:u,nextPage:p,prevPage:b,canGoNext:y,canGoPrev:x}},u$=({currentPage:t,totalPages:e,onPageChange:r})=>m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("button",{className:"px-2 py-1 rounded text-sm disabled:opacity-50 hover:bg-secondary transition-all duration-200 flex items-center justify-center",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-primary)",border:"1px solid var(--border-primary)",fontFamily:"Roboto, sans-serif",fontSize:"12px"},onClick:()=>r(Math.max(0,t-1)),disabled:t===0||e<=1,"aria-label":"Fregende sida",children:m.jsx(WN,{size:14})}),m.jsxs("span",{className:"text-sm w-10 text-center",style:{color:"var(--text-secondary)",fontFamily:"Roboto, sans-serif",fontSize:"12px"},children:[t+1," / ",e]}),m.jsx("button",{className:"px-2 py-1 rounded text-sm disabled:opacity-50 hover:bg-secondary transition-all duration-200 flex items-center justify-center",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-primary)",border:"1px solid var(--border-primary)",fontFamily:"Roboto, sans-serif",fontSize:"12px"},onClick:()=>r(Math.min(e-1,t+1)),disabled:t>=e-1||e<=1,"aria-label":"Nsta sida",children:m.jsx(Fc,{size:14})})]}),c$=({hierarchyFilter:t,onFilterChange:e,onGreedyResult:r,greedyExclusions:n,memory:a,clearMemory:i,onRemoveFromMemory:l,onOpenDraft:u,onNewDraft:d,currentPage:h,totalPages:p,onPageChange:b,showTest:y=!0})=>{const{isTrustedOrHigher:x}=Aa(),[_,k]=T.useState(!1),A=a?Array.from([...a.part1Ids,...a.part2Ids]):[],C=A.length>0;return m.jsx("div",{className:"p-1 mb-0",children:m.jsxs("div",{className:"flex gap-4 items-stretch",children:[m.jsxs("div",{className:"flex gap-2",children:[m.jsx("div",{className:"w-10",children:m.jsx(KI,{onOpenDraft:u,onNewDraft:d})}),x()&&m.jsxs("div",{className:"relative",children:[m.jsxs("button",{className:`relative flex items-center justify-center w-10 h-8 rounded-lg transition-all duration-200 ease-in-out hover:scale-105 active:scale-95 ${C?"ring-2 ring-accent-primary/20 hover:ring-accent-primary/40":""}`,disabled:!C,onClick:()=>k(!0),title:C?"Generera AI-utkast baserat p valda problem":"Inga problem att generera frn",style:{fontFamily:"Roboto, sans-serif",fontSize:"12px",backgroundColor:"var(--bg-secondary)",color:C?"var(--accent-primary)":"var(--text-secondary)",borderColor:"var(--border-primary)",borderStyle:"solid",borderWidth:"1px",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)"},children:[m.jsx(KN,{size:14,className:"transition-colors duration-200"}),C&&m.jsx("span",{className:"absolute -top-1 -right-1 text-xs leading-none rounded-full px-1.5 py-0.5 font-medium transition-all duration-200",style:{backgroundColor:"var(--accent-primary)",color:"var(--button-text)",boxShadow:"0 2px 4px 0 rgba(0, 0, 0, 0.1)"},children:A.length})]}),m.jsx(o$,{isOpen:_,onClose:()=>k(!1),memory:a})]})]}),y&&m.jsx("div",{className:"w-20",children:m.jsx(GI,{memory:a,onClearMemory:i,onRemoveFromMemory:l})}),m.jsxs("div",{className:"flex-1 flex items-center gap-3",children:[m.jsx("div",{className:"flex-1 min-w-0",children:m.jsx(pF,{hierarchyFilter:t,onFilterChange:e,onGreedyResult:r,greedyExclusions:n,memory:a})}),h!==void 0&&p!==void 0&&b&&m.jsx("div",{className:"flex-shrink-0",children:m.jsx(u$,{currentPage:h,totalPages:p,onPageChange:b})})]})]})})},d$=(t,e)=>{const{data:r,isLoading:n,error:a}=lr({queryKey:["hierarchy","parent-path",t,e],queryFn:async()=>e?await Yr.fetchParentPath(t,e):{},enabled:!!e,staleTime:3e5});return{parentPath:r||{},isLoading:n,error:a}},J7=()=>{const{user:t}=Lr(),[e,r]=T.useState(null),[n,a]=T.useState(!0),{parentPath:i}=d$(e?.selectedNodeType||"",e?.selectedNodeId||null);T.useEffect(()=>{(async()=>{a(!0);const h=t?.core_user_id;try{let p=so.loadPersistence(h);!p&&h&&(p=so.migrateFromGlobalPersistence(h)),r(p)}catch(p){console.error("Failed to load hierarchy persistence:",p),r(null)}finally{a(!1)}})()},[t?.core_user_id]);const l=T.useCallback(d=>{const h=t?.core_user_id,p=so.createPersistenceData(d.id,d.type,d.title,i,h);so.savePersistence(p,h)&&r(p)},[t?.core_user_id,i]),u=T.useCallback(()=>{const d=t?.core_user_id;so.clearPersistence(d),r(null)},[t?.core_user_id]);return{persistenceData:e,savePersistence:l,clearPersistence:u,isLoading:n}},h$=({onHierarchyFilterChange:t})=>{const[e,r]=T.useState({}),[n,a]=T.useState(null),{persistenceData:i,savePersistence:l,clearPersistence:u}=J7(),d=T.useCallback(h=>{if(a(h),!h){const y={};r(y),t(y),u();return}const p=h.id,b={area_ids:h.type==="area"?[p]:void 0,chapter_ids:h.type==="chapter"?[p]:void 0,course_ids:h.type==="course"?[p]:void 0,subject_ids:h.type==="subject"?[p]:void 0};r(b),t(b),l(h)},[t,l,u]);return{hierarchyFilter:e,handleHierarchySelect:d,lastPersistenceData:i,selectedNode:n}},f$=t=>{const[e,r]=T.useState(null),[n,a]=T.useState(null),{data:i,isLoading:l,error:u}=lr({queryKey:["hierarchy","chapter-areas",t.chapter_ids],queryFn:async()=>{if(!t.chapter_ids?.[0])return null;const A=(await Yr.fetchChildren("chapter",t.chapter_ids[0])).filter(C=>C.type==="area");return A.length>0?A[0]:null},enabled:!!t.chapter_ids?.[0],staleTime:5*60*1e3}),{data:d,isLoading:h,error:p}=lr({queryKey:["hierarchy","course-areas",t.course_ids],queryFn:async()=>{if(!t.course_ids?.[0])return null;const A=(await Yr.fetchChildren("course",t.course_ids[0])).filter(D=>D.type==="chapter");if(A.length===0)return null;const N=(await Yr.fetchChildren("chapter",A[0].id)).filter(D=>D.type==="area");return N.length>0?N[0]:null},enabled:!!t.course_ids?.[0]&&!t.chapter_ids,staleTime:5*60*1e3}),{data:b,isLoading:y,error:x}=lr({queryKey:["hierarchy","subject-areas",t.subject_ids],queryFn:async()=>{if(!t.subject_ids?.[0])return null;const A=(await Yr.fetchChildren("subject",t.subject_ids[0])).filter(O=>O.type==="course");if(A.length===0)return null;const N=(await Yr.fetchChildren("course",A[0].id)).filter(O=>O.type==="chapter");if(N.length===0)return null;const j=(await Yr.fetchChildren("chapter",N[0].id)).filter(O=>O.type==="area");return j.length>0?j[0]:null},enabled:!!t.subject_ids?.[0]&&!t.course_ids&&!t.chapter_ids,staleTime:5*60*1e3}),_=l||h||y,k=u||p||x;return T.useEffect(()=>{if(a(null),t.area_ids?.[0]){r(t.area_ids[0]);return}r(i?i.id:d?d.id:b?b.id:null)},[t.area_ids,t.chapter_ids,t.course_ids,t.subject_ids,i,d,b]),T.useEffect(()=>{k&&a(k.message||"Kunde inte hmta omrdesinformation")},[k]),{selectedAreaId:e,isLoading:_,error:n}};function m$(t,e){switch(e.type){case"toggle":return{...t,[e.flag]:!t[e.flag]};case"toggle-primary":const r=["is_s","is_np","is_r","is_fake"],n={...t};return r.forEach(a=>{n[a]=!1}),n[e.flag]=!0,n;case"set-all":return e.value;case"reset":return{is_np:!1,is_s:!1,is_r:!1,is_fake:!1,is_digital:!1,is_elev:!1,is_whole:!1};default:return t}}function p$(t,e){switch(e.type){case"toggle-public":return{...t,is_public:!t.is_public};case"toggle-request":return{...t,request_publish:!t.request_publish};case"set-extra-flags":return e.value;case"reset-extra":return{is_public:!1,request_publish:!1};default:return t}}const Km={is_np:!1,is_s:!1,is_r:!1,is_fake:!1,is_digital:!1,is_elev:!1,is_whole:!1},g$={is_public:!1,request_publish:!1},Od={is_np:"NP",is_s:"Original",is_r:"Ln",is_fake:"AI",is_digital:"Digital",is_elev:"Formativ",is_whole:"Helhet"},o6={is_public:"Offentlig",request_publish:"Delad"},b$=xt({id:Je().optional(),ability_code:Oe().min(1,"Frdighet krvs"),max_points:Je().min(1,"Minst 1 pong krvs"),level_code:Oe().min(1,"Niv krvs"),description_text:Oe().optional()}),y$=xt({areaId:Je().int().positive("Vlj omrde"),title:Oe().optional(),promptTex:Oe().min(1,"Problemtext krvs"),assessment:an(b$).min(1,"Minst en bedmningsrad krvs"),source_reference:Oe().max(40,"Max 40 tecken").optional(),flags:xt({is_digital:Bt(),is_np:Bt(),is_s:Bt(),is_r:Bt(),is_fake:Bt(),is_elev:Bt(),is_whole:Bt()}).refine(t=>[t.is_s,t.is_np,t.is_r,t.is_fake].filter(Boolean).length===1,{message:"Vlj exakt en av: Original, NP, Ln, eller AI",path:["flags"]}),isPublic:Bt(),requestPublish:Bt()});function x$({selectedAreaId:t,draftId:e,existingProblem:r,drafts:n,onDraftUpdate:a,onDraftAdd:i}){const l=!!r,u=fo({resolver:mo(y$),defaultValues:{areaId:l?r?.area_id||void 0:t||void 0,title:"",promptTex:"",assessment:[],source_reference:"",flags:Km,isPublic:!1,requestPublish:!1},mode:"onChange"}),[d,h]=T.useReducer(m$,Km),[p,b]=T.useReducer(p$,g$);T.useEffect(()=>{u.setValue("flags",d),u.trigger()},[d,u]),T.useEffect(()=>{u.setValue("isPublic",p.is_public),u.setValue("requestPublish",p.request_publish),u.trigger()},[p,u]);const[y,x]=T.useState();T.useEffect(()=>{const S=setTimeout(()=>{u.trigger()},100);return()=>clearTimeout(S)},[u]),T.useEffect(()=>{if(!e||!n)return;const S=n.find(C=>C.id===e);if(!S)return;const{data:A}=S;if(u.reset({areaId:A.area_id,title:A.title??"",promptTex:A.prompt_tex,assessment:A.assessment||A.assessment_items,source_reference:A.source_reference??"",flags:A.flags,isPublic:A.is_public,requestPublish:A.request_publish}),h({type:"set-all",value:A.flags}),b({type:"set-extra-flags",value:{is_public:A.is_public,request_publish:A.request_publish}}),A.pendingImages){const C=A.pendingImages.map(N=>({id:N.id,blobUrl:N.dataUrl,placeholderText:N.placeholderText}));x(C)}else x(void 0)},[e,n,u]),T.useEffect(()=>{!l||!r||(u.setValue("title",r.title??""),u.setValue("promptTex",r.prompt_tex),u.setValue("assessment",r.assessment_items.map(S=>({...S}))),u.setValue("source_reference",r.sub_items?.source_reference??""),u.setValue("flags",{is_digital:r.is_digital??!1,is_np:r.is_np??!1,is_s:r.is_s??!1,is_r:r.is_r??!1,is_fake:r.is_fake??!1,is_elev:r.is_elev??!1,is_whole:r.is_whole??!1}),u.setValue("isPublic",r.is_public??!1),u.setValue("requestPublish",r.request_publish??!1),h({type:"set-all",value:{is_digital:r.is_digital??!1,is_np:r.is_np??!1,is_s:r.is_s??!1,is_r:r.is_r??!1,is_fake:r.is_fake??!1,is_elev:r.is_elev??!1,is_whole:r.is_whole??!1}}),b({type:"set-extra-flags",value:{is_public:r.is_public??!1,request_publish:r.request_publish??!1}}))},[l,r,u]),T.useEffect(()=>{t!==null&&!l&&u.setValue("areaId",t)},[t,u,l]);const _=()=>{u.reset({areaId:t||void 0,title:"",promptTex:"",assessment:[],source_reference:"",flags:Km,isPublic:!1,requestPublish:!1}),h({type:"reset"}),b({type:"reset-extra"})},k=async S=>{const A=u.getValues();let C;if(S&&S.length>0){C=[];for(const D of S)try{const j=await fetch(D.blobUrl).then(F=>F.blob()),O=await new Promise(F=>{const R=new FileReader;R.onload=()=>F(R.result),R.readAsDataURL(j)});C.push({id:D.id,dataUrl:O,placeholderText:D.placeholderText})}catch(j){console.error("Failed to convert blob to data URL for draft:",j)}}const N={prompt_tex:A.promptTex,title:A.title?.trim()||null,area_id:A.areaId,assessment_items:A.assessment,source_reference:A.source_reference?.trim()||null,flags:A.flags,is_public:A.isPublic,request_publish:A.requestPublish,pendingImages:C};e&&a?a(e,N):i&&i(N)};return{form:u,flags:d,extraFlags:p,dispatchFlags:h,dispatchExtraFlags:b,isDirty:u.formState.isDirty,isValid:u.formState.isValid,resetForm:_,saveDraft:k,draftPendingImages:y}}async function v$(t,e){const r=e??null,n=await st("/v1/similarity/draft",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},r??void 0);if(!n.ok)throw new Error(`Similarity check failed: ${n.status}`);return(await n.json()).similar_problem_ids??[]}function _$(){const t=Hr(),e=Gt(),r=pt({mutationFn:async l=>{const u=await st("/v1/problems",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)},e??void 0);if(!u.ok){const d=await u.json().catch(()=>({detail:u.statusText}));throw new Error(d.detail??u.statusText)}return await u.json()},onSuccess:()=>{t.invalidateQueries({queryKey:_t.all,exact:!1}),t.invalidateQueries({queryKey:_t.lists(),exact:!1}),t.invalidateQueries({queryKey:_t.details(),exact:!1}),t.refetchQueries({queryKey:_t.all,exact:!1}),t.refetchQueries({queryKey:_t.lists(),exact:!1}),t.refetchQueries({queryKey:_t.details(),exact:!1})},onError:l=>{l instanceof ic&&console.error(`API Error ${l.status}: ${l.message}`)}}),n=pt({mutationFn:async({problemId:l,data:u})=>{const d=await st(`/v1/problems/${l}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)},e??void 0);if(!d.ok){const h=await d.json().catch(()=>({detail:d.statusText}));throw new Error(h.detail??d.statusText)}return await d.json()},onSuccess:()=>{t.invalidateQueries({queryKey:_t.all,exact:!1}),t.invalidateQueries({queryKey:_t.lists(),exact:!1}),t.invalidateQueries({queryKey:_t.details(),exact:!1}),t.refetchQueries({queryKey:_t.all,exact:!1}),t.refetchQueries({queryKey:_t.lists(),exact:!1}),t.refetchQueries({queryKey:_t.details(),exact:!1})},onError:l=>{l instanceof ic&&console.error(`API Error ${l.status}: ${l.message}`)}}),a=pt({mutationFn:async({problemId:l,permanent:u=!1})=>{const d=u?`/v1/problems/${l}?hard=true`:`/v1/problems/${l}`,h=await st(d,{method:"DELETE"},e??void 0);if(!h.ok){const p=await h.json().catch(()=>({detail:h.statusText}));throw new Error(p.detail??h.statusText)}return await h.json()},onSuccess:()=>{t.invalidateQueries({queryKey:_t.all,exact:!1}),t.invalidateQueries({queryKey:_t.lists(),exact:!1}),t.invalidateQueries({queryKey:_t.details(),exact:!1}),t.refetchQueries({queryKey:_t.all,exact:!1}),t.refetchQueries({queryKey:_t.lists(),exact:!1}),t.refetchQueries({queryKey:_t.details(),exact:!1})},onError:l=>{l instanceof ic&&console.error(`API Error ${l.status}: ${l.message}`)}}),i=pt({mutationFn:async l=>await v$(l,e),onError:l=>{console.error("Similarity check failed:",l)}});return{createProblem:r,updateProblem:n,deleteProblem:a,checkSimilarity:i}}const w$=()=>{const[t,e]=T.useState(!1),[r,n]=T.useState([]),{data:a=[]}=jh(r);return{showSimilarity:t,similarProblems:a,setSimilarIds:n,setShowSimilarity:e,resetSimilarity:()=>{e(!1),n([])}}};async function l6(t,e,r,n){if(t.length===0)return e;let a=e;for(const i of t)try{if(i.blobUrl.startsWith("data:")){const d=await(await fetch(i.blobUrl)).blob(),h=new File([d],`draft-image-${i.id}.png`,{type:d.type}),p=new FormData;p.append("file",h);const b=await st(`/v1/attachments/${r}/upload`,{method:"POST",body:p},n);if(!b.ok)throw new Error(`Upload failed: ${b.statusText}`);const y=await b.json(),x=new RegExp(`\\\\includegraphics\\[([^\\]]*)\\]\\{${i.id}\\}`,"g");a=a.replace(x,(_,k)=>{const S=y.file_url;return`\\includegraphics[${k}]{${S}}`})}else{const u=new FormData;u.append("file",i.file);const d=await st(`/v1/attachments/${r}/upload`,{method:"POST",body:u},n);if(!d.ok)throw new Error(`Upload failed: ${d.statusText}`);const h=await d.json(),p=new RegExp(`\\\\includegraphics\\[([^\\]]*)\\]\\{${i.id}\\}`,"g");a=a.replace(p,(y,x)=>{const _=h.file_url;return`\\includegraphics[${x}]{${_}}`});const b=new RegExp(i.blobUrl.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g");a=a.replace(b,h.file_url)}}catch(l){l instanceof Error&&(console.error("Error message:",l.message),console.error("Error stack:",l.stack)),console.warn(`Failed to upload image ${i.id}, continuing with next image`)}return a}function ng(t,e,r){if(!t)return!1;switch(e){case"deleteHard":if(t.role==="admin")return!0;if(r?.existingProblem){const n=r.existingProblem;return String(n.owner_id??"")===String(t.core_user_id)}return!1;case"togglePublic":return t.role==="admin"||t.role==="trusted";case"toggleRequest":return t.role==="admin"||t.role==="trusted"||t.role==="user";case"editProblem":if(t.role==="admin")return!0;if(r?.existingProblem){const n=r.existingProblem;return String(n.owner_id??"")===String(t.core_user_id)}return!1;default:return!1}}function k$(t,e){return ng(t,"deleteHard",{existingProblem:e})}function u6(t){return ng(t,"togglePublic")}function c6(t,e){return ng(t,"editProblem",{existingProblem:e})}function S$({pendingImages:t,setPendingImages:e,existingProblem:r,draftId:n,removeDraft:a,onSave:i,onClose:l,checkSimilarity:u,setSimilarIds:d,setShowSimilarity:h,setSaving:p}){const{user:b}=Lr(),y=Gt(),x=T.useRef(!1);return{handleUpdateProblem:async S=>{const A=S.promptTex;try{const C={prompt_tex:A,title:S.title?.trim()||null,area_id:S.areaId,assessment_items:S.assessment,source_reference:S.source_reference?.trim()||null,flags:S.flags,request_publish:S.extraFlags.request_publish,...u6(b)?{is_public:S.extraFlags.is_public}:{}},N=Number(r.bank_problem_definition_id);let D=A;if(t.length>0)try{D=await l6(t,A,N,y??void 0),t.forEach(R=>URL.revokeObjectURL(R.blobUrl)),e([])}catch(F){console.warn("Image upload during update failed:",F)}const j={...C,prompt_tex:D},O=await i(j,!0,N,S);return n&&a(n),l(),O}catch(C){throw p(!1),C}},handleCreateProblem:async S=>{if(!x.current){const N=await u.mutateAsync({prompt_tex:S.promptTex,title:S.title?.trim()||null,area_id:S.areaId});if(N.length){d(N),h(!0),p(!1);return}}const A=S.promptTex,C={prompt_tex:A,title:S.title?.trim()||null,area_id:S.areaId,assessment_items:S.assessment,source_reference:S.source_reference?.trim()||null,flags:S.flags,request_publish:S.extraFlags.request_publish,...u6(b)?{is_public:S.extraFlags.is_public}:{}};try{const N=await i(C,!1,void 0,S),D=N.bank_problem_definition_id;if(t.length>0)try{const j=await l6(t,A,D,y??void 0);if(j!==A){const O={...C,prompt_tex:j};await i(O,!0,D,S)}t.forEach(O=>URL.revokeObjectURL(O.blobUrl)),e([])}catch(j){console.warn("Image upload failed:",j)}return n&&a(n),l(),N}catch(N){throw p(!1),N}},skipSimilarityRef:x}}function A$({draftPendingImages:t}){const[e,r]=T.useState([]);return T.useEffect(()=>{if(t){const i=t.map(l=>({id:l.id,blobUrl:l.blobUrl,placeholderText:l.placeholderText,file:new File([],"draft-image")}));r(i)}},[t]),{pendingImages:e,setPendingImages:r,addPendingImage:i=>{r(l=>[...l,i])},clearPendingImages:()=>{e.forEach(i=>URL.revokeObjectURL(i.blobUrl)),r([])}}}function Qd(t){const e=t,r=`${e.type}-${e.id}`,n=[...(e.courses??[]).map(a=>Qd(a)),...(e.chapters??[]).map(a=>Qd(a)),...(e.areas??[]).map(a=>Qd(a))];return{id:e.id,uid:r,parentSubjectId:e.type==="subject"?e.id:void 0,title:e.title,type:e.type,hasChildren:!!(e.courses?.length||e.chapters?.length||e.areas?.length),children:n.length?n:void 0}}function e9(){const{data:t,isLoading:e,error:r}=lr({queryKey:["hierarchy"],staleTime:36e5,queryFn:async()=>((await po.getHierarchyApiHierarchyGet()).hierarchy??[]).map(a=>Qd(a))});return{hierarchy:t??[],loading:e,error:r}}function t9(t){const{data:e,isLoading:r,error:n}=lr({queryKey:["hierarchy","problem-parent",t],enabled:!!t,staleTime:6e5,queryFn:async()=>{if(!t)throw new Error("Problem ID is required for parent lookup");return await po.getProblemParentApiHierarchyProblemParentProblemIdGet(t)}});return{problemParent:e,loading:r,error:n}}class Ln{constructor(e,r,n){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=e,this.start=r,this.end=n}static range(e,r){return r?!e||!e.loc||!r.loc||e.loc.lexer!==r.loc.lexer?null:new Ln(e.loc.lexer,e.loc.start,r.loc.end):e&&e.loc}}class na{constructor(e,r){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=e,this.loc=r}range(e,r){return new na(r,Ln.range(this,e))}}class Te{constructor(e,r){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var n="KaTeX parse error: "+e,a,i,l=r&&r.loc;if(l&&l.start<=l.end){var u=l.lexer.input;a=l.start,i=l.end,a===u.length?n+=" at end of input: ":n+=" at position "+(a+1)+": ";var d=u.slice(a,i).replace(/[^]/g,"$&"),h;a>15?h=""+u.slice(a-15,a):h=u.slice(0,a);var p;i+15<u.length?p=u.slice(i,i+15)+"":p=u.slice(i),n+=h+d+p}var b=new Error(n);return b.name="ParseError",b.__proto__=Te.prototype,b.position=a,a!=null&&i!=null&&(b.length=i-a),b.rawMessage=e,b}}Te.prototype.__proto__=Error.prototype;var E$=function(e,r){return e.indexOf(r)!==-1},C$=function(e,r){return e===void 0?r:e},T$=/([A-Z])/g,N$=function(e){return e.replace(T$,"-$1").toLowerCase()},M$={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},j$=/[&><"']/g;function D$(t){return String(t).replace(j$,e=>M$[e])}var r9=function t(e){return e.type==="ordgroup"||e.type==="color"?e.body.length===1?t(e.body[0]):e:e.type==="font"?t(e.body):e},z$=function(e){var r=r9(e);return r.type==="mathord"||r.type==="textord"||r.type==="atom"},O$=function(e){if(!e)throw new Error("Expected non-null, but got "+String(e));return e},R$=function(e){var r=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(e);return r?r[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(r[1])?null:r[1].toLowerCase():"_relative"},Ue={contains:E$,deflt:C$,escape:D$,hyphenate:N$,getBaseElem:r9,isCharacterBox:z$,protocolFromUrl:R$},Wd={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:t=>"#"+t},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(t,e)=>(e.push(t),e)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:t=>Math.max(0,t),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:t=>Math.max(0,t),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:t=>Math.max(0,t),cli:"-e, --max-expand <n>",cliProcessor:t=>t==="Infinity"?1/0:parseInt(t)},globalGroup:{type:"boolean",cli:!1}};function F$(t){if(t.default)return t.default;var e=t.type,r=Array.isArray(e)?e[0]:e;if(typeof r!="string")return r.enum[0];switch(r){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class ag{constructor(e){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,e=e||{};for(var r in Wd)if(Wd.hasOwnProperty(r)){var n=Wd[r];this[r]=e[r]!==void 0?n.processor?n.processor(e[r]):e[r]:F$(n)}}reportNonstrict(e,r,n){var a=this.strict;if(typeof a=="function"&&(a=a(e,r,n)),!(!a||a==="ignore")){if(a===!0||a==="error")throw new Te("LaTeX-incompatible input and strict mode is set to 'error': "+(r+" ["+e+"]"),n);a==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(r+" ["+e+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+a+"': "+r+" ["+e+"]"))}}useStrictBehavior(e,r,n){var a=this.strict;if(typeof a=="function")try{a=a(e,r,n)}catch{a="error"}return!a||a==="ignore"?!1:a===!0||a==="error"?!0:a==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(r+" ["+e+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+a+"': "+r+" ["+e+"]")),!1)}isTrusted(e){if(e.url&&!e.protocol){var r=Ue.protocolFromUrl(e.url);if(r==null)return!1;e.protocol=r}var n=typeof this.trust=="function"?this.trust(e):this.trust;return!!n}}class li{constructor(e,r,n){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=e,this.size=r,this.cramped=n}sup(){return Pa[L$[this.id]]}sub(){return Pa[P$[this.id]]}fracNum(){return Pa[B$[this.id]]}fracDen(){return Pa[I$[this.id]]}cramp(){return Pa[$$[this.id]]}text(){return Pa[q$[this.id]]}isTight(){return this.size>=2}}var sg=0,xh=1,yl=2,Ts=3,Mc=4,ra=5,Nl=6,nn=7,Pa=[new li(sg,0,!1),new li(xh,0,!0),new li(yl,1,!1),new li(Ts,1,!0),new li(Mc,2,!1),new li(ra,2,!0),new li(Nl,3,!1),new li(nn,3,!0)],L$=[Mc,ra,Mc,ra,Nl,nn,Nl,nn],P$=[ra,ra,ra,ra,nn,nn,nn,nn],B$=[yl,Ts,Mc,ra,Nl,nn,Nl,nn],I$=[Ts,Ts,ra,ra,nn,nn,nn,nn],$$=[xh,xh,Ts,Ts,ra,ra,nn,nn],q$=[sg,xh,yl,Ts,yl,Ts,yl,Ts],Ge={DISPLAY:Pa[sg],TEXT:Pa[yl],SCRIPT:Pa[Mc],SCRIPTSCRIPT:Pa[Nl]},Up=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function H$(t){for(var e=0;e<Up.length;e++)for(var r=Up[e],n=0;n<r.blocks.length;n++){var a=r.blocks[n];if(t>=a[0]&&t<=a[1])return r.name}return null}var Jd=[];Up.forEach(t=>t.blocks.forEach(e=>Jd.push(...e)));function n9(t){for(var e=0;e<Jd.length;e+=2)if(t>=Jd[e]&&t<=Jd[e+1])return!0;return!1}var dl=80,U$=function(e,r){return"M95,"+(622+e+r)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+e/2.075+" -"+e+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+e)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+e)+" "+r+"h400000v"+(40+e)+"h-400000z"},V$=function(e,r){return"M263,"+(601+e+r)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+e/2.084+" -"+e+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+e)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+e)+" "+r+"h400000v"+(40+e)+"h-400000z"},G$=function(e,r){return"M983 "+(10+e+r)+`
l`+e/3.13+" -"+e+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+e)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+e)+" "+r+"h400000v"+(40+e)+"h-400000z"},Z$=function(e,r){return"M424,"+(2398+e+r)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+e/4.223+" -"+e+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+e)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+e)+" "+r+`
h400000v`+(40+e)+"h-400000z"},K$=function(e,r){return"M473,"+(2713+e+r)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+e/5.298+" -"+e+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+e)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+e)+" "+r+"h400000v"+(40+e)+"H1017.7z"},Y$=function(e){var r=e/2;return"M400000 "+e+" H0 L"+r+" 0 l65 45 L145 "+(e-80)+" H400000z"},X$=function(e,r,n){var a=n-54-r-e;return"M702 "+(e+r)+"H400000"+(40+e)+`
H742v`+a+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+r+"H400000v"+(40+e)+"H742z"},Q$=function(e,r,n){r=1e3*r;var a="";switch(e){case"sqrtMain":a=U$(r,dl);break;case"sqrtSize1":a=V$(r,dl);break;case"sqrtSize2":a=G$(r,dl);break;case"sqrtSize3":a=Z$(r,dl);break;case"sqrtSize4":a=K$(r,dl);break;case"sqrtTall":a=X$(r,dl,n)}return a},W$=function(e,r){switch(e){case"":return"M291 0 H417 V"+r+" H291z M291 0 H417 V"+r+" H291z";case"":return"M145 0 H188 V"+r+" H145z M145 0 H188 V"+r+" H145z";case"":return"M145 0 H188 V"+r+" H145z M145 0 H188 V"+r+" H145z"+("M367 0 H410 V"+r+" H367z M367 0 H410 V"+r+" H367z");case"":return"M457 0 H583 V"+r+" H457z M457 0 H583 V"+r+" H457z";case"":return"M319 0 H403 V"+r+" H319z M319 0 H403 V"+r+" H319z";case"":return"M263 0 H347 V"+r+" H263z M263 0 H347 V"+r+" H263z";case"":return"M384 0 H504 V"+r+" H384z M384 0 H504 V"+r+" H384z";case"":return"M312 0 H355 V"+r+" H312z M312 0 H355 V"+r+" H312z";case"":return"M257 0 H300 V"+r+" H257z M257 0 H300 V"+r+" H257z"+("M478 0 H521 V"+r+" H478z M478 0 H521 V"+r+" H478z");default:return""}},d6={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},J$=function(e,r){switch(e){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+r+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+r+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+r+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+r+" v1759 h84z";case"vert":return"M145 15 v585 v"+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+r+" v585 h43z";case"doublevert":return"M145 15 v585 v"+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+r+` v585 h43z
M367 15 v585 v`+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+r+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+r+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+r+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+r+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+r+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+r+` v602 h84z
M403 1759 V0 H319 V1759 v`+r+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+r+` v602 h84z
M347 1759 V0 h-84 V1759 v`+r+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(r+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(r+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(r+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(r+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};class Gc{constructor(e){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=e,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(e){return Ue.contains(this.classes,e)}toNode(){for(var e=document.createDocumentFragment(),r=0;r<this.children.length;r++)e.appendChild(this.children[r].toNode());return e}toMarkup(){for(var e="",r=0;r<this.children.length;r++)e+=this.children[r].toMarkup();return e}toText(){var e=r=>r.toText();return this.children.map(e).join("")}}var Ha={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},Rd={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},h6={:"A",:"D",:"o",:"a",:"d",:"o",:"A",:"B",:"B",:"F",:"A",:"E",:"K",:"3",:"N",:"N",:"K",:"N",:"M",:"H",:"O",:"N",:"P",:"C",:"T",:"y",:"O",:"X",:"U",:"h",:"W",:"W",:"B",:"X",:"B",:"3",:"X",:"R",:"a",:"b",:"a",:"r",:"y",:"e",:"m",:"e",:"n",:"n",:"n",:"n",:"m",:"n",:"o",:"n",:"p",:"c",:"o",:"y",:"b",:"x",:"n",:"n",:"w",:"w",:"a",:"m",:"a",:"e",:"m",:"r"};function eq(t,e){Ha[t]=e}function ig(t,e,r){if(!Ha[e])throw new Error("Font metrics not found for font: "+e+".");var n=t.charCodeAt(0),a=Ha[e][n];if(!a&&t[0]in h6&&(n=h6[t[0]].charCodeAt(0),a=Ha[e][n]),!a&&r==="text"&&n9(n)&&(a=Ha[e][77]),a)return{depth:a[0],height:a[1],italic:a[2],skew:a[3],width:a[4]}}var Ym={};function tq(t){var e;if(t>=5?e=0:t>=3?e=1:e=2,!Ym[e]){var r=Ym[e]={cssEmPerMu:Rd.quad[e]/18};for(var n in Rd)Rd.hasOwnProperty(n)&&(r[n]=Rd[n][e])}return Ym[e]}var rq=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],f6=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],m6=function(e,r){return r.size<2?e:rq[e-1][r.size-1]};class As{constructor(e){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=e.style,this.color=e.color,this.size=e.size||As.BASESIZE,this.textSize=e.textSize||this.size,this.phantom=!!e.phantom,this.font=e.font||"",this.fontFamily=e.fontFamily||"",this.fontWeight=e.fontWeight||"",this.fontShape=e.fontShape||"",this.sizeMultiplier=f6[this.size-1],this.maxSize=e.maxSize,this.minRuleThickness=e.minRuleThickness,this._fontMetrics=void 0}extend(e){var r={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);return new As(r)}havingStyle(e){return this.style===e?this:this.extend({style:e,size:m6(this.textSize,e)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(e){return this.size===e&&this.textSize===e?this:this.extend({style:this.style.text(),size:e,textSize:e,sizeMultiplier:f6[e-1]})}havingBaseStyle(e){e=e||this.style.text();var r=m6(As.BASESIZE,e);return this.size===r&&this.textSize===As.BASESIZE&&this.style===e?this:this.extend({style:e,size:r})}havingBaseSizing(){var e;switch(this.style.id){case 4:case 5:e=3;break;case 6:case 7:e=1;break;default:e=6}return this.extend({style:this.style.text(),size:e})}withColor(e){return this.extend({color:e})}withPhantom(){return this.extend({phantom:!0})}withFont(e){return this.extend({font:e})}withTextFontFamily(e){return this.extend({fontFamily:e,font:""})}withTextFontWeight(e){return this.extend({fontWeight:e,font:""})}withTextFontShape(e){return this.extend({fontShape:e,font:""})}sizingClasses(e){return e.size!==this.size?["sizing","reset-size"+e.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==As.BASESIZE?["sizing","reset-size"+this.size,"size"+As.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=tq(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}As.BASESIZE=6;var Vp={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},nq={ex:!0,em:!0,mu:!0},a9=function(e){return typeof e!="string"&&(e=e.unit),e in Vp||e in nq||e==="ex"},tr=function(e,r){var n;if(e.unit in Vp)n=Vp[e.unit]/r.fontMetrics().ptPerEm/r.sizeMultiplier;else if(e.unit==="mu")n=r.fontMetrics().cssEmPerMu;else{var a;if(r.style.isTight()?a=r.havingStyle(r.style.text()):a=r,e.unit==="ex")n=a.fontMetrics().xHeight;else if(e.unit==="em")n=a.fontMetrics().quad;else throw new Te("Invalid unit: '"+e.unit+"'");a!==r&&(n*=a.sizeMultiplier/r.sizeMultiplier)}return Math.min(e.number*n,r.maxSize)},je=function(e){return+e.toFixed(4)+"em"},Ni=function(e){return e.filter(r=>r).join(" ")},s9=function(e,r,n){if(this.classes=e||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=n||{},r){r.style.isTight()&&this.classes.push("mtight");var a=r.getColor();a&&(this.style.color=a)}},i9=function(e){var r=document.createElement(e);r.className=Ni(this.classes);for(var n in this.style)this.style.hasOwnProperty(n)&&(r.style[n]=this.style[n]);for(var a in this.attributes)this.attributes.hasOwnProperty(a)&&r.setAttribute(a,this.attributes[a]);for(var i=0;i<this.children.length;i++)r.appendChild(this.children[i].toNode());return r},aq=/[\s"'>/=\x00-\x1f]/,o9=function(e){var r="<"+e;this.classes.length&&(r+=' class="'+Ue.escape(Ni(this.classes))+'"');var n="";for(var a in this.style)this.style.hasOwnProperty(a)&&(n+=Ue.hyphenate(a)+":"+this.style[a]+";");n&&(r+=' style="'+Ue.escape(n)+'"');for(var i in this.attributes)if(this.attributes.hasOwnProperty(i)){if(aq.test(i))throw new Te("Invalid attribute name '"+i+"'");r+=" "+i+'="'+Ue.escape(this.attributes[i])+'"'}r+=">";for(var l=0;l<this.children.length;l++)r+=this.children[l].toMarkup();return r+="</"+e+">",r};class Zc{constructor(e,r,n,a){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,s9.call(this,e,n,a),this.children=r||[]}setAttribute(e,r){this.attributes[e]=r}hasClass(e){return Ue.contains(this.classes,e)}toNode(){return i9.call(this,"span")}toMarkup(){return o9.call(this,"span")}}class og{constructor(e,r,n,a){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,s9.call(this,r,a),this.children=n||[],this.setAttribute("href",e)}setAttribute(e,r){this.attributes[e]=r}hasClass(e){return Ue.contains(this.classes,e)}toNode(){return i9.call(this,"a")}toMarkup(){return o9.call(this,"a")}}class sq{constructor(e,r,n){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=r,this.src=e,this.classes=["mord"],this.style=n}hasClass(e){return Ue.contains(this.classes,e)}toNode(){var e=document.createElement("img");e.src=this.src,e.alt=this.alt,e.className="mord";for(var r in this.style)this.style.hasOwnProperty(r)&&(e.style[r]=this.style[r]);return e}toMarkup(){var e='<img src="'+Ue.escape(this.src)+'"'+(' alt="'+Ue.escape(this.alt)+'"'),r="";for(var n in this.style)this.style.hasOwnProperty(n)&&(r+=Ue.hyphenate(n)+":"+this.style[n]+";");return r&&(e+=' style="'+Ue.escape(r)+'"'),e+="'/>",e}}var iq={:"",:"",:"",:""};class ia{constructor(e,r,n,a,i,l,u,d){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=e,this.height=r||0,this.depth=n||0,this.italic=a||0,this.skew=i||0,this.width=l||0,this.classes=u||[],this.style=d||{},this.maxFontSize=0;var h=H$(this.text.charCodeAt(0));h&&this.classes.push(h+"_fallback"),/[]/.test(this.text)&&(this.text=iq[this.text])}hasClass(e){return Ue.contains(this.classes,e)}toNode(){var e=document.createTextNode(this.text),r=null;this.italic>0&&(r=document.createElement("span"),r.style.marginRight=je(this.italic)),this.classes.length>0&&(r=r||document.createElement("span"),r.className=Ni(this.classes));for(var n in this.style)this.style.hasOwnProperty(n)&&(r=r||document.createElement("span"),r.style[n]=this.style[n]);return r?(r.appendChild(e),r):e}toMarkup(){var e=!1,r="<span";this.classes.length&&(e=!0,r+=' class="',r+=Ue.escape(Ni(this.classes)),r+='"');var n="";this.italic>0&&(n+="margin-right:"+this.italic+"em;");for(var a in this.style)this.style.hasOwnProperty(a)&&(n+=Ue.hyphenate(a)+":"+this.style[a]+";");n&&(e=!0,r+=' style="'+Ue.escape(n)+'"');var i=Ue.escape(this.text);return e?(r+=">",r+=i,r+="</span>",r):i}}class Ds{constructor(e,r){this.children=void 0,this.attributes=void 0,this.children=e||[],this.attributes=r||{}}toNode(){var e="http://www.w3.org/2000/svg",r=document.createElementNS(e,"svg");for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&r.setAttribute(n,this.attributes[n]);for(var a=0;a<this.children.length;a++)r.appendChild(this.children[a].toNode());return r}toMarkup(){var e='<svg xmlns="http://www.w3.org/2000/svg"';for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(e+=" "+r+'="'+Ue.escape(this.attributes[r])+'"');e+=">";for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+="</svg>",e}}class Mi{constructor(e,r){this.pathName=void 0,this.alternate=void 0,this.pathName=e,this.alternate=r}toNode(){var e="http://www.w3.org/2000/svg",r=document.createElementNS(e,"path");return this.alternate?r.setAttribute("d",this.alternate):r.setAttribute("d",d6[this.pathName]),r}toMarkup(){return this.alternate?'<path d="'+Ue.escape(this.alternate)+'"/>':'<path d="'+Ue.escape(d6[this.pathName])+'"/>'}}class Gp{constructor(e){this.attributes=void 0,this.attributes=e||{}}toNode(){var e="http://www.w3.org/2000/svg",r=document.createElementNS(e,"line");for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&r.setAttribute(n,this.attributes[n]);return r}toMarkup(){var e="<line";for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(e+=" "+r+'="'+Ue.escape(this.attributes[r])+'"');return e+="/>",e}}function p6(t){if(t instanceof ia)return t;throw new Error("Expected symbolNode but got "+String(t)+".")}function oq(t){if(t instanceof Zc)return t;throw new Error("Expected span<HtmlDomNode> but got "+String(t)+".")}var lq={bin:1,close:1,inner:1,open:1,punct:1,rel:1},uq={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},$t={math:{},text:{}};function w(t,e,r,n,a,i){$t[t][a]={font:e,group:r,replace:n},i&&n&&($t[t][n]=$t[t][a])}var E="math",ke="text",z="main",I="ams",Wt="accent-token",Pe="bin",ln="close",Fl="inner",Ve="mathord",kr="op-token",qn="open",Ih="punct",H="rel",Rs="spacing",X="textord";w(E,z,H,"","\\equiv",!0);w(E,z,H,"","\\prec",!0);w(E,z,H,"","\\succ",!0);w(E,z,H,"","\\sim",!0);w(E,z,H,"","\\perp");w(E,z,H,"","\\preceq",!0);w(E,z,H,"","\\succeq",!0);w(E,z,H,"","\\simeq",!0);w(E,z,H,"","\\mid",!0);w(E,z,H,"","\\ll",!0);w(E,z,H,"","\\gg",!0);w(E,z,H,"","\\asymp",!0);w(E,z,H,"","\\parallel");w(E,z,H,"","\\bowtie",!0);w(E,z,H,"","\\smile",!0);w(E,z,H,"","\\sqsubseteq",!0);w(E,z,H,"","\\sqsupseteq",!0);w(E,z,H,"","\\doteq",!0);w(E,z,H,"","\\frown",!0);w(E,z,H,"","\\ni",!0);w(E,z,H,"","\\propto",!0);w(E,z,H,"","\\vdash",!0);w(E,z,H,"","\\dashv",!0);w(E,z,H,"","\\owns");w(E,z,Ih,".","\\ldotp");w(E,z,Ih,"","\\cdotp");w(E,z,X,"#","\\#");w(ke,z,X,"#","\\#");w(E,z,X,"&","\\&");w(ke,z,X,"&","\\&");w(E,z,X,"","\\aleph",!0);w(E,z,X,"","\\forall",!0);w(E,z,X,"","\\hbar",!0);w(E,z,X,"","\\exists",!0);w(E,z,X,"","\\nabla",!0);w(E,z,X,"","\\flat",!0);w(E,z,X,"","\\ell",!0);w(E,z,X,"","\\natural",!0);w(E,z,X,"","\\clubsuit",!0);w(E,z,X,"","\\wp",!0);w(E,z,X,"","\\sharp",!0);w(E,z,X,"","\\diamondsuit",!0);w(E,z,X,"","\\Re",!0);w(E,z,X,"","\\heartsuit",!0);w(E,z,X,"","\\Im",!0);w(E,z,X,"","\\spadesuit",!0);w(E,z,X,"","\\S",!0);w(ke,z,X,"","\\S");w(E,z,X,"","\\P",!0);w(ke,z,X,"","\\P");w(E,z,X,"","\\dag");w(ke,z,X,"","\\dag");w(ke,z,X,"","\\textdagger");w(E,z,X,"","\\ddag");w(ke,z,X,"","\\ddag");w(ke,z,X,"","\\textdaggerdbl");w(E,z,ln,"","\\rmoustache",!0);w(E,z,qn,"","\\lmoustache",!0);w(E,z,ln,"","\\rgroup",!0);w(E,z,qn,"","\\lgroup",!0);w(E,z,Pe,"","\\mp",!0);w(E,z,Pe,"","\\ominus",!0);w(E,z,Pe,"","\\uplus",!0);w(E,z,Pe,"","\\sqcap",!0);w(E,z,Pe,"","\\ast");w(E,z,Pe,"","\\sqcup",!0);w(E,z,Pe,"","\\bigcirc",!0);w(E,z,Pe,"","\\bullet",!0);w(E,z,Pe,"","\\ddagger");w(E,z,Pe,"","\\wr",!0);w(E,z,Pe,"","\\amalg");w(E,z,Pe,"&","\\And");w(E,z,H,"","\\longleftarrow",!0);w(E,z,H,"","\\Leftarrow",!0);w(E,z,H,"","\\Longleftarrow",!0);w(E,z,H,"","\\longrightarrow",!0);w(E,z,H,"","\\Rightarrow",!0);w(E,z,H,"","\\Longrightarrow",!0);w(E,z,H,"","\\leftrightarrow",!0);w(E,z,H,"","\\longleftrightarrow",!0);w(E,z,H,"","\\Leftrightarrow",!0);w(E,z,H,"","\\Longleftrightarrow",!0);w(E,z,H,"","\\mapsto",!0);w(E,z,H,"","\\longmapsto",!0);w(E,z,H,"","\\nearrow",!0);w(E,z,H,"","\\hookleftarrow",!0);w(E,z,H,"","\\hookrightarrow",!0);w(E,z,H,"","\\searrow",!0);w(E,z,H,"","\\leftharpoonup",!0);w(E,z,H,"","\\rightharpoonup",!0);w(E,z,H,"","\\swarrow",!0);w(E,z,H,"","\\leftharpoondown",!0);w(E,z,H,"","\\rightharpoondown",!0);w(E,z,H,"","\\nwarrow",!0);w(E,z,H,"","\\rightleftharpoons",!0);w(E,I,H,"","\\nless",!0);w(E,I,H,"","\\@nleqslant");w(E,I,H,"","\\@nleqq");w(E,I,H,"","\\lneq",!0);w(E,I,H,"","\\lneqq",!0);w(E,I,H,"","\\@lvertneqq");w(E,I,H,"","\\lnsim",!0);w(E,I,H,"","\\lnapprox",!0);w(E,I,H,"","\\nprec",!0);w(E,I,H,"","\\npreceq",!0);w(E,I,H,"","\\precnsim",!0);w(E,I,H,"","\\precnapprox",!0);w(E,I,H,"","\\nsim",!0);w(E,I,H,"","\\@nshortmid");w(E,I,H,"","\\nmid",!0);w(E,I,H,"","\\nvdash",!0);w(E,I,H,"","\\nvDash",!0);w(E,I,H,"","\\ntriangleleft");w(E,I,H,"","\\ntrianglelefteq",!0);w(E,I,H,"","\\subsetneq",!0);w(E,I,H,"","\\@varsubsetneq");w(E,I,H,"","\\subsetneqq",!0);w(E,I,H,"","\\@varsubsetneqq");w(E,I,H,"","\\ngtr",!0);w(E,I,H,"","\\@ngeqslant");w(E,I,H,"","\\@ngeqq");w(E,I,H,"","\\gneq",!0);w(E,I,H,"","\\gneqq",!0);w(E,I,H,"","\\@gvertneqq");w(E,I,H,"","\\gnsim",!0);w(E,I,H,"","\\gnapprox",!0);w(E,I,H,"","\\nsucc",!0);w(E,I,H,"","\\nsucceq",!0);w(E,I,H,"","\\succnsim",!0);w(E,I,H,"","\\succnapprox",!0);w(E,I,H,"","\\ncong",!0);w(E,I,H,"","\\@nshortparallel");w(E,I,H,"","\\nparallel",!0);w(E,I,H,"","\\nVDash",!0);w(E,I,H,"","\\ntriangleright");w(E,I,H,"","\\ntrianglerighteq",!0);w(E,I,H,"","\\@nsupseteqq");w(E,I,H,"","\\supsetneq",!0);w(E,I,H,"","\\@varsupsetneq");w(E,I,H,"","\\supsetneqq",!0);w(E,I,H,"","\\@varsupsetneqq");w(E,I,H,"","\\nVdash",!0);w(E,I,H,"","\\precneqq",!0);w(E,I,H,"","\\succneqq",!0);w(E,I,H,"","\\@nsubseteqq");w(E,I,Pe,"","\\unlhd");w(E,I,Pe,"","\\unrhd");w(E,I,H,"","\\nleftarrow",!0);w(E,I,H,"","\\nrightarrow",!0);w(E,I,H,"","\\nLeftarrow",!0);w(E,I,H,"","\\nRightarrow",!0);w(E,I,H,"","\\nleftrightarrow",!0);w(E,I,H,"","\\nLeftrightarrow",!0);w(E,I,H,"","\\vartriangle");w(E,I,X,"","\\hslash");w(E,I,X,"","\\triangledown");w(E,I,X,"","\\lozenge");w(E,I,X,"","\\circledS");w(E,I,X,"","\\circledR");w(ke,I,X,"","\\circledR");w(E,I,X,"","\\measuredangle",!0);w(E,I,X,"","\\nexists");w(E,I,X,"","\\mho");w(E,I,X,"","\\Finv",!0);w(E,I,X,"","\\Game",!0);w(E,I,X,"","\\backprime");w(E,I,X,"","\\blacktriangle");w(E,I,X,"","\\blacktriangledown");w(E,I,X,"","\\blacksquare");w(E,I,X,"","\\blacklozenge");w(E,I,X,"","\\bigstar");w(E,I,X,"","\\sphericalangle",!0);w(E,I,X,"","\\complement",!0);w(E,I,X,"","\\eth",!0);w(ke,z,X,"","");w(E,I,X,"","\\diagup");w(E,I,X,"","\\diagdown");w(E,I,X,"","\\square");w(E,I,X,"","\\Box");w(E,I,X,"","\\Diamond");w(E,I,X,"","\\yen",!0);w(ke,I,X,"","\\yen",!0);w(E,I,X,"","\\checkmark",!0);w(ke,I,X,"","\\checkmark");w(E,I,X,"","\\beth",!0);w(E,I,X,"","\\daleth",!0);w(E,I,X,"","\\gimel",!0);w(E,I,X,"","\\digamma",!0);w(E,I,X,"","\\varkappa");w(E,I,qn,"","\\@ulcorner",!0);w(E,I,ln,"","\\@urcorner",!0);w(E,I,qn,"","\\@llcorner",!0);w(E,I,ln,"","\\@lrcorner",!0);w(E,I,H,"","\\leqq",!0);w(E,I,H,"","\\leqslant",!0);w(E,I,H,"","\\eqslantless",!0);w(E,I,H,"","\\lesssim",!0);w(E,I,H,"","\\lessapprox",!0);w(E,I,H,"","\\approxeq",!0);w(E,I,Pe,"","\\lessdot");w(E,I,H,"","\\lll",!0);w(E,I,H,"","\\lessgtr",!0);w(E,I,H,"","\\lesseqgtr",!0);w(E,I,H,"","\\lesseqqgtr",!0);w(E,I,H,"","\\doteqdot");w(E,I,H,"","\\risingdotseq",!0);w(E,I,H,"","\\fallingdotseq",!0);w(E,I,H,"","\\backsim",!0);w(E,I,H,"","\\backsimeq",!0);w(E,I,H,"","\\subseteqq",!0);w(E,I,H,"","\\Subset",!0);w(E,I,H,"","\\sqsubset",!0);w(E,I,H,"","\\preccurlyeq",!0);w(E,I,H,"","\\curlyeqprec",!0);w(E,I,H,"","\\precsim",!0);w(E,I,H,"","\\precapprox",!0);w(E,I,H,"","\\vartriangleleft");w(E,I,H,"","\\trianglelefteq");w(E,I,H,"","\\vDash",!0);w(E,I,H,"","\\Vvdash",!0);w(E,I,H,"","\\smallsmile");w(E,I,H,"","\\smallfrown");w(E,I,H,"","\\bumpeq",!0);w(E,I,H,"","\\Bumpeq",!0);w(E,I,H,"","\\geqq",!0);w(E,I,H,"","\\geqslant",!0);w(E,I,H,"","\\eqslantgtr",!0);w(E,I,H,"","\\gtrsim",!0);w(E,I,H,"","\\gtrapprox",!0);w(E,I,Pe,"","\\gtrdot");w(E,I,H,"","\\ggg",!0);w(E,I,H,"","\\gtrless",!0);w(E,I,H,"","\\gtreqless",!0);w(E,I,H,"","\\gtreqqless",!0);w(E,I,H,"","\\eqcirc",!0);w(E,I,H,"","\\circeq",!0);w(E,I,H,"","\\triangleq",!0);w(E,I,H,"","\\thicksim");w(E,I,H,"","\\thickapprox");w(E,I,H,"","\\supseteqq",!0);w(E,I,H,"","\\Supset",!0);w(E,I,H,"","\\sqsupset",!0);w(E,I,H,"","\\succcurlyeq",!0);w(E,I,H,"","\\curlyeqsucc",!0);w(E,I,H,"","\\succsim",!0);w(E,I,H,"","\\succapprox",!0);w(E,I,H,"","\\vartriangleright");w(E,I,H,"","\\trianglerighteq");w(E,I,H,"","\\Vdash",!0);w(E,I,H,"","\\shortmid");w(E,I,H,"","\\shortparallel");w(E,I,H,"","\\between",!0);w(E,I,H,"","\\pitchfork",!0);w(E,I,H,"","\\varpropto");w(E,I,H,"","\\blacktriangleleft");w(E,I,H,"","\\therefore",!0);w(E,I,H,"","\\backepsilon");w(E,I,H,"","\\blacktriangleright");w(E,I,H,"","\\because",!0);w(E,I,H,"","\\llless");w(E,I,H,"","\\gggtr");w(E,I,Pe,"","\\lhd");w(E,I,Pe,"","\\rhd");w(E,I,H,"","\\eqsim",!0);w(E,z,H,"","\\Join");w(E,I,H,"","\\Doteq",!0);w(E,I,Pe,"","\\dotplus",!0);w(E,I,Pe,"","\\smallsetminus");w(E,I,Pe,"","\\Cap",!0);w(E,I,Pe,"","\\Cup",!0);w(E,I,Pe,"","\\doublebarwedge",!0);w(E,I,Pe,"","\\boxminus",!0);w(E,I,Pe,"","\\boxplus",!0);w(E,I,Pe,"","\\divideontimes",!0);w(E,I,Pe,"","\\ltimes",!0);w(E,I,Pe,"","\\rtimes",!0);w(E,I,Pe,"","\\leftthreetimes",!0);w(E,I,Pe,"","\\rightthreetimes",!0);w(E,I,Pe,"","\\curlywedge",!0);w(E,I,Pe,"","\\curlyvee",!0);w(E,I,Pe,"","\\circleddash",!0);w(E,I,Pe,"","\\circledast",!0);w(E,I,Pe,"","\\centerdot");w(E,I,Pe,"","\\intercal",!0);w(E,I,Pe,"","\\doublecap");w(E,I,Pe,"","\\doublecup");w(E,I,Pe,"","\\boxtimes",!0);w(E,I,H,"","\\dashrightarrow",!0);w(E,I,H,"","\\dashleftarrow",!0);w(E,I,H,"","\\leftleftarrows",!0);w(E,I,H,"","\\leftrightarrows",!0);w(E,I,H,"","\\Lleftarrow",!0);w(E,I,H,"","\\twoheadleftarrow",!0);w(E,I,H,"","\\leftarrowtail",!0);w(E,I,H,"","\\looparrowleft",!0);w(E,I,H,"","\\leftrightharpoons",!0);w(E,I,H,"","\\curvearrowleft",!0);w(E,I,H,"","\\circlearrowleft",!0);w(E,I,H,"","\\Lsh",!0);w(E,I,H,"","\\upuparrows",!0);w(E,I,H,"","\\upharpoonleft",!0);w(E,I,H,"","\\downharpoonleft",!0);w(E,z,H,"","\\origof",!0);w(E,z,H,"","\\imageof",!0);w(E,I,H,"","\\multimap",!0);w(E,I,H,"","\\leftrightsquigarrow",!0);w(E,I,H,"","\\rightrightarrows",!0);w(E,I,H,"","\\rightleftarrows",!0);w(E,I,H,"","\\twoheadrightarrow",!0);w(E,I,H,"","\\rightarrowtail",!0);w(E,I,H,"","\\looparrowright",!0);w(E,I,H,"","\\curvearrowright",!0);w(E,I,H,"","\\circlearrowright",!0);w(E,I,H,"","\\Rsh",!0);w(E,I,H,"","\\downdownarrows",!0);w(E,I,H,"","\\upharpoonright",!0);w(E,I,H,"","\\downharpoonright",!0);w(E,I,H,"","\\rightsquigarrow",!0);w(E,I,H,"","\\leadsto");w(E,I,H,"","\\Rrightarrow",!0);w(E,I,H,"","\\restriction");w(E,z,X,"","`");w(E,z,X,"$","\\$");w(ke,z,X,"$","\\$");w(ke,z,X,"$","\\textdollar");w(E,z,X,"%","\\%");w(ke,z,X,"%","\\%");w(E,z,X,"_","\\_");w(ke,z,X,"_","\\_");w(ke,z,X,"_","\\textunderscore");w(E,z,X,"","\\angle",!0);w(E,z,X,"","\\infty",!0);w(E,z,X,"","\\prime");w(E,z,X,"","\\triangle");w(E,z,X,"","\\Gamma",!0);w(E,z,X,"","\\Delta",!0);w(E,z,X,"","\\Theta",!0);w(E,z,X,"","\\Lambda",!0);w(E,z,X,"","\\Xi",!0);w(E,z,X,"","\\Pi",!0);w(E,z,X,"","\\Sigma",!0);w(E,z,X,"","\\Upsilon",!0);w(E,z,X,"","\\Phi",!0);w(E,z,X,"","\\Psi",!0);w(E,z,X,"","\\Omega",!0);w(E,z,X,"A","");w(E,z,X,"B","");w(E,z,X,"E","");w(E,z,X,"Z","");w(E,z,X,"H","");w(E,z,X,"I","");w(E,z,X,"K","");w(E,z,X,"M","");w(E,z,X,"N","");w(E,z,X,"O","");w(E,z,X,"P","");w(E,z,X,"T","");w(E,z,X,"X","");w(E,z,X,"","\\neg",!0);w(E,z,X,"","\\lnot");w(E,z,X,"","\\top");w(E,z,X,"","\\bot");w(E,z,X,"","\\emptyset");w(E,I,X,"","\\varnothing");w(E,z,Ve,"","\\alpha",!0);w(E,z,Ve,"","\\beta",!0);w(E,z,Ve,"","\\gamma",!0);w(E,z,Ve,"","\\delta",!0);w(E,z,Ve,"","\\epsilon",!0);w(E,z,Ve,"","\\zeta",!0);w(E,z,Ve,"","\\eta",!0);w(E,z,Ve,"","\\theta",!0);w(E,z,Ve,"","\\iota",!0);w(E,z,Ve,"","\\kappa",!0);w(E,z,Ve,"","\\lambda",!0);w(E,z,Ve,"","\\mu",!0);w(E,z,Ve,"","\\nu",!0);w(E,z,Ve,"","\\xi",!0);w(E,z,Ve,"","\\omicron",!0);w(E,z,Ve,"","\\pi",!0);w(E,z,Ve,"","\\rho",!0);w(E,z,Ve,"","\\sigma",!0);w(E,z,Ve,"","\\tau",!0);w(E,z,Ve,"","\\upsilon",!0);w(E,z,Ve,"","\\phi",!0);w(E,z,Ve,"","\\chi",!0);w(E,z,Ve,"","\\psi",!0);w(E,z,Ve,"","\\omega",!0);w(E,z,Ve,"","\\varepsilon",!0);w(E,z,Ve,"","\\vartheta",!0);w(E,z,Ve,"","\\varpi",!0);w(E,z,Ve,"","\\varrho",!0);w(E,z,Ve,"","\\varsigma",!0);w(E,z,Ve,"","\\varphi",!0);w(E,z,Pe,"","*",!0);w(E,z,Pe,"+","+");w(E,z,Pe,"","-",!0);w(E,z,Pe,"","\\cdot",!0);w(E,z,Pe,"","\\circ",!0);w(E,z,Pe,"","\\div",!0);w(E,z,Pe,"","\\pm",!0);w(E,z,Pe,"","\\times",!0);w(E,z,Pe,"","\\cap",!0);w(E,z,Pe,"","\\cup",!0);w(E,z,Pe,"","\\setminus",!0);w(E,z,Pe,"","\\land");w(E,z,Pe,"","\\lor");w(E,z,Pe,"","\\wedge",!0);w(E,z,Pe,"","\\vee",!0);w(E,z,X,"","\\surd");w(E,z,qn,"","\\langle",!0);w(E,z,qn,"","\\lvert");w(E,z,qn,"","\\lVert");w(E,z,ln,"?","?");w(E,z,ln,"!","!");w(E,z,ln,"","\\rangle",!0);w(E,z,ln,"","\\rvert");w(E,z,ln,"","\\rVert");w(E,z,H,"=","=");w(E,z,H,":",":");w(E,z,H,"","\\approx",!0);w(E,z,H,"","\\cong",!0);w(E,z,H,"","\\ge");w(E,z,H,"","\\geq",!0);w(E,z,H,"","\\gets");w(E,z,H,">","\\gt",!0);w(E,z,H,"","\\in",!0);w(E,z,H,"","\\@not");w(E,z,H,"","\\subset",!0);w(E,z,H,"","\\supset",!0);w(E,z,H,"","\\subseteq",!0);w(E,z,H,"","\\supseteq",!0);w(E,I,H,"","\\nsubseteq",!0);w(E,I,H,"","\\nsupseteq",!0);w(E,z,H,"","\\models");w(E,z,H,"","\\leftarrow",!0);w(E,z,H,"","\\le");w(E,z,H,"","\\leq",!0);w(E,z,H,"<","\\lt",!0);w(E,z,H,"","\\rightarrow",!0);w(E,z,H,"","\\to");w(E,I,H,"","\\ngeq",!0);w(E,I,H,"","\\nleq",!0);w(E,z,Rs,"","\\ ");w(E,z,Rs,"","\\space");w(E,z,Rs,"","\\nobreakspace");w(ke,z,Rs,"","\\ ");w(ke,z,Rs,""," ");w(ke,z,Rs,"","\\space");w(ke,z,Rs,"","\\nobreakspace");w(E,z,Rs,null,"\\nobreak");w(E,z,Rs,null,"\\allowbreak");w(E,z,Ih,",",",");w(E,z,Ih,";",";");w(E,I,Pe,"","\\barwedge",!0);w(E,I,Pe,"","\\veebar",!0);w(E,z,Pe,"","\\odot",!0);w(E,z,Pe,"","\\oplus",!0);w(E,z,Pe,"","\\otimes",!0);w(E,z,X,"","\\partial",!0);w(E,z,Pe,"","\\oslash",!0);w(E,I,Pe,"","\\circledcirc",!0);w(E,I,Pe,"","\\boxdot",!0);w(E,z,Pe,"","\\bigtriangleup");w(E,z,Pe,"","\\bigtriangledown");w(E,z,Pe,"","\\dagger");w(E,z,Pe,"","\\diamond");w(E,z,Pe,"","\\star");w(E,z,Pe,"","\\triangleleft");w(E,z,Pe,"","\\triangleright");w(E,z,qn,"{","\\{");w(ke,z,X,"{","\\{");w(ke,z,X,"{","\\textbraceleft");w(E,z,ln,"}","\\}");w(ke,z,X,"}","\\}");w(ke,z,X,"}","\\textbraceright");w(E,z,qn,"{","\\lbrace");w(E,z,ln,"}","\\rbrace");w(E,z,qn,"[","\\lbrack",!0);w(ke,z,X,"[","\\lbrack",!0);w(E,z,ln,"]","\\rbrack",!0);w(ke,z,X,"]","\\rbrack",!0);w(E,z,qn,"(","\\lparen",!0);w(E,z,ln,")","\\rparen",!0);w(ke,z,X,"<","\\textless",!0);w(ke,z,X,">","\\textgreater",!0);w(E,z,qn,"","\\lfloor",!0);w(E,z,ln,"","\\rfloor",!0);w(E,z,qn,"","\\lceil",!0);w(E,z,ln,"","\\rceil",!0);w(E,z,X,"\\","\\backslash");w(E,z,X,"","|");w(E,z,X,"","\\vert");w(ke,z,X,"|","\\textbar",!0);w(E,z,X,"","\\|");w(E,z,X,"","\\Vert");w(ke,z,X,"","\\textbardbl");w(ke,z,X,"~","\\textasciitilde");w(ke,z,X,"\\","\\textbackslash");w(ke,z,X,"^","\\textasciicircum");w(E,z,H,"","\\uparrow",!0);w(E,z,H,"","\\Uparrow",!0);w(E,z,H,"","\\downarrow",!0);w(E,z,H,"","\\Downarrow",!0);w(E,z,H,"","\\updownarrow",!0);w(E,z,H,"","\\Updownarrow",!0);w(E,z,kr,"","\\coprod");w(E,z,kr,"","\\bigvee");w(E,z,kr,"","\\bigwedge");w(E,z,kr,"","\\biguplus");w(E,z,kr,"","\\bigcap");w(E,z,kr,"","\\bigcup");w(E,z,kr,"","\\int");w(E,z,kr,"","\\intop");w(E,z,kr,"","\\iint");w(E,z,kr,"","\\iiint");w(E,z,kr,"","\\prod");w(E,z,kr,"","\\sum");w(E,z,kr,"","\\bigotimes");w(E,z,kr,"","\\bigoplus");w(E,z,kr,"","\\bigodot");w(E,z,kr,"","\\oint");w(E,z,kr,"","\\oiint");w(E,z,kr,"","\\oiiint");w(E,z,kr,"","\\bigsqcup");w(E,z,kr,"","\\smallint");w(ke,z,Fl,"","\\textellipsis");w(E,z,Fl,"","\\mathellipsis");w(ke,z,Fl,"","\\ldots",!0);w(E,z,Fl,"","\\ldots",!0);w(E,z,Fl,"","\\@cdots",!0);w(E,z,Fl,"","\\ddots",!0);w(E,z,X,"","\\varvdots");w(ke,z,X,"","\\varvdots");w(E,z,Wt,"","\\acute");w(E,z,Wt,"","\\grave");w(E,z,Wt,"","\\ddot");w(E,z,Wt,"~","\\tilde");w(E,z,Wt,"","\\bar");w(E,z,Wt,"","\\breve");w(E,z,Wt,"","\\check");w(E,z,Wt,"^","\\hat");w(E,z,Wt,"","\\vec");w(E,z,Wt,"","\\dot");w(E,z,Wt,"","\\mathring");w(E,z,Ve,"","\\@imath");w(E,z,Ve,"","\\@jmath");w(E,z,X,"","");w(E,z,X,"","");w(ke,z,X,"","\\i",!0);w(ke,z,X,"","\\j",!0);w(ke,z,X,"","\\ss",!0);w(ke,z,X,"","\\ae",!0);w(ke,z,X,"","\\oe",!0);w(ke,z,X,"","\\o",!0);w(ke,z,X,"","\\AE",!0);w(ke,z,X,"","\\OE",!0);w(ke,z,X,"","\\O",!0);w(ke,z,Wt,"","\\'");w(ke,z,Wt,"","\\`");w(ke,z,Wt,"","\\^");w(ke,z,Wt,"","\\~");w(ke,z,Wt,"","\\=");w(ke,z,Wt,"","\\u");w(ke,z,Wt,"","\\.");w(ke,z,Wt,"","\\c");w(ke,z,Wt,"","\\r");w(ke,z,Wt,"","\\v");w(ke,z,Wt,"",'\\"');w(ke,z,Wt,"","\\H");w(ke,z,Wt,"","\\textcircled");var l9={"--":!0,"---":!0,"``":!0,"''":!0};w(ke,z,X,"","--",!0);w(ke,z,X,"","\\textendash");w(ke,z,X,"","---",!0);w(ke,z,X,"","\\textemdash");w(ke,z,X,"","`",!0);w(ke,z,X,"","\\textquoteleft");w(ke,z,X,"","'",!0);w(ke,z,X,"","\\textquoteright");w(ke,z,X,"","``",!0);w(ke,z,X,"","\\textquotedblleft");w(ke,z,X,"","''",!0);w(ke,z,X,"","\\textquotedblright");w(E,z,X,"","\\degree",!0);w(ke,z,X,"","\\degree");w(ke,z,X,"","\\textdegree",!0);w(E,z,X,"","\\pounds");w(E,z,X,"","\\mathsterling",!0);w(ke,z,X,"","\\pounds");w(ke,z,X,"","\\textsterling",!0);w(E,I,X,"","\\maltese");w(ke,I,X,"","\\maltese");var g6='0123456789/@."';for(var Xm=0;Xm<g6.length;Xm++){var b6=g6.charAt(Xm);w(E,z,X,b6,b6)}var y6='0123456789!@*()-=+";:?/.,';for(var Qm=0;Qm<y6.length;Qm++){var x6=y6.charAt(Qm);w(ke,z,X,x6,x6)}var vh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var Wm=0;Wm<vh.length;Wm++){var Fd=vh.charAt(Wm);w(E,z,Ve,Fd,Fd),w(ke,z,X,Fd,Fd)}w(E,I,X,"C","");w(ke,I,X,"C","");w(E,I,X,"H","");w(ke,I,X,"H","");w(E,I,X,"N","");w(ke,I,X,"N","");w(E,I,X,"P","");w(ke,I,X,"P","");w(E,I,X,"Q","");w(ke,I,X,"Q","");w(E,I,X,"R","");w(ke,I,X,"R","");w(E,I,X,"Z","");w(ke,I,X,"Z","");w(E,z,Ve,"h","");w(ke,z,Ve,"h","");var We="";for(var Jr=0;Jr<vh.length;Jr++){var or=vh.charAt(Jr);We=String.fromCharCode(55349,56320+Jr),w(E,z,Ve,or,We),w(ke,z,X,or,We),We=String.fromCharCode(55349,56372+Jr),w(E,z,Ve,or,We),w(ke,z,X,or,We),We=String.fromCharCode(55349,56424+Jr),w(E,z,Ve,or,We),w(ke,z,X,or,We),We=String.fromCharCode(55349,56580+Jr),w(E,z,Ve,or,We),w(ke,z,X,or,We),We=String.fromCharCode(55349,56684+Jr),w(E,z,Ve,or,We),w(ke,z,X,or,We),We=String.fromCharCode(55349,56736+Jr),w(E,z,Ve,or,We),w(ke,z,X,or,We),We=String.fromCharCode(55349,56788+Jr),w(E,z,Ve,or,We),w(ke,z,X,or,We),We=String.fromCharCode(55349,56840+Jr),w(E,z,Ve,or,We),w(ke,z,X,or,We),We=String.fromCharCode(55349,56944+Jr),w(E,z,Ve,or,We),w(ke,z,X,or,We),Jr<26&&(We=String.fromCharCode(55349,56632+Jr),w(E,z,Ve,or,We),w(ke,z,X,or,We),We=String.fromCharCode(55349,56476+Jr),w(E,z,Ve,or,We),w(ke,z,X,or,We))}We="";w(E,z,Ve,"k",We);w(ke,z,X,"k",We);for(var eo=0;eo<10;eo++){var ui=eo.toString();We=String.fromCharCode(55349,57294+eo),w(E,z,Ve,ui,We),w(ke,z,X,ui,We),We=String.fromCharCode(55349,57314+eo),w(E,z,Ve,ui,We),w(ke,z,X,ui,We),We=String.fromCharCode(55349,57324+eo),w(E,z,Ve,ui,We),w(ke,z,X,ui,We),We=String.fromCharCode(55349,57334+eo),w(E,z,Ve,ui,We),w(ke,z,X,ui,We)}var Zp="";for(var Jm=0;Jm<Zp.length;Jm++){var Ld=Zp.charAt(Jm);w(E,z,Ve,Ld,Ld),w(ke,z,X,Ld,Ld)}var Pd=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],v6=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],cq=function(e,r){var n=e.charCodeAt(0),a=e.charCodeAt(1),i=(n-55296)*1024+(a-56320)+65536,l=r==="math"?0:1;if(119808<=i&&i<120484){var u=Math.floor((i-119808)/26);return[Pd[u][2],Pd[u][l]]}else if(120782<=i&&i<=120831){var d=Math.floor((i-120782)/10);return[v6[d][2],v6[d][l]]}else{if(i===120485||i===120486)return[Pd[0][2],Pd[0][l]];if(120486<i&&i<120782)return["",""];throw new Te("Unsupported character: "+e)}},$h=function(e,r,n){return $t[n][e]&&$t[n][e].replace&&(e=$t[n][e].replace),{value:e,metrics:ig(e,r,n)}},ga=function(e,r,n,a,i){var l=$h(e,r,n),u=l.metrics;e=l.value;var d;if(u){var h=u.italic;(n==="text"||a&&a.font==="mathit")&&(h=0),d=new ia(e,u.height,u.depth,h,u.skew,u.width,i)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+e+"' in style '"+r+"' and mode '"+n+"'")),d=new ia(e,0,0,0,0,0,i);if(a){d.maxFontSize=a.sizeMultiplier,a.style.isTight()&&d.classes.push("mtight");var p=a.getColor();p&&(d.style.color=p)}return d},dq=function(e,r,n,a){return a===void 0&&(a=[]),n.font==="boldsymbol"&&$h(e,"Main-Bold",r).metrics?ga(e,"Main-Bold",r,n,a.concat(["mathbf"])):e==="\\"||$t[r][e].font==="main"?ga(e,"Main-Regular",r,n,a):ga(e,"AMS-Regular",r,n,a.concat(["amsrm"]))},hq=function(e,r,n,a,i){return i!=="textord"&&$h(e,"Math-BoldItalic",r).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},fq=function(e,r,n){var a=e.mode,i=e.text,l=["mord"],u=a==="math"||a==="text"&&r.font,d=u?r.font:r.fontFamily,h="",p="";if(i.charCodeAt(0)===55349&&([h,p]=cq(i,a)),h.length>0)return ga(i,h,a,r,l.concat(p));if(d){var b,y;if(d==="boldsymbol"){var x=hq(i,a,r,l,n);b=x.fontName,y=[x.fontClass]}else u?(b=d9[d].fontName,y=[d]):(b=Bd(d,r.fontWeight,r.fontShape),y=[d,r.fontWeight,r.fontShape]);if($h(i,b,a).metrics)return ga(i,b,a,r,l.concat(y));if(l9.hasOwnProperty(i)&&b.slice(0,10)==="Typewriter"){for(var _=[],k=0;k<i.length;k++)_.push(ga(i[k],b,a,r,l.concat(y)));return c9(_)}}if(n==="mathord")return ga(i,"Math-Italic",a,r,l.concat(["mathnormal"]));if(n==="textord"){var S=$t[a][i]&&$t[a][i].font;if(S==="ams"){var A=Bd("amsrm",r.fontWeight,r.fontShape);return ga(i,A,a,r,l.concat("amsrm",r.fontWeight,r.fontShape))}else if(S==="main"||!S){var C=Bd("textrm",r.fontWeight,r.fontShape);return ga(i,C,a,r,l.concat(r.fontWeight,r.fontShape))}else{var N=Bd(S,r.fontWeight,r.fontShape);return ga(i,N,a,r,l.concat(N,r.fontWeight,r.fontShape))}}else throw new Error("unexpected type: "+n+" in makeOrd")},mq=(t,e)=>{if(Ni(t.classes)!==Ni(e.classes)||t.skew!==e.skew||t.maxFontSize!==e.maxFontSize)return!1;if(t.classes.length===1){var r=t.classes[0];if(r==="mbin"||r==="mord")return!1}for(var n in t.style)if(t.style.hasOwnProperty(n)&&t.style[n]!==e.style[n])return!1;for(var a in e.style)if(e.style.hasOwnProperty(a)&&t.style[a]!==e.style[a])return!1;return!0},pq=t=>{for(var e=0;e<t.length-1;e++){var r=t[e],n=t[e+1];r instanceof ia&&n instanceof ia&&mq(r,n)&&(r.text+=n.text,r.height=Math.max(r.height,n.height),r.depth=Math.max(r.depth,n.depth),r.italic=n.italic,t.splice(e+1,1),e--)}return t},lg=function(e){for(var r=0,n=0,a=0,i=0;i<e.children.length;i++){var l=e.children[i];l.height>r&&(r=l.height),l.depth>n&&(n=l.depth),l.maxFontSize>a&&(a=l.maxFontSize)}e.height=r,e.depth=n,e.maxFontSize=a},gn=function(e,r,n,a){var i=new Zc(e,r,n,a);return lg(i),i},u9=(t,e,r,n)=>new Zc(t,e,r,n),gq=function(e,r,n){var a=gn([e],[],r);return a.height=Math.max(n||r.fontMetrics().defaultRuleThickness,r.minRuleThickness),a.style.borderBottomWidth=je(a.height),a.maxFontSize=1,a},bq=function(e,r,n,a){var i=new og(e,r,n,a);return lg(i),i},c9=function(e){var r=new Gc(e);return lg(r),r},yq=function(e,r){return e instanceof Gc?gn([],[e],r):e},xq=function(e){if(e.positionType==="individualShift"){for(var r=e.children,n=[r[0]],a=-r[0].shift-r[0].elem.depth,i=a,l=1;l<r.length;l++){var u=-r[l].shift-i-r[l].elem.depth,d=u-(r[l-1].elem.height+r[l-1].elem.depth);i=i+u,n.push({type:"kern",size:d}),n.push(r[l])}return{children:n,depth:a}}var h;if(e.positionType==="top"){for(var p=e.positionData,b=0;b<e.children.length;b++){var y=e.children[b];p-=y.type==="kern"?y.size:y.elem.height+y.elem.depth}h=p}else if(e.positionType==="bottom")h=-e.positionData;else{var x=e.children[0];if(x.type!=="elem")throw new Error('First child must have type "elem".');if(e.positionType==="shift")h=-x.elem.depth-e.positionData;else if(e.positionType==="firstBaseline")h=-x.elem.depth;else throw new Error("Invalid positionType "+e.positionType+".")}return{children:e.children,depth:h}},vq=function(e,r){for(var{children:n,depth:a}=xq(e),i=0,l=0;l<n.length;l++){var u=n[l];if(u.type==="elem"){var d=u.elem;i=Math.max(i,d.maxFontSize,d.height)}}i+=2;var h=gn(["pstrut"],[]);h.style.height=je(i);for(var p=[],b=a,y=a,x=a,_=0;_<n.length;_++){var k=n[_];if(k.type==="kern")x+=k.size;else{var S=k.elem,A=k.wrapperClasses||[],C=k.wrapperStyle||{},N=gn(A,[h,S],void 0,C);N.style.top=je(-i-x-S.depth),k.marginLeft&&(N.style.marginLeft=k.marginLeft),k.marginRight&&(N.style.marginRight=k.marginRight),p.push(N),x+=S.height+S.depth}b=Math.min(b,x),y=Math.max(y,x)}var D=gn(["vlist"],p);D.style.height=je(y);var j;if(b<0){var O=gn([],[]),F=gn(["vlist"],[O]);F.style.height=je(-b);var R=gn(["vlist-s"],[new ia("")]);j=[gn(["vlist-r"],[D,R]),gn(["vlist-r"],[F])]}else j=[gn(["vlist-r"],[D])];var B=gn(["vlist-t"],j);return j.length===2&&B.classes.push("vlist-t2"),B.height=y,B.depth=-b,B},_q=(t,e)=>{var r=gn(["mspace"],[],e),n=tr(t,e);return r.style.marginRight=je(n),r},Bd=function(e,r,n){var a="";switch(e){case"amsrm":a="AMS";break;case"textrm":a="Main";break;case"textsf":a="SansSerif";break;case"texttt":a="Typewriter";break;default:a=e}var i;return r==="textbf"&&n==="textit"?i="BoldItalic":r==="textbf"?i="Bold":r==="textit"?i="Italic":i="Regular",a+"-"+i},d9={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},h9={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},wq=function(e,r){var[n,a,i]=h9[e],l=new Mi(n),u=new Ds([l],{width:je(a),height:je(i),style:"width:"+je(a),viewBox:"0 0 "+1e3*a+" "+1e3*i,preserveAspectRatio:"xMinYMin"}),d=u9(["overlay"],[u],r);return d.height=i,d.style.height=je(i),d.style.width=je(a),d},ne={fontMap:d9,makeSymbol:ga,mathsym:dq,makeSpan:gn,makeSvgSpan:u9,makeLineSpan:gq,makeAnchor:bq,makeFragment:c9,wrapFragment:yq,makeVList:vq,makeOrd:fq,makeGlue:_q,staticSvg:wq,svgData:h9,tryCombineChars:pq},er={number:3,unit:"mu"},to={number:4,unit:"mu"},vs={number:5,unit:"mu"},kq={mord:{mop:er,mbin:to,mrel:vs,minner:er},mop:{mord:er,mop:er,mrel:vs,minner:er},mbin:{mord:to,mop:to,mopen:to,minner:to},mrel:{mord:vs,mop:vs,mopen:vs,minner:vs},mopen:{},mclose:{mop:er,mbin:to,mrel:vs,minner:er},mpunct:{mord:er,mop:er,mrel:vs,mopen:er,mclose:er,mpunct:er,minner:er},minner:{mord:er,mop:er,mbin:to,mrel:vs,mopen:er,mpunct:er,minner:er}},Sq={mord:{mop:er},mop:{mord:er,mop:er},mbin:{},mrel:{},mopen:{},mclose:{mop:er},mpunct:{},minner:{mop:er}},f9={},_h={},wh={};function Fe(t){for(var{type:e,names:r,props:n,handler:a,htmlBuilder:i,mathmlBuilder:l}=t,u={type:e,numArgs:n.numArgs,argTypes:n.argTypes,allowedInArgument:!!n.allowedInArgument,allowedInText:!!n.allowedInText,allowedInMath:n.allowedInMath===void 0?!0:n.allowedInMath,numOptionalArgs:n.numOptionalArgs||0,infix:!!n.infix,primitive:!!n.primitive,handler:a},d=0;d<r.length;++d)f9[r[d]]=u;e&&(i&&(_h[e]=i),l&&(wh[e]=l))}function Eo(t){var{type:e,htmlBuilder:r,mathmlBuilder:n}=t;Fe({type:e,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:r,mathmlBuilder:n})}var kh=function(e){return e.type==="ordgroup"&&e.body.length===1?e.body[0]:e},br=function(e){return e.type==="ordgroup"?e.body:[e]},zs=ne.makeSpan,Aq=["leftmost","mbin","mopen","mrel","mop","mpunct"],Eq=["rightmost","mrel","mclose","mpunct"],Cq={display:Ge.DISPLAY,text:Ge.TEXT,script:Ge.SCRIPT,scriptscript:Ge.SCRIPTSCRIPT},Tq={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},Nr=function(e,r,n,a){a===void 0&&(a=[null,null]);for(var i=[],l=0;l<e.length;l++){var u=gt(e[l],r);if(u instanceof Gc){var d=u.children;i.push(...d)}else i.push(u)}if(ne.tryCombineChars(i),!n)return i;var h=r;if(e.length===1){var p=e[0];p.type==="sizing"?h=r.havingSize(p.size):p.type==="styling"&&(h=r.havingStyle(Cq[p.style]))}var b=zs([a[0]||"leftmost"],[],r),y=zs([a[1]||"rightmost"],[],r),x=n==="root";return _6(i,(_,k)=>{var S=k.classes[0],A=_.classes[0];S==="mbin"&&Ue.contains(Eq,A)?k.classes[0]="mord":A==="mbin"&&Ue.contains(Aq,S)&&(_.classes[0]="mord")},{node:b},y,x),_6(i,(_,k)=>{var S=Kp(k),A=Kp(_),C=S&&A?_.hasClass("mtight")?Sq[S][A]:kq[S][A]:null;if(C)return ne.makeGlue(C,h)},{node:b},y,x),i},_6=function t(e,r,n,a,i){a&&e.push(a);for(var l=0;l<e.length;l++){var u=e[l],d=m9(u);if(d){t(d.children,r,n,null,i);continue}var h=!u.hasClass("mspace");if(h){var p=r(u,n.node);p&&(n.insertAfter?n.insertAfter(p):(e.unshift(p),l++))}h?n.node=u:i&&u.hasClass("newline")&&(n.node=zs(["leftmost"])),n.insertAfter=(b=>y=>{e.splice(b+1,0,y),l++})(l)}a&&e.pop()},m9=function(e){return e instanceof Gc||e instanceof og||e instanceof Zc&&e.hasClass("enclosing")?e:null},Nq=function t(e,r){var n=m9(e);if(n){var a=n.children;if(a.length){if(r==="right")return t(a[a.length-1],"right");if(r==="left")return t(a[0],"left")}}return e},Kp=function(e,r){return e?(r&&(e=Nq(e,r)),Tq[e.classes[0]]||null):null},jc=function(e,r){var n=["nulldelimiter"].concat(e.baseSizingClasses());return zs(r.concat(n))},gt=function(e,r,n){if(!e)return zs();if(_h[e.type]){var a=_h[e.type](e,r);if(n&&r.size!==n.size){a=zs(r.sizingClasses(n),[a],r);var i=r.sizeMultiplier/n.sizeMultiplier;a.height*=i,a.depth*=i}return a}else throw new Te("Got group of unknown type: '"+e.type+"'")};function Id(t,e){var r=zs(["base"],t,e),n=zs(["strut"]);return n.style.height=je(r.height+r.depth),r.depth&&(n.style.verticalAlign=je(-r.depth)),r.children.unshift(n),r}function Yp(t,e){var r=null;t.length===1&&t[0].type==="tag"&&(r=t[0].tag,t=t[0].body);var n=Nr(t,e,"root"),a;n.length===2&&n[1].hasClass("tag")&&(a=n.pop());for(var i=[],l=[],u=0;u<n.length;u++)if(l.push(n[u]),n[u].hasClass("mbin")||n[u].hasClass("mrel")||n[u].hasClass("allowbreak")){for(var d=!1;u<n.length-1&&n[u+1].hasClass("mspace")&&!n[u+1].hasClass("newline");)u++,l.push(n[u]),n[u].hasClass("nobreak")&&(d=!0);d||(i.push(Id(l,e)),l=[])}else n[u].hasClass("newline")&&(l.pop(),l.length>0&&(i.push(Id(l,e)),l=[]),i.push(n[u]));l.length>0&&i.push(Id(l,e));var h;r?(h=Id(Nr(r,e,!0)),h.classes=["tag"],i.push(h)):a&&i.push(a);var p=zs(["katex-html"],i);if(p.setAttribute("aria-hidden","true"),h){var b=h.children[0];b.style.height=je(p.height+p.depth),p.depth&&(b.style.verticalAlign=je(-p.depth))}return p}function p9(t){return new Gc(t)}class Pn{constructor(e,r,n){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=e,this.attributes={},this.children=r||[],this.classes=n||[]}setAttribute(e,r){this.attributes[e]=r}getAttribute(e){return this.attributes[e]}toNode(){var e=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&e.setAttribute(r,this.attributes[r]);this.classes.length>0&&(e.className=Ni(this.classes));for(var n=0;n<this.children.length;n++)if(this.children[n]instanceof Ua&&this.children[n+1]instanceof Ua){for(var a=this.children[n].toText()+this.children[++n].toText();this.children[n+1]instanceof Ua;)a+=this.children[++n].toText();e.appendChild(new Ua(a).toNode())}else e.appendChild(this.children[n].toNode());return e}toMarkup(){var e="<"+this.type;for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(e+=" "+r+'="',e+=Ue.escape(this.attributes[r]),e+='"');this.classes.length>0&&(e+=' class ="'+Ue.escape(Ni(this.classes))+'"'),e+=">";for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+="</"+this.type+">",e}toText(){return this.children.map(e=>e.toText()).join("")}}class Ua{constructor(e){this.text=void 0,this.text=e}toNode(){return document.createTextNode(this.text)}toMarkup(){return Ue.escape(this.toText())}toText(){return this.text}}class Mq{constructor(e){this.width=void 0,this.character=void 0,this.width=e,e>=.05555&&e<=.05556?this.character="":e>=.1666&&e<=.1667?this.character="":e>=.2222&&e<=.2223?this.character="":e>=.2777&&e<=.2778?this.character="":e>=-.05556&&e<=-.05555?this.character="":e>=-.1667&&e<=-.1666?this.character="":e>=-.2223&&e<=-.2222?this.character="":e>=-.2778&&e<=-.2777?this.character="":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var e=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return e.setAttribute("width",je(this.width)),e}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+je(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var Ee={MathNode:Pn,TextNode:Ua,SpaceNode:Mq,newDocumentFragment:p9},oa=function(e,r,n){return $t[r][e]&&$t[r][e].replace&&e.charCodeAt(0)!==55349&&!(l9.hasOwnProperty(e)&&n&&(n.fontFamily&&n.fontFamily.slice(4,6)==="tt"||n.font&&n.font.slice(4,6)==="tt"))&&(e=$t[r][e].replace),new Ee.TextNode(e)},ug=function(e){return e.length===1?e[0]:new Ee.MathNode("mrow",e)},cg=function(e,r){if(r.fontFamily==="texttt")return"monospace";if(r.fontFamily==="textsf")return r.fontShape==="textit"&&r.fontWeight==="textbf"?"sans-serif-bold-italic":r.fontShape==="textit"?"sans-serif-italic":r.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(r.fontShape==="textit"&&r.fontWeight==="textbf")return"bold-italic";if(r.fontShape==="textit")return"italic";if(r.fontWeight==="textbf")return"bold";var n=r.font;if(!n||n==="mathnormal")return null;var a=e.mode;if(n==="mathit")return"italic";if(n==="boldsymbol")return e.type==="textord"?"bold":"bold-italic";if(n==="mathbf")return"bold";if(n==="mathbb")return"double-struck";if(n==="mathsfit")return"sans-serif-italic";if(n==="mathfrak")return"fraktur";if(n==="mathscr"||n==="mathcal")return"script";if(n==="mathsf")return"sans-serif";if(n==="mathtt")return"monospace";var i=e.text;if(Ue.contains(["\\imath","\\jmath"],i))return null;$t[a][i]&&$t[a][i].replace&&(i=$t[a][i].replace);var l=ne.fontMap[n].fontName;return ig(i,l,a)?ne.fontMap[n].variant:null};function ep(t){if(!t)return!1;if(t.type==="mi"&&t.children.length===1){var e=t.children[0];return e instanceof Ua&&e.text==="."}else if(t.type==="mo"&&t.children.length===1&&t.getAttribute("separator")==="true"&&t.getAttribute("lspace")==="0em"&&t.getAttribute("rspace")==="0em"){var r=t.children[0];return r instanceof Ua&&r.text===","}else return!1}var kn=function(e,r,n){if(e.length===1){var a=Ft(e[0],r);return n&&a instanceof Pn&&a.type==="mo"&&(a.setAttribute("lspace","0em"),a.setAttribute("rspace","0em")),[a]}for(var i=[],l,u=0;u<e.length;u++){var d=Ft(e[u],r);if(d instanceof Pn&&l instanceof Pn){if(d.type==="mtext"&&l.type==="mtext"&&d.getAttribute("mathvariant")===l.getAttribute("mathvariant")){l.children.push(...d.children);continue}else if(d.type==="mn"&&l.type==="mn"){l.children.push(...d.children);continue}else if(ep(d)&&l.type==="mn"){l.children.push(...d.children);continue}else if(d.type==="mn"&&ep(l))d.children=[...l.children,...d.children],i.pop();else if((d.type==="msup"||d.type==="msub")&&d.children.length>=1&&(l.type==="mn"||ep(l))){var h=d.children[0];h instanceof Pn&&h.type==="mn"&&(h.children=[...l.children,...h.children],i.pop())}else if(l.type==="mi"&&l.children.length===1){var p=l.children[0];if(p instanceof Ua&&p.text===""&&(d.type==="mo"||d.type==="mi"||d.type==="mn")){var b=d.children[0];b instanceof Ua&&b.text.length>0&&(b.text=b.text.slice(0,1)+""+b.text.slice(1),i.pop())}}}i.push(d),l=d}return i},ji=function(e,r,n){return ug(kn(e,r,n))},Ft=function(e,r){if(!e)return new Ee.MathNode("mrow");if(wh[e.type]){var n=wh[e.type](e,r);return n}else throw new Te("Got group of unknown type: '"+e.type+"'")};function w6(t,e,r,n,a){var i=kn(t,r),l;i.length===1&&i[0]instanceof Pn&&Ue.contains(["mrow","mtable"],i[0].type)?l=i[0]:l=new Ee.MathNode("mrow",i);var u=new Ee.MathNode("annotation",[new Ee.TextNode(e)]);u.setAttribute("encoding","application/x-tex");var d=new Ee.MathNode("semantics",[l,u]),h=new Ee.MathNode("math",[d]);h.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),n&&h.setAttribute("display","block");var p=a?"katex":"katex-mathml";return ne.makeSpan([p],[h])}var g9=function(e){return new As({style:e.displayMode?Ge.DISPLAY:Ge.TEXT,maxSize:e.maxSize,minRuleThickness:e.minRuleThickness})},b9=function(e,r){if(r.displayMode){var n=["katex-display"];r.leqno&&n.push("leqno"),r.fleqn&&n.push("fleqn"),e=ne.makeSpan(n,[e])}return e},jq=function(e,r,n){var a=g9(n),i;if(n.output==="mathml")return w6(e,r,a,n.displayMode,!0);if(n.output==="html"){var l=Yp(e,a);i=ne.makeSpan(["katex"],[l])}else{var u=w6(e,r,a,n.displayMode,!1),d=Yp(e,a);i=ne.makeSpan(["katex"],[u,d])}return b9(i,n)},Dq=function(e,r,n){var a=g9(n),i=Yp(e,a),l=ne.makeSpan(["katex"],[i]);return b9(l,n)},zq={widehat:"^",widecheck:"",widetilde:"~",utilde:"~",overleftarrow:"",underleftarrow:"",xleftarrow:"",overrightarrow:"",underrightarrow:"",xrightarrow:"",underbrace:"",overbrace:"",overgroup:"",undergroup:"",overleftrightarrow:"",underleftrightarrow:"",xleftrightarrow:"",Overrightarrow:"",xRightarrow:"",overleftharpoon:"",xleftharpoonup:"",overrightharpoon:"",xrightharpoonup:"",xLeftarrow:"",xLeftrightarrow:"",xhookleftarrow:"",xhookrightarrow:"",xmapsto:"",xrightharpoondown:"",xleftharpoondown:"",xrightleftharpoons:"",xleftrightharpoons:"",xtwoheadleftarrow:"",xtwoheadrightarrow:"",xlongequal:"=",xtofrom:"",xrightleftarrows:"",xrightequilibrium:"",xleftequilibrium:"","\\cdrightarrow":"","\\cdleftarrow":"","\\cdlongequal":"="},Oq=function(e){var r=new Ee.MathNode("mo",[new Ee.TextNode(zq[e.replace(/^\\/,"")])]);return r.setAttribute("stretchy","true"),r},Rq={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},Fq=function(e){return e.type==="ordgroup"?e.body.length:1},Lq=function(e,r){function n(){var u=4e5,d=e.label.slice(1);if(Ue.contains(["widehat","widecheck","widetilde","utilde"],d)){var h=e,p=Fq(h.base),b,y,x;if(p>5)d==="widehat"||d==="widecheck"?(b=420,u=2364,x=.42,y=d+"4"):(b=312,u=2340,x=.34,y="tilde4");else{var _=[1,1,2,2,3,3][p];d==="widehat"||d==="widecheck"?(u=[0,1062,2364,2364,2364][_],b=[0,239,300,360,420][_],x=[0,.24,.3,.3,.36,.42][_],y=d+_):(u=[0,600,1033,2339,2340][_],b=[0,260,286,306,312][_],x=[0,.26,.286,.3,.306,.34][_],y="tilde"+_)}var k=new Mi(y),S=new Ds([k],{width:"100%",height:je(x),viewBox:"0 0 "+u+" "+b,preserveAspectRatio:"none"});return{span:ne.makeSvgSpan([],[S],r),minWidth:0,height:x}}else{var A=[],C=Rq[d],[N,D,j]=C,O=j/1e3,F=N.length,R,B;if(F===1){var V=C[3];R=["hide-tail"],B=[V]}else if(F===2)R=["halfarrow-left","halfarrow-right"],B=["xMinYMin","xMaxYMin"];else if(F===3)R=["brace-left","brace-center","brace-right"],B=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+F+" children.");for(var $=0;$<F;$++){var G=new Mi(N[$]),le=new Ds([G],{width:"400em",height:je(O),viewBox:"0 0 "+u+" "+j,preserveAspectRatio:B[$]+" slice"}),ie=ne.makeSvgSpan([R[$]],[le],r);if(F===1)return{span:ie,minWidth:D,height:O};ie.style.height=je(O),A.push(ie)}return{span:ne.makeSpan(["stretchy"],A,r),minWidth:D,height:O}}}var{span:a,minWidth:i,height:l}=n();return a.height=l,a.style.height=je(l),i>0&&(a.style.minWidth=je(i)),a},Pq=function(e,r,n,a,i){var l,u=e.height+e.depth+n+a;if(/fbox|color|angl/.test(r)){if(l=ne.makeSpan(["stretchy",r],[],i),r==="fbox"){var d=i.color&&i.getColor();d&&(l.style.borderColor=d)}}else{var h=[];/^[bx]cancel$/.test(r)&&h.push(new Gp({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(r)&&h.push(new Gp({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var p=new Ds(h,{width:"100%",height:je(u)});l=ne.makeSvgSpan([],[p],i)}return l.height=u,l.style.height=je(u),l},Os={encloseSpan:Pq,mathMLnode:Oq,svgSpan:Lq};function at(t,e){if(!t||t.type!==e)throw new Error("Expected node of type "+e+", but got "+(t?"node of type "+t.type:String(t)));return t}function dg(t){var e=qh(t);if(!e)throw new Error("Expected node of symbol group type, but got "+(t?"node of type "+t.type:String(t)));return e}function qh(t){return t&&(t.type==="atom"||uq.hasOwnProperty(t.type))?t:null}var hg=(t,e)=>{var r,n,a;t&&t.type==="supsub"?(n=at(t.base,"accent"),r=n.base,t.base=r,a=oq(gt(t,e)),t.base=n):(n=at(t,"accent"),r=n.base);var i=gt(r,e.havingCrampedStyle()),l=n.isShifty&&Ue.isCharacterBox(r),u=0;if(l){var d=Ue.getBaseElem(r),h=gt(d,e.havingCrampedStyle());u=p6(h).skew}var p=n.label==="\\c",b=p?i.height+i.depth:Math.min(i.height,e.fontMetrics().xHeight),y;if(n.isStretchy)y=Os.svgSpan(n,e),y=ne.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:i},{type:"elem",elem:y,wrapperClasses:["svg-align"],wrapperStyle:u>0?{width:"calc(100% - "+je(2*u)+")",marginLeft:je(2*u)}:void 0}]},e);else{var x,_;n.label==="\\vec"?(x=ne.staticSvg("vec",e),_=ne.svgData.vec[1]):(x=ne.makeOrd({mode:n.mode,text:n.label},e,"textord"),x=p6(x),x.italic=0,_=x.width,p&&(b+=x.depth)),y=ne.makeSpan(["accent-body"],[x]);var k=n.label==="\\textcircled";k&&(y.classes.push("accent-full"),b=i.height);var S=u;k||(S-=_/2),y.style.left=je(S),n.label==="\\textcircled"&&(y.style.top=".2em"),y=ne.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:i},{type:"kern",size:-b},{type:"elem",elem:y}]},e)}var A=ne.makeSpan(["mord","accent"],[y],e);return a?(a.children[0]=A,a.height=Math.max(A.height,a.height),a.classes[0]="mord",a):A},y9=(t,e)=>{var r=t.isStretchy?Os.mathMLnode(t.label):new Ee.MathNode("mo",[oa(t.label,t.mode)]),n=new Ee.MathNode("mover",[Ft(t.base,e),r]);return n.setAttribute("accent","true"),n},Bq=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(t=>"\\"+t).join("|"));Fe({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(t,e)=>{var r=kh(e[0]),n=!Bq.test(t.funcName),a=!n||t.funcName==="\\widehat"||t.funcName==="\\widetilde"||t.funcName==="\\widecheck";return{type:"accent",mode:t.parser.mode,label:t.funcName,isStretchy:n,isShifty:a,base:r}},htmlBuilder:hg,mathmlBuilder:y9});Fe({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(t,e)=>{var r=e[0],n=t.parser.mode;return n==="math"&&(t.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+t.funcName+" works only in text mode"),n="text"),{type:"accent",mode:n,label:t.funcName,isStretchy:!1,isShifty:!0,base:r}},htmlBuilder:hg,mathmlBuilder:y9});Fe({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0];return{type:"accentUnder",mode:r.mode,label:n,base:a}},htmlBuilder:(t,e)=>{var r=gt(t.base,e),n=Os.svgSpan(t,e),a=t.label==="\\utilde"?.12:0,i=ne.makeVList({positionType:"top",positionData:r.height,children:[{type:"elem",elem:n,wrapperClasses:["svg-align"]},{type:"kern",size:a},{type:"elem",elem:r}]},e);return ne.makeSpan(["mord","accentunder"],[i],e)},mathmlBuilder:(t,e)=>{var r=Os.mathMLnode(t.label),n=new Ee.MathNode("munder",[Ft(t.base,e),r]);return n.setAttribute("accentunder","true"),n}});var $d=t=>{var e=new Ee.MathNode("mpadded",t?[t]:[]);return e.setAttribute("width","+0.6em"),e.setAttribute("lspace","0.3em"),e};Fe({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(t,e,r){var{parser:n,funcName:a}=t;return{type:"xArrow",mode:n.mode,label:a,body:e[0],below:r[0]}},htmlBuilder(t,e){var r=e.style,n=e.havingStyle(r.sup()),a=ne.wrapFragment(gt(t.body,n,e),e),i=t.label.slice(0,2)==="\\x"?"x":"cd";a.classes.push(i+"-arrow-pad");var l;t.below&&(n=e.havingStyle(r.sub()),l=ne.wrapFragment(gt(t.below,n,e),e),l.classes.push(i+"-arrow-pad"));var u=Os.svgSpan(t,e),d=-e.fontMetrics().axisHeight+.5*u.height,h=-e.fontMetrics().axisHeight-.5*u.height-.111;(a.depth>.25||t.label==="\\xleftequilibrium")&&(h-=a.depth);var p;if(l){var b=-e.fontMetrics().axisHeight+l.height+.5*u.height+.111;p=ne.makeVList({positionType:"individualShift",children:[{type:"elem",elem:a,shift:h},{type:"elem",elem:u,shift:d},{type:"elem",elem:l,shift:b}]},e)}else p=ne.makeVList({positionType:"individualShift",children:[{type:"elem",elem:a,shift:h},{type:"elem",elem:u,shift:d}]},e);return p.children[0].children[0].children[1].classes.push("svg-align"),ne.makeSpan(["mrel","x-arrow"],[p],e)},mathmlBuilder(t,e){var r=Os.mathMLnode(t.label);r.setAttribute("minsize",t.label.charAt(0)==="x"?"1.75em":"3.0em");var n;if(t.body){var a=$d(Ft(t.body,e));if(t.below){var i=$d(Ft(t.below,e));n=new Ee.MathNode("munderover",[r,i,a])}else n=new Ee.MathNode("mover",[r,a])}else if(t.below){var l=$d(Ft(t.below,e));n=new Ee.MathNode("munder",[r,l])}else n=$d(),n=new Ee.MathNode("mover",[r,n]);return n}});var Iq=ne.makeSpan;function x9(t,e){var r=Nr(t.body,e,!0);return Iq([t.mclass],r,e)}function v9(t,e){var r,n=kn(t.body,e);return t.mclass==="minner"?r=new Ee.MathNode("mpadded",n):t.mclass==="mord"?t.isCharacterBox?(r=n[0],r.type="mi"):r=new Ee.MathNode("mi",n):(t.isCharacterBox?(r=n[0],r.type="mo"):r=new Ee.MathNode("mo",n),t.mclass==="mbin"?(r.attributes.lspace="0.22em",r.attributes.rspace="0.22em"):t.mclass==="mpunct"?(r.attributes.lspace="0em",r.attributes.rspace="0.17em"):t.mclass==="mopen"||t.mclass==="mclose"?(r.attributes.lspace="0em",r.attributes.rspace="0em"):t.mclass==="minner"&&(r.attributes.lspace="0.0556em",r.attributes.width="+0.1111em")),r}Fe({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(t,e){var{parser:r,funcName:n}=t,a=e[0];return{type:"mclass",mode:r.mode,mclass:"m"+n.slice(5),body:br(a),isCharacterBox:Ue.isCharacterBox(a)}},htmlBuilder:x9,mathmlBuilder:v9});var Hh=t=>{var e=t.type==="ordgroup"&&t.body.length?t.body[0]:t;return e.type==="atom"&&(e.family==="bin"||e.family==="rel")?"m"+e.family:"mord"};Fe({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(t,e){var{parser:r}=t;return{type:"mclass",mode:r.mode,mclass:Hh(e[0]),body:br(e[1]),isCharacterBox:Ue.isCharacterBox(e[1])}}});Fe({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(t,e){var{parser:r,funcName:n}=t,a=e[1],i=e[0],l;n!=="\\stackrel"?l=Hh(a):l="mrel";var u={type:"op",mode:a.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:n!=="\\stackrel",body:br(a)},d={type:"supsub",mode:i.mode,base:u,sup:n==="\\underset"?null:i,sub:n==="\\underset"?i:null};return{type:"mclass",mode:r.mode,mclass:l,body:[d],isCharacterBox:Ue.isCharacterBox(d)}},htmlBuilder:x9,mathmlBuilder:v9});Fe({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(t,e){var{parser:r}=t;return{type:"pmb",mode:r.mode,mclass:Hh(e[0]),body:br(e[0])}},htmlBuilder(t,e){var r=Nr(t.body,e,!0),n=ne.makeSpan([t.mclass],r,e);return n.style.textShadow="0.02em 0.01em 0.04px",n},mathmlBuilder(t,e){var r=kn(t.body,e),n=new Ee.MathNode("mstyle",r);return n.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),n}});var $q={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},k6=()=>({type:"styling",body:[],mode:"math",style:"display"}),S6=t=>t.type==="textord"&&t.text==="@",qq=(t,e)=>(t.type==="mathord"||t.type==="atom")&&t.text===e;function Hq(t,e,r){var n=$q[t];switch(n){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return r.callFunction(n,[e[0]],[e[1]]);case"\\uparrow":case"\\downarrow":{var a=r.callFunction("\\\\cdleft",[e[0]],[]),i={type:"atom",text:n,mode:"math",family:"rel"},l=r.callFunction("\\Big",[i],[]),u=r.callFunction("\\\\cdright",[e[1]],[]),d={type:"ordgroup",mode:"math",body:[a,l,u]};return r.callFunction("\\\\cdparent",[d],[])}case"\\\\cdlongequal":return r.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var h={type:"textord",text:"\\Vert",mode:"math"};return r.callFunction("\\Big",[h],[])}default:return{type:"textord",text:" ",mode:"math"}}}function Uq(t){var e=[];for(t.gullet.beginGroup(),t.gullet.macros.set("\\cr","\\\\\\relax"),t.gullet.beginGroup();;){e.push(t.parseExpression(!1,"\\\\")),t.gullet.endGroup(),t.gullet.beginGroup();var r=t.fetch().text;if(r==="&"||r==="\\\\")t.consume();else if(r==="\\end"){e[e.length-1].length===0&&e.pop();break}else throw new Te("Expected \\\\ or \\cr or \\end",t.nextToken)}for(var n=[],a=[n],i=0;i<e.length;i++){for(var l=e[i],u=k6(),d=0;d<l.length;d++)if(!S6(l[d]))u.body.push(l[d]);else{n.push(u),d+=1;var h=dg(l[d]).text,p=new Array(2);if(p[0]={type:"ordgroup",mode:"math",body:[]},p[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(h)>-1))if("<>AV".indexOf(h)>-1)for(var b=0;b<2;b++){for(var y=!0,x=d+1;x<l.length;x++){if(qq(l[x],h)){y=!1,d=x;break}if(S6(l[x]))throw new Te("Missing a "+h+" character to complete a CD arrow.",l[x]);p[b].body.push(l[x])}if(y)throw new Te("Missing a "+h+" character to complete a CD arrow.",l[d])}else throw new Te('Expected one of "<>AV=|." after @',l[d]);var _=Hq(h,p,t),k={type:"styling",body:[_],mode:"math",style:"display"};n.push(k),u=k6()}i%2===0?n.push(u):n.shift(),n=[],a.push(n)}t.gullet.endGroup(),t.gullet.endGroup();var S=new Array(a[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:a,arraystretch:1,addJot:!0,rowGaps:[null],cols:S,colSeparationType:"CD",hLinesBeforeRow:new Array(a.length+1).fill([])}}Fe({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(t,e){var{parser:r,funcName:n}=t;return{type:"cdlabel",mode:r.mode,side:n.slice(4),label:e[0]}},htmlBuilder(t,e){var r=e.havingStyle(e.style.sup()),n=ne.wrapFragment(gt(t.label,r,e),e);return n.classes.push("cd-label-"+t.side),n.style.bottom=je(.8-n.depth),n.height=0,n.depth=0,n},mathmlBuilder(t,e){var r=new Ee.MathNode("mrow",[Ft(t.label,e)]);return r=new Ee.MathNode("mpadded",[r]),r.setAttribute("width","0"),t.side==="left"&&r.setAttribute("lspace","-1width"),r.setAttribute("voffset","0.7em"),r=new Ee.MathNode("mstyle",[r]),r.setAttribute("displaystyle","false"),r.setAttribute("scriptlevel","1"),r}});Fe({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(t,e){var{parser:r}=t;return{type:"cdlabelparent",mode:r.mode,fragment:e[0]}},htmlBuilder(t,e){var r=ne.wrapFragment(gt(t.fragment,e),e);return r.classes.push("cd-vert-arrow"),r},mathmlBuilder(t,e){return new Ee.MathNode("mrow",[Ft(t.fragment,e)])}});Fe({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(t,e){for(var{parser:r}=t,n=at(e[0],"ordgroup"),a=n.body,i="",l=0;l<a.length;l++){var u=at(a[l],"textord");i+=u.text}var d=parseInt(i),h;if(isNaN(d))throw new Te("\\@char has non-numeric argument "+i);if(d<0||d>=1114111)throw new Te("\\@char with invalid code point "+i);return d<=65535?h=String.fromCharCode(d):(d-=65536,h=String.fromCharCode((d>>10)+55296,(d&1023)+56320)),{type:"textord",mode:r.mode,text:h}}});var _9=(t,e)=>{var r=Nr(t.body,e.withColor(t.color),!1);return ne.makeFragment(r)},w9=(t,e)=>{var r=kn(t.body,e.withColor(t.color)),n=new Ee.MathNode("mstyle",r);return n.setAttribute("mathcolor",t.color),n};Fe({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(t,e){var{parser:r}=t,n=at(e[0],"color-token").color,a=e[1];return{type:"color",mode:r.mode,color:n,body:br(a)}},htmlBuilder:_9,mathmlBuilder:w9});Fe({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(t,e){var{parser:r,breakOnTokenText:n}=t,a=at(e[0],"color-token").color;r.gullet.macros.set("\\current@color",a);var i=r.parseExpression(!0,n);return{type:"color",mode:r.mode,color:a,body:i}},htmlBuilder:_9,mathmlBuilder:w9});Fe({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(t,e,r){var{parser:n}=t,a=n.gullet.future().text==="["?n.parseSizeGroup(!0):null,i=!n.settings.displayMode||!n.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:n.mode,newLine:i,size:a&&at(a,"size").value}},htmlBuilder(t,e){var r=ne.makeSpan(["mspace"],[],e);return t.newLine&&(r.classes.push("newline"),t.size&&(r.style.marginTop=je(tr(t.size,e)))),r},mathmlBuilder(t,e){var r=new Ee.MathNode("mspace");return t.newLine&&(r.setAttribute("linebreak","newline"),t.size&&r.setAttribute("height",je(tr(t.size,e)))),r}});var Xp={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},k9=t=>{var e=t.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(e))throw new Te("Expected a control sequence",t);return e},Vq=t=>{var e=t.gullet.popToken();return e.text==="="&&(e=t.gullet.popToken(),e.text===" "&&(e=t.gullet.popToken())),e},S9=(t,e,r,n)=>{var a=t.gullet.macros.get(r.text);a==null&&(r.noexpand=!0,a={tokens:[r],numArgs:0,unexpandable:!t.gullet.isExpandable(r.text)}),t.gullet.macros.set(e,a,n)};Fe({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(t){var{parser:e,funcName:r}=t;e.consumeSpaces();var n=e.fetch();if(Xp[n.text])return(r==="\\global"||r==="\\\\globallong")&&(n.text=Xp[n.text]),at(e.parseFunction(),"internal");throw new Te("Invalid token after macro prefix",n)}});Fe({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:r}=t,n=e.gullet.popToken(),a=n.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(a))throw new Te("Expected a control sequence",n);for(var i=0,l,u=[[]];e.gullet.future().text!=="{";)if(n=e.gullet.popToken(),n.text==="#"){if(e.gullet.future().text==="{"){l=e.gullet.future(),u[i].push("{");break}if(n=e.gullet.popToken(),!/^[1-9]$/.test(n.text))throw new Te('Invalid argument number "'+n.text+'"');if(parseInt(n.text)!==i+1)throw new Te('Argument number "'+n.text+'" out of order');i++,u.push([])}else{if(n.text==="EOF")throw new Te("Expected a macro definition");u[i].push(n.text)}var{tokens:d}=e.gullet.consumeArg();return l&&d.unshift(l),(r==="\\edef"||r==="\\xdef")&&(d=e.gullet.expandTokens(d),d.reverse()),e.gullet.macros.set(a,{tokens:d,numArgs:i,delimiters:u},r===Xp[r]),{type:"internal",mode:e.mode}}});Fe({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:r}=t,n=k9(e.gullet.popToken());e.gullet.consumeSpaces();var a=Vq(e);return S9(e,n,a,r==="\\\\globallet"),{type:"internal",mode:e.mode}}});Fe({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:r}=t,n=k9(e.gullet.popToken()),a=e.gullet.popToken(),i=e.gullet.popToken();return S9(e,n,i,r==="\\\\globalfuture"),e.gullet.pushToken(i),e.gullet.pushToken(a),{type:"internal",mode:e.mode}}});var ac=function(e,r,n){var a=$t.math[e]&&$t.math[e].replace,i=ig(a||e,r,n);if(!i)throw new Error("Unsupported symbol "+e+" and font size "+r+".");return i},fg=function(e,r,n,a){var i=n.havingBaseStyle(r),l=ne.makeSpan(a.concat(i.sizingClasses(n)),[e],n),u=i.sizeMultiplier/n.sizeMultiplier;return l.height*=u,l.depth*=u,l.maxFontSize=i.sizeMultiplier,l},A9=function(e,r,n){var a=r.havingBaseStyle(n),i=(1-r.sizeMultiplier/a.sizeMultiplier)*r.fontMetrics().axisHeight;e.classes.push("delimcenter"),e.style.top=je(i),e.height-=i,e.depth+=i},Gq=function(e,r,n,a,i,l){var u=ne.makeSymbol(e,"Main-Regular",i,a),d=fg(u,r,a,l);return n&&A9(d,a,r),d},Zq=function(e,r,n,a){return ne.makeSymbol(e,"Size"+r+"-Regular",n,a)},E9=function(e,r,n,a,i,l){var u=Zq(e,r,i,a),d=fg(ne.makeSpan(["delimsizing","size"+r],[u],a),Ge.TEXT,a,l);return n&&A9(d,a,Ge.TEXT),d},tp=function(e,r,n){var a;r==="Size1-Regular"?a="delim-size1":a="delim-size4";var i=ne.makeSpan(["delimsizinginner",a],[ne.makeSpan([],[ne.makeSymbol(e,r,n)])]);return{type:"elem",elem:i}},rp=function(e,r,n){var a=Ha["Size4-Regular"][e.charCodeAt(0)]?Ha["Size4-Regular"][e.charCodeAt(0)][4]:Ha["Size1-Regular"][e.charCodeAt(0)][4],i=new Mi("inner",W$(e,Math.round(1e3*r))),l=new Ds([i],{width:je(a),height:je(r),style:"width:"+je(a),viewBox:"0 0 "+1e3*a+" "+Math.round(1e3*r),preserveAspectRatio:"xMinYMin"}),u=ne.makeSvgSpan([],[l],n);return u.height=r,u.style.height=je(r),u.style.width=je(a),{type:"elem",elem:u}},Qp=.008,qd={type:"kern",size:-1*Qp},Kq=["|","\\lvert","\\rvert","\\vert"],Yq=["\\|","\\lVert","\\rVert","\\Vert"],C9=function(e,r,n,a,i,l){var u,d,h,p,b="",y=0;u=h=p=e,d=null;var x="Size1-Regular";e==="\\uparrow"?h=p="":e==="\\Uparrow"?h=p="":e==="\\downarrow"?u=h="":e==="\\Downarrow"?u=h="":e==="\\updownarrow"?(u="\\uparrow",h="",p="\\downarrow"):e==="\\Updownarrow"?(u="\\Uparrow",h="",p="\\Downarrow"):Ue.contains(Kq,e)?(h="",b="vert",y=333):Ue.contains(Yq,e)?(h="",b="doublevert",y=556):e==="["||e==="\\lbrack"?(u="",h="",p="",x="Size4-Regular",b="lbrack",y=667):e==="]"||e==="\\rbrack"?(u="",h="",p="",x="Size4-Regular",b="rbrack",y=667):e==="\\lfloor"||e===""?(h=u="",p="",x="Size4-Regular",b="lfloor",y=667):e==="\\lceil"||e===""?(u="",h=p="",x="Size4-Regular",b="lceil",y=667):e==="\\rfloor"||e===""?(h=u="",p="",x="Size4-Regular",b="rfloor",y=667):e==="\\rceil"||e===""?(u="",h=p="",x="Size4-Regular",b="rceil",y=667):e==="("||e==="\\lparen"?(u="",h="",p="",x="Size4-Regular",b="lparen",y=875):e===")"||e==="\\rparen"?(u="",h="",p="",x="Size4-Regular",b="rparen",y=875):e==="\\{"||e==="\\lbrace"?(u="",d="",p="",h="",x="Size4-Regular"):e==="\\}"||e==="\\rbrace"?(u="",d="",p="",h="",x="Size4-Regular"):e==="\\lgroup"||e===""?(u="",p="",h="",x="Size4-Regular"):e==="\\rgroup"||e===""?(u="",p="",h="",x="Size4-Regular"):e==="\\lmoustache"||e===""?(u="",p="",h="",x="Size4-Regular"):(e==="\\rmoustache"||e==="")&&(u="",p="",h="",x="Size4-Regular");var _=ac(u,x,i),k=_.height+_.depth,S=ac(h,x,i),A=S.height+S.depth,C=ac(p,x,i),N=C.height+C.depth,D=0,j=1;if(d!==null){var O=ac(d,x,i);D=O.height+O.depth,j=2}var F=k+N+D,R=Math.max(0,Math.ceil((r-F)/(j*A))),B=F+R*j*A,V=a.fontMetrics().axisHeight;n&&(V*=a.sizeMultiplier);var $=B/2-V,G=[];if(b.length>0){var le=B-k-N,ie=Math.round(B*1e3),pe=J$(b,Math.round(le*1e3)),K=new Mi(b,pe),ue=(y/1e3).toFixed(3)+"em",Ce=(ie/1e3).toFixed(3)+"em",ze=new Ds([K],{width:ue,height:Ce,viewBox:"0 0 "+y+" "+ie}),q=ne.makeSvgSpan([],[ze],a);q.height=ie/1e3,q.style.width=ue,q.style.height=Ce,G.push({type:"elem",elem:q})}else{if(G.push(tp(p,x,i)),G.push(qd),d===null){var ae=B-k-N+2*Qp;G.push(rp(h,ae,a))}else{var we=(B-k-N-D)/2+2*Qp;G.push(rp(h,we,a)),G.push(qd),G.push(tp(d,x,i)),G.push(qd),G.push(rp(h,we,a))}G.push(qd),G.push(tp(u,x,i))}var be=a.havingBaseStyle(Ge.TEXT),Se=ne.makeVList({positionType:"bottom",positionData:$,children:G},be);return fg(ne.makeSpan(["delimsizing","mult"],[Se],be),Ge.TEXT,a,l)},np=80,ap=.08,sp=function(e,r,n,a,i){var l=Q$(e,a,n),u=new Mi(e,l),d=new Ds([u],{width:"400em",height:je(r),viewBox:"0 0 400000 "+n,preserveAspectRatio:"xMinYMin slice"});return ne.makeSvgSpan(["hide-tail"],[d],i)},Xq=function(e,r){var n=r.havingBaseSizing(),a=j9("\\surd",e*n.sizeMultiplier,M9,n),i=n.sizeMultiplier,l=Math.max(0,r.minRuleThickness-r.fontMetrics().sqrtRuleThickness),u,d=0,h=0,p=0,b;return a.type==="small"?(p=1e3+1e3*l+np,e<1?i=1:e<1.4&&(i=.7),d=(1+l+ap)/i,h=(1+l)/i,u=sp("sqrtMain",d,p,l,r),u.style.minWidth="0.853em",b=.833/i):a.type==="large"?(p=(1e3+np)*fc[a.size],h=(fc[a.size]+l)/i,d=(fc[a.size]+l+ap)/i,u=sp("sqrtSize"+a.size,d,p,l,r),u.style.minWidth="1.02em",b=1/i):(d=e+l+ap,h=e+l,p=Math.floor(1e3*e+l)+np,u=sp("sqrtTall",d,p,l,r),u.style.minWidth="0.742em",b=1.056),u.height=h,u.style.height=je(d),{span:u,advanceWidth:b,ruleWidth:(r.fontMetrics().sqrtRuleThickness+l)*i}},T9=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","\\surd"],Qq=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","",""],N9=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],fc=[0,1.2,1.8,2.4,3],Wq=function(e,r,n,a,i){if(e==="<"||e==="\\lt"||e===""?e="\\langle":(e===">"||e==="\\gt"||e==="")&&(e="\\rangle"),Ue.contains(T9,e)||Ue.contains(N9,e))return E9(e,r,!1,n,a,i);if(Ue.contains(Qq,e))return C9(e,fc[r],!1,n,a,i);throw new Te("Illegal delimiter: '"+e+"'")},Jq=[{type:"small",style:Ge.SCRIPTSCRIPT},{type:"small",style:Ge.SCRIPT},{type:"small",style:Ge.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],eH=[{type:"small",style:Ge.SCRIPTSCRIPT},{type:"small",style:Ge.SCRIPT},{type:"small",style:Ge.TEXT},{type:"stack"}],M9=[{type:"small",style:Ge.SCRIPTSCRIPT},{type:"small",style:Ge.SCRIPT},{type:"small",style:Ge.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],tH=function(e){if(e.type==="small")return"Main-Regular";if(e.type==="large")return"Size"+e.size+"-Regular";if(e.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+e.type+"' here.")},j9=function(e,r,n,a){for(var i=Math.min(2,3-a.style.size),l=i;l<n.length&&n[l].type!=="stack";l++){var u=ac(e,tH(n[l]),"math"),d=u.height+u.depth;if(n[l].type==="small"){var h=a.havingBaseStyle(n[l].style);d*=h.sizeMultiplier}if(d>r)return n[l]}return n[n.length-1]},D9=function(e,r,n,a,i,l){e==="<"||e==="\\lt"||e===""?e="\\langle":(e===">"||e==="\\gt"||e==="")&&(e="\\rangle");var u;Ue.contains(N9,e)?u=Jq:Ue.contains(T9,e)?u=M9:u=eH;var d=j9(e,r,u,a);return d.type==="small"?Gq(e,d.style,n,a,i,l):d.type==="large"?E9(e,d.size,n,a,i,l):C9(e,r,n,a,i,l)},rH=function(e,r,n,a,i,l){var u=a.fontMetrics().axisHeight*a.sizeMultiplier,d=901,h=5/a.fontMetrics().ptPerEm,p=Math.max(r-u,n+u),b=Math.max(p/500*d,2*p-h);return D9(e,b,!0,a,i,l)},Ns={sqrtImage:Xq,sizedDelim:Wq,sizeToMaxHeight:fc,customSizedDelim:D9,leftRightDelim:rH},A6={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},nH=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","<",">","\\langle","","\\rangle","","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","","","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function Uh(t,e){var r=qh(t);if(r&&Ue.contains(nH,r.text))return r;throw r?new Te("Invalid delimiter '"+r.text+"' after '"+e.funcName+"'",t):new Te("Invalid delimiter type '"+t.type+"'",t)}Fe({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(t,e)=>{var r=Uh(e[0],t);return{type:"delimsizing",mode:t.parser.mode,size:A6[t.funcName].size,mclass:A6[t.funcName].mclass,delim:r.text}},htmlBuilder:(t,e)=>t.delim==="."?ne.makeSpan([t.mclass]):Ns.sizedDelim(t.delim,t.size,e,t.mode,[t.mclass]),mathmlBuilder:t=>{var e=[];t.delim!=="."&&e.push(oa(t.delim,t.mode));var r=new Ee.MathNode("mo",e);t.mclass==="mopen"||t.mclass==="mclose"?r.setAttribute("fence","true"):r.setAttribute("fence","false"),r.setAttribute("stretchy","true");var n=je(Ns.sizeToMaxHeight[t.size]);return r.setAttribute("minsize",n),r.setAttribute("maxsize",n),r}});function E6(t){if(!t.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}Fe({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var r=t.parser.gullet.macros.get("\\current@color");if(r&&typeof r!="string")throw new Te("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:t.parser.mode,delim:Uh(e[0],t).text,color:r}}});Fe({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var r=Uh(e[0],t),n=t.parser;++n.leftrightDepth;var a=n.parseExpression(!1);--n.leftrightDepth,n.expect("\\right",!1);var i=at(n.parseFunction(),"leftright-right");return{type:"leftright",mode:n.mode,body:a,left:r.text,right:i.delim,rightColor:i.color}},htmlBuilder:(t,e)=>{E6(t);for(var r=Nr(t.body,e,!0,["mopen","mclose"]),n=0,a=0,i=!1,l=0;l<r.length;l++)r[l].isMiddle?i=!0:(n=Math.max(r[l].height,n),a=Math.max(r[l].depth,a));n*=e.sizeMultiplier,a*=e.sizeMultiplier;var u;if(t.left==="."?u=jc(e,["mopen"]):u=Ns.leftRightDelim(t.left,n,a,e,t.mode,["mopen"]),r.unshift(u),i)for(var d=1;d<r.length;d++){var h=r[d],p=h.isMiddle;p&&(r[d]=Ns.leftRightDelim(p.delim,n,a,p.options,t.mode,[]))}var b;if(t.right===".")b=jc(e,["mclose"]);else{var y=t.rightColor?e.withColor(t.rightColor):e;b=Ns.leftRightDelim(t.right,n,a,y,t.mode,["mclose"])}return r.push(b),ne.makeSpan(["minner"],r,e)},mathmlBuilder:(t,e)=>{E6(t);var r=kn(t.body,e);if(t.left!=="."){var n=new Ee.MathNode("mo",[oa(t.left,t.mode)]);n.setAttribute("fence","true"),r.unshift(n)}if(t.right!=="."){var a=new Ee.MathNode("mo",[oa(t.right,t.mode)]);a.setAttribute("fence","true"),t.rightColor&&a.setAttribute("mathcolor",t.rightColor),r.push(a)}return ug(r)}});Fe({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var r=Uh(e[0],t);if(!t.parser.leftrightDepth)throw new Te("\\middle without preceding \\left",r);return{type:"middle",mode:t.parser.mode,delim:r.text}},htmlBuilder:(t,e)=>{var r;if(t.delim===".")r=jc(e,[]);else{r=Ns.sizedDelim(t.delim,1,e,t.mode,[]);var n={delim:t.delim,options:e};r.isMiddle=n}return r},mathmlBuilder:(t,e)=>{var r=t.delim==="\\vert"||t.delim==="|"?oa("|","text"):oa(t.delim,t.mode),n=new Ee.MathNode("mo",[r]);return n.setAttribute("fence","true"),n.setAttribute("lspace","0.05em"),n.setAttribute("rspace","0.05em"),n}});var mg=(t,e)=>{var r=ne.wrapFragment(gt(t.body,e),e),n=t.label.slice(1),a=e.sizeMultiplier,i,l=0,u=Ue.isCharacterBox(t.body);if(n==="sout")i=ne.makeSpan(["stretchy","sout"]),i.height=e.fontMetrics().defaultRuleThickness/a,l=-.5*e.fontMetrics().xHeight;else if(n==="phase"){var d=tr({number:.6,unit:"pt"},e),h=tr({number:.35,unit:"ex"},e),p=e.havingBaseSizing();a=a/p.sizeMultiplier;var b=r.height+r.depth+d+h;r.style.paddingLeft=je(b/2+d);var y=Math.floor(1e3*b*a),x=Y$(y),_=new Ds([new Mi("phase",x)],{width:"400em",height:je(y/1e3),viewBox:"0 0 400000 "+y,preserveAspectRatio:"xMinYMin slice"});i=ne.makeSvgSpan(["hide-tail"],[_],e),i.style.height=je(b),l=r.depth+d+h}else{/cancel/.test(n)?u||r.classes.push("cancel-pad"):n==="angl"?r.classes.push("anglpad"):r.classes.push("boxpad");var k=0,S=0,A=0;/box/.test(n)?(A=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness),k=e.fontMetrics().fboxsep+(n==="colorbox"?0:A),S=k):n==="angl"?(A=Math.max(e.fontMetrics().defaultRuleThickness,e.minRuleThickness),k=4*A,S=Math.max(0,.25-r.depth)):(k=u?.2:0,S=k),i=Os.encloseSpan(r,n,k,S,e),/fbox|boxed|fcolorbox/.test(n)?(i.style.borderStyle="solid",i.style.borderWidth=je(A)):n==="angl"&&A!==.049&&(i.style.borderTopWidth=je(A),i.style.borderRightWidth=je(A)),l=r.depth+S,t.backgroundColor&&(i.style.backgroundColor=t.backgroundColor,t.borderColor&&(i.style.borderColor=t.borderColor))}var C;if(t.backgroundColor)C=ne.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:l},{type:"elem",elem:r,shift:0}]},e);else{var N=/cancel|phase/.test(n)?["svg-align"]:[];C=ne.makeVList({positionType:"individualShift",children:[{type:"elem",elem:r,shift:0},{type:"elem",elem:i,shift:l,wrapperClasses:N}]},e)}return/cancel/.test(n)&&(C.height=r.height,C.depth=r.depth),/cancel/.test(n)&&!u?ne.makeSpan(["mord","cancel-lap"],[C],e):ne.makeSpan(["mord"],[C],e)},pg=(t,e)=>{var r=0,n=new Ee.MathNode(t.label.indexOf("colorbox")>-1?"mpadded":"menclose",[Ft(t.body,e)]);switch(t.label){case"\\cancel":n.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":n.setAttribute("notation","downdiagonalstrike");break;case"\\phase":n.setAttribute("notation","phasorangle");break;case"\\sout":n.setAttribute("notation","horizontalstrike");break;case"\\fbox":n.setAttribute("notation","box");break;case"\\angl":n.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(r=e.fontMetrics().fboxsep*e.fontMetrics().ptPerEm,n.setAttribute("width","+"+2*r+"pt"),n.setAttribute("height","+"+2*r+"pt"),n.setAttribute("lspace",r+"pt"),n.setAttribute("voffset",r+"pt"),t.label==="\\fcolorbox"){var a=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness);n.setAttribute("style","border: "+a+"em solid "+String(t.borderColor))}break;case"\\xcancel":n.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return t.backgroundColor&&n.setAttribute("mathbackground",t.backgroundColor),n};Fe({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(t,e,r){var{parser:n,funcName:a}=t,i=at(e[0],"color-token").color,l=e[1];return{type:"enclose",mode:n.mode,label:a,backgroundColor:i,body:l}},htmlBuilder:mg,mathmlBuilder:pg});Fe({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(t,e,r){var{parser:n,funcName:a}=t,i=at(e[0],"color-token").color,l=at(e[1],"color-token").color,u=e[2];return{type:"enclose",mode:n.mode,label:a,backgroundColor:l,borderColor:i,body:u}},htmlBuilder:mg,mathmlBuilder:pg});Fe({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(t,e){var{parser:r}=t;return{type:"enclose",mode:r.mode,label:"\\fbox",body:e[0]}}});Fe({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(t,e){var{parser:r,funcName:n}=t,a=e[0];return{type:"enclose",mode:r.mode,label:n,body:a}},htmlBuilder:mg,mathmlBuilder:pg});Fe({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(t,e){var{parser:r}=t;return{type:"enclose",mode:r.mode,label:"\\angl",body:e[0]}}});var z9={};function Qa(t){for(var{type:e,names:r,props:n,handler:a,htmlBuilder:i,mathmlBuilder:l}=t,u={type:e,numArgs:n.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:a},d=0;d<r.length;++d)z9[r[d]]=u;i&&(_h[e]=i),l&&(wh[e]=l)}var O9={};function P(t,e){O9[t]=e}function C6(t){var e=[];t.consumeSpaces();var r=t.fetch().text;for(r==="\\relax"&&(t.consume(),t.consumeSpaces(),r=t.fetch().text);r==="\\hline"||r==="\\hdashline";)t.consume(),e.push(r==="\\hdashline"),t.consumeSpaces(),r=t.fetch().text;return e}var Vh=t=>{var e=t.parser.settings;if(!e.displayMode)throw new Te("{"+t.envName+"} can be used only in display mode.")};function gg(t){if(t.indexOf("ed")===-1)return t.indexOf("*")===-1}function Di(t,e,r){var{hskipBeforeAndAfter:n,addJot:a,cols:i,arraystretch:l,colSeparationType:u,autoTag:d,singleRow:h,emptySingleRow:p,maxNumCols:b,leqno:y}=e;if(t.gullet.beginGroup(),h||t.gullet.macros.set("\\cr","\\\\\\relax"),!l){var x=t.gullet.expandMacroAsText("\\arraystretch");if(x==null)l=1;else if(l=parseFloat(x),!l||l<0)throw new Te("Invalid \\arraystretch: "+x)}t.gullet.beginGroup();var _=[],k=[_],S=[],A=[],C=d!=null?[]:void 0;function N(){d&&t.gullet.macros.set("\\@eqnsw","1",!0)}function D(){C&&(t.gullet.macros.get("\\df@tag")?(C.push(t.subparse([new na("\\df@tag")])),t.gullet.macros.set("\\df@tag",void 0,!0)):C.push(!!d&&t.gullet.macros.get("\\@eqnsw")==="1"))}for(N(),A.push(C6(t));;){var j=t.parseExpression(!1,h?"\\end":"\\\\");t.gullet.endGroup(),t.gullet.beginGroup(),j={type:"ordgroup",mode:t.mode,body:j},r&&(j={type:"styling",mode:t.mode,style:r,body:[j]}),_.push(j);var O=t.fetch().text;if(O==="&"){if(b&&_.length===b){if(h||u)throw new Te("Too many tab characters: &",t.nextToken);t.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}t.consume()}else if(O==="\\end"){D(),_.length===1&&j.type==="styling"&&j.body[0].body.length===0&&(k.length>1||!p)&&k.pop(),A.length<k.length+1&&A.push([]);break}else if(O==="\\\\"){t.consume();var F=void 0;t.gullet.future().text!==" "&&(F=t.parseSizeGroup(!0)),S.push(F?F.value:null),D(),A.push(C6(t)),_=[],k.push(_),N()}else throw new Te("Expected & or \\\\ or \\cr or \\end",t.nextToken)}return t.gullet.endGroup(),t.gullet.endGroup(),{type:"array",mode:t.mode,addJot:a,arraystretch:l,body:k,cols:i,rowGaps:S,hskipBeforeAndAfter:n,hLinesBeforeRow:A,colSeparationType:u,tags:C,leqno:y}}function bg(t){return t.slice(0,1)==="d"?"display":"text"}var Wa=function(e,r){var n,a,i=e.body.length,l=e.hLinesBeforeRow,u=0,d=new Array(i),h=[],p=Math.max(r.fontMetrics().arrayRuleWidth,r.minRuleThickness),b=1/r.fontMetrics().ptPerEm,y=5*b;if(e.colSeparationType&&e.colSeparationType==="small"){var x=r.havingStyle(Ge.SCRIPT).sizeMultiplier;y=.2778*(x/r.sizeMultiplier)}var _=e.colSeparationType==="CD"?tr({number:3,unit:"ex"},r):12*b,k=3*b,S=e.arraystretch*_,A=.7*S,C=.3*S,N=0;function D(un){for(var Pr=0;Pr<un.length;++Pr)Pr>0&&(N+=.25),h.push({pos:N,isDashed:un[Pr]})}for(D(l[0]),n=0;n<e.body.length;++n){var j=e.body[n],O=A,F=C;u<j.length&&(u=j.length);var R=new Array(j.length);for(a=0;a<j.length;++a){var B=gt(j[a],r);F<B.depth&&(F=B.depth),O<B.height&&(O=B.height),R[a]=B}var V=e.rowGaps[n],$=0;V&&($=tr(V,r),$>0&&($+=C,F<$&&(F=$),$=0)),e.addJot&&(F+=k),R.height=O,R.depth=F,N+=O,R.pos=N,N+=F+$,d[n]=R,D(l[n+1])}var G=N/2+r.fontMetrics().axisHeight,le=e.cols||[],ie=[],pe,K,ue=[];if(e.tags&&e.tags.some(un=>un))for(n=0;n<i;++n){var Ce=d[n],ze=Ce.pos-G,q=e.tags[n],ae=void 0;q===!0?ae=ne.makeSpan(["eqn-num"],[],r):q===!1?ae=ne.makeSpan([],[],r):ae=ne.makeSpan([],Nr(q,r,!0),r),ae.depth=Ce.depth,ae.height=Ce.height,ue.push({type:"elem",elem:ae,shift:ze})}for(a=0,K=0;a<u||K<le.length;++a,++K){for(var we=le[K]||{},be=!0;we.type==="separator";){if(be||(pe=ne.makeSpan(["arraycolsep"],[]),pe.style.width=je(r.fontMetrics().doubleRuleSep),ie.push(pe)),we.separator==="|"||we.separator===":"){var Se=we.separator==="|"?"solid":"dashed",W=ne.makeSpan(["vertical-separator"],[],r);W.style.height=je(N),W.style.borderRightWidth=je(p),W.style.borderRightStyle=Se,W.style.margin="0 "+je(-p/2);var ce=N-G;ce&&(W.style.verticalAlign=je(-ce)),ie.push(W)}else throw new Te("Invalid separator type: "+we.separator);K++,we=le[K]||{},be=!1}if(!(a>=u)){var Ne=void 0;(a>0||e.hskipBeforeAndAfter)&&(Ne=Ue.deflt(we.pregap,y),Ne!==0&&(pe=ne.makeSpan(["arraycolsep"],[]),pe.style.width=je(Ne),ie.push(pe)));var Ze=[];for(n=0;n<i;++n){var Et=d[n],wt=Et[a];if(wt){var kt=Et.pos-G;wt.depth=Et.depth,wt.height=Et.height,Ze.push({type:"elem",elem:wt,shift:kt})}}Ze=ne.makeVList({positionType:"individualShift",children:Ze},r),Ze=ne.makeSpan(["col-align-"+(we.align||"c")],[Ze]),ie.push(Ze),(a<u-1||e.hskipBeforeAndAfter)&&(Ne=Ue.deflt(we.postgap,y),Ne!==0&&(pe=ne.makeSpan(["arraycolsep"],[]),pe.style.width=je(Ne),ie.push(pe)))}}if(d=ne.makeSpan(["mtable"],ie),h.length>0){for(var St=ne.makeLineSpan("hline",r,p),ur=ne.makeLineSpan("hdashline",r,p),cr=[{type:"elem",elem:d,shift:0}];h.length>0;){var Sn=h.pop(),Hn=Sn.pos-G;Sn.isDashed?cr.push({type:"elem",elem:ur,shift:Hn}):cr.push({type:"elem",elem:St,shift:Hn})}d=ne.makeVList({positionType:"individualShift",children:cr},r)}if(ue.length===0)return ne.makeSpan(["mord"],[d],r);var qt=ne.makeVList({positionType:"individualShift",children:ue},r);return qt=ne.makeSpan(["tag"],[qt],r),ne.makeFragment([d,qt])},aH={c:"center ",l:"left ",r:"right "},Ja=function(e,r){for(var n=[],a=new Ee.MathNode("mtd",[],["mtr-glue"]),i=new Ee.MathNode("mtd",[],["mml-eqn-num"]),l=0;l<e.body.length;l++){for(var u=e.body[l],d=[],h=0;h<u.length;h++)d.push(new Ee.MathNode("mtd",[Ft(u[h],r)]));e.tags&&e.tags[l]&&(d.unshift(a),d.push(a),e.leqno?d.unshift(i):d.push(i)),n.push(new Ee.MathNode("mtr",d))}var p=new Ee.MathNode("mtable",n),b=e.arraystretch===.5?.1:.16+e.arraystretch-1+(e.addJot?.09:0);p.setAttribute("rowspacing",je(b));var y="",x="";if(e.cols&&e.cols.length>0){var _=e.cols,k="",S=!1,A=0,C=_.length;_[0].type==="separator"&&(y+="top ",A=1),_[_.length-1].type==="separator"&&(y+="bottom ",C-=1);for(var N=A;N<C;N++)_[N].type==="align"?(x+=aH[_[N].align],S&&(k+="none "),S=!0):_[N].type==="separator"&&S&&(k+=_[N].separator==="|"?"solid ":"dashed ",S=!1);p.setAttribute("columnalign",x.trim()),/[sd]/.test(k)&&p.setAttribute("columnlines",k.trim())}if(e.colSeparationType==="align"){for(var D=e.cols||[],j="",O=1;O<D.length;O++)j+=O%2?"0em ":"1em ";p.setAttribute("columnspacing",j.trim())}else e.colSeparationType==="alignat"||e.colSeparationType==="gather"?p.setAttribute("columnspacing","0em"):e.colSeparationType==="small"?p.setAttribute("columnspacing","0.2778em"):e.colSeparationType==="CD"?p.setAttribute("columnspacing","0.5em"):p.setAttribute("columnspacing","1em");var F="",R=e.hLinesBeforeRow;y+=R[0].length>0?"left ":"",y+=R[R.length-1].length>0?"right ":"";for(var B=1;B<R.length-1;B++)F+=R[B].length===0?"none ":R[B][0]?"dashed ":"solid ";return/[sd]/.test(F)&&p.setAttribute("rowlines",F.trim()),y!==""&&(p=new Ee.MathNode("menclose",[p]),p.setAttribute("notation",y.trim())),e.arraystretch&&e.arraystretch<1&&(p=new Ee.MathNode("mstyle",[p]),p.setAttribute("scriptlevel","1")),p},R9=function(e,r){e.envName.indexOf("ed")===-1&&Vh(e);var n=[],a=e.envName.indexOf("at")>-1?"alignat":"align",i=e.envName==="split",l=Di(e.parser,{cols:n,addJot:!0,autoTag:i?void 0:gg(e.envName),emptySingleRow:!0,colSeparationType:a,maxNumCols:i?2:void 0,leqno:e.parser.settings.leqno},"display"),u,d=0,h={type:"ordgroup",mode:e.mode,body:[]};if(r[0]&&r[0].type==="ordgroup"){for(var p="",b=0;b<r[0].body.length;b++){var y=at(r[0].body[b],"textord");p+=y.text}u=Number(p),d=u*2}var x=!d;l.body.forEach(function(A){for(var C=1;C<A.length;C+=2){var N=at(A[C],"styling"),D=at(N.body[0],"ordgroup");D.body.unshift(h)}if(x)d<A.length&&(d=A.length);else{var j=A.length/2;if(u<j)throw new Te("Too many math in a row: "+("expected "+u+", but got "+j),A[0])}});for(var _=0;_<d;++_){var k="r",S=0;_%2===1?k="l":_>0&&x&&(S=1),n[_]={type:"align",align:k,pregap:S,postgap:0}}return l.colSeparationType=x?"align":"alignat",l};Qa({type:"array",names:["array","darray"],props:{numArgs:1},handler(t,e){var r=qh(e[0]),n=r?[e[0]]:at(e[0],"ordgroup").body,a=n.map(function(l){var u=dg(l),d=u.text;if("lcr".indexOf(d)!==-1)return{type:"align",align:d};if(d==="|")return{type:"separator",separator:"|"};if(d===":")return{type:"separator",separator:":"};throw new Te("Unknown column alignment: "+d,l)}),i={cols:a,hskipBeforeAndAfter:!0,maxNumCols:a.length};return Di(t.parser,i,bg(t.envName))},htmlBuilder:Wa,mathmlBuilder:Ja});Qa({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(t){var e={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[t.envName.replace("*","")],r="c",n={hskipBeforeAndAfter:!1,cols:[{type:"align",align:r}]};if(t.envName.charAt(t.envName.length-1)==="*"){var a=t.parser;if(a.consumeSpaces(),a.fetch().text==="["){if(a.consume(),a.consumeSpaces(),r=a.fetch().text,"lcr".indexOf(r)===-1)throw new Te("Expected l or c or r",a.nextToken);a.consume(),a.consumeSpaces(),a.expect("]"),a.consume(),n.cols=[{type:"align",align:r}]}}var i=Di(t.parser,n,bg(t.envName)),l=Math.max(0,...i.body.map(u=>u.length));return i.cols=new Array(l).fill({type:"align",align:r}),e?{type:"leftright",mode:t.mode,body:[i],left:e[0],right:e[1],rightColor:void 0}:i},htmlBuilder:Wa,mathmlBuilder:Ja});Qa({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(t){var e={arraystretch:.5},r=Di(t.parser,e,"script");return r.colSeparationType="small",r},htmlBuilder:Wa,mathmlBuilder:Ja});Qa({type:"array",names:["subarray"],props:{numArgs:1},handler(t,e){var r=qh(e[0]),n=r?[e[0]]:at(e[0],"ordgroup").body,a=n.map(function(l){var u=dg(l),d=u.text;if("lc".indexOf(d)!==-1)return{type:"align",align:d};throw new Te("Unknown column alignment: "+d,l)});if(a.length>1)throw new Te("{subarray} can contain only one column");var i={cols:a,hskipBeforeAndAfter:!1,arraystretch:.5};if(i=Di(t.parser,i,"script"),i.body.length>0&&i.body[0].length>1)throw new Te("{subarray} can contain only one column");return i},htmlBuilder:Wa,mathmlBuilder:Ja});Qa({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(t){var e={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},r=Di(t.parser,e,bg(t.envName));return{type:"leftright",mode:t.mode,body:[r],left:t.envName.indexOf("r")>-1?".":"\\{",right:t.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:Wa,mathmlBuilder:Ja});Qa({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:R9,htmlBuilder:Wa,mathmlBuilder:Ja});Qa({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(t){Ue.contains(["gather","gather*"],t.envName)&&Vh(t);var e={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:gg(t.envName),emptySingleRow:!0,leqno:t.parser.settings.leqno};return Di(t.parser,e,"display")},htmlBuilder:Wa,mathmlBuilder:Ja});Qa({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:R9,htmlBuilder:Wa,mathmlBuilder:Ja});Qa({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(t){Vh(t);var e={autoTag:gg(t.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:t.parser.settings.leqno};return Di(t.parser,e,"display")},htmlBuilder:Wa,mathmlBuilder:Ja});Qa({type:"array",names:["CD"],props:{numArgs:0},handler(t){return Vh(t),Uq(t.parser)},htmlBuilder:Wa,mathmlBuilder:Ja});P("\\nonumber","\\gdef\\@eqnsw{0}");P("\\notag","\\nonumber");Fe({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(t,e){throw new Te(t.funcName+" valid only within array environment")}});var T6=z9;Fe({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(t,e){var{parser:r,funcName:n}=t,a=e[0];if(a.type!=="ordgroup")throw new Te("Invalid environment name",a);for(var i="",l=0;l<a.body.length;++l)i+=at(a.body[l],"textord").text;if(n==="\\begin"){if(!T6.hasOwnProperty(i))throw new Te("No such environment: "+i,a);var u=T6[i],{args:d,optArgs:h}=r.parseArguments("\\begin{"+i+"}",u),p={mode:r.mode,envName:i,parser:r},b=u.handler(p,d,h);r.expect("\\end",!1);var y=r.nextToken,x=at(r.parseFunction(),"environment");if(x.name!==i)throw new Te("Mismatch: \\begin{"+i+"} matched by \\end{"+x.name+"}",y);return b}return{type:"environment",mode:r.mode,name:i,nameGroup:a}}});var F9=(t,e)=>{var r=t.font,n=e.withFont(r);return gt(t.body,n)},L9=(t,e)=>{var r=t.font,n=e.withFont(r);return Ft(t.body,n)},N6={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};Fe({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=kh(e[0]),i=n;return i in N6&&(i=N6[i]),{type:"font",mode:r.mode,font:i.slice(1),body:a}},htmlBuilder:F9,mathmlBuilder:L9});Fe({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(t,e)=>{var{parser:r}=t,n=e[0],a=Ue.isCharacterBox(n);return{type:"mclass",mode:r.mode,mclass:Hh(n),body:[{type:"font",mode:r.mode,font:"boldsymbol",body:n}],isCharacterBox:a}}});Fe({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(t,e)=>{var{parser:r,funcName:n,breakOnTokenText:a}=t,{mode:i}=r,l=r.parseExpression(!0,a),u="math"+n.slice(1);return{type:"font",mode:i,font:u,body:{type:"ordgroup",mode:r.mode,body:l}}},htmlBuilder:F9,mathmlBuilder:L9});var P9=(t,e)=>{var r=e;return t==="display"?r=r.id>=Ge.SCRIPT.id?r.text():Ge.DISPLAY:t==="text"&&r.size===Ge.DISPLAY.size?r=Ge.TEXT:t==="script"?r=Ge.SCRIPT:t==="scriptscript"&&(r=Ge.SCRIPTSCRIPT),r},yg=(t,e)=>{var r=P9(t.size,e.style),n=r.fracNum(),a=r.fracDen(),i;i=e.havingStyle(n);var l=gt(t.numer,i,e);if(t.continued){var u=8.5/e.fontMetrics().ptPerEm,d=3.5/e.fontMetrics().ptPerEm;l.height=l.height<u?u:l.height,l.depth=l.depth<d?d:l.depth}i=e.havingStyle(a);var h=gt(t.denom,i,e),p,b,y;t.hasBarLine?(t.barSize?(b=tr(t.barSize,e),p=ne.makeLineSpan("frac-line",e,b)):p=ne.makeLineSpan("frac-line",e),b=p.height,y=p.height):(p=null,b=0,y=e.fontMetrics().defaultRuleThickness);var x,_,k;r.size===Ge.DISPLAY.size||t.size==="display"?(x=e.fontMetrics().num1,b>0?_=3*y:_=7*y,k=e.fontMetrics().denom1):(b>0?(x=e.fontMetrics().num2,_=y):(x=e.fontMetrics().num3,_=3*y),k=e.fontMetrics().denom2);var S;if(p){var C=e.fontMetrics().axisHeight;x-l.depth-(C+.5*b)<_&&(x+=_-(x-l.depth-(C+.5*b))),C-.5*b-(h.height-k)<_&&(k+=_-(C-.5*b-(h.height-k)));var N=-(C-.5*b);S=ne.makeVList({positionType:"individualShift",children:[{type:"elem",elem:h,shift:k},{type:"elem",elem:p,shift:N},{type:"elem",elem:l,shift:-x}]},e)}else{var A=x-l.depth-(h.height-k);A<_&&(x+=.5*(_-A),k+=.5*(_-A)),S=ne.makeVList({positionType:"individualShift",children:[{type:"elem",elem:h,shift:k},{type:"elem",elem:l,shift:-x}]},e)}i=e.havingStyle(r),S.height*=i.sizeMultiplier/e.sizeMultiplier,S.depth*=i.sizeMultiplier/e.sizeMultiplier;var D;r.size===Ge.DISPLAY.size?D=e.fontMetrics().delim1:r.size===Ge.SCRIPTSCRIPT.size?D=e.havingStyle(Ge.SCRIPT).fontMetrics().delim2:D=e.fontMetrics().delim2;var j,O;return t.leftDelim==null?j=jc(e,["mopen"]):j=Ns.customSizedDelim(t.leftDelim,D,!0,e.havingStyle(r),t.mode,["mopen"]),t.continued?O=ne.makeSpan([]):t.rightDelim==null?O=jc(e,["mclose"]):O=Ns.customSizedDelim(t.rightDelim,D,!0,e.havingStyle(r),t.mode,["mclose"]),ne.makeSpan(["mord"].concat(i.sizingClasses(e)),[j,ne.makeSpan(["mfrac"],[S]),O],e)},xg=(t,e)=>{var r=new Ee.MathNode("mfrac",[Ft(t.numer,e),Ft(t.denom,e)]);if(!t.hasBarLine)r.setAttribute("linethickness","0px");else if(t.barSize){var n=tr(t.barSize,e);r.setAttribute("linethickness",je(n))}var a=P9(t.size,e.style);if(a.size!==e.style.size){r=new Ee.MathNode("mstyle",[r]);var i=a.size===Ge.DISPLAY.size?"true":"false";r.setAttribute("displaystyle",i),r.setAttribute("scriptlevel","0")}if(t.leftDelim!=null||t.rightDelim!=null){var l=[];if(t.leftDelim!=null){var u=new Ee.MathNode("mo",[new Ee.TextNode(t.leftDelim.replace("\\",""))]);u.setAttribute("fence","true"),l.push(u)}if(l.push(r),t.rightDelim!=null){var d=new Ee.MathNode("mo",[new Ee.TextNode(t.rightDelim.replace("\\",""))]);d.setAttribute("fence","true"),l.push(d)}return ug(l)}return r};Fe({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0],i=e[1],l,u=null,d=null,h="auto";switch(n){case"\\dfrac":case"\\frac":case"\\tfrac":l=!0;break;case"\\\\atopfrac":l=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":l=!1,u="(",d=")";break;case"\\\\bracefrac":l=!1,u="\\{",d="\\}";break;case"\\\\brackfrac":l=!1,u="[",d="]";break;default:throw new Error("Unrecognized genfrac command")}switch(n){case"\\dfrac":case"\\dbinom":h="display";break;case"\\tfrac":case"\\tbinom":h="text";break}return{type:"genfrac",mode:r.mode,continued:!1,numer:a,denom:i,hasBarLine:l,leftDelim:u,rightDelim:d,size:h,barSize:null}},htmlBuilder:yg,mathmlBuilder:xg});Fe({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0],i=e[1];return{type:"genfrac",mode:r.mode,continued:!0,numer:a,denom:i,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}});Fe({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(t){var{parser:e,funcName:r,token:n}=t,a;switch(r){case"\\over":a="\\frac";break;case"\\choose":a="\\binom";break;case"\\atop":a="\\\\atopfrac";break;case"\\brace":a="\\\\bracefrac";break;case"\\brack":a="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:e.mode,replaceWith:a,token:n}}});var M6=["display","text","script","scriptscript"],j6=function(e){var r=null;return e.length>0&&(r=e,r=r==="."?null:r),r};Fe({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(t,e){var{parser:r}=t,n=e[4],a=e[5],i=kh(e[0]),l=i.type==="atom"&&i.family==="open"?j6(i.text):null,u=kh(e[1]),d=u.type==="atom"&&u.family==="close"?j6(u.text):null,h=at(e[2],"size"),p,b=null;h.isBlank?p=!0:(b=h.value,p=b.number>0);var y="auto",x=e[3];if(x.type==="ordgroup"){if(x.body.length>0){var _=at(x.body[0],"textord");y=M6[Number(_.text)]}}else x=at(x,"textord"),y=M6[Number(x.text)];return{type:"genfrac",mode:r.mode,numer:n,denom:a,continued:!1,hasBarLine:p,barSize:b,leftDelim:l,rightDelim:d,size:y}},htmlBuilder:yg,mathmlBuilder:xg});Fe({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(t,e){var{parser:r,funcName:n,token:a}=t;return{type:"infix",mode:r.mode,replaceWith:"\\\\abovefrac",size:at(e[0],"size").value,token:a}}});Fe({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0],i=O$(at(e[1],"infix").size),l=e[2],u=i.number>0;return{type:"genfrac",mode:r.mode,numer:a,denom:l,continued:!1,hasBarLine:u,barSize:i,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:yg,mathmlBuilder:xg});var B9=(t,e)=>{var r=e.style,n,a;t.type==="supsub"?(n=t.sup?gt(t.sup,e.havingStyle(r.sup()),e):gt(t.sub,e.havingStyle(r.sub()),e),a=at(t.base,"horizBrace")):a=at(t,"horizBrace");var i=gt(a.base,e.havingBaseStyle(Ge.DISPLAY)),l=Os.svgSpan(a,e),u;if(a.isOver?(u=ne.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:i},{type:"kern",size:.1},{type:"elem",elem:l}]},e),u.children[0].children[0].children[1].classes.push("svg-align")):(u=ne.makeVList({positionType:"bottom",positionData:i.depth+.1+l.height,children:[{type:"elem",elem:l},{type:"kern",size:.1},{type:"elem",elem:i}]},e),u.children[0].children[0].children[0].classes.push("svg-align")),n){var d=ne.makeSpan(["mord",a.isOver?"mover":"munder"],[u],e);a.isOver?u=ne.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:d},{type:"kern",size:.2},{type:"elem",elem:n}]},e):u=ne.makeVList({positionType:"bottom",positionData:d.depth+.2+n.height+n.depth,children:[{type:"elem",elem:n},{type:"kern",size:.2},{type:"elem",elem:d}]},e)}return ne.makeSpan(["mord",a.isOver?"mover":"munder"],[u],e)},sH=(t,e)=>{var r=Os.mathMLnode(t.label);return new Ee.MathNode(t.isOver?"mover":"munder",[Ft(t.base,e),r])};Fe({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(t,e){var{parser:r,funcName:n}=t;return{type:"horizBrace",mode:r.mode,label:n,isOver:/^\\over/.test(n),base:e[0]}},htmlBuilder:B9,mathmlBuilder:sH});Fe({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[1],a=at(e[0],"url").url;return r.settings.isTrusted({command:"\\href",url:a})?{type:"href",mode:r.mode,href:a,body:br(n)}:r.formatUnsupportedCmd("\\href")},htmlBuilder:(t,e)=>{var r=Nr(t.body,e,!1);return ne.makeAnchor(t.href,[],r,e)},mathmlBuilder:(t,e)=>{var r=ji(t.body,e);return r instanceof Pn||(r=new Pn("mrow",[r])),r.setAttribute("href",t.href),r}});Fe({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=at(e[0],"url").url;if(!r.settings.isTrusted({command:"\\url",url:n}))return r.formatUnsupportedCmd("\\url");for(var a=[],i=0;i<n.length;i++){var l=n[i];l==="~"&&(l="\\textasciitilde"),a.push({type:"textord",mode:"text",text:l})}var u={type:"text",mode:r.mode,font:"\\texttt",body:a};return{type:"href",mode:r.mode,href:n,body:br(u)}}});Fe({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(t,e){var{parser:r}=t;return{type:"hbox",mode:r.mode,body:br(e[0])}},htmlBuilder(t,e){var r=Nr(t.body,e,!1);return ne.makeFragment(r)},mathmlBuilder(t,e){return new Ee.MathNode("mrow",kn(t.body,e))}});Fe({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(t,e)=>{var{parser:r,funcName:n,token:a}=t,i=at(e[0],"raw").string,l=e[1];r.settings.strict&&r.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var u,d={};switch(n){case"\\htmlClass":d.class=i,u={command:"\\htmlClass",class:i};break;case"\\htmlId":d.id=i,u={command:"\\htmlId",id:i};break;case"\\htmlStyle":d.style=i,u={command:"\\htmlStyle",style:i};break;case"\\htmlData":{for(var h=i.split(","),p=0;p<h.length;p++){var b=h[p].split("=");if(b.length!==2)throw new Te("Error parsing key-value for \\htmlData");d["data-"+b[0].trim()]=b[1].trim()}u={command:"\\htmlData",attributes:d};break}default:throw new Error("Unrecognized html command")}return r.settings.isTrusted(u)?{type:"html",mode:r.mode,attributes:d,body:br(l)}:r.formatUnsupportedCmd(n)},htmlBuilder:(t,e)=>{var r=Nr(t.body,e,!1),n=["enclosing"];t.attributes.class&&n.push(...t.attributes.class.trim().split(/\s+/));var a=ne.makeSpan(n,r,e);for(var i in t.attributes)i!=="class"&&t.attributes.hasOwnProperty(i)&&a.setAttribute(i,t.attributes[i]);return a},mathmlBuilder:(t,e)=>ji(t.body,e)});Fe({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t;return{type:"htmlmathml",mode:r.mode,html:br(e[0]),mathml:br(e[1])}},htmlBuilder:(t,e)=>{var r=Nr(t.html,e,!1);return ne.makeFragment(r)},mathmlBuilder:(t,e)=>ji(t.mathml,e)});var ip=function(e){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(e))return{number:+e,unit:"bp"};var r=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e);if(!r)throw new Te("Invalid size: '"+e+"' in \\includegraphics");var n={number:+(r[1]+r[2]),unit:r[3]};if(!a9(n))throw new Te("Invalid unit: '"+n.unit+"' in \\includegraphics.");return n};Fe({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(t,e,r)=>{var{parser:n}=t,a={number:0,unit:"em"},i={number:.9,unit:"em"},l={number:0,unit:"em"},u="";if(r[0])for(var d=at(r[0],"raw").string,h=d.split(","),p=0;p<h.length;p++){var b=h[p].split("=");if(b.length===2){var y=b[1].trim();switch(b[0].trim()){case"alt":u=y;break;case"width":a=ip(y);break;case"height":i=ip(y);break;case"totalheight":l=ip(y);break;default:throw new Te("Invalid key: '"+b[0]+"' in \\includegraphics.")}}}var x=at(e[0],"url").url;return u===""&&(u=x,u=u.replace(/^.*[\\/]/,""),u=u.substring(0,u.lastIndexOf("."))),n.settings.isTrusted({command:"\\includegraphics",url:x})?{type:"includegraphics",mode:n.mode,alt:u,width:a,height:i,totalheight:l,src:x}:n.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(t,e)=>{var r=tr(t.height,e),n=0;t.totalheight.number>0&&(n=tr(t.totalheight,e)-r);var a=0;t.width.number>0&&(a=tr(t.width,e));var i={height:je(r+n)};a>0&&(i.width=je(a)),n>0&&(i.verticalAlign=je(-n));var l=new sq(t.src,t.alt,i);return l.height=r,l.depth=n,l},mathmlBuilder:(t,e)=>{var r=new Ee.MathNode("mglyph",[]);r.setAttribute("alt",t.alt);var n=tr(t.height,e),a=0;if(t.totalheight.number>0&&(a=tr(t.totalheight,e)-n,r.setAttribute("valign",je(-a))),r.setAttribute("height",je(n+a)),t.width.number>0){var i=tr(t.width,e);r.setAttribute("width",je(i))}return r.setAttribute("src",t.src),r}});Fe({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(t,e){var{parser:r,funcName:n}=t,a=at(e[0],"size");if(r.settings.strict){var i=n[1]==="m",l=a.value.unit==="mu";i?(l||r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" supports only mu units, "+("not "+a.value.unit+" units")),r.mode!=="math"&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" works only in math mode")):l&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" doesn't support mu units")}return{type:"kern",mode:r.mode,dimension:a.value}},htmlBuilder(t,e){return ne.makeGlue(t.dimension,e)},mathmlBuilder(t,e){var r=tr(t.dimension,e);return new Ee.SpaceNode(r)}});Fe({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0];return{type:"lap",mode:r.mode,alignment:n.slice(5),body:a}},htmlBuilder:(t,e)=>{var r;t.alignment==="clap"?(r=ne.makeSpan([],[gt(t.body,e)]),r=ne.makeSpan(["inner"],[r],e)):r=ne.makeSpan(["inner"],[gt(t.body,e)]);var n=ne.makeSpan(["fix"],[]),a=ne.makeSpan([t.alignment],[r,n],e),i=ne.makeSpan(["strut"]);return i.style.height=je(a.height+a.depth),a.depth&&(i.style.verticalAlign=je(-a.depth)),a.children.unshift(i),a=ne.makeSpan(["thinbox"],[a],e),ne.makeSpan(["mord","vbox"],[a],e)},mathmlBuilder:(t,e)=>{var r=new Ee.MathNode("mpadded",[Ft(t.body,e)]);if(t.alignment!=="rlap"){var n=t.alignment==="llap"?"-1":"-0.5";r.setAttribute("lspace",n+"width")}return r.setAttribute("width","0px"),r}});Fe({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(t,e){var{funcName:r,parser:n}=t,a=n.mode;n.switchMode("math");var i=r==="\\("?"\\)":"$",l=n.parseExpression(!1,i);return n.expect(i),n.switchMode(a),{type:"styling",mode:n.mode,style:"text",body:l}}});Fe({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(t,e){throw new Te("Mismatched "+t.funcName)}});var D6=(t,e)=>{switch(e.style.size){case Ge.DISPLAY.size:return t.display;case Ge.TEXT.size:return t.text;case Ge.SCRIPT.size:return t.script;case Ge.SCRIPTSCRIPT.size:return t.scriptscript;default:return t.text}};Fe({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(t,e)=>{var{parser:r}=t;return{type:"mathchoice",mode:r.mode,display:br(e[0]),text:br(e[1]),script:br(e[2]),scriptscript:br(e[3])}},htmlBuilder:(t,e)=>{var r=D6(t,e),n=Nr(r,e,!1);return ne.makeFragment(n)},mathmlBuilder:(t,e)=>{var r=D6(t,e);return ji(r,e)}});var I9=(t,e,r,n,a,i,l)=>{t=ne.makeSpan([],[t]);var u=r&&Ue.isCharacterBox(r),d,h;if(e){var p=gt(e,n.havingStyle(a.sup()),n);h={elem:p,kern:Math.max(n.fontMetrics().bigOpSpacing1,n.fontMetrics().bigOpSpacing3-p.depth)}}if(r){var b=gt(r,n.havingStyle(a.sub()),n);d={elem:b,kern:Math.max(n.fontMetrics().bigOpSpacing2,n.fontMetrics().bigOpSpacing4-b.height)}}var y;if(h&&d){var x=n.fontMetrics().bigOpSpacing5+d.elem.height+d.elem.depth+d.kern+t.depth+l;y=ne.makeVList({positionType:"bottom",positionData:x,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:d.elem,marginLeft:je(-i)},{type:"kern",size:d.kern},{type:"elem",elem:t},{type:"kern",size:h.kern},{type:"elem",elem:h.elem,marginLeft:je(i)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else if(d){var _=t.height-l;y=ne.makeVList({positionType:"top",positionData:_,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:d.elem,marginLeft:je(-i)},{type:"kern",size:d.kern},{type:"elem",elem:t}]},n)}else if(h){var k=t.depth+l;y=ne.makeVList({positionType:"bottom",positionData:k,children:[{type:"elem",elem:t},{type:"kern",size:h.kern},{type:"elem",elem:h.elem,marginLeft:je(i)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else return t;var S=[y];if(d&&i!==0&&!u){var A=ne.makeSpan(["mspace"],[],n);A.style.marginRight=je(i),S.unshift(A)}return ne.makeSpan(["mop","op-limits"],S,n)},$9=["\\smallint"],Ll=(t,e)=>{var r,n,a=!1,i;t.type==="supsub"?(r=t.sup,n=t.sub,i=at(t.base,"op"),a=!0):i=at(t,"op");var l=e.style,u=!1;l.size===Ge.DISPLAY.size&&i.symbol&&!Ue.contains($9,i.name)&&(u=!0);var d;if(i.symbol){var h=u?"Size2-Regular":"Size1-Regular",p="";if((i.name==="\\oiint"||i.name==="\\oiiint")&&(p=i.name.slice(1),i.name=p==="oiint"?"\\iint":"\\iiint"),d=ne.makeSymbol(i.name,h,"math",e,["mop","op-symbol",u?"large-op":"small-op"]),p.length>0){var b=d.italic,y=ne.staticSvg(p+"Size"+(u?"2":"1"),e);d=ne.makeVList({positionType:"individualShift",children:[{type:"elem",elem:d,shift:0},{type:"elem",elem:y,shift:u?.08:0}]},e),i.name="\\"+p,d.classes.unshift("mop"),d.italic=b}}else if(i.body){var x=Nr(i.body,e,!0);x.length===1&&x[0]instanceof ia?(d=x[0],d.classes[0]="mop"):d=ne.makeSpan(["mop"],x,e)}else{for(var _=[],k=1;k<i.name.length;k++)_.push(ne.mathsym(i.name[k],i.mode,e));d=ne.makeSpan(["mop"],_,e)}var S=0,A=0;return(d instanceof ia||i.name==="\\oiint"||i.name==="\\oiiint")&&!i.suppressBaseShift&&(S=(d.height-d.depth)/2-e.fontMetrics().axisHeight,A=d.italic),a?I9(d,r,n,e,l,A,S):(S&&(d.style.position="relative",d.style.top=je(S)),d)},Kc=(t,e)=>{var r;if(t.symbol)r=new Pn("mo",[oa(t.name,t.mode)]),Ue.contains($9,t.name)&&r.setAttribute("largeop","false");else if(t.body)r=new Pn("mo",kn(t.body,e));else{r=new Pn("mi",[new Ua(t.name.slice(1))]);var n=new Pn("mo",[oa("","text")]);t.parentIsSupSub?r=new Pn("mrow",[r,n]):r=p9([r,n])}return r},iH={"":"\\prod","":"\\coprod","":"\\sum","":"\\bigwedge","":"\\bigvee","":"\\bigcap","":"\\bigcup","":"\\bigodot","":"\\bigoplus","":"\\bigotimes","":"\\biguplus","":"\\bigsqcup"};Fe({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","","","","","","","","","","","",""],props:{numArgs:0},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=n;return a.length===1&&(a=iH[a]),{type:"op",mode:r.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:a}},htmlBuilder:Ll,mathmlBuilder:Kc});Fe({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"op",mode:r.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:br(n)}},htmlBuilder:Ll,mathmlBuilder:Kc});var oH={"":"\\int","":"\\iint","":"\\iiint","":"\\oint","":"\\oiint","":"\\oiiint"};Fe({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(t){var{parser:e,funcName:r}=t;return{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:Ll,mathmlBuilder:Kc});Fe({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(t){var{parser:e,funcName:r}=t;return{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:Ll,mathmlBuilder:Kc});Fe({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","","","","","",""],props:{numArgs:0},handler(t){var{parser:e,funcName:r}=t,n=r;return n.length===1&&(n=oH[n]),{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:n}},htmlBuilder:Ll,mathmlBuilder:Kc});var q9=(t,e)=>{var r,n,a=!1,i;t.type==="supsub"?(r=t.sup,n=t.sub,i=at(t.base,"operatorname"),a=!0):i=at(t,"operatorname");var l;if(i.body.length>0){for(var u=i.body.map(b=>{var y=b.text;return typeof y=="string"?{type:"textord",mode:b.mode,text:y}:b}),d=Nr(u,e.withFont("mathrm"),!0),h=0;h<d.length;h++){var p=d[h];p instanceof ia&&(p.text=p.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}l=ne.makeSpan(["mop"],d,e)}else l=ne.makeSpan(["mop"],[],e);return a?I9(l,r,n,e,e.style,0,0):l},lH=(t,e)=>{for(var r=kn(t.body,e.withFont("mathrm")),n=!0,a=0;a<r.length;a++){var i=r[a];if(!(i instanceof Ee.SpaceNode))if(i instanceof Ee.MathNode)switch(i.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var l=i.children[0];i.children.length===1&&l instanceof Ee.TextNode?l.text=l.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):n=!1;break}default:n=!1}else n=!1}if(n){var u=r.map(p=>p.toText()).join("");r=[new Ee.TextNode(u)]}var d=new Ee.MathNode("mi",r);d.setAttribute("mathvariant","normal");var h=new Ee.MathNode("mo",[oa("","text")]);return t.parentIsSupSub?new Ee.MathNode("mrow",[d,h]):Ee.newDocumentFragment([d,h])};Fe({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0];return{type:"operatorname",mode:r.mode,body:br(a),alwaysHandleSupSub:n==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:q9,mathmlBuilder:lH});P("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");Eo({type:"ordgroup",htmlBuilder(t,e){return t.semisimple?ne.makeFragment(Nr(t.body,e,!1)):ne.makeSpan(["mord"],Nr(t.body,e,!0),e)},mathmlBuilder(t,e){return ji(t.body,e,!0)}});Fe({type:"overline",names:["\\overline"],props:{numArgs:1},handler(t,e){var{parser:r}=t,n=e[0];return{type:"overline",mode:r.mode,body:n}},htmlBuilder(t,e){var r=gt(t.body,e.havingCrampedStyle()),n=ne.makeLineSpan("overline-line",e),a=e.fontMetrics().defaultRuleThickness,i=ne.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r},{type:"kern",size:3*a},{type:"elem",elem:n},{type:"kern",size:a}]},e);return ne.makeSpan(["mord","overline"],[i],e)},mathmlBuilder(t,e){var r=new Ee.MathNode("mo",[new Ee.TextNode("")]);r.setAttribute("stretchy","true");var n=new Ee.MathNode("mover",[Ft(t.body,e),r]);return n.setAttribute("accent","true"),n}});Fe({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"phantom",mode:r.mode,body:br(n)}},htmlBuilder:(t,e)=>{var r=Nr(t.body,e.withPhantom(),!1);return ne.makeFragment(r)},mathmlBuilder:(t,e)=>{var r=kn(t.body,e);return new Ee.MathNode("mphantom",r)}});Fe({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"hphantom",mode:r.mode,body:n}},htmlBuilder:(t,e)=>{var r=ne.makeSpan([],[gt(t.body,e.withPhantom())]);if(r.height=0,r.depth=0,r.children)for(var n=0;n<r.children.length;n++)r.children[n].height=0,r.children[n].depth=0;return r=ne.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},e),ne.makeSpan(["mord"],[r],e)},mathmlBuilder:(t,e)=>{var r=kn(br(t.body),e),n=new Ee.MathNode("mphantom",r),a=new Ee.MathNode("mpadded",[n]);return a.setAttribute("height","0px"),a.setAttribute("depth","0px"),a}});Fe({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"vphantom",mode:r.mode,body:n}},htmlBuilder:(t,e)=>{var r=ne.makeSpan(["inner"],[gt(t.body,e.withPhantom())]),n=ne.makeSpan(["fix"],[]);return ne.makeSpan(["mord","rlap"],[r,n],e)},mathmlBuilder:(t,e)=>{var r=kn(br(t.body),e),n=new Ee.MathNode("mphantom",r),a=new Ee.MathNode("mpadded",[n]);return a.setAttribute("width","0px"),a}});Fe({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(t,e){var{parser:r}=t,n=at(e[0],"size").value,a=e[1];return{type:"raisebox",mode:r.mode,dy:n,body:a}},htmlBuilder(t,e){var r=gt(t.body,e),n=tr(t.dy,e);return ne.makeVList({positionType:"shift",positionData:-n,children:[{type:"elem",elem:r}]},e)},mathmlBuilder(t,e){var r=new Ee.MathNode("mpadded",[Ft(t.body,e)]),n=t.dy.number+t.dy.unit;return r.setAttribute("voffset",n),r}});Fe({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0,allowedInArgument:!0},handler(t){var{parser:e}=t;return{type:"internal",mode:e.mode}}});Fe({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(t,e,r){var{parser:n}=t,a=r[0],i=at(e[0],"size"),l=at(e[1],"size");return{type:"rule",mode:n.mode,shift:a&&at(a,"size").value,width:i.value,height:l.value}},htmlBuilder(t,e){var r=ne.makeSpan(["mord","rule"],[],e),n=tr(t.width,e),a=tr(t.height,e),i=t.shift?tr(t.shift,e):0;return r.style.borderRightWidth=je(n),r.style.borderTopWidth=je(a),r.style.bottom=je(i),r.width=n,r.height=a+i,r.depth=-i,r.maxFontSize=a*1.125*e.sizeMultiplier,r},mathmlBuilder(t,e){var r=tr(t.width,e),n=tr(t.height,e),a=t.shift?tr(t.shift,e):0,i=e.color&&e.getColor()||"black",l=new Ee.MathNode("mspace");l.setAttribute("mathbackground",i),l.setAttribute("width",je(r)),l.setAttribute("height",je(n));var u=new Ee.MathNode("mpadded",[l]);return a>=0?u.setAttribute("height",je(a)):(u.setAttribute("height",je(a)),u.setAttribute("depth",je(-a))),u.setAttribute("voffset",je(a)),u}});function H9(t,e,r){for(var n=Nr(t,e,!1),a=e.sizeMultiplier/r.sizeMultiplier,i=0;i<n.length;i++){var l=n[i].classes.indexOf("sizing");l<0?Array.prototype.push.apply(n[i].classes,e.sizingClasses(r)):n[i].classes[l+1]==="reset-size"+e.size&&(n[i].classes[l+1]="reset-size"+r.size),n[i].height*=a,n[i].depth*=a}return ne.makeFragment(n)}var z6=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],uH=(t,e)=>{var r=e.havingSize(t.size);return H9(t.body,r,e)};Fe({type:"sizing",names:z6,props:{numArgs:0,allowedInText:!0},handler:(t,e)=>{var{breakOnTokenText:r,funcName:n,parser:a}=t,i=a.parseExpression(!1,r);return{type:"sizing",mode:a.mode,size:z6.indexOf(n)+1,body:i}},htmlBuilder:uH,mathmlBuilder:(t,e)=>{var r=e.havingSize(t.size),n=kn(t.body,r),a=new Ee.MathNode("mstyle",n);return a.setAttribute("mathsize",je(r.sizeMultiplier)),a}});Fe({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(t,e,r)=>{var{parser:n}=t,a=!1,i=!1,l=r[0]&&at(r[0],"ordgroup");if(l)for(var u="",d=0;d<l.body.length;++d){var h=l.body[d];if(u=h.text,u==="t")a=!0;else if(u==="b")i=!0;else{a=!1,i=!1;break}}else a=!0,i=!0;var p=e[0];return{type:"smash",mode:n.mode,body:p,smashHeight:a,smashDepth:i}},htmlBuilder:(t,e)=>{var r=ne.makeSpan([],[gt(t.body,e)]);if(!t.smashHeight&&!t.smashDepth)return r;if(t.smashHeight&&(r.height=0,r.children))for(var n=0;n<r.children.length;n++)r.children[n].height=0;if(t.smashDepth&&(r.depth=0,r.children))for(var a=0;a<r.children.length;a++)r.children[a].depth=0;var i=ne.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},e);return ne.makeSpan(["mord"],[i],e)},mathmlBuilder:(t,e)=>{var r=new Ee.MathNode("mpadded",[Ft(t.body,e)]);return t.smashHeight&&r.setAttribute("height","0px"),t.smashDepth&&r.setAttribute("depth","0px"),r}});Fe({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(t,e,r){var{parser:n}=t,a=r[0],i=e[0];return{type:"sqrt",mode:n.mode,body:i,index:a}},htmlBuilder(t,e){var r=gt(t.body,e.havingCrampedStyle());r.height===0&&(r.height=e.fontMetrics().xHeight),r=ne.wrapFragment(r,e);var n=e.fontMetrics(),a=n.defaultRuleThickness,i=a;e.style.id<Ge.TEXT.id&&(i=e.fontMetrics().xHeight);var l=a+i/4,u=r.height+r.depth+l+a,{span:d,ruleWidth:h,advanceWidth:p}=Ns.sqrtImage(u,e),b=d.height-h;b>r.height+r.depth+l&&(l=(l+b-r.height-r.depth)/2);var y=d.height-r.height-l-h;r.style.paddingLeft=je(p);var x=ne.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r,wrapperClasses:["svg-align"]},{type:"kern",size:-(r.height+y)},{type:"elem",elem:d},{type:"kern",size:h}]},e);if(t.index){var _=e.havingStyle(Ge.SCRIPTSCRIPT),k=gt(t.index,_,e),S=.6*(x.height-x.depth),A=ne.makeVList({positionType:"shift",positionData:-S,children:[{type:"elem",elem:k}]},e),C=ne.makeSpan(["root"],[A]);return ne.makeSpan(["mord","sqrt"],[C,x],e)}else return ne.makeSpan(["mord","sqrt"],[x],e)},mathmlBuilder(t,e){var{body:r,index:n}=t;return n?new Ee.MathNode("mroot",[Ft(r,e),Ft(n,e)]):new Ee.MathNode("msqrt",[Ft(r,e)])}});var O6={display:Ge.DISPLAY,text:Ge.TEXT,script:Ge.SCRIPT,scriptscript:Ge.SCRIPTSCRIPT};Fe({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t,e){var{breakOnTokenText:r,funcName:n,parser:a}=t,i=a.parseExpression(!0,r),l=n.slice(1,n.length-5);return{type:"styling",mode:a.mode,style:l,body:i}},htmlBuilder(t,e){var r=O6[t.style],n=e.havingStyle(r).withFont("");return H9(t.body,n,e)},mathmlBuilder(t,e){var r=O6[t.style],n=e.havingStyle(r),a=kn(t.body,n),i=new Ee.MathNode("mstyle",a),l={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},u=l[t.style];return i.setAttribute("scriptlevel",u[0]),i.setAttribute("displaystyle",u[1]),i}});var cH=function(e,r){var n=e.base;if(n)if(n.type==="op"){var a=n.limits&&(r.style.size===Ge.DISPLAY.size||n.alwaysHandleSupSub);return a?Ll:null}else if(n.type==="operatorname"){var i=n.alwaysHandleSupSub&&(r.style.size===Ge.DISPLAY.size||n.limits);return i?q9:null}else{if(n.type==="accent")return Ue.isCharacterBox(n.base)?hg:null;if(n.type==="horizBrace"){var l=!e.sub;return l===n.isOver?B9:null}else return null}else return null};Eo({type:"supsub",htmlBuilder(t,e){var r=cH(t,e);if(r)return r(t,e);var{base:n,sup:a,sub:i}=t,l=gt(n,e),u,d,h=e.fontMetrics(),p=0,b=0,y=n&&Ue.isCharacterBox(n);if(a){var x=e.havingStyle(e.style.sup());u=gt(a,x,e),y||(p=l.height-x.fontMetrics().supDrop*x.sizeMultiplier/e.sizeMultiplier)}if(i){var _=e.havingStyle(e.style.sub());d=gt(i,_,e),y||(b=l.depth+_.fontMetrics().subDrop*_.sizeMultiplier/e.sizeMultiplier)}var k;e.style===Ge.DISPLAY?k=h.sup1:e.style.cramped?k=h.sup3:k=h.sup2;var S=e.sizeMultiplier,A=je(.5/h.ptPerEm/S),C=null;if(d){var N=t.base&&t.base.type==="op"&&t.base.name&&(t.base.name==="\\oiint"||t.base.name==="\\oiiint");(l instanceof ia||N)&&(C=je(-l.italic))}var D;if(u&&d){p=Math.max(p,k,u.depth+.25*h.xHeight),b=Math.max(b,h.sub2);var j=h.defaultRuleThickness,O=4*j;if(p-u.depth-(d.height-b)<O){b=O-(p-u.depth)+d.height;var F=.8*h.xHeight-(p-u.depth);F>0&&(p+=F,b-=F)}var R=[{type:"elem",elem:d,shift:b,marginRight:A,marginLeft:C},{type:"elem",elem:u,shift:-p,marginRight:A}];D=ne.makeVList({positionType:"individualShift",children:R},e)}else if(d){b=Math.max(b,h.sub1,d.height-.8*h.xHeight);var B=[{type:"elem",elem:d,marginLeft:C,marginRight:A}];D=ne.makeVList({positionType:"shift",positionData:b,children:B},e)}else if(u)p=Math.max(p,k,u.depth+.25*h.xHeight),D=ne.makeVList({positionType:"shift",positionData:-p,children:[{type:"elem",elem:u,marginRight:A}]},e);else throw new Error("supsub must have either sup or sub.");var V=Kp(l,"right")||"mord";return ne.makeSpan([V],[l,ne.makeSpan(["msupsub"],[D])],e)},mathmlBuilder(t,e){var r=!1,n,a;t.base&&t.base.type==="horizBrace"&&(a=!!t.sup,a===t.base.isOver&&(r=!0,n=t.base.isOver)),t.base&&(t.base.type==="op"||t.base.type==="operatorname")&&(t.base.parentIsSupSub=!0);var i=[Ft(t.base,e)];t.sub&&i.push(Ft(t.sub,e)),t.sup&&i.push(Ft(t.sup,e));var l;if(r)l=n?"mover":"munder";else if(t.sub)if(t.sup){var h=t.base;h&&h.type==="op"&&h.limits&&e.style===Ge.DISPLAY||h&&h.type==="operatorname"&&h.alwaysHandleSupSub&&(e.style===Ge.DISPLAY||h.limits)?l="munderover":l="msubsup"}else{var d=t.base;d&&d.type==="op"&&d.limits&&(e.style===Ge.DISPLAY||d.alwaysHandleSupSub)||d&&d.type==="operatorname"&&d.alwaysHandleSupSub&&(d.limits||e.style===Ge.DISPLAY)?l="munder":l="msub"}else{var u=t.base;u&&u.type==="op"&&u.limits&&(e.style===Ge.DISPLAY||u.alwaysHandleSupSub)||u&&u.type==="operatorname"&&u.alwaysHandleSupSub&&(u.limits||e.style===Ge.DISPLAY)?l="mover":l="msup"}return new Ee.MathNode(l,i)}});Eo({type:"atom",htmlBuilder(t,e){return ne.mathsym(t.text,t.mode,e,["m"+t.family])},mathmlBuilder(t,e){var r=new Ee.MathNode("mo",[oa(t.text,t.mode)]);if(t.family==="bin"){var n=cg(t,e);n==="bold-italic"&&r.setAttribute("mathvariant",n)}else t.family==="punct"?r.setAttribute("separator","true"):(t.family==="open"||t.family==="close")&&r.setAttribute("stretchy","false");return r}});var U9={mi:"italic",mn:"normal",mtext:"normal"};Eo({type:"mathord",htmlBuilder(t,e){return ne.makeOrd(t,e,"mathord")},mathmlBuilder(t,e){var r=new Ee.MathNode("mi",[oa(t.text,t.mode,e)]),n=cg(t,e)||"italic";return n!==U9[r.type]&&r.setAttribute("mathvariant",n),r}});Eo({type:"textord",htmlBuilder(t,e){return ne.makeOrd(t,e,"textord")},mathmlBuilder(t,e){var r=oa(t.text,t.mode,e),n=cg(t,e)||"normal",a;return t.mode==="text"?a=new Ee.MathNode("mtext",[r]):/[0-9]/.test(t.text)?a=new Ee.MathNode("mn",[r]):t.text==="\\prime"?a=new Ee.MathNode("mo",[r]):a=new Ee.MathNode("mi",[r]),n!==U9[a.type]&&a.setAttribute("mathvariant",n),a}});var op={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},lp={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};Eo({type:"spacing",htmlBuilder(t,e){if(lp.hasOwnProperty(t.text)){var r=lp[t.text].className||"";if(t.mode==="text"){var n=ne.makeOrd(t,e,"textord");return n.classes.push(r),n}else return ne.makeSpan(["mspace",r],[ne.mathsym(t.text,t.mode,e)],e)}else{if(op.hasOwnProperty(t.text))return ne.makeSpan(["mspace",op[t.text]],[],e);throw new Te('Unknown type of space "'+t.text+'"')}},mathmlBuilder(t,e){var r;if(lp.hasOwnProperty(t.text))r=new Ee.MathNode("mtext",[new Ee.TextNode("")]);else{if(op.hasOwnProperty(t.text))return new Ee.MathNode("mspace");throw new Te('Unknown type of space "'+t.text+'"')}return r}});var R6=()=>{var t=new Ee.MathNode("mtd",[]);return t.setAttribute("width","50%"),t};Eo({type:"tag",mathmlBuilder(t,e){var r=new Ee.MathNode("mtable",[new Ee.MathNode("mtr",[R6(),new Ee.MathNode("mtd",[ji(t.body,e)]),R6(),new Ee.MathNode("mtd",[ji(t.tag,e)])])]);return r.setAttribute("width","100%"),r}});var F6={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},L6={"\\textbf":"textbf","\\textmd":"textmd"},dH={"\\textit":"textit","\\textup":"textup"},P6=(t,e)=>{var r=t.font;if(r){if(F6[r])return e.withTextFontFamily(F6[r]);if(L6[r])return e.withTextFontWeight(L6[r]);if(r==="\\emph")return e.fontShape==="textit"?e.withTextFontShape("textup"):e.withTextFontShape("textit")}else return e;return e.withTextFontShape(dH[r])};Fe({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(t,e){var{parser:r,funcName:n}=t,a=e[0];return{type:"text",mode:r.mode,body:br(a),font:n}},htmlBuilder(t,e){var r=P6(t,e),n=Nr(t.body,r,!0);return ne.makeSpan(["mord","text"],n,r)},mathmlBuilder(t,e){var r=P6(t,e);return ji(t.body,r)}});Fe({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(t,e){var{parser:r}=t;return{type:"underline",mode:r.mode,body:e[0]}},htmlBuilder(t,e){var r=gt(t.body,e),n=ne.makeLineSpan("underline-line",e),a=e.fontMetrics().defaultRuleThickness,i=ne.makeVList({positionType:"top",positionData:r.height,children:[{type:"kern",size:a},{type:"elem",elem:n},{type:"kern",size:3*a},{type:"elem",elem:r}]},e);return ne.makeSpan(["mord","underline"],[i],e)},mathmlBuilder(t,e){var r=new Ee.MathNode("mo",[new Ee.TextNode("")]);r.setAttribute("stretchy","true");var n=new Ee.MathNode("munder",[Ft(t.body,e),r]);return n.setAttribute("accentunder","true"),n}});Fe({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(t,e){var{parser:r}=t;return{type:"vcenter",mode:r.mode,body:e[0]}},htmlBuilder(t,e){var r=gt(t.body,e),n=e.fontMetrics().axisHeight,a=.5*(r.height-n-(r.depth+n));return ne.makeVList({positionType:"shift",positionData:a,children:[{type:"elem",elem:r}]},e)},mathmlBuilder(t,e){return new Ee.MathNode("mpadded",[Ft(t.body,e)],["vcenter"])}});Fe({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(t,e,r){throw new Te("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(t,e){for(var r=B6(t),n=[],a=e.havingStyle(e.style.text()),i=0;i<r.length;i++){var l=r[i];l==="~"&&(l="\\textasciitilde"),n.push(ne.makeSymbol(l,"Typewriter-Regular",t.mode,a,["mord","texttt"]))}return ne.makeSpan(["mord","text"].concat(a.sizingClasses(e)),ne.tryCombineChars(n),a)},mathmlBuilder(t,e){var r=new Ee.TextNode(B6(t)),n=new Ee.MathNode("mtext",[r]);return n.setAttribute("mathvariant","monospace"),n}});var B6=t=>t.body.replace(/ /g,t.star?"":""),vi=f9,V9=`[ \r
	]`,hH="\\\\[a-zA-Z@]+",fH="\\\\[^\uD800-\uDFFF]",mH="("+hH+")"+V9+"*",pH=`\\\\(
|[ \r	]+
?)[ \r	]*`,Wp="[-]",gH=new RegExp(Wp+"+$"),bH="("+V9+"+)|"+(pH+"|")+"([!-\\[\\]---]"+(Wp+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(Wp+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+mH)+("|"+fH+")");class I6{constructor(e,r){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=e,this.settings=r,this.tokenRegex=new RegExp(bH,"g"),this.catcodes={"%":14,"~":13}}setCatcode(e,r){this.catcodes[e]=r}lex(){var e=this.input,r=this.tokenRegex.lastIndex;if(r===e.length)return new na("EOF",new Ln(this,r,r));var n=this.tokenRegex.exec(e);if(n===null||n.index!==r)throw new Te("Unexpected character: '"+e[r]+"'",new na(e[r],new Ln(this,r,r+1)));var a=n[6]||n[3]||(n[2]?"\\ ":" ");if(this.catcodes[a]===14){var i=e.indexOf(`
`,this.tokenRegex.lastIndex);return i===-1?(this.tokenRegex.lastIndex=e.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=i+1,this.lex()}return new na(a,new Ln(this,r,this.tokenRegex.lastIndex))}}class yH{constructor(e,r){e===void 0&&(e={}),r===void 0&&(r={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=r,this.builtins=e,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new Te("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var e=this.undefStack.pop();for(var r in e)e.hasOwnProperty(r)&&(e[r]==null?delete this.current[r]:this.current[r]=e[r])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(e){return this.current.hasOwnProperty(e)||this.builtins.hasOwnProperty(e)}get(e){return this.current.hasOwnProperty(e)?this.current[e]:this.builtins[e]}set(e,r,n){if(n===void 0&&(n=!1),n){for(var a=0;a<this.undefStack.length;a++)delete this.undefStack[a][e];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][e]=r)}else{var i=this.undefStack[this.undefStack.length-1];i&&!i.hasOwnProperty(e)&&(i[e]=this.current[e])}r==null?delete this.current[e]:this.current[e]=r}}var xH=O9;P("\\noexpand",function(t){var e=t.popToken();return t.isExpandable(e.text)&&(e.noexpand=!0,e.treatAsRelax=!0),{tokens:[e],numArgs:0}});P("\\expandafter",function(t){var e=t.popToken();return t.expandOnce(!0),{tokens:[e],numArgs:0}});P("\\@firstoftwo",function(t){var e=t.consumeArgs(2);return{tokens:e[0],numArgs:0}});P("\\@secondoftwo",function(t){var e=t.consumeArgs(2);return{tokens:e[1],numArgs:0}});P("\\@ifnextchar",function(t){var e=t.consumeArgs(3);t.consumeSpaces();var r=t.future();return e[0].length===1&&e[0][0].text===r.text?{tokens:e[1],numArgs:0}:{tokens:e[2],numArgs:0}});P("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");P("\\TextOrMath",function(t){var e=t.consumeArgs(2);return t.mode==="text"?{tokens:e[0],numArgs:0}:{tokens:e[1],numArgs:0}});var $6={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};P("\\char",function(t){var e=t.popToken(),r,n="";if(e.text==="'")r=8,e=t.popToken();else if(e.text==='"')r=16,e=t.popToken();else if(e.text==="`")if(e=t.popToken(),e.text[0]==="\\")n=e.text.charCodeAt(1);else{if(e.text==="EOF")throw new Te("\\char` missing argument");n=e.text.charCodeAt(0)}else r=10;if(r){if(n=$6[e.text],n==null||n>=r)throw new Te("Invalid base-"+r+" digit "+e.text);for(var a;(a=$6[t.future().text])!=null&&a<r;)n*=r,n+=a,t.popToken()}return"\\@char{"+n+"}"});var vg=(t,e,r,n)=>{var a=t.consumeArg().tokens;if(a.length!==1)throw new Te("\\newcommand's first argument must be a macro name");var i=a[0].text,l=t.isDefined(i);if(l&&!e)throw new Te("\\newcommand{"+i+"} attempting to redefine "+(i+"; use \\renewcommand"));if(!l&&!r)throw new Te("\\renewcommand{"+i+"} when command "+i+" does not yet exist; use \\newcommand");var u=0;if(a=t.consumeArg().tokens,a.length===1&&a[0].text==="["){for(var d="",h=t.expandNextToken();h.text!=="]"&&h.text!=="EOF";)d+=h.text,h=t.expandNextToken();if(!d.match(/^\s*[0-9]+\s*$/))throw new Te("Invalid number of arguments: "+d);u=parseInt(d),a=t.consumeArg().tokens}return l&&n||t.macros.set(i,{tokens:a,numArgs:u}),""};P("\\newcommand",t=>vg(t,!1,!0,!1));P("\\renewcommand",t=>vg(t,!0,!1,!1));P("\\providecommand",t=>vg(t,!0,!0,!0));P("\\message",t=>{var e=t.consumeArgs(1)[0];return console.log(e.reverse().map(r=>r.text).join("")),""});P("\\errmessage",t=>{var e=t.consumeArgs(1)[0];return console.error(e.reverse().map(r=>r.text).join("")),""});P("\\show",t=>{var e=t.popToken(),r=e.text;return console.log(e,t.macros.get(r),vi[r],$t.math[r],$t.text[r]),""});P("\\bgroup","{");P("\\egroup","}");P("~","\\nobreakspace");P("\\lq","`");P("\\rq","'");P("\\aa","\\r a");P("\\AA","\\r A");P("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`}");P("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}");P("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`}");P("","\\mathscr{B}");P("","\\mathscr{E}");P("","\\mathscr{F}");P("","\\mathscr{H}");P("","\\mathscr{I}");P("","\\mathscr{L}");P("","\\mathscr{M}");P("","\\mathscr{R}");P("","\\mathfrak{C}");P("","\\mathfrak{H}");P("","\\mathfrak{Z}");P("\\Bbbk","\\Bbb{k}");P("","\\cdotp");P("\\llap","\\mathllap{\\textrm{#1}}");P("\\rlap","\\mathrlap{\\textrm{#1}}");P("\\clap","\\mathclap{\\textrm{#1}}");P("\\mathstrut","\\vphantom{(}");P("\\underbar","\\underline{\\text{#1}}");P("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}');P("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`}}");P("\\ne","\\neq");P("","\\neq");P("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`}}");P("","\\notin");P("","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`}}");P("","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`}}");P("","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`}}");P("","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`}}");P("","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`}}");P("","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`}}");P("","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`}}");P("","\\perp");P("","\\mathclose{!\\mkern-0.8mu!}");P("","\\notni");P("","\\ulcorner");P("","\\urcorner");P("","\\llcorner");P("","\\lrcorner");P("","\\copyright");P("","\\textregistered");P("","\\textregistered");P("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}');P("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}');P("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}');P("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}');P("\\vdots","{\\varvdots\\rule{0pt}{15pt}}");P("","\\vdots");P("\\varGamma","\\mathit{\\Gamma}");P("\\varDelta","\\mathit{\\Delta}");P("\\varTheta","\\mathit{\\Theta}");P("\\varLambda","\\mathit{\\Lambda}");P("\\varXi","\\mathit{\\Xi}");P("\\varPi","\\mathit{\\Pi}");P("\\varSigma","\\mathit{\\Sigma}");P("\\varUpsilon","\\mathit{\\Upsilon}");P("\\varPhi","\\mathit{\\Phi}");P("\\varPsi","\\mathit{\\Psi}");P("\\varOmega","\\mathit{\\Omega}");P("\\substack","\\begin{subarray}{c}#1\\end{subarray}");P("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax");P("\\boxed","\\fbox{$\\displaystyle{#1}$}");P("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");P("\\implies","\\DOTSB\\;\\Longrightarrow\\;");P("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");P("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}");P("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");var q6={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};P("\\dots",function(t){var e="\\dotso",r=t.expandAfterFuture().text;return r in q6?e=q6[r]:(r.slice(0,4)==="\\not"||r in $t.math&&Ue.contains(["bin","rel"],$t.math[r].group))&&(e="\\dotsb"),e});var _g={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};P("\\dotso",function(t){var e=t.future().text;return e in _g?"\\ldots\\,":"\\ldots"});P("\\dotsc",function(t){var e=t.future().text;return e in _g&&e!==","?"\\ldots\\,":"\\ldots"});P("\\cdots",function(t){var e=t.future().text;return e in _g?"\\@cdots\\,":"\\@cdots"});P("\\dotsb","\\cdots");P("\\dotsm","\\cdots");P("\\dotsi","\\!\\cdots");P("\\dotsx","\\ldots\\,");P("\\DOTSI","\\relax");P("\\DOTSB","\\relax");P("\\DOTSX","\\relax");P("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");P("\\,","\\tmspace+{3mu}{.1667em}");P("\\thinspace","\\,");P("\\>","\\mskip{4mu}");P("\\:","\\tmspace+{4mu}{.2222em}");P("\\medspace","\\:");P("\\;","\\tmspace+{5mu}{.2777em}");P("\\thickspace","\\;");P("\\!","\\tmspace-{3mu}{.1667em}");P("\\negthinspace","\\!");P("\\negmedspace","\\tmspace-{4mu}{.2222em}");P("\\negthickspace","\\tmspace-{5mu}{.277em}");P("\\enspace","\\kern.5em ");P("\\enskip","\\hskip.5em\\relax");P("\\quad","\\hskip1em\\relax");P("\\qquad","\\hskip2em\\relax");P("\\tag","\\@ifstar\\tag@literal\\tag@paren");P("\\tag@paren","\\tag@literal{({#1})}");P("\\tag@literal",t=>{if(t.macros.get("\\df@tag"))throw new Te("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"});P("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}");P("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");P("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");P("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");P("\\newline","\\\\\\relax");P("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var G9=je(Ha["Main-Regular"][84][1]-.7*Ha["Main-Regular"][65][1]);P("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+G9+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}");P("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+G9+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}");P("\\hspace","\\@ifstar\\@hspacer\\@hspace");P("\\@hspace","\\hskip #1\\relax");P("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");P("\\ordinarycolon",":");P("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}");P("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}');P("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}');P("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}');P("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}');P("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}');P("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}');P("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}');P("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}');P("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}');P("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}');P("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}');P("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}');P("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}');P("","\\dblcolon");P("","\\eqcolon");P("","\\coloneqq");P("","\\eqqcolon");P("","\\Coloneqq");P("\\ratio","\\vcentcolon");P("\\coloncolon","\\dblcolon");P("\\colonequals","\\coloneqq");P("\\coloncolonequals","\\Coloneqq");P("\\equalscolon","\\eqqcolon");P("\\equalscoloncolon","\\Eqqcolon");P("\\colonminus","\\coloneq");P("\\coloncolonminus","\\Coloneq");P("\\minuscolon","\\eqcolon");P("\\minuscoloncolon","\\Eqcolon");P("\\coloncolonapprox","\\Colonapprox");P("\\coloncolonsim","\\Colonsim");P("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}");P("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}");P("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}");P("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}");P("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`}}");P("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");P("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");P("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");P("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");P("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}");P("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}");P("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}");P("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}");P("\\gvertneqq","\\html@mathml{\\@gvertneqq}{}");P("\\lvertneqq","\\html@mathml{\\@lvertneqq}{}");P("\\ngeqq","\\html@mathml{\\@ngeqq}{}");P("\\ngeqslant","\\html@mathml{\\@ngeqslant}{}");P("\\nleqq","\\html@mathml{\\@nleqq}{}");P("\\nleqslant","\\html@mathml{\\@nleqslant}{}");P("\\nshortmid","\\html@mathml{\\@nshortmid}{}");P("\\nshortparallel","\\html@mathml{\\@nshortparallel}{}");P("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{}");P("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{}");P("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{}");P("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{}");P("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{}");P("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{}");P("\\imath","\\html@mathml{\\@imath}{}");P("\\jmath","\\html@mathml{\\@jmath}{}");P("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`}}");P("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`}}");P("","\\llbracket");P("","\\rrbracket");P("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`}}");P("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`}}");P("","\\lBrace");P("","\\rBrace");P("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`}}");P("","\\minuso");P("\\darr","\\downarrow");P("\\dArr","\\Downarrow");P("\\Darr","\\Downarrow");P("\\lang","\\langle");P("\\rang","\\rangle");P("\\uarr","\\uparrow");P("\\uArr","\\Uparrow");P("\\Uarr","\\Uparrow");P("\\N","\\mathbb{N}");P("\\R","\\mathbb{R}");P("\\Z","\\mathbb{Z}");P("\\alef","\\aleph");P("\\alefsym","\\aleph");P("\\Alpha","\\mathrm{A}");P("\\Beta","\\mathrm{B}");P("\\bull","\\bullet");P("\\Chi","\\mathrm{X}");P("\\clubs","\\clubsuit");P("\\cnums","\\mathbb{C}");P("\\Complex","\\mathbb{C}");P("\\Dagger","\\ddagger");P("\\diamonds","\\diamondsuit");P("\\empty","\\emptyset");P("\\Epsilon","\\mathrm{E}");P("\\Eta","\\mathrm{H}");P("\\exist","\\exists");P("\\harr","\\leftrightarrow");P("\\hArr","\\Leftrightarrow");P("\\Harr","\\Leftrightarrow");P("\\hearts","\\heartsuit");P("\\image","\\Im");P("\\infin","\\infty");P("\\Iota","\\mathrm{I}");P("\\isin","\\in");P("\\Kappa","\\mathrm{K}");P("\\larr","\\leftarrow");P("\\lArr","\\Leftarrow");P("\\Larr","\\Leftarrow");P("\\lrarr","\\leftrightarrow");P("\\lrArr","\\Leftrightarrow");P("\\Lrarr","\\Leftrightarrow");P("\\Mu","\\mathrm{M}");P("\\natnums","\\mathbb{N}");P("\\Nu","\\mathrm{N}");P("\\Omicron","\\mathrm{O}");P("\\plusmn","\\pm");P("\\rarr","\\rightarrow");P("\\rArr","\\Rightarrow");P("\\Rarr","\\Rightarrow");P("\\real","\\Re");P("\\reals","\\mathbb{R}");P("\\Reals","\\mathbb{R}");P("\\Rho","\\mathrm{P}");P("\\sdot","\\cdot");P("\\sect","\\S");P("\\spades","\\spadesuit");P("\\sub","\\subset");P("\\sube","\\subseteq");P("\\supe","\\supseteq");P("\\Tau","\\mathrm{T}");P("\\thetasym","\\vartheta");P("\\weierp","\\wp");P("\\Zeta","\\mathrm{Z}");P("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");P("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");P("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits");P("\\bra","\\mathinner{\\langle{#1}|}");P("\\ket","\\mathinner{|{#1}\\rangle}");P("\\braket","\\mathinner{\\langle{#1}\\rangle}");P("\\Bra","\\left\\langle#1\\right|");P("\\Ket","\\left|#1\\right\\rangle");var Z9=t=>e=>{var r=e.consumeArg().tokens,n=e.consumeArg().tokens,a=e.consumeArg().tokens,i=e.consumeArg().tokens,l=e.macros.get("|"),u=e.macros.get("\\|");e.macros.beginGroup();var d=b=>y=>{t&&(y.macros.set("|",l),a.length&&y.macros.set("\\|",u));var x=b;if(!b&&a.length){var _=y.future();_.text==="|"&&(y.popToken(),x=!0)}return{tokens:x?a:n,numArgs:0}};e.macros.set("|",d(!1)),a.length&&e.macros.set("\\|",d(!0));var h=e.consumeArg().tokens,p=e.expandTokens([...i,...h,...r]);return e.macros.endGroup(),{tokens:p.reverse(),numArgs:0}};P("\\bra@ket",Z9(!1));P("\\bra@set",Z9(!0));P("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}");P("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}");P("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}");P("\\angln","{\\angl n}");P("\\blue","\\textcolor{##6495ed}{#1}");P("\\orange","\\textcolor{##ffa500}{#1}");P("\\pink","\\textcolor{##ff00af}{#1}");P("\\red","\\textcolor{##df0030}{#1}");P("\\green","\\textcolor{##28ae7b}{#1}");P("\\gray","\\textcolor{gray}{#1}");P("\\purple","\\textcolor{##9d38bd}{#1}");P("\\blueA","\\textcolor{##ccfaff}{#1}");P("\\blueB","\\textcolor{##80f6ff}{#1}");P("\\blueC","\\textcolor{##63d9ea}{#1}");P("\\blueD","\\textcolor{##11accd}{#1}");P("\\blueE","\\textcolor{##0c7f99}{#1}");P("\\tealA","\\textcolor{##94fff5}{#1}");P("\\tealB","\\textcolor{##26edd5}{#1}");P("\\tealC","\\textcolor{##01d1c1}{#1}");P("\\tealD","\\textcolor{##01a995}{#1}");P("\\tealE","\\textcolor{##208170}{#1}");P("\\greenA","\\textcolor{##b6ffb0}{#1}");P("\\greenB","\\textcolor{##8af281}{#1}");P("\\greenC","\\textcolor{##74cf70}{#1}");P("\\greenD","\\textcolor{##1fab54}{#1}");P("\\greenE","\\textcolor{##0d923f}{#1}");P("\\goldA","\\textcolor{##ffd0a9}{#1}");P("\\goldB","\\textcolor{##ffbb71}{#1}");P("\\goldC","\\textcolor{##ff9c39}{#1}");P("\\goldD","\\textcolor{##e07d10}{#1}");P("\\goldE","\\textcolor{##a75a05}{#1}");P("\\redA","\\textcolor{##fca9a9}{#1}");P("\\redB","\\textcolor{##ff8482}{#1}");P("\\redC","\\textcolor{##f9685d}{#1}");P("\\redD","\\textcolor{##e84d39}{#1}");P("\\redE","\\textcolor{##bc2612}{#1}");P("\\maroonA","\\textcolor{##ffbde0}{#1}");P("\\maroonB","\\textcolor{##ff92c6}{#1}");P("\\maroonC","\\textcolor{##ed5fa6}{#1}");P("\\maroonD","\\textcolor{##ca337c}{#1}");P("\\maroonE","\\textcolor{##9e034e}{#1}");P("\\purpleA","\\textcolor{##ddd7ff}{#1}");P("\\purpleB","\\textcolor{##c6b9fc}{#1}");P("\\purpleC","\\textcolor{##aa87ff}{#1}");P("\\purpleD","\\textcolor{##7854ab}{#1}");P("\\purpleE","\\textcolor{##543b78}{#1}");P("\\mintA","\\textcolor{##f5f9e8}{#1}");P("\\mintB","\\textcolor{##edf2df}{#1}");P("\\mintC","\\textcolor{##e0e5cc}{#1}");P("\\grayA","\\textcolor{##f6f7f7}{#1}");P("\\grayB","\\textcolor{##f0f1f2}{#1}");P("\\grayC","\\textcolor{##e3e5e6}{#1}");P("\\grayD","\\textcolor{##d6d8da}{#1}");P("\\grayE","\\textcolor{##babec2}{#1}");P("\\grayF","\\textcolor{##888d93}{#1}");P("\\grayG","\\textcolor{##626569}{#1}");P("\\grayH","\\textcolor{##3b3e40}{#1}");P("\\grayI","\\textcolor{##21242c}{#1}");P("\\kaBlue","\\textcolor{##314453}{#1}");P("\\kaGreen","\\textcolor{##71B307}{#1}");var K9={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class vH{constructor(e,r,n){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=r,this.expansionCount=0,this.feed(e),this.macros=new yH(xH,r.macros),this.mode=n,this.stack=[]}feed(e){this.lexer=new I6(e,this.settings)}switchMode(e){this.mode=e}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(e){this.stack.push(e)}pushTokens(e){this.stack.push(...e)}scanArgument(e){var r,n,a;if(e){if(this.consumeSpaces(),this.future().text!=="[")return null;r=this.popToken(),{tokens:a,end:n}=this.consumeArg(["]"])}else({tokens:a,start:r,end:n}=this.consumeArg());return this.pushToken(new na("EOF",n.loc)),this.pushTokens(a),r.range(n,"")}consumeSpaces(){for(;;){var e=this.future();if(e.text===" ")this.stack.pop();else break}}consumeArg(e){var r=[],n=e&&e.length>0;n||this.consumeSpaces();var a=this.future(),i,l=0,u=0;do{if(i=this.popToken(),r.push(i),i.text==="{")++l;else if(i.text==="}"){if(--l,l===-1)throw new Te("Extra }",i)}else if(i.text==="EOF")throw new Te("Unexpected end of input in a macro argument, expected '"+(e&&n?e[u]:"}")+"'",i);if(e&&n)if((l===0||l===1&&e[u]==="{")&&i.text===e[u]){if(++u,u===e.length){r.splice(-u,u);break}}else u=0}while(l!==0||n);return a.text==="{"&&r[r.length-1].text==="}"&&(r.pop(),r.shift()),r.reverse(),{tokens:r,start:a,end:i}}consumeArgs(e,r){if(r){if(r.length!==e+1)throw new Te("The length of delimiters doesn't match the number of args!");for(var n=r[0],a=0;a<n.length;a++){var i=this.popToken();if(n[a]!==i.text)throw new Te("Use of the macro doesn't match its definition",i)}}for(var l=[],u=0;u<e;u++)l.push(this.consumeArg(r&&r[u+1]).tokens);return l}countExpansion(e){if(this.expansionCount+=e,this.expansionCount>this.settings.maxExpand)throw new Te("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(e){var r=this.popToken(),n=r.text,a=r.noexpand?null:this._getExpansion(n);if(a==null||e&&a.unexpandable){if(e&&a==null&&n[0]==="\\"&&!this.isDefined(n))throw new Te("Undefined control sequence: "+n);return this.pushToken(r),!1}this.countExpansion(1);var i=a.tokens,l=this.consumeArgs(a.numArgs,a.delimiters);if(a.numArgs){i=i.slice();for(var u=i.length-1;u>=0;--u){var d=i[u];if(d.text==="#"){if(u===0)throw new Te("Incomplete placeholder at end of macro body",d);if(d=i[--u],d.text==="#")i.splice(u+1,1);else if(/^[1-9]$/.test(d.text))i.splice(u,2,...l[+d.text-1]);else throw new Te("Not a valid argument number",d)}}}return this.pushTokens(i),i.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var e=this.stack.pop();return e.treatAsRelax&&(e.text="\\relax"),e}throw new Error}expandMacro(e){return this.macros.has(e)?this.expandTokens([new na(e)]):void 0}expandTokens(e){var r=[],n=this.stack.length;for(this.pushTokens(e);this.stack.length>n;)if(this.expandOnce(!0)===!1){var a=this.stack.pop();a.treatAsRelax&&(a.noexpand=!1,a.treatAsRelax=!1),r.push(a)}return this.countExpansion(r.length),r}expandMacroAsText(e){var r=this.expandMacro(e);return r&&r.map(n=>n.text).join("")}_getExpansion(e){var r=this.macros.get(e);if(r==null)return r;if(e.length===1){var n=this.lexer.catcodes[e];if(n!=null&&n!==13)return}var a=typeof r=="function"?r(this):r;if(typeof a=="string"){var i=0;if(a.indexOf("#")!==-1)for(var l=a.replace(/##/g,"");l.indexOf("#"+(i+1))!==-1;)++i;for(var u=new I6(a,this.settings),d=[],h=u.lex();h.text!=="EOF";)d.push(h),h=u.lex();d.reverse();var p={tokens:d,numArgs:i};return p}return a}isDefined(e){return this.macros.has(e)||vi.hasOwnProperty(e)||$t.math.hasOwnProperty(e)||$t.text.hasOwnProperty(e)||K9.hasOwnProperty(e)}isExpandable(e){var r=this.macros.get(e);return r!=null?typeof r=="string"||typeof r=="function"||!r.unexpandable:vi.hasOwnProperty(e)&&!vi[e].primitive}}var H6=/^[]/,Hd=Object.freeze({"":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"a","":"e","":"h","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"v","":"x","":"","":"","":"","":"","":"","":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"A","":"B","":"D","":"E","":"G","":"H","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"T","":"U","":"V","":"W","":"a","":"b","":"c","":"d","":"e","":"f","":"g",:"h","":"i",:"j","":"k",:"l","":"m",:"n","":"o","":"p",:"r",:"s","":"t","":"u","":"v",:"w",:"x",:"y","":"z","":"","":"","":"","":"","":"","":""}),up={"":{text:"\\'",math:"\\acute"},"":{text:"\\`",math:"\\grave"},"":{text:'\\"',math:"\\ddot"},"":{text:"\\~",math:"\\tilde"},"":{text:"\\=",math:"\\bar"},"":{text:"\\u",math:"\\breve"},"":{text:"\\v",math:"\\check"},"":{text:"\\^",math:"\\hat"},"":{text:"\\.",math:"\\dot"},"":{text:"\\r",math:"\\mathring"},"":{text:"\\H"},"":{text:"\\c"}},U6={:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"b",:"c",:"c",:"c",:"c",:"c",:"c",:"d",:"d",:"d",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"f",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"h",:"h",:"h",:"h",:"h",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"j",:"j",:"k",:"k",:"k",:"l",:"l",:"l",:"m",:"m",:"n",:"n",:"n",:"n",:"n",:"n",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"p",:"p",:"r",:"r",:"r",:"r",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"t",:"t",:"t",:"t",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"v",:"w",:"w",:"w",:"w",:"w",:"w",:"x",:"x",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"z",:"z",:"z",:"z",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"B",:"C",:"C",:"C",:"C",:"C",:"C",:"D",:"D",:"D",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"F",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"H",:"H",:"H",:"H",:"H",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"J",:"K",:"K",:"K",:"L",:"L",:"L",:"M",:"M",:"N",:"N",:"N",:"N",:"N",:"N",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"P",:"P",:"R",:"R",:"R",:"R",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"T",:"T",:"T",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"V",:"W",:"W",:"W",:"W",:"W",:"X",:"X",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Z",:"Z",:"Z",:"Z",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};class Gh{constructor(e,r){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new vH(e,r,this.mode),this.settings=r,this.leftrightDepth=0}expect(e,r){if(r===void 0&&(r=!0),this.fetch().text!==e)throw new Te("Expected '"+e+"', got '"+this.fetch().text+"'",this.fetch());r&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(e){this.mode=e,this.gullet.switchMode(e)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var e=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),e}finally{this.gullet.endGroups()}}subparse(e){var r=this.nextToken;this.consume(),this.gullet.pushToken(new na("}")),this.gullet.pushTokens(e);var n=this.parseExpression(!1);return this.expect("}"),this.nextToken=r,n}parseExpression(e,r){for(var n=[];;){this.mode==="math"&&this.consumeSpaces();var a=this.fetch();if(Gh.endOfExpression.indexOf(a.text)!==-1||r&&a.text===r||e&&vi[a.text]&&vi[a.text].infix)break;var i=this.parseAtom(r);if(i){if(i.type==="internal")continue}else break;n.push(i)}return this.mode==="text"&&this.formLigatures(n),this.handleInfixNodes(n)}handleInfixNodes(e){for(var r=-1,n,a=0;a<e.length;a++)if(e[a].type==="infix"){if(r!==-1)throw new Te("only one infix operator per group",e[a].token);r=a,n=e[a].replaceWith}if(r!==-1&&n){var i,l,u=e.slice(0,r),d=e.slice(r+1);u.length===1&&u[0].type==="ordgroup"?i=u[0]:i={type:"ordgroup",mode:this.mode,body:u},d.length===1&&d[0].type==="ordgroup"?l=d[0]:l={type:"ordgroup",mode:this.mode,body:d};var h;return n==="\\\\abovefrac"?h=this.callFunction(n,[i,e[r],l],[]):h=this.callFunction(n,[i,l],[]),[h]}else return e}handleSupSubscript(e){var r=this.fetch(),n=r.text;this.consume(),this.consumeSpaces();var a;do{var i;a=this.parseGroup(e)}while(((i=a)==null?void 0:i.type)==="internal");if(!a)throw new Te("Expected group after '"+n+"'",r);return a}formatUnsupportedCmd(e){for(var r=[],n=0;n<e.length;n++)r.push({type:"textord",mode:"text",text:e[n]});var a={type:"text",mode:this.mode,body:r},i={type:"color",mode:this.mode,color:this.settings.errorColor,body:[a]};return i}parseAtom(e){var r=this.parseGroup("atom",e);if(r?.type==="internal"||this.mode==="text")return r;for(var n,a;;){this.consumeSpaces();var i=this.fetch();if(i.text==="\\limits"||i.text==="\\nolimits"){if(r&&r.type==="op"){var l=i.text==="\\limits";r.limits=l,r.alwaysHandleSupSub=!0}else if(r&&r.type==="operatorname")r.alwaysHandleSupSub&&(r.limits=i.text==="\\limits");else throw new Te("Limit controls must follow a math operator",i);this.consume()}else if(i.text==="^"){if(n)throw new Te("Double superscript",i);n=this.handleSupSubscript("superscript")}else if(i.text==="_"){if(a)throw new Te("Double subscript",i);a=this.handleSupSubscript("subscript")}else if(i.text==="'"){if(n)throw new Te("Double superscript",i);var u={type:"textord",mode:this.mode,text:"\\prime"},d=[u];for(this.consume();this.fetch().text==="'";)d.push(u),this.consume();this.fetch().text==="^"&&d.push(this.handleSupSubscript("superscript")),n={type:"ordgroup",mode:this.mode,body:d}}else if(Hd[i.text]){var h=H6.test(i.text),p=[];for(p.push(new na(Hd[i.text])),this.consume();;){var b=this.fetch().text;if(!Hd[b]||H6.test(b)!==h)break;p.unshift(new na(Hd[b])),this.consume()}var y=this.subparse(p);h?a={type:"ordgroup",mode:"math",body:y}:n={type:"ordgroup",mode:"math",body:y}}else break}return n||a?{type:"supsub",mode:this.mode,base:r,sup:n,sub:a}:r}parseFunction(e,r){var n=this.fetch(),a=n.text,i=vi[a];if(!i)return null;if(this.consume(),r&&r!=="atom"&&!i.allowedInArgument)throw new Te("Got function '"+a+"' with no arguments"+(r?" as "+r:""),n);if(this.mode==="text"&&!i.allowedInText)throw new Te("Can't use function '"+a+"' in text mode",n);if(this.mode==="math"&&i.allowedInMath===!1)throw new Te("Can't use function '"+a+"' in math mode",n);var{args:l,optArgs:u}=this.parseArguments(a,i);return this.callFunction(a,l,u,n,e)}callFunction(e,r,n,a,i){var l={funcName:e,parser:this,token:a,breakOnTokenText:i},u=vi[e];if(u&&u.handler)return u.handler(l,r,n);throw new Te("No function handler for "+e)}parseArguments(e,r){var n=r.numArgs+r.numOptionalArgs;if(n===0)return{args:[],optArgs:[]};for(var a=[],i=[],l=0;l<n;l++){var u=r.argTypes&&r.argTypes[l],d=l<r.numOptionalArgs;(r.primitive&&u==null||r.type==="sqrt"&&l===1&&i[0]==null)&&(u="primitive");var h=this.parseGroupOfType("argument to '"+e+"'",u,d);if(d)i.push(h);else if(h!=null)a.push(h);else throw new Te("Null argument, please report this as a bug")}return{args:a,optArgs:i}}parseGroupOfType(e,r,n){switch(r){case"color":return this.parseColorGroup(n);case"size":return this.parseSizeGroup(n);case"url":return this.parseUrlGroup(n);case"math":case"text":return this.parseArgumentGroup(n,r);case"hbox":{var a=this.parseArgumentGroup(n,"text");return a!=null?{type:"styling",mode:a.mode,body:[a],style:"text"}:null}case"raw":{var i=this.parseStringGroup("raw",n);return i!=null?{type:"raw",mode:"text",string:i.text}:null}case"primitive":{if(n)throw new Te("A primitive argument cannot be optional");var l=this.parseGroup(e);if(l==null)throw new Te("Expected group as "+e,this.fetch());return l}case"original":case null:case void 0:return this.parseArgumentGroup(n);default:throw new Te("Unknown group type as "+e,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(e,r){var n=this.gullet.scanArgument(r);if(n==null)return null;for(var a="",i;(i=this.fetch()).text!=="EOF";)a+=i.text,this.consume();return this.consume(),n.text=a,n}parseRegexGroup(e,r){for(var n=this.fetch(),a=n,i="",l;(l=this.fetch()).text!=="EOF"&&e.test(i+l.text);)a=l,i+=a.text,this.consume();if(i==="")throw new Te("Invalid "+r+": '"+n.text+"'",n);return n.range(a,i)}parseColorGroup(e){var r=this.parseStringGroup("color",e);if(r==null)return null;var n=/^(#[a-f0-9]{3}|#?[a-f0-9]{6}|[a-z]+)$/i.exec(r.text);if(!n)throw new Te("Invalid color: '"+r.text+"'",r);var a=n[0];return/^[0-9a-f]{6}$/i.test(a)&&(a="#"+a),{type:"color-token",mode:this.mode,color:a}}parseSizeGroup(e){var r,n=!1;if(this.gullet.consumeSpaces(),!e&&this.gullet.future().text!=="{"?r=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):r=this.parseStringGroup("size",e),!r)return null;!e&&r.text.length===0&&(r.text="0pt",n=!0);var a=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(r.text);if(!a)throw new Te("Invalid size: '"+r.text+"'",r);var i={number:+(a[1]+a[2]),unit:a[3]};if(!a9(i))throw new Te("Invalid unit: '"+i.unit+"'",r);return{type:"size",mode:this.mode,value:i,isBlank:n}}parseUrlGroup(e){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var r=this.parseStringGroup("url",e);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),r==null)return null;var n=r.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:n}}parseArgumentGroup(e,r){var n=this.gullet.scanArgument(e);if(n==null)return null;var a=this.mode;r&&this.switchMode(r),this.gullet.beginGroup();var i=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var l={type:"ordgroup",mode:this.mode,loc:n.loc,body:i};return r&&this.switchMode(a),l}parseGroup(e,r){var n=this.fetch(),a=n.text,i;if(a==="{"||a==="\\begingroup"){this.consume();var l=a==="{"?"}":"\\endgroup";this.gullet.beginGroup();var u=this.parseExpression(!1,l),d=this.fetch();this.expect(l),this.gullet.endGroup(),i={type:"ordgroup",mode:this.mode,loc:Ln.range(n,d),body:u,semisimple:a==="\\begingroup"||void 0}}else if(i=this.parseFunction(r,e)||this.parseSymbol(),i==null&&a[0]==="\\"&&!K9.hasOwnProperty(a)){if(this.settings.throwOnError)throw new Te("Undefined control sequence: "+a,n);i=this.formatUnsupportedCmd(a),this.consume()}return i}formLigatures(e){for(var r=e.length-1,n=0;n<r;++n){var a=e[n],i=a.text;i==="-"&&e[n+1].text==="-"&&(n+1<r&&e[n+2].text==="-"?(e.splice(n,3,{type:"textord",mode:"text",loc:Ln.range(a,e[n+2]),text:"---"}),r-=2):(e.splice(n,2,{type:"textord",mode:"text",loc:Ln.range(a,e[n+1]),text:"--"}),r-=1)),(i==="'"||i==="`")&&e[n+1].text===i&&(e.splice(n,2,{type:"textord",mode:"text",loc:Ln.range(a,e[n+1]),text:i+i}),r-=1)}}parseSymbol(){var e=this.fetch(),r=e.text;if(/^\\verb[^a-zA-Z]/.test(r)){this.consume();var n=r.slice(5),a=n.charAt(0)==="*";if(a&&(n=n.slice(1)),n.length<2||n.charAt(0)!==n.slice(-1))throw new Te(`\\verb assertion failed --
                    please report what input caused this bug`);return n=n.slice(1,-1),{type:"verb",mode:"text",body:n,star:a}}U6.hasOwnProperty(r[0])&&!$t[this.mode][r[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+r[0]+'" used in math mode',e),r=U6[r[0]]+r.slice(1));var i=gH.exec(r);i&&(r=r.substring(0,i.index),r==="i"?r="":r==="j"&&(r=""));var l;if($t[this.mode][r]){this.settings.strict&&this.mode==="math"&&Zp.indexOf(r)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+r[0]+'" used in math mode',e);var u=$t[this.mode][r].group,d=Ln.range(e),h;if(lq.hasOwnProperty(u)){var p=u;h={type:"atom",mode:this.mode,family:p,loc:d,text:r}}else h={type:u,mode:this.mode,loc:d,text:r};l=h}else if(r.charCodeAt(0)>=128)this.settings.strict&&(n9(r.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+r[0]+'" used in math mode',e):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+r[0]+'"'+(" ("+r.charCodeAt(0)+")"),e)),l={type:"textord",mode:"text",loc:Ln.range(e),text:r};else return null;if(this.consume(),i)for(var b=0;b<i[0].length;b++){var y=i[0][b];if(!up[y])throw new Te("Unknown accent ' "+y+"'",e);var x=up[y][this.mode]||up[y].text;if(!x)throw new Te("Accent "+y+" unsupported in "+this.mode+" mode",e);l={type:"accent",mode:this.mode,loc:Ln.range(e),label:x,isStretchy:!1,isShifty:!0,base:l}}return l}}Gh.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var wg=function(e,r){if(!(typeof e=="string"||e instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var n=new Gh(e,r);delete n.gullet.macros.current["\\df@tag"];var a=n.parse();if(delete n.gullet.macros.current["\\current@color"],delete n.gullet.macros.current["\\color"],n.gullet.macros.get("\\df@tag")){if(!r.displayMode)throw new Te("\\tag works only in display equations");a=[{type:"tag",mode:"text",body:a,tag:n.subparse([new na("\\df@tag")])}]}return a},Y9=function(e,r,n){r.textContent="";var a=kg(e,n).toNode();r.appendChild(a)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),Y9=function(){throw new Te("KaTeX doesn't work in quirks mode.")});var _H=function(e,r){var n=kg(e,r).toMarkup();return n},wH=function(e,r){var n=new ag(r);return wg(e,n)},X9=function(e,r,n){if(n.throwOnError||!(e instanceof Te))throw e;var a=ne.makeSpan(["katex-error"],[new ia(r)]);return a.setAttribute("title",e.toString()),a.setAttribute("style","color:"+n.errorColor),a},kg=function(e,r){var n=new ag(r);try{var a=wg(e,n);return jq(a,e,n)}catch(i){return X9(i,e,n)}},kH=function(e,r){var n=new ag(r);try{var a=wg(e,n);return Dq(a,e,n)}catch(i){return X9(i,e,n)}},SH="0.16.22",AH={Span:Zc,Anchor:og,SymbolNode:ia,SvgNode:Ds,PathNode:Mi,LineNode:Gp},Es={version:SH,render:Y9,renderToString:_H,ParseError:Te,SETTINGS_SCHEMA:Wd,__parse:wH,__renderToDomTree:kg,__renderToHTMLTree:kH,__setFontMetrics:eq,__defineSymbol:w,__defineFunction:Fe,__defineMacro:P,__domTree:AH};Es.__defineMacro("\\ce",function(t){return Q9(t.consumeArgs(1)[0],"ce")});Es.__defineMacro("\\pu",function(t){return Q9(t.consumeArgs(1)[0],"pu")});Es.__defineMacro("\\tripledash","{\\vphantom{-}\\raisebox{2.56mu}{$\\mkern2mu\\tiny\\text{-}\\mkern1mu\\text{-}\\mkern1mu\\text{-}\\mkern2mu$}}");var Q9=function(e,r){for(var n="",a=e.length&&e[e.length-1].loc.start,i=e.length-1;i>=0;i--)e[i].loc.start>a&&(n+=" ",a=e[i].loc.start),n+=e[i].text,a+=e[i].text.length;var l=Rt.go(_e.go(n,r));return l},_e={go:function(e,r){if(!e)return[];r===void 0&&(r="ce");var n="0",a={};a.parenthesisLevel=0,e=e.replace(/\n/g," "),e=e.replace(/[\u2212\u2013\u2014\u2010]/g,"-"),e=e.replace(/[\u2026]/g,"...");for(var i,l=10,u=[];;){i!==e?(l=10,i=e):l--;var d=_e.stateMachines[r],h=d.transitions[n]||d.transitions["*"];e:for(var p=0;p<h.length;p++){var b=_e.patterns.match_(h[p].pattern,e);if(b){for(var y=h[p].task,x=0;x<y.action_.length;x++){var _;if(d.actions[y.action_[x].type_])_=d.actions[y.action_[x].type_](a,b.match_,y.action_[x].option);else if(_e.actions[y.action_[x].type_])_=_e.actions[y.action_[x].type_](a,b.match_,y.action_[x].option);else throw["MhchemBugA","mhchem bug A. Please report. ("+y.action_[x].type_+")"];_e.concatArray(u,_)}if(n=y.nextState||n,e.length>0){if(y.revisit||(e=b.remainder),!y.toContinue)break e}else return u}}if(l<=0)throw["MhchemBugU","mhchem bug U. Please report."]}},concatArray:function(e,r){if(r)if(Array.isArray(r))for(var n=0;n<r.length;n++)e.push(r[n]);else e.push(r)},patterns:{patterns:{empty:/^$/,else:/^./,else2:/^./,space:/^\s/,"space A":/^\s(?=[A-Z\\$])/,space$:/^\s$/,"a-z":/^[a-z]/,x:/^x/,x$:/^x$/,i$:/^i$/,letters:/^(?:[a-zA-Z\u03B1-\u03C9\u0391-\u03A9?@]|(?:\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega|Gamma|Delta|Theta|Lambda|Xi|Pi|Sigma|Upsilon|Phi|Psi|Omega)(?:\s+|\{\}|(?![a-zA-Z]))))+/,"\\greek":/^\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega|Gamma|Delta|Theta|Lambda|Xi|Pi|Sigma|Upsilon|Phi|Psi|Omega)(?:\s+|\{\}|(?![a-zA-Z]))/,"one lowercase latin letter $":/^(?:([a-z])(?:$|[^a-zA-Z]))$/,"$one lowercase latin letter$ $":/^\$(?:([a-z])(?:$|[^a-zA-Z]))\$$/,"one lowercase greek letter $":/^(?:\$?[\u03B1-\u03C9]\$?|\$?\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega)\s*\$?)(?:\s+|\{\}|(?![a-zA-Z]))$/,digits:/^[0-9]+/,"-9.,9":/^[+\-]?(?:[0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))/,"-9.,9 no missing 0":/^[+\-]?[0-9]+(?:[.,][0-9]+)?/,"(-)(9.,9)(e)(99)":function(e){var r=e.match(/^(\+\-|\+\/\-|\+|\-|\\pm\s?)?([0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))?(\((?:[0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))\))?(?:([eE]|\s*(\*|x|\\times|\u00D7)\s*10\^)([+\-]?[0-9]+|\{[+\-]?[0-9]+\}))?/);return r&&r[0]?{match_:r.splice(1),remainder:e.substr(r[0].length)}:null},"(-)(9)^(-9)":function(e){var r=e.match(/^(\+\-|\+\/\-|\+|\-|\\pm\s?)?([0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+)?)\^([+\-]?[0-9]+|\{[+\-]?[0-9]+\})/);return r&&r[0]?{match_:r.splice(1),remainder:e.substr(r[0].length)}:null},"state of aggregation $":function(e){var r=_e.patterns.findObserveGroups(e,"",/^\([a-z]{1,3}(?=[\),])/,")","");if(r&&r.remainder.match(/^($|[\s,;\)\]\}])/))return r;var n=e.match(/^(?:\((?:\\ca\s?)?\$[amothc]\$\))/);return n?{match_:n[0],remainder:e.substr(n[0].length)}:null},"_{(state of aggregation)}$":/^_\{(\([a-z]{1,3}\))\}/,"{[(":/^(?:\\\{|\[|\()/,")]}":/^(?:\)|\]|\\\})/,", ":/^[,;]\s*/,",":/^[,;]/,".":/^[.]/,". ":/^([.\u22C5\u00B7\u2022])\s*/,"...":/^\.\.\.(?=$|[^.])/,"* ":/^([*])\s*/,"^{(...)}":function(e){return _e.patterns.findObserveGroups(e,"^{","","","}")},"^($...$)":function(e){return _e.patterns.findObserveGroups(e,"^","$","$","")},"^a":/^\^([0-9]+|[^\\_])/,"^\\x{}{}":function(e){return _e.patterns.findObserveGroups(e,"^",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"^\\x{}":function(e){return _e.patterns.findObserveGroups(e,"^",/^\\[a-zA-Z]+\{/,"}","")},"^\\x":/^\^(\\[a-zA-Z]+)\s*/,"^(-1)":/^\^(-?\d+)/,"'":/^'/,"_{(...)}":function(e){return _e.patterns.findObserveGroups(e,"_{","","","}")},"_($...$)":function(e){return _e.patterns.findObserveGroups(e,"_","$","$","")},_9:/^_([+\-]?[0-9]+|[^\\])/,"_\\x{}{}":function(e){return _e.patterns.findObserveGroups(e,"_",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"_\\x{}":function(e){return _e.patterns.findObserveGroups(e,"_",/^\\[a-zA-Z]+\{/,"}","")},"_\\x":/^_(\\[a-zA-Z]+)\s*/,"^_":/^(?:\^(?=_)|\_(?=\^)|[\^_]$)/,"{}":/^\{\}/,"{...}":function(e){return _e.patterns.findObserveGroups(e,"","{","}","")},"{(...)}":function(e){return _e.patterns.findObserveGroups(e,"{","","","}")},"$...$":function(e){return _e.patterns.findObserveGroups(e,"","$","$","")},"${(...)}$":function(e){return _e.patterns.findObserveGroups(e,"${","","","}$")},"$(...)$":function(e){return _e.patterns.findObserveGroups(e,"$","","","$")},"=<>":/^[=<>]/,"#":/^[#\u2261]/,"+":/^\+/,"-$":/^-(?=[\s_},;\]/]|$|\([a-z]+\))/,"-9":/^-(?=[0-9])/,"- orbital overlap":/^-(?=(?:[spd]|sp)(?:$|[\s,;\)\]\}]))/,"-":/^-/,"pm-operator":/^(?:\\pm|\$\\pm\$|\+-|\+\/-)/,operator:/^(?:\+|(?:[\-=<>]|<<|>>|\\approx|\$\\approx\$)(?=\s|$|-?[0-9]))/,arrowUpDown:/^(?:v|\(v\)|\^|\(\^\))(?=$|[\s,;\)\]\}])/,"\\bond{(...)}":function(e){return _e.patterns.findObserveGroups(e,"\\bond{","","","}")},"->":/^(?:<->|<-->|->|<-|<=>>|<<=>|<=>|[\u2192\u27F6\u21CC])/,CMT:/^[CMT](?=\[)/,"[(...)]":function(e){return _e.patterns.findObserveGroups(e,"[","","","]")},"1st-level escape":/^(&|\\\\|\\hline)\s*/,"\\,":/^(?:\\[,\ ;:])/,"\\x{}{}":function(e){return _e.patterns.findObserveGroups(e,"",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"\\x{}":function(e){return _e.patterns.findObserveGroups(e,"",/^\\[a-zA-Z]+\{/,"}","")},"\\ca":/^\\ca(?:\s+|(?![a-zA-Z]))/,"\\x":/^(?:\\[a-zA-Z]+\s*|\\[_&{}%])/,orbital:/^(?:[0-9]{1,2}[spdfgh]|[0-9]{0,2}sp)(?=$|[^a-zA-Z])/,others:/^[\/~|]/,"\\frac{(...)}":function(e){return _e.patterns.findObserveGroups(e,"\\frac{","","","}","{","","","}")},"\\overset{(...)}":function(e){return _e.patterns.findObserveGroups(e,"\\overset{","","","}","{","","","}")},"\\underset{(...)}":function(e){return _e.patterns.findObserveGroups(e,"\\underset{","","","}","{","","","}")},"\\underbrace{(...)}":function(e){return _e.patterns.findObserveGroups(e,"\\underbrace{","","","}_","{","","","}")},"\\color{(...)}0":function(e){return _e.patterns.findObserveGroups(e,"\\color{","","","}")},"\\color{(...)}{(...)}1":function(e){return _e.patterns.findObserveGroups(e,"\\color{","","","}","{","","","}")},"\\color(...){(...)}2":function(e){return _e.patterns.findObserveGroups(e,"\\color","\\","",/^(?=\{)/,"{","","","}")},"\\ce{(...)}":function(e){return _e.patterns.findObserveGroups(e,"\\ce{","","","}")},oxidation$:/^(?:[+-][IVX]+|\\pm\s*0|\$\\pm\$\s*0)$/,"d-oxidation$":/^(?:[+-]?\s?[IVX]+|\\pm\s*0|\$\\pm\$\s*0)$/,"roman numeral":/^[IVX]+/,"1/2$":/^[+\-]?(?:[0-9]+|\$[a-z]\$|[a-z])\/[0-9]+(?:\$[a-z]\$|[a-z])?$/,amount:function(e){var r;if(r=e.match(/^(?:(?:(?:\([+\-]?[0-9]+\/[0-9]+\)|[+\-]?(?:[0-9]+|\$[a-z]\$|[a-z])\/[0-9]+|[+\-]?[0-9]+[.,][0-9]+|[+\-]?\.[0-9]+|[+\-]?[0-9]+)(?:[a-z](?=\s*[A-Z]))?)|[+\-]?[a-z](?=\s*[A-Z])|\+(?!\s))/),r)return{match_:r[0],remainder:e.substr(r[0].length)};var n=_e.patterns.findObserveGroups(e,"","$","$","");return n&&(r=n.match_.match(/^\$(?:\(?[+\-]?(?:[0-9]*[a-z]?[+\-])?[0-9]*[a-z](?:[+\-][0-9]*[a-z]?)?\)?|\+|-)\$$/),r)?{match_:r[0],remainder:e.substr(r[0].length)}:null},amount2:function(e){return this.amount(e)},"(KV letters),":/^(?:[A-Z][a-z]{0,2}|i)(?=,)/,formula$:function(e){if(e.match(/^\([a-z]+\)$/))return null;var r=e.match(/^(?:[a-z]|(?:[0-9\ \+\-\,\.\(\)]+[a-z])+[0-9\ \+\-\,\.\(\)]*|(?:[a-z][0-9\ \+\-\,\.\(\)]+)+[a-z]?)$/);return r?{match_:r[0],remainder:e.substr(r[0].length)}:null},uprightEntities:/^(?:pH|pOH|pC|pK|iPr|iBu)(?=$|[^a-zA-Z])/,"/":/^\s*(\/)\s*/,"//":/^\s*(\/\/)\s*/,"*":/^\s*[*.]\s*/},findObserveGroups:function(e,r,n,a,i,l,u,d,h,p){var b=function(N,D){if(typeof D=="string")return N.indexOf(D)!==0?null:D;var j=N.match(D);return j?j[0]:null},y=function(N,D,j){for(var O=0;D<N.length;){var F=N.charAt(D),R=b(N.substr(D),j);if(R!==null&&O===0)return{endMatchBegin:D,endMatchEnd:D+R.length};if(F==="{")O++;else if(F==="}"){if(O===0)throw["ExtraCloseMissingOpen","Extra close brace or missing open brace"];O--}D++}return O>0,null},x=b(e,r);if(x===null||(e=e.substr(x.length),x=b(e,n),x===null))return null;var _=y(e,x.length,a||i);if(_===null)return null;var k=e.substring(0,a?_.endMatchEnd:_.endMatchBegin);if(l||u){var S=this.findObserveGroups(e.substr(_.endMatchEnd),l,u,d,h);if(S===null)return null;var A=[k,S.match_];return{match_:p?A.join(""):A,remainder:S.remainder}}else return{match_:k,remainder:e.substr(_.endMatchEnd)}},match_:function(e,r){var n=_e.patterns.patterns[e];if(n===void 0)throw["MhchemBugP","mhchem bug P. Please report. ("+e+")"];if(typeof n=="function")return _e.patterns.patterns[e](r);var a=r.match(n);if(a){var i;return a[2]?i=[a[1],a[2]]:a[1]?i=a[1]:i=a[0],{match_:i,remainder:r.substr(a[0].length)}}return null}},actions:{"a=":function(e,r){e.a=(e.a||"")+r},"b=":function(e,r){e.b=(e.b||"")+r},"p=":function(e,r){e.p=(e.p||"")+r},"o=":function(e,r){e.o=(e.o||"")+r},"q=":function(e,r){e.q=(e.q||"")+r},"d=":function(e,r){e.d=(e.d||"")+r},"rm=":function(e,r){e.rm=(e.rm||"")+r},"text=":function(e,r){e.text_=(e.text_||"")+r},insert:function(e,r,n){return{type_:n}},"insert+p1":function(e,r,n){return{type_:n,p1:r}},"insert+p1+p2":function(e,r,n){return{type_:n,p1:r[0],p2:r[1]}},copy:function(e,r){return r},rm:function(e,r){return{type_:"rm",p1:r||""}},text:function(e,r){return _e.go(r,"text")},"{text}":function(e,r){var n=["{"];return _e.concatArray(n,_e.go(r,"text")),n.push("}"),n},"tex-math":function(e,r){return _e.go(r,"tex-math")},"tex-math tight":function(e,r){return _e.go(r,"tex-math tight")},bond:function(e,r,n){return{type_:"bond",kind_:n||r}},"color0-output":function(e,r){return{type_:"color0",color:r[0]}},ce:function(e,r){return _e.go(r)},"1/2":function(e,r){var n=[];r.match(/^[+\-]/)&&(n.push(r.substr(0,1)),r=r.substr(1));var a=r.match(/^([0-9]+|\$[a-z]\$|[a-z])\/([0-9]+)(\$[a-z]\$|[a-z])?$/);return a[1]=a[1].replace(/\$/g,""),n.push({type_:"frac",p1:a[1],p2:a[2]}),a[3]&&(a[3]=a[3].replace(/\$/g,""),n.push({type_:"tex-math",p1:a[3]})),n},"9,9":function(e,r){return _e.go(r,"9,9")}},createTransitions:function(e){var r,n,a,i,l={};for(r in e)for(n in e[r])for(a=n.split("|"),e[r][n].stateArray=a,i=0;i<a.length;i++)l[a[i]]=[];for(r in e)for(n in e[r])for(a=e[r][n].stateArray||[],i=0;i<a.length;i++){var u=e[r][n];if(u.action_){u.action_=[].concat(u.action_);for(var d=0;d<u.action_.length;d++)typeof u.action_[d]=="string"&&(u.action_[d]={type_:u.action_[d]})}else u.action_=[];for(var h=r.split("|"),p=0;p<h.length;p++)if(a[i]==="*")for(var b in l)l[b].push({pattern:h[p],task:u});else l[a[i]].push({pattern:h[p],task:u})}return l},stateMachines:{}};_e.stateMachines={ce:{transitions:_e.createTransitions({empty:{"*":{action_:"output"}},else:{"0|1|2":{action_:"beginsWithBond=false",revisit:!0,toContinue:!0}},oxidation$:{0:{action_:"oxidation-output"}},CMT:{r:{action_:"rdt=",nextState:"rt"},rd:{action_:"rqt=",nextState:"rdt"}},arrowUpDown:{"0|1|2|as":{action_:["sb=false","output","operator"],nextState:"1"}},uprightEntities:{"0|1|2":{action_:["o=","output"],nextState:"1"}},orbital:{"0|1|2|3":{action_:"o=",nextState:"o"}},"->":{"0|1|2|3":{action_:"r=",nextState:"r"},"a|as":{action_:["output","r="],nextState:"r"},"*":{action_:["output","r="],nextState:"r"}},"+":{o:{action_:"d= kv",nextState:"d"},"d|D":{action_:"d=",nextState:"d"},q:{action_:"d=",nextState:"qd"},"qd|qD":{action_:"d=",nextState:"qd"},dq:{action_:["output","d="],nextState:"d"},3:{action_:["sb=false","output","operator"],nextState:"0"}},amount:{"0|2":{action_:"a=",nextState:"a"}},"pm-operator":{"0|1|2|a|as":{action_:["sb=false","output",{type_:"operator",option:"\\pm"}],nextState:"0"}},operator:{"0|1|2|a|as":{action_:["sb=false","output","operator"],nextState:"0"}},"-$":{"o|q":{action_:["charge or bond","output"],nextState:"qd"},d:{action_:"d=",nextState:"d"},D:{action_:["output",{type_:"bond",option:"-"}],nextState:"3"},q:{action_:"d=",nextState:"qd"},qd:{action_:"d=",nextState:"qd"},"qD|dq":{action_:["output",{type_:"bond",option:"-"}],nextState:"3"}},"-9":{"3|o":{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"3"}},"- orbital overlap":{o:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"},d:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"}},"-":{"0|1|2":{action_:[{type_:"output",option:1},"beginsWithBond=true",{type_:"bond",option:"-"}],nextState:"3"},3:{action_:{type_:"bond",option:"-"}},a:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"},as:{action_:[{type_:"output",option:2},{type_:"bond",option:"-"}],nextState:"3"},b:{action_:"b="},o:{action_:{type_:"- after o/d",option:!1},nextState:"2"},q:{action_:{type_:"- after o/d",option:!1},nextState:"2"},"d|qd|dq":{action_:{type_:"- after o/d",option:!0},nextState:"2"},"D|qD|p":{action_:["output",{type_:"bond",option:"-"}],nextState:"3"}},amount2:{"1|3":{action_:"a=",nextState:"a"}},letters:{"0|1|2|3|a|as|b|p|bp|o":{action_:"o=",nextState:"o"},"q|dq":{action_:["output","o="],nextState:"o"},"d|D|qd|qD":{action_:"o after d",nextState:"o"}},digits:{o:{action_:"q=",nextState:"q"},"d|D":{action_:"q=",nextState:"dq"},q:{action_:["output","o="],nextState:"o"},a:{action_:"o=",nextState:"o"}},"space A":{"b|p|bp":{}},space:{a:{nextState:"as"},0:{action_:"sb=false"},"1|2":{action_:"sb=true"},"r|rt|rd|rdt|rdq":{action_:"output",nextState:"0"},"*":{action_:["output","sb=true"],nextState:"1"}},"1st-level escape":{"1|2":{action_:["output",{type_:"insert+p1",option:"1st-level escape"}]},"*":{action_:["output",{type_:"insert+p1",option:"1st-level escape"}],nextState:"0"}},"[(...)]":{"r|rt":{action_:"rd=",nextState:"rd"},"rd|rdt":{action_:"rq=",nextState:"rdq"}},"...":{"o|d|D|dq|qd|qD":{action_:["output",{type_:"bond",option:"..."}],nextState:"3"},"*":{action_:[{type_:"output",option:1},{type_:"insert",option:"ellipsis"}],nextState:"1"}},". |* ":{"*":{action_:["output",{type_:"insert",option:"addition compound"}],nextState:"1"}},"state of aggregation $":{"*":{action_:["output","state of aggregation"],nextState:"1"}},"{[(":{"a|as|o":{action_:["o=","output","parenthesisLevel++"],nextState:"2"},"0|1|2|3":{action_:["o=","output","parenthesisLevel++"],nextState:"2"},"*":{action_:["output","o=","output","parenthesisLevel++"],nextState:"2"}},")]}":{"0|1|2|3|b|p|bp|o":{action_:["o=","parenthesisLevel--"],nextState:"o"},"a|as|d|D|q|qd|qD|dq":{action_:["output","o=","parenthesisLevel--"],nextState:"o"}},", ":{"*":{action_:["output","comma"],nextState:"0"}},"^_":{"*":{}},"^{(...)}|^($...$)":{"0|1|2|as":{action_:"b=",nextState:"b"},p:{action_:"b=",nextState:"bp"},"3|o":{action_:"d= kv",nextState:"D"},q:{action_:"d=",nextState:"qD"},"d|D|qd|qD|dq":{action_:["output","d="],nextState:"D"}},"^a|^\\x{}{}|^\\x{}|^\\x|'":{"0|1|2|as":{action_:"b=",nextState:"b"},p:{action_:"b=",nextState:"bp"},"3|o":{action_:"d= kv",nextState:"d"},q:{action_:"d=",nextState:"qd"},"d|qd|D|qD":{action_:"d="},dq:{action_:["output","d="],nextState:"d"}},"_{(state of aggregation)}$":{"d|D|q|qd|qD|dq":{action_:["output","q="],nextState:"q"}},"_{(...)}|_($...$)|_9|_\\x{}{}|_\\x{}|_\\x":{"0|1|2|as":{action_:"p=",nextState:"p"},b:{action_:"p=",nextState:"bp"},"3|o":{action_:"q=",nextState:"q"},"d|D":{action_:"q=",nextState:"dq"},"q|qd|qD|dq":{action_:["output","q="],nextState:"q"}},"=<>":{"0|1|2|3|a|as|o|q|d|D|qd|qD|dq":{action_:[{type_:"output",option:2},"bond"],nextState:"3"}},"#":{"0|1|2|3|a|as|o":{action_:[{type_:"output",option:2},{type_:"bond",option:"#"}],nextState:"3"}},"{}":{"*":{action_:{type_:"output",option:1},nextState:"1"}},"{...}":{"0|1|2|3|a|as|b|p|bp":{action_:"o=",nextState:"o"},"o|d|D|q|qd|qD|dq":{action_:["output","o="],nextState:"o"}},"$...$":{a:{action_:"a="},"0|1|2|3|as|b|p|bp|o":{action_:"o=",nextState:"o"},"as|o":{action_:"o="},"q|d|D|qd|qD|dq":{action_:["output","o="],nextState:"o"}},"\\bond{(...)}":{"*":{action_:[{type_:"output",option:2},"bond"],nextState:"3"}},"\\frac{(...)}":{"*":{action_:[{type_:"output",option:1},"frac-output"],nextState:"3"}},"\\overset{(...)}":{"*":{action_:[{type_:"output",option:2},"overset-output"],nextState:"3"}},"\\underset{(...)}":{"*":{action_:[{type_:"output",option:2},"underset-output"],nextState:"3"}},"\\underbrace{(...)}":{"*":{action_:[{type_:"output",option:2},"underbrace-output"],nextState:"3"}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:[{type_:"output",option:2},"color-output"],nextState:"3"}},"\\color{(...)}0":{"*":{action_:[{type_:"output",option:2},"color0-output"]}},"\\ce{(...)}":{"*":{action_:[{type_:"output",option:2},"ce"],nextState:"3"}},"\\,":{"*":{action_:[{type_:"output",option:1},"copy"],nextState:"1"}},"\\x{}{}|\\x{}|\\x":{"0|1|2|3|a|as|b|p|bp|o|c0":{action_:["o=","output"],nextState:"3"},"*":{action_:["output","o=","output"],nextState:"3"}},others:{"*":{action_:[{type_:"output",option:1},"copy"],nextState:"3"}},else2:{a:{action_:"a to o",nextState:"o",revisit:!0},as:{action_:["output","sb=true"],nextState:"1",revisit:!0},"r|rt|rd|rdt|rdq":{action_:["output"],nextState:"0",revisit:!0},"*":{action_:["output","copy"],nextState:"3"}}}),actions:{"o after d":function(e,r){var n;if((e.d||"").match(/^[0-9]+$/)){var a=e.d;e.d=void 0,n=this.output(e),e.b=a}else n=this.output(e);return _e.actions["o="](e,r),n},"d= kv":function(e,r){e.d=r,e.dType="kv"},"charge or bond":function(e,r){if(e.beginsWithBond){var n=[];return _e.concatArray(n,this.output(e)),_e.concatArray(n,_e.actions.bond(e,r,"-")),n}else e.d=r},"- after o/d":function(e,r,n){var a=_e.patterns.match_("orbital",e.o||""),i=_e.patterns.match_("one lowercase greek letter $",e.o||""),l=_e.patterns.match_("one lowercase latin letter $",e.o||""),u=_e.patterns.match_("$one lowercase latin letter$ $",e.o||""),d=r==="-"&&(a&&a.remainder===""||i||l||u);d&&!e.a&&!e.b&&!e.p&&!e.d&&!e.q&&!a&&l&&(e.o="$"+e.o+"$");var h=[];return d?(_e.concatArray(h,this.output(e)),h.push({type_:"hyphen"})):(a=_e.patterns.match_("digits",e.d||""),n&&a&&a.remainder===""?(_e.concatArray(h,_e.actions["d="](e,r)),_e.concatArray(h,this.output(e))):(_e.concatArray(h,this.output(e)),_e.concatArray(h,_e.actions.bond(e,r,"-")))),h},"a to o":function(e){e.o=e.a,e.a=void 0},"sb=true":function(e){e.sb=!0},"sb=false":function(e){e.sb=!1},"beginsWithBond=true":function(e){e.beginsWithBond=!0},"beginsWithBond=false":function(e){e.beginsWithBond=!1},"parenthesisLevel++":function(e){e.parenthesisLevel++},"parenthesisLevel--":function(e){e.parenthesisLevel--},"state of aggregation":function(e,r){return{type_:"state of aggregation",p1:_e.go(r,"o")}},comma:function(e,r){var n=r.replace(/\s*$/,""),a=n!==r;return a&&e.parenthesisLevel===0?{type_:"comma enumeration L",p1:n}:{type_:"comma enumeration M",p1:n}},output:function(e,r,n){var a;if(!e.r)a=[],!e.a&&!e.b&&!e.p&&!e.o&&!e.q&&!e.d&&!n||(e.sb&&a.push({type_:"entitySkip"}),!e.o&&!e.q&&!e.d&&!e.b&&!e.p&&n!==2?(e.o=e.a,e.a=void 0):!e.o&&!e.q&&!e.d&&(e.b||e.p)?(e.o=e.a,e.d=e.b,e.q=e.p,e.a=e.b=e.p=void 0):e.o&&e.dType==="kv"&&_e.patterns.match_("d-oxidation$",e.d||"")?e.dType="oxidation":e.o&&e.dType==="kv"&&!e.q&&(e.dType=void 0),a.push({type_:"chemfive",a:_e.go(e.a,"a"),b:_e.go(e.b,"bd"),p:_e.go(e.p,"pq"),o:_e.go(e.o,"o"),q:_e.go(e.q,"pq"),d:_e.go(e.d,e.dType==="oxidation"?"oxidation":"bd"),dType:e.dType}));else{var i;e.rdt==="M"?i=_e.go(e.rd,"tex-math"):e.rdt==="T"?i=[{type_:"text",p1:e.rd||""}]:i=_e.go(e.rd);var l;e.rqt==="M"?l=_e.go(e.rq,"tex-math"):e.rqt==="T"?l=[{type_:"text",p1:e.rq||""}]:l=_e.go(e.rq),a={type_:"arrow",r:e.r,rd:i,rq:l}}for(var u in e)u!=="parenthesisLevel"&&u!=="beginsWithBond"&&delete e[u];return a},"oxidation-output":function(e,r){var n=["{"];return _e.concatArray(n,_e.go(r,"oxidation")),n.push("}"),n},"frac-output":function(e,r){return{type_:"frac-ce",p1:_e.go(r[0]),p2:_e.go(r[1])}},"overset-output":function(e,r){return{type_:"overset",p1:_e.go(r[0]),p2:_e.go(r[1])}},"underset-output":function(e,r){return{type_:"underset",p1:_e.go(r[0]),p2:_e.go(r[1])}},"underbrace-output":function(e,r){return{type_:"underbrace",p1:_e.go(r[0]),p2:_e.go(r[1])}},"color-output":function(e,r){return{type_:"color",color1:r[0],color2:_e.go(r[1])}},"r=":function(e,r){e.r=r},"rdt=":function(e,r){e.rdt=r},"rd=":function(e,r){e.rd=r},"rqt=":function(e,r){e.rqt=r},"rq=":function(e,r){e.rq=r},operator:function(e,r,n){return{type_:"operator",kind_:n||r}}}},a:{transitions:_e.createTransitions({empty:{"*":{}},"1/2$":{0:{action_:"1/2"}},else:{0:{nextState:"1",revisit:!0}},"$(...)$":{"*":{action_:"tex-math tight",nextState:"1"}},",":{"*":{action_:{type_:"insert",option:"commaDecimal"}}},else2:{"*":{action_:"copy"}}}),actions:{}},o:{transitions:_e.createTransitions({empty:{"*":{}},"1/2$":{0:{action_:"1/2"}},else:{0:{nextState:"1",revisit:!0}},letters:{"*":{action_:"rm"}},"\\ca":{"*":{action_:{type_:"insert",option:"circa"}}},"\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"{text}"}},else2:{"*":{action_:"copy"}}}),actions:{}},text:{transitions:_e.createTransitions({empty:{"*":{action_:"output"}},"{...}":{"*":{action_:"text="}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"\\greek":{"*":{action_:["output","rm"]}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:["output","copy"]}},else:{"*":{action_:"text="}}}),actions:{output:function(e){if(e.text_){var r={type_:"text",p1:e.text_};for(var n in e)delete e[n];return r}}}},pq:{transitions:_e.createTransitions({empty:{"*":{}},"state of aggregation $":{"*":{action_:"state of aggregation"}},i$:{0:{nextState:"!f",revisit:!0}},"(KV letters),":{0:{action_:"rm",nextState:"0"}},formula$:{0:{nextState:"f",revisit:!0}},"1/2$":{0:{action_:"1/2"}},else:{0:{nextState:"!f",revisit:!0}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"text"}},"a-z":{f:{action_:"tex-math"}},letters:{"*":{action_:"rm"}},"-9.,9":{"*":{action_:"9,9"}},",":{"*":{action_:{type_:"insert+p1",option:"comma enumeration S"}}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:"color-output"}},"\\color{(...)}0":{"*":{action_:"color0-output"}},"\\ce{(...)}":{"*":{action_:"ce"}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},else2:{"*":{action_:"copy"}}}),actions:{"state of aggregation":function(e,r){return{type_:"state of aggregation subscript",p1:_e.go(r,"o")}},"color-output":function(e,r){return{type_:"color",color1:r[0],color2:_e.go(r[1],"pq")}}}},bd:{transitions:_e.createTransitions({empty:{"*":{}},x$:{0:{nextState:"!f",revisit:!0}},formula$:{0:{nextState:"f",revisit:!0}},else:{0:{nextState:"!f",revisit:!0}},"-9.,9 no missing 0":{"*":{action_:"9,9"}},".":{"*":{action_:{type_:"insert",option:"electron dot"}}},"a-z":{f:{action_:"tex-math"}},x:{"*":{action_:{type_:"insert",option:"KV x"}}},letters:{"*":{action_:"rm"}},"'":{"*":{action_:{type_:"insert",option:"prime"}}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"text"}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:"color-output"}},"\\color{(...)}0":{"*":{action_:"color0-output"}},"\\ce{(...)}":{"*":{action_:"ce"}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},else2:{"*":{action_:"copy"}}}),actions:{"color-output":function(e,r){return{type_:"color",color1:r[0],color2:_e.go(r[1],"bd")}}}},oxidation:{transitions:_e.createTransitions({empty:{"*":{}},"roman numeral":{"*":{action_:"roman-numeral"}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},else:{"*":{action_:"copy"}}}),actions:{"roman-numeral":function(e,r){return{type_:"roman numeral",p1:r||""}}}},"tex-math":{transitions:_e.createTransitions({empty:{"*":{action_:"output"}},"\\ce{(...)}":{"*":{action_:["output","ce"]}},"{...}|\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"o="}},else:{"*":{action_:"o="}}}),actions:{output:function(e){if(e.o){var r={type_:"tex-math",p1:e.o};for(var n in e)delete e[n];return r}}}},"tex-math tight":{transitions:_e.createTransitions({empty:{"*":{action_:"output"}},"\\ce{(...)}":{"*":{action_:["output","ce"]}},"{...}|\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"o="}},"-|+":{"*":{action_:"tight operator"}},else:{"*":{action_:"o="}}}),actions:{"tight operator":function(e,r){e.o=(e.o||"")+"{"+r+"}"},output:function(e){if(e.o){var r={type_:"tex-math",p1:e.o};for(var n in e)delete e[n];return r}}}},"9,9":{transitions:_e.createTransitions({empty:{"*":{}},",":{"*":{action_:"comma"}},else:{"*":{action_:"copy"}}}),actions:{comma:function(){return{type_:"commaDecimal"}}}},pu:{transitions:_e.createTransitions({empty:{"*":{action_:"output"}},space$:{"*":{action_:["output","space"]}},"{[(|)]}":{"0|a":{action_:"copy"}},"(-)(9)^(-9)":{0:{action_:"number^",nextState:"a"}},"(-)(9.,9)(e)(99)":{0:{action_:"enumber",nextState:"a"}},space:{"0|a":{}},"pm-operator":{"0|a":{action_:{type_:"operator",option:"\\pm"},nextState:"0"}},operator:{"0|a":{action_:"copy",nextState:"0"}},"//":{d:{action_:"o=",nextState:"/"}},"/":{d:{action_:"o=",nextState:"/"}},"{...}|else":{"0|d":{action_:"d=",nextState:"d"},a:{action_:["space","d="],nextState:"d"},"/|q":{action_:"q=",nextState:"q"}}}),actions:{enumber:function(e,r){var n=[];return r[0]==="+-"||r[0]==="+/-"?n.push("\\pm "):r[0]&&n.push(r[0]),r[1]&&(_e.concatArray(n,_e.go(r[1],"pu-9,9")),r[2]&&(r[2].match(/[,.]/)?_e.concatArray(n,_e.go(r[2],"pu-9,9")):n.push(r[2])),r[3]=r[4]||r[3],r[3]&&(r[3]=r[3].trim(),r[3]==="e"||r[3].substr(0,1)==="*"?n.push({type_:"cdot"}):n.push({type_:"times"}))),r[3]&&n.push("10^{"+r[5]+"}"),n},"number^":function(e,r){var n=[];return r[0]==="+-"||r[0]==="+/-"?n.push("\\pm "):r[0]&&n.push(r[0]),_e.concatArray(n,_e.go(r[1],"pu-9,9")),n.push("^{"+r[2]+"}"),n},operator:function(e,r,n){return{type_:"operator",kind_:n||r}},space:function(){return{type_:"pu-space-1"}},output:function(e){var r,n=_e.patterns.match_("{(...)}",e.d||"");n&&n.remainder===""&&(e.d=n.match_);var a=_e.patterns.match_("{(...)}",e.q||"");if(a&&a.remainder===""&&(e.q=a.match_),e.d&&(e.d=e.d.replace(/\u00B0C|\^oC|\^{o}C/g,"{}^{\\circ}C"),e.d=e.d.replace(/\u00B0F|\^oF|\^{o}F/g,"{}^{\\circ}F")),e.q){e.q=e.q.replace(/\u00B0C|\^oC|\^{o}C/g,"{}^{\\circ}C"),e.q=e.q.replace(/\u00B0F|\^oF|\^{o}F/g,"{}^{\\circ}F");var i={d:_e.go(e.d,"pu"),q:_e.go(e.q,"pu")};e.o==="//"?r={type_:"pu-frac",p1:i.d,p2:i.q}:(r=i.d,i.d.length>1||i.q.length>1?r.push({type_:" / "}):r.push({type_:"/"}),_e.concatArray(r,i.q))}else r=_e.go(e.d,"pu-2");for(var l in e)delete e[l];return r}}},"pu-2":{transitions:_e.createTransitions({empty:{"*":{action_:"output"}},"*":{"*":{action_:["output","cdot"],nextState:"0"}},"\\x":{"*":{action_:"rm="}},space:{"*":{action_:["output","space"],nextState:"0"}},"^{(...)}|^(-1)":{1:{action_:"^(-1)"}},"-9.,9":{0:{action_:"rm=",nextState:"0"},1:{action_:"^(-1)",nextState:"0"}},"{...}|else":{"*":{action_:"rm=",nextState:"1"}}}),actions:{cdot:function(){return{type_:"tight cdot"}},"^(-1)":function(e,r){e.rm+="^{"+r+"}"},space:function(){return{type_:"pu-space-2"}},output:function(e){var r=[];if(e.rm){var n=_e.patterns.match_("{(...)}",e.rm||"");n&&n.remainder===""?r=_e.go(n.match_,"pu"):r={type_:"rm",p1:e.rm}}for(var a in e)delete e[a];return r}}},"pu-9,9":{transitions:_e.createTransitions({empty:{0:{action_:"output-0"},o:{action_:"output-o"}},",":{0:{action_:["output-0","comma"],nextState:"o"}},".":{0:{action_:["output-0","copy"],nextState:"o"}},else:{"*":{action_:"text="}}}),actions:{comma:function(){return{type_:"commaDecimal"}},"output-0":function(e){var r=[];if(e.text_=e.text_||"",e.text_.length>4){var n=e.text_.length%3;n===0&&(n=3);for(var a=e.text_.length-3;a>0;a-=3)r.push(e.text_.substr(a,3)),r.push({type_:"1000 separator"});r.push(e.text_.substr(0,n)),r.reverse()}else r.push(e.text_);for(var i in e)delete e[i];return r},"output-o":function(e){var r=[];if(e.text_=e.text_||"",e.text_.length>4){for(var n=e.text_.length-3,a=0;a<n;a+=3)r.push(e.text_.substr(a,3)),r.push({type_:"1000 separator"});r.push(e.text_.substr(a))}else r.push(e.text_);for(var i in e)delete e[i];return r}}}};var Rt={go:function(e,r){if(!e)return"";for(var n="",a=!1,i=0;i<e.length;i++){var l=e[i];typeof l=="string"?n+=l:(n+=Rt._go2(l),l.type_==="1st-level escape"&&(a=!0))}return!r&&!a&&n&&(n="{"+n+"}"),n},_goInner:function(e){return e&&Rt.go(e,!0)},_go2:function(e){var r;switch(e.type_){case"chemfive":r="";var n={a:Rt._goInner(e.a),b:Rt._goInner(e.b),p:Rt._goInner(e.p),o:Rt._goInner(e.o),q:Rt._goInner(e.q),d:Rt._goInner(e.d)};n.a&&(n.a.match(/^[+\-]/)&&(n.a="{"+n.a+"}"),r+=n.a+"\\,"),(n.b||n.p)&&(r+="{\\vphantom{X}}",r+="^{\\hphantom{"+(n.b||"")+"}}_{\\hphantom{"+(n.p||"")+"}}",r+="{\\vphantom{X}}",r+="^{\\smash[t]{\\vphantom{2}}\\mathllap{"+(n.b||"")+"}}",r+="_{\\vphantom{2}\\mathllap{\\smash[t]{"+(n.p||"")+"}}}"),n.o&&(n.o.match(/^[+\-]/)&&(n.o="{"+n.o+"}"),r+=n.o),e.dType==="kv"?((n.d||n.q)&&(r+="{\\vphantom{X}}"),n.d&&(r+="^{"+n.d+"}"),n.q&&(r+="_{\\smash[t]{"+n.q+"}}")):e.dType==="oxidation"?(n.d&&(r+="{\\vphantom{X}}",r+="^{"+n.d+"}"),n.q&&(r+="{\\vphantom{X}}",r+="_{\\smash[t]{"+n.q+"}}")):(n.q&&(r+="{\\vphantom{X}}",r+="_{\\smash[t]{"+n.q+"}}"),n.d&&(r+="{\\vphantom{X}}",r+="^{"+n.d+"}"));break;case"rm":r="\\mathrm{"+e.p1+"}";break;case"text":e.p1.match(/[\^_]/)?(e.p1=e.p1.replace(" ","~").replace("-","\\text{-}"),r="\\mathrm{"+e.p1+"}"):r="\\text{"+e.p1+"}";break;case"roman numeral":r="\\mathrm{"+e.p1+"}";break;case"state of aggregation":r="\\mskip2mu "+Rt._goInner(e.p1);break;case"state of aggregation subscript":r="\\mskip1mu "+Rt._goInner(e.p1);break;case"bond":if(r=Rt._getBond(e.kind_),!r)throw["MhchemErrorBond","mhchem Error. Unknown bond type ("+e.kind_+")"];break;case"frac":var a="\\frac{"+e.p1+"}{"+e.p2+"}";r="\\mathchoice{\\textstyle"+a+"}{"+a+"}{"+a+"}{"+a+"}";break;case"pu-frac":var i="\\frac{"+Rt._goInner(e.p1)+"}{"+Rt._goInner(e.p2)+"}";r="\\mathchoice{\\textstyle"+i+"}{"+i+"}{"+i+"}{"+i+"}";break;case"tex-math":r=e.p1+" ";break;case"frac-ce":r="\\frac{"+Rt._goInner(e.p1)+"}{"+Rt._goInner(e.p2)+"}";break;case"overset":r="\\overset{"+Rt._goInner(e.p1)+"}{"+Rt._goInner(e.p2)+"}";break;case"underset":r="\\underset{"+Rt._goInner(e.p1)+"}{"+Rt._goInner(e.p2)+"}";break;case"underbrace":r="\\underbrace{"+Rt._goInner(e.p1)+"}_{"+Rt._goInner(e.p2)+"}";break;case"color":r="{\\color{"+e.color1+"}{"+Rt._goInner(e.color2)+"}}";break;case"color0":r="\\color{"+e.color+"}";break;case"arrow":var l={rd:Rt._goInner(e.rd),rq:Rt._goInner(e.rq)},u="\\x"+Rt._getArrow(e.r);l.rq&&(u+="[{"+l.rq+"}]"),l.rd?u+="{"+l.rd+"}":u+="{}",r=u;break;case"operator":r=Rt._getOperator(e.kind_);break;case"1st-level escape":r=e.p1+" ";break;case"space":r=" ";break;case"entitySkip":r="~";break;case"pu-space-1":r="~";break;case"pu-space-2":r="\\mkern3mu ";break;case"1000 separator":r="\\mkern2mu ";break;case"commaDecimal":r="{,}";break;case"comma enumeration L":r="{"+e.p1+"}\\mkern6mu ";break;case"comma enumeration M":r="{"+e.p1+"}\\mkern3mu ";break;case"comma enumeration S":r="{"+e.p1+"}\\mkern1mu ";break;case"hyphen":r="\\text{-}";break;case"addition compound":r="\\,{\\cdot}\\,";break;case"electron dot":r="\\mkern1mu \\bullet\\mkern1mu ";break;case"KV x":r="{\\times}";break;case"prime":r="\\prime ";break;case"cdot":r="\\cdot ";break;case"tight cdot":r="\\mkern1mu{\\cdot}\\mkern1mu ";break;case"times":r="\\times ";break;case"circa":r="{\\sim}";break;case"^":r="uparrow";break;case"v":r="downarrow";break;case"ellipsis":r="\\ldots ";break;case"/":r="/";break;case" / ":r="\\,/\\,";break;default:throw["MhchemBugT","mhchem bug T. Please report."]}return r},_getArrow:function(e){switch(e){case"->":return"rightarrow";case"":return"rightarrow";case"":return"rightarrow";case"<-":return"leftarrow";case"<->":return"leftrightarrow";case"<-->":return"rightleftarrows";case"<=>":return"rightleftharpoons";case"":return"rightleftharpoons";case"<=>>":return"rightequilibrium";case"<<=>":return"leftequilibrium";default:throw["MhchemBugT","mhchem bug T. Please report."]}},_getBond:function(e){switch(e){case"-":return"{-}";case"1":return"{-}";case"=":return"{=}";case"2":return"{=}";case"#":return"{\\equiv}";case"3":return"{\\equiv}";case"~":return"{\\tripledash}";case"~-":return"{\\mathrlap{\\raisebox{-.1em}{$-$}}\\raisebox{.1em}{$\\tripledash$}}";case"~=":return"{\\mathrlap{\\raisebox{-.2em}{$-$}}\\mathrlap{\\raisebox{.2em}{$\\tripledash$}}-}";case"~--":return"{\\mathrlap{\\raisebox{-.2em}{$-$}}\\mathrlap{\\raisebox{.2em}{$\\tripledash$}}-}";case"-~-":return"{\\mathrlap{\\raisebox{-.2em}{$-$}}\\mathrlap{\\raisebox{.2em}{$-$}}\\tripledash}";case"...":return"{{\\cdot}{\\cdot}{\\cdot}}";case"....":return"{{\\cdot}{\\cdot}{\\cdot}{\\cdot}}";case"->":return"{\\rightarrow}";case"<-":return"{\\leftarrow}";case"<":return"{<}";case">":return"{>}";default:throw["MhchemBugT","mhchem bug T. Please report."]}},_getOperator:function(e){switch(e){case"+":return" {}+{} ";case"-":return" {}-{} ";case"=":return" {}={} ";case"<":return" {}<{} ";case">":return" {}>{} ";case"<<":return" {}\\ll{} ";case">>":return" {}\\gg{} ";case"\\pm":return" {}\\pm{} ";case"\\approx":return" {}\\approx{} ";case"$\\approx$":return" {}\\approx{} ";case"v":return" \\downarrow{} ";case"(v)":return" \\downarrow{} ";case"^":return" \\uparrow{} ";case"(^)":return" \\uparrow{} ";default:throw["MhchemBugT","mhchem bug T. Please report."]}}};class cp{static SETTINGS_KEY="advanced_editor_settings";static loadSettings(){try{const e=localStorage.getItem(this.SETTINGS_KEY);if(e)return JSON.parse(e)}catch(e){console.warn("[SettingsService] Failed to load settings:",e)}return{enabled:!0}}static saveSettings(e){try{return localStorage.setItem(this.SETTINGS_KEY,JSON.stringify(e)),!0}catch(r){return console.warn("[SettingsService] Failed to save settings:",r),!1}}}class Sg{index={};PH="";marks=[];lastLen=0;enabled=!0;constructor(e,r=!0){this.enabled=r,this.buildIndex(e)}buildIndex(e){this.index={};for(const r of e){const n={...r,trigLen:r.trigger.length,trigLast:r.trigger.slice(-1)};(this.index[n.trigLast]??={})[n.trigLen]??=[],this.index[n.trigLast][n.trigLen].push(n)}}setEnabled(e){this.enabled=e}getEnabled(){return this.enabled}jumpTab(e){if(!this.enabled||!this.marks.length)return!1;const r=this.marks.shift();return e.selectionStart=e.selectionEnd=r.start,!0}shiftMarks(e,r){if(e!==0)for(const n of this.marks)n.start>=r&&(n.start+=e)}tryExpand(e,r,n,a=""){if(!this.enabled)return!1;const i=e.selectionStart;if(i===0)return!1;const l=e.value,u=this.index[l[i-1]];if(!u)return!1;for(const d of Object.keys(u)){const h=+d;if(h>i)continue;const p=l.slice(i-h,i);for(const b of u[h]){if(b.trigger!==p||!r&&p.at(-1)!==a||b.mode==="slow"&&!r||b.scope!=="both"&&b.scope==="math"!==n)continue;const y=l.slice(0,i-h),x=l.slice(i);let _=b.expansion;_=_.replace(/\|\|/g,this.PH),_=_.replace(/\|/g,this.PH),this.marks=[];let k="",S=y.length;for(const C of _.split(this.PH))k+=C,this.marks.push({start:S+C.length}),S+=C.length;const A=this.marks.shift().start;return e.value=y+k+x,e.selectionStart=e.selectionEnd=A,this.lastLen=e.value.length,e.dispatchEvent(new Event("input",{bubbles:!0})),!0}}return!1}handleInput=e=>{const r=e.value.length-this.lastLen;this.lastLen=e.value.length,this.shiftMarks(r,e.selectionStart)};static async load(){const e=[];try{const n="/jd_pages/",a=[`${n}static/snippets/basic.json`,`${n}static/snippets/math.json`,`${n}static/snippets/functions.json`,`${n}static/snippets/analysis.json`,`${n}static/snippets/algebra.json`,`${n}static/snippets/sets.json`,`${n}static/snippets/logic.json`,`${n}static/snippets/ineq.json`,`${n}static/snippets/brackets.json`,`${n}static/snippets/linear_aglebra.json`];for(const i of a)try{const l=await fetch(i);if(l.ok){const d=(await l.json()).snippets||[];Array.isArray(d)&&e.push(...d)}else console.warn(`[SnippetEngine] Failed to load ${i}: HTTP ${l.status}`)}catch(l){console.warn(`[SnippetEngine] Failed to load ${i}:`,l)}}catch(n){console.warn("[SnippetEngine] Failed to load snippet files:",n)}const r={a:"alpha",b:"beta",g:"gamma",d:"delta",e:"varepsilon",z:"zeta",h:"eta",t:"theta",i:"iota",k:"kappa",l:"lambda",m:"mu",n:"nu",x:"xi",o:"omicron",p:"pi",r:"rho",s:"sigma",u:"upsilon",f:"phi",c:"chi",y:"psi",w:"omega"};for(const[n,a]of Object.entries(r))e.push({trigger:`gr${n}`,expansion:`\\${a}`,mode:"fast",scope:"math"}),e.push({trigger:`gr${n.toUpperCase()}`,expansion:`\\${a.charAt(0).toUpperCase()+a.slice(1)}`,mode:"fast",scope:"math"});for(const n of"ABCDEFGHIJKLMNOPQRSTUVWXYZ")e.push({trigger:`bb${n}`,expansion:`\\mathbb{${n}}`,mode:"fast",scope:"math"}),e.push({trigger:`cal${n}`,expansion:`\\mathcal{${n}}`,mode:"fast",scope:"math"});return e.length===0&&(console.warn("[SnippetEngine] No snippets loaded from files, using defaults"),e.push({trigger:"dm",expansion:"\\[ || \\]",mode:"slow",scope:"text"},{trigger:"mk",expansion:"$||$",mode:"slow",scope:"text"})),new Sg(e,!0)}}function W9(){const[t,e]=T.useState(null),[r,n]=T.useState(!0),[a,i]=T.useState(()=>cp.loadSettings().enabled);return T.useEffect(()=>{(async()=>{try{const p=await Sg.load();p.setEnabled(a),e(p)}finally{n(!1)}})()},[]),{isLoading:r,snippetsEnabled:a,toggleSnippets:h=>{i(h),t&&t.setEnabled(h);const p=cp.loadSettings();p.enabled=h,cp.saveSettings(p)},handleInput:h=>{t&&t.handleInput(h)},handleKeyDown:h=>{if(!t||!a)return;const p=h.currentTarget,b=p.value.slice(0,p.selectionStart),y=(b.match(/\$/g)||[]).length,x=(b.match(/\\\[/g)||[]).length,_=(b.match(/\\\]/g)||[]).length,k=y%2===1||x>_;if(h.key==="Tab"){const A=p.value[p.selectionStart-1]??"";(t.tryExpand(p,!0,k,A)||t.jumpTab(p))&&h.preventDefault();return}(h.key.length===1?h.key:"")&&requestAnimationFrame(()=>{const A=p.value[p.selectionStart-1]??"";t.tryExpand(p,!1,k,A)})}}}function EH({isOpen:t,onClose:e,onSelect:r}){const[n,a]=T.useState(null),[i,l]=T.useState(null),u=T.useRef(null),d=8,h=8;T.useEffect(()=>{const y=x=>{u.current&&!u.current.contains(x.target)&&e()};return t&&document.addEventListener("mousedown",y),()=>{document.removeEventListener("mousedown",y)}},[t,e]);const p=(y,x)=>{a({row:y,col:x}),l({rows:y+1,cols:x+1})},b=()=>{i&&(r(i.rows,i.cols),e())};return t?m.jsxs("div",{ref:u,className:"absolute top-full left-0 mt-1 p-3 rounded-lg shadow-lg z-50 border",style:{backgroundColor:"var(--bg-panel)",borderColor:"var(--border-primary)"},children:[m.jsx("div",{className:"mb-2 text-sm font-medium",style:{color:"var(--text-primary)"},children:"Vlj tabellstorlek"}),m.jsx("div",{className:"grid gap-1 mb-3",children:Array.from({length:d},(y,x)=>m.jsx("div",{className:"flex gap-1",children:Array.from({length:h},(_,k)=>{const S=n&&x<=n.row&&k<=n.col,A=i&&x<i.rows&&k<i.cols;return m.jsx("div",{className:`w-6 h-6 border rounded cursor-pointer transition-all duration-200 ${S||A?"bg-accent-primary border-accent-primary":"border-border hover:border-accent-primary/50"}`,onMouseEnter:()=>p(x,k),onClick:b,style:{backgroundColor:S||A?"var(--accent-primary)":"transparent",borderColor:S||A?"var(--accent-primary)":"var(--border-primary)"}},k)})},x))}),i&&m.jsxs("div",{className:"text-xs text-center",style:{color:"var(--text-secondary)"},children:[i.rows,"  ",i.cols," tabell"]})]}):null}function CH({onBold:t,onItalic:e,onUnderline:r,onInsertTable:n,onInsertCode:a,onInsertImage:i,onInsertList:l,snippetsEnabled:u=!1,onToggleSnippets:d,snippetsLoading:h=!1}){const[p,b]=T.useState(!1),[y,x]=T.useState(!1),_=T.useRef(null);return T.useEffect(()=>{const k=S=>{_.current&&!_.current.contains(S.target)&&b(!1)};return document.addEventListener("mousedown",k),()=>{document.removeEventListener("mousedown",k)}},[]),m.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-lg transition-all duration-200",style:{backgroundColor:"var(--bg-panel)",border:"1px solid var(--border-primary)"},children:[m.jsx("button",{onClick:t,className:"p-2 rounded-lg transition-all duration-200 hover:bg-accent-primary/10 hover:scale-105 active:scale-95",style:{color:"var(--text-primary)"},title:"Fet text",children:m.jsx($N,{size:16})}),m.jsx("button",{onClick:e,className:"p-2 rounded-lg transition-all duration-200 hover:bg-accent-primary/10 hover:scale-105 active:scale-95",style:{color:"var(--text-primary)"},title:"Kursiv text",children:m.jsx(PM,{size:16})}),m.jsx("button",{onClick:r,className:"p-2 rounded-lg transition-all duration-200 hover:bg-accent-primary/10 hover:scale-105 active:scale-95",style:{color:"var(--text-primary)"},title:"Understruken text",children:m.jsx(Tj,{size:16})}),m.jsx("div",{className:"w-px h-6",style:{backgroundColor:"var(--border-secondary)"}}),m.jsxs("div",{className:"relative",children:[m.jsx("button",{onClick:()=>x(!y),className:"p-2 rounded-lg transition-all duration-200 hover:bg-accent-primary/10 hover:scale-105 active:scale-95",style:{color:"var(--text-primary)"},title:"Infoga tabell",children:m.jsx(_j,{size:16})}),m.jsx(EH,{isOpen:y,onClose:()=>x(!1),onSelect:(k,S)=>{n(k,S),x(!1)}})]}),m.jsx("button",{onClick:a,className:"p-2 rounded-lg transition-all duration-200 hover:bg-accent-primary/10 hover:scale-105 active:scale-95",style:{color:"var(--text-primary)"},title:"Infoga kod-block",children:m.jsx(i8,{size:16})}),m.jsx("button",{onClick:i,className:"p-2 rounded-lg transition-all duration-200 hover:bg-accent-primary/10 hover:scale-105 active:scale-95",style:{color:"var(--text-primary)"},title:"Infoga bild",children:m.jsx(RM,{size:16})}),m.jsx("div",{className:"w-px h-6",style:{backgroundColor:"var(--border-secondary)"}}),m.jsxs("div",{className:"relative",ref:_,children:[m.jsxs("button",{onClick:()=>b(!p),className:"p-2 rounded-lg transition-all duration-200 hover:bg-accent-primary/10 hover:scale-105 active:scale-95 flex items-center gap-1",style:{color:"var(--text-primary)"},title:"Infoga lista",children:[m.jsx(VM,{size:16}),m.jsx(ko,{size:12,className:`transition-transform duration-200 ${p?"rotate-180":""}`})]}),p&&m.jsxs("div",{className:"absolute top-full left-0 mt-1 rounded-lg shadow-lg z-10 min-w-[140px] border",style:{backgroundColor:"var(--bg-panel)",borderColor:"var(--border-primary)"},children:[m.jsxs("button",{onClick:()=>{l("bullet"),b(!1)},className:"w-full text-left px-3 py-2 text-sm hover:bg-accent-primary/10 transition-colors duration-200 flex items-center gap-2",style:{color:"var(--text-primary)"},children:[m.jsx(lM,{size:12}),"Punktlista"]}),m.jsxs("button",{onClick:()=>{l("numbered"),b(!1)},className:"w-full text-left px-3 py-2 text-sm hover:bg-accent-primary/10 transition-colors duration-200 flex items-center gap-2",style:{color:"var(--text-primary)"},children:[m.jsx(jM,{size:12}),"Numrerad"]}),m.jsxs("button",{onClick:()=>{l("alpha"),b(!1)},className:"w-full text-left px-3 py-2 text-sm hover:bg-accent-primary/10 transition-colors duration-200 flex items-center gap-2",style:{color:"var(--text-primary)"},children:[m.jsx(Ej,{size:12}),"Alfabetisk"]})]})]}),m.jsx("div",{className:"w-px h-6",style:{backgroundColor:"var(--border-secondary)"}}),d&&m.jsxs("button",{onClick:()=>d(!u),disabled:h,className:`flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs font-medium transition-all duration-200 hover:scale-105 active:scale-95 ${u?"bg-accent-primary text-white shadow-sm":"bg-panel text-primary hover:bg-accent-primary/10"} ${h?"opacity-40 cursor-not-allowed":""}`,style:{backgroundColor:u?"var(--accent-primary)":"var(--bg-panel)",color:u?"var(--button-text)":"var(--text-primary)",border:"1px solid var(--border-primary)"},title:"Snippets",children:[m.jsx(Lj,{size:16}),m.jsx("span",{className:"font-mono",children:"SNIPPETS"})]})]})}function TH({textareaRef:t,value:e,setValue:r,onChange:n,onImagePaste:a,addNotification:i}){const l=T.useMemo(()=>["image/png","image/jpeg","image/jpg"],[]),u=2*1024*1024,d=T.useCallback((x,_)=>{if(!a||!l.includes(x.type))return;if(x.size>u){i({title:"Fr stor fil",message:`Filen r fr stor. Maximal storlek r 2 MB, men filen r ${(x.size/(1024*1024)).toFixed(1)} MB.`,type:"error",duration:6e3});return}const k=URL.createObjectURL(x),S=`img_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,A=`\\includegraphics[width=\\linewidth]{${S}}`,C=t.current;let N,D;_?{start:N,end:D}=_:C?(N=C.selectionStart,D=C.selectionEnd):(N=e.length,D=e.length);const j=e.substring(0,N)+`
`+A+`
`+e.substring(D);r(j),n(j),a?.({id:S,blobUrl:k,file:x,placeholderText:A}),i({title:"Bild tillagd",message:`Bild "${x.name}" har lagts till i editorn`,type:"success",duration:3e3})},[l,u,a,i,t,e,r,n]),h=T.useCallback(x=>{const _=x.clipboardData.items;for(let k=0;k<_.length;k++){const S=_[k];if(S.kind==="file"&&S.type.startsWith("image/")){x.preventDefault();const A=S.getAsFile();if(A){const C=x.currentTarget;d(A,{start:C.selectionStart,end:C.selectionEnd})}return}}},[d]),p=T.useCallback(x=>{x.preventDefault();const _=Array.from(x.dataTransfer.files).filter(S=>S.type.startsWith("image/"));if(!_.length)return;const k=x.currentTarget;d(_[0],{start:k.selectionStart,end:k.selectionEnd})},[d]),b=T.useCallback(x=>{x.preventDefault(),x.dataTransfer.dropEffect="copy"},[]),y=T.useCallback(()=>{const x=document.createElement("input");x.type="file",x.accept="image/*",x.onchange=_=>{const k=_.target.files?.[0];if(k){const S=t.current,A=S?{start:S.selectionStart,end:S.selectionEnd}:void 0;d(k,A)}},x.click()},[t,d]);return{handlePaste:h,handleDrop:p,handleDragOver:b,insertImage:y}}function NH({textareaRef:t,setSrc:e,onChange:r}){const n=T.useCallback((u,d)=>{const h=t.current;if(!h)return;const p=h.selectionStart,b=h.selectionEnd,y=h.value.substring(p,b),x=u+y+d,_=h.value.substring(0,p)+x+h.value.substring(b);e(_),r(_),setTimeout(()=>{h.setSelectionRange(p+u.length,p+u.length+y.length),h.focus()},0)},[t,e,r]),a=T.useCallback((u,d)=>{const h=t.current;if(!h)return;let p,b;u&&d?(p=Math.max(1,Math.min(10,d)),b=Math.max(2,Math.min(20,u))):(p=Math.max(1,Math.min(10,Number(prompt("Antal kolumner (1-10):","3"))||3)),b=Math.max(2,Math.min(20,Number(prompt("Antal rader (inkl. header, 2-20):","3"))||3)));const y=`| ${Array.from({length:p},(C,N)=>`Kolumn ${N+1}`).join(" | ")} |`,x=`|${Array(p).fill("-------").join("|")}|`,_=Array.from({length:b-1},(C,N)=>`| ${Array.from({length:p},(D,j)=>`Data ${N+1}-${j+1}`).join(" | ")} |`).join(`
`),k=`
${y}
${x}
${_}
`,S=h.selectionStart,A=h.value.slice(0,S)+k+h.value.slice(S);e(A),r(A),setTimeout(()=>{const C=S+k.length;h.setSelectionRange(C,C),h.focus()},0)},[t,e,r]),i=T.useCallback(()=>{const u=t.current;if(!u)return;const d='\n```python\n# Din kod hr\nprint("Hello, World!")\n```\n',h=u.selectionStart,p=u.value.slice(0,h)+d+u.value.slice(h);e(p),r(p),setTimeout(()=>{const b=h+d.indexOf("#")+1;u.setSelectionRange(b,b),u.focus()},0)},[t,e,r]),l=T.useCallback(u=>{const d=t.current;if(!d)return;const h=d.selectionStart,p=d.selectionEnd,b=d.value.substring(h,p),y=b.trim()?b.split(`
`).filter(k=>k.trim()):["Item 1","Item 2","Item 3"];let x;u==="alpha"?x=`
${y.map((S,A)=>`${String.fromCharCode(97+A)}. ${S}`).join(`
`)}
`:x=y.map((k,S)=>u==="bullet"?`- ${k}`:`${S+1}. ${k}`).join(`
`);const _=d.value.substring(0,h)+x+d.value.substring(p);e(_),r(_),setTimeout(()=>{const k=h+x.length;d.setSelectionRange(k,k),d.focus()},0)},[t,e,r]);return{wrapText:n,insertTable:a,insertCode:i,insertList:l}}const MH=({value:t,onChange:e,placeholder:r="Skriv din uppgift hr...",className:n="",onImagePaste:a,pendingImages:i=[],showPreview:l=!0})=>{const[u,d]=T.useState(t),{isLoading:h,snippetsEnabled:p,toggleSnippets:b,handleInput:y,handleKeyDown:x}=W9(),_=T.useRef(null),k=T.useRef(null),{handlePaste:S,handleDrop:A,handleDragOver:C,insertImage:N}=TH({textareaRef:k,value:u,setValue:d,onChange:e,onImagePaste:a,addNotification:()=>{}});T.useEffect(()=>{if(k.current){const $=k.current;$.style.height="auto",$.style.height=Math.max($.scrollHeight,240)+"px"}},[u]),T.useEffect(()=>{if(!(!l||!_.current))try{let $=u;$=$.replace(/\uFFFD/g,""),$=$.replace(/[\u200B-\u200D\uFEFF]/g,""),$=$.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>"),$=$.replace(/<b>(.*?)<\/b>/g,"<strong>$1</strong>"),$=$.replace(new RegExp("(?<!\\*)\\*(?!\\*)([^*]+)\\*(?!\\*)","g"),"<em>$1</em>"),$=$.replace(/<i>(.*?)<\/i>/g,"<em>$1</em>"),$=$.replace(/<u>(.*?)<\/u>/g,"<u>$1</u>"),$=$.replace(/```(\w+)?\n(.*?)```/gs,(G,le,ie)=>{const pe=ie.replace(/</g,"&lt;").replace(/>/g,"&gt;");return`<pre class="code-block"${le?` data-lang="${le}"`:""}><code>${pe}</code></pre>`}),$=$.replace(/`([^`]+)`/g,'<code class="inline-code">$1</code>'),$=$.replace(/^(\s*- .+(?:\n\s*- .+)*)/gm,G=>`<ul class="markdown-list">${G.split(`
`).filter(ie=>ie.trim()).map(ie=>`<li>${ie.replace(/^\s*- /,"").trim()}</li>`).join("")}</ul>`),$=$.replace(/^(\s*\d+\. .+(?:\n\s*\d+\. .+)*)/gm,G=>`<ol class="markdown-list">${G.split(`
`).filter(ie=>ie.trim()).map(ie=>`<li>${ie.replace(/^\s*\d+\. /,"").trim()}</li>`).join("")}</ol>`),$=$.replace(/^(\s*[a-z]\. .+(?:\n\s*[a-z]\. .+)*)/gm,G=>`<ol class="markdown-list alpha-list">${G.split(`
`).filter(ie=>ie.trim()).map(ie=>`<li>${ie.replace(/^\s*[a-z]\. /,"").trim()}</li>`).join("")}</ol>`),$=wi($,i),$=$.replace(/\$\$([\s\S]*?)\$\$/g,(G,le)=>{try{return Es.renderToString(le,{displayMode:!0,throwOnError:!1,strict:!1})}catch(ie){return`<span class="text-red-500">${ie instanceof Error?ie.message:"Unknown error"}</span>`}}),$=$.replace(/\$(.*?)\$/g,(G,le)=>{try{return Es.renderToString(le,{displayMode:!1,throwOnError:!1,strict:!1})}catch(ie){return`<span class="text-red-500">${ie instanceof Error?ie.message:"Unknown error"}</span>`}}),$=$.replace(/\\\((.*?)\\\)/g,(G,le)=>{try{return Es.renderToString(le,{displayMode:!1,throwOnError:!1,strict:!1})}catch(ie){return`<span class="text-red-500">${ie instanceof Error?ie.message:"Unknown error"}</span>`}}),$=$.replace(/\\\[([\s\S]*?)\\\]/g,(G,le)=>{try{return Es.renderToString(le,{displayMode:!0,throwOnError:!1,strict:!1})}catch(ie){return`<span class="text-red-500">${ie instanceof Error?ie.message:"Unknown error"}</span>`}}),_.current.innerHTML=$}catch($){_.current&&(_.current.innerHTML=`<span class="text-red-500 text-sm">Rendering error: ${$ instanceof Error?$.message:"Unknown error"}</span>`)}},[u,i,l]),T.useEffect(()=>{d(t)},[t]);const D=$=>{const G=$.target.value;d(G),e(G),y($.currentTarget);const le=$.currentTarget;le.style.height="auto",le.style.height=Math.max(le.scrollHeight,240)+"px"},j=$=>{const G=$.currentTarget;if($.ctrlKey||$.metaKey)switch($.key.toLowerCase()){case"b":$.preventDefault(),O("**","**");return;case"i":$.preventDefault(),O("*","*");return;case"u":$.preventDefault(),O("++","++");return}x($);const le=()=>{const ie=G.value;ie!==u&&(d(ie),e(ie))};requestAnimationFrame(()=>{le(),setTimeout(le,0)})},{wrapText:O,insertTable:F,insertCode:R,insertList:B}=NH({textareaRef:k,setSrc:d,onChange:e}),V=T.useRef(null);return T.useEffect(()=>{V.current=new _n({html:!1,linkify:!0,breaks:!0,typographer:!1})},[]),m.jsxs("div",{className:`flex flex-col gap-2 ${n}`,children:[m.jsx(CH,{onBold:()=>O("**","**"),onItalic:()=>O("*","*"),onUnderline:()=>O("++","++"),onInsertTable:F,onInsertCode:R,onInsertImage:N,onInsertList:B,snippetsEnabled:p,onToggleSnippets:b,snippetsLoading:h}),m.jsx("div",{className:"flex gap-4",children:m.jsxs("div",{className:"relative w-full",children:[m.jsx("label",{className:"text-sm font-medium text-primary mb-2"}),m.jsx("div",{className:"relative w-full",children:m.jsx("textarea",{ref:k,value:u,onChange:D,onKeyDown:j,onPaste:S,onDrop:A,onDragOver:C,placeholder:r,className:"editor-panel w-full text-primary bg-panel resize-none",style:{minHeight:"240px",border:"1px solid var(--border-primary)",borderRadius:"0.5rem"}})})]})})]})};function jH({assessmentItems:t,onChange:e,areaId:r=void 0,problemId:n=null,availableAbilities:a}){const i=t||[],{handleInput:l,handleKeyDown:u}=W9(),{problemParent:d}=t9(n),h=r??d?.area_id??null,{parentPath:p}=oc("area",h),b=p?.subject_id??null,{data:y,isError:x,isLoading:_}=r7(b),k=a||(y?.map(O=>O.ability_code)??[]),S=()=>{const O={ability_code:"Pl",level_code:"E",max_points:1,description_text:""};e([...i,O])},[A,C]=T.useState({}),N=O=>{C(F=>({...F,[O]:!F[O]}))};T.useEffect(()=>{const O=F=>{F.target.closest(".popover-container")||C({})};return document.addEventListener("mousedown",O),()=>document.removeEventListener("mousedown",O)},[]);const D=(O,F,R)=>{const B=[...i];B[O]={...B[O],[F]:R},e(B)},j=O=>{const F=i.filter((R,B)=>B!==O);e(F)};return m.jsxs("div",{className:"space-y-4",children:[_&&m.jsx("div",{className:"text-sm text-blue-600 bg-blue-50 border border-blue-300 p-2 rounded",children:"Hmtar frmgor fr mnet..."}),x&&m.jsxs("div",{className:"text-sm text-orange-600 bg-orange-50 border border-orange-300 p-2 rounded",children:["Kunde inte hmta mnets frmgor frn API  anvnder fallbacklista. Kontrollera ntverk eller backend.",m.jsx("br",{}),m.jsxs("small",{children:["Debug: areaId=",r,", abilities count=",y?.length||0]})]}),m.jsx("div",{className:"flex justify-end",children:m.jsxs("button",{onClick:S,className:"flex items-center gap-2 px-3 py-2 text-sm bg-accent text-white rounded-lg hover:bg-accent-secondary transition-all duration-200 hover:scale-105 active:scale-95",children:[m.jsx(Za,{size:16}),m.jsx("span",{children:"Lgg till bedmning"})]})}),i.length===0&&m.jsxs("div",{className:"text-center py-8 text-muted",children:[m.jsx("p",{children:"Inga bedmningsanvisningar n."}),m.jsx("p",{className:"text-sm mt-2",children:'Klicka "Lgg till" fr att skapa en.'})]}),m.jsx("div",{className:"space-y-2",children:i.map((O,F)=>m.jsxs("div",{className:"flex items-center gap-2 p-3 border border-panel rounded bg-panel",children:[m.jsxs("div",{className:"relative popover-container",children:[m.jsx("button",{onClick:()=>N(`points-${F}`),className:"px-2 py-1 text-xs border rounded bg-panel text-primary hover:bg-secondary transition-colors font-mono",style:{fontFamily:"Roboto Mono, monospace",fontSize:"12px"},children:O.max_points}),A[`points-${F}`]&&m.jsx("div",{className:"absolute top-full left-0 mt-1 bg-panel border border-border rounded shadow-lg z-10 min-w-[60px]",children:[1,2,3,4,5,6,7,8,9,10].map(R=>m.jsx("button",{onClick:()=>{D(F,"max_points",R),N(`points-${F}`)},className:"block w-full px-2 py-1 text-xs text-left hover:bg-secondary font-mono",style:{fontFamily:"Roboto Mono, monospace",fontSize:"12px"},children:R},R))})]}),m.jsxs("div",{className:"relative popover-container",children:[m.jsx("button",{onClick:()=>N(`ability-${F}`),className:"px-2 py-1 text-xs border rounded bg-panel text-primary hover:bg-secondary transition-colors font-mono",style:{fontFamily:"Roboto Mono, monospace",fontSize:"12px"},children:O.ability_code}),A[`ability-${F}`]&&m.jsx("div",{className:"absolute top-full left-0 mt-1 bg-panel border border-border rounded shadow-lg z-10 min-w-[80px] max-h-40 overflow-y-auto",children:k.map(R=>m.jsx("button",{onClick:()=>{D(F,"ability_code",R),N(`ability-${F}`)},className:"block w-full px-2 py-1 text-xs text-left hover:bg-secondary font-mono",style:{fontFamily:"Roboto Mono, monospace",fontSize:"12px"},children:R},R))})]}),m.jsxs("div",{className:"relative popover-container",children:[m.jsx("button",{onClick:()=>N(`level-${F}`),className:"px-2 py-1 text-xs border rounded bg-panel text-primary hover:bg-secondary transition-colors font-mono",style:{fontFamily:"Roboto Mono, monospace",fontSize:"12px"},children:O.level_code}),A[`level-${F}`]&&m.jsx("div",{className:"absolute top-full left-0 mt-1 bg-panel border border-border rounded shadow-lg z-10 min-w-[40px]",children:["E","C","A"].map(R=>m.jsx("button",{onClick:()=>{D(F,"level_code",R),N(`level-${F}`)},className:"block w-full px-2 py-1 text-xs text-left hover:bg-secondary font-mono",style:{fontFamily:"Roboto Mono, monospace",fontSize:"12px"},children:R},R))})]}),m.jsx("textarea",{value:O.description_text,onChange:R=>{l(R.target),D(F,"description_text",R.target.value)},onKeyDown:R=>{u(R);const B=R.currentTarget,V=()=>{B&&B.value!==O.description_text&&D(F,"description_text",B.value)};requestAnimationFrame(()=>{V(),setTimeout(V,0)})},placeholder:"Beskrivning av bedmning",className:"flex-1 px-2 py-1 text-xs border rounded bg-panel text-primary font-mono",style:{fontFamily:"Roboto Mono, monospace",fontSize:"12px",minHeight:"48px"},rows:1,ref:R=>{R&&(R.style.height="auto",R.style.height=Math.max(R.scrollHeight,48)+"px")},onInput:R=>{const B=R.target;B.style.height="auto",B.style.height=Math.max(B.scrollHeight,48)+"px"}}),m.jsx("button",{onClick:()=>j(F),className:"px-2 py-1 text-sm text-red-500 hover:text-red-600 transition-all duration-200 hover:scale-105 active:scale-95",title:"Ta bort",children:m.jsx(xa,{size:14})})]},F))}),m.jsx("div",{className:"h-8"})]})}function DH({trigger:t,children:e,isOpen:r,onOpenChange:n,onClose:a,disabled:i=!1,className:l="",popoverClassName:u=""}){const[d,h]=T.useState(!1),[p,b]=T.useState(!1),y=T.useRef(null),x=T.useRef(null),_=r!==void 0?r:d,k=T.useCallback(N=>{r!==void 0?n?.(N):h(N),N||a?.()},[r,n,a]),S=T.useCallback(()=>{b(!0)},[]),A=T.useCallback(()=>{b(!1),setTimeout(()=>{p||k(!1)},100)},[p,k]);T.useEffect(()=>{const N=D=>{const j=D.target,O=y.current?.contains(j),F=x.current?.contains(j);!O&&!F&&setTimeout(()=>{p||k(!1)},150)};if(_)return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[_,p,k]);const C=T.useCallback(()=>{i||k(!_)},[i,_,k]);return m.jsxs("div",{className:`relative ${l}`,children:[m.jsx("div",{ref:y,onClick:C,onMouseEnter:S,onMouseLeave:A,children:t}),_&&!i&&m.jsx("div",{ref:x,className:`absolute top-full left-0 mt-1 z-50 ${u}`,onMouseEnter:S,onMouseLeave:A,children:e})]})}function zH({value:t,onChange:e,error:r=!1,disabled:n=!1,placeholder:a="Vlj omrde"}){const[i,l]=rt.useState(""),[u,d]=rt.useState(!1),[h,p]=rt.useState(new Set),{hierarchy:b}=e9(),{parentPath:y}=oc("area",t||null);rt.useEffect(()=>{if(t!==void 0&&b.length>0){const C=D=>{for(const j of D){if(j.type==="area"&&j.id===t)return j.title;if(j.children){const O=C(j.children);if(O)return O}}return null},N=C(b);l(N||`Omrde ${t}`)}else l("")},[t,b]);const x=rt.useRef(!1);rt.useEffect(()=>{if(!u){x.current=!1;return}if(u&&!x.current&&t!==void 0&&y){Yr.fetchPreExpansion(y).catch(()=>{}),x.current=!0;const C=new Set;y.subject_id&&C.add(`subject-${y.subject_id}`),y.course_id&&C.add(`course-${y.course_id}`),y.chapter_id&&C.add(`chapter-${y.chapter_id}`),p(C)}},[u,t,y]);const _=C=>{C&&C.type==="area"&&(e(C.id),l(C.title),d(!1))},k=t?`area-${t}`:void 0,S=m.jsxs("button",{type:"button",disabled:n,className:`w-full p-3 border rounded-lg bg-panel text-primary text-left transition-colors hover:bg-secondary flex items-center justify-between ${r?"border-red-500":"border-border"} ${n?"opacity-40 cursor-not-allowed":"cursor-pointer"}`,children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(ej,{size:16,style:{color:"var(--text-secondary)"}}),m.jsx("span",{className:"truncate",children:i||a})]}),m.jsx(ko,{size:16,className:"transition-transform duration-200",style:{color:"var(--text-secondary)"}})]}),A=m.jsxs("div",{className:"w-96 max-h-[500px] bg-panel border border-border rounded-lg shadow-lg overflow-hidden",children:[m.jsx("div",{className:"p-3 border-b border-border",children:m.jsx("h3",{className:"text-sm font-medium text-primary",children:"Vlj omrde"})}),m.jsx("div",{className:"max-h-[450px] overflow-y-auto hide-scrollbar",children:m.jsx(k8,{onSelect:_,height:420,selectedNodeId:k,expandedNodes:h})})]});return m.jsx(DH,{trigger:S,disabled:n,popoverClassName:"z-50",isOpen:u,onOpenChange:d,children:A})}const V6={is_digital:m.jsx(u8,{size:14}),is_np:m.jsx(xc,{size:14}),is_s:m.jsx(vl,{size:14}),is_r:m.jsx(Lc,{size:14}),is_fake:m.jsx(a8,{size:14}),is_elev:m.jsx(o8,{size:14}),is_whole:m.jsx(k2,{size:14})},G6={is_public:m.jsx(TM,{size:14}),request_publish:m.jsx(_l,{size:14})};function OH({pendingImages:t,flags:e,extraFlags:r,dispatchFlags:n,dispatchExtraFlags:a,onImagePaste:i,existingProblem:l}){const{isTrustedOrHigher:u,isUserOrHigher:d}=Aa(),{register:h,watch:p,setValue:b,formState:{errors:y},trigger:x}=C2(),{hierarchy:_,loading:k}=e9(),[S,A]=T.useState(p("promptTex")||""),C=l?.bank_problem_definition_id??null,{problemParent:N}=t9(C),D=rt.useRef(null);rt.useEffect(()=>{D.current=null},[C]),rt.useEffect(()=>{N?.area_id&&D.current!==N.area_id&&(b("areaId",N.area_id,{shouldValidate:!0}),D.current=N.area_id)},[N?.area_id,b]),T.useEffect(()=>{const R=p((B,{name:V})=>{V==="promptTex"&&B.promptTex!==S&&A(B.promptTex||"")});return()=>R.unsubscribe()},[p,S]);const j=p("promptTex");T.useEffect(()=>{j!==S&&A(j||"")},[j,S,p]);const O=T.useCallback(R=>{A(R),b("promptTex",R)},[b]),F=T.useCallback(R=>{const V={is_s:{title:"Original",message:"Du r ensam upphovsperson till denna uppgift. Den r skapad av dig utan att direkt baseras p annat material."},is_np:{title:"NP",message:"Uppgiften kommer frn ett tidigare nationellt prov (Skolverket). Den har transkriberats eller anpassats, men ursprunget r officiellt."},is_r:{title:"Ln",message:"Uppgiften bygger p annat material t.ex. lrobok, tidigare elevlsning, frelsning eller internetresurs."},is_fake:{title:"AI",message:"Uppgiften r skapad med hjlp av en AI-modell."}}[R];V&&Me("info",V.title,V.message,4e3)},[]);return m.jsxs("div",{className:"flex flex-col gap-6 h-full pr-2",children:[m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(zH,{value:p("areaId"),onChange:R=>{R!==void 0&&b("areaId",R,{shouldValidate:!0})},error:!!y.areaId,disabled:k,placeholder:"Vlj omrde *",existingProblemAreaId:l?.area_id}),y.areaId&&m.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center gap-1",children:[m.jsx("span",{className:"text-red-500",children:""}),y.areaId.message]})]}),m.jsx("div",{className:"space-y-2",children:m.jsx("input",{...h("title",{onChange:()=>x("title")}),placeholder:"Titel (valfritt)",className:"w-full p-3 border border-border rounded-lg bg-panel text-primary focus:ring-2 focus:ring-accent-primary/20 focus:border-accent-primary transition-colors"})})]}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[["is_s","is_np","is_r","is_fake"].map(R=>{const B=R,V=e[B];return m.jsxs("button",{onClick:()=>{n&&(n({type:"toggle-primary",flag:B}),V||F(B))},className:`flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs font-medium transition-all duration-200 hover:scale-105 active:scale-95 ${V?"bg-accent-primary text-white shadow-sm":"bg-panel text-primary hover:bg-accent-primary/10"}`,style:{backgroundColor:V?"var(--accent-primary)":"var(--bg-panel)",color:V?"var(--button-text)":"var(--text-primary)",border:"1px solid var(--border-primary)"},title:`${Od[B]}`,children:[V6[B],m.jsx("span",{className:"font-mono",children:Od[B]})]},B)}),m.jsx("input",{...h("source_reference",{maxLength:40,onChange:()=>x("source_reference")}),placeholder:"Kort kllhnvisning (valfritt)",className:"flex-1 min-w-[200px] px-3 py-1.5 text-xs border border-border rounded-lg bg-panel text-primary focus:ring-2 focus:ring-accent-primary/20 focus:border-accent-primary transition-colors"})]}),m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("div",{className:"flex gap-2",children:["is_elev","is_whole"].map(R=>{const B=R,V=e[B];return m.jsxs("button",{onClick:()=>{n&&n({type:"toggle",flag:B})},className:`flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs font-medium transition-all duration-200 hover:scale-105 active:scale-95 ${V?"bg-accent-primary text-white shadow-sm":"bg-panel text-primary hover:bg-accent-primary/10"}`,style:{backgroundColor:V?"var(--accent-primary)":"var(--bg-panel)",color:V?"var(--button-text)":"var(--text-primary)",border:"1px solid var(--border-primary)"},title:`${Od[B]}`,children:[V6[B],m.jsx("span",{className:"font-mono",children:Od[B]})]},B)})}),m.jsxs("div",{className:"flex gap-2",children:[u()&&m.jsxs("button",{onClick:()=>a?.({type:"toggle-public"}),className:`flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs font-medium transition-all duration-200 hover:scale-105 active:scale-95 ${r.is_public?"bg-accent-primary text-white shadow-sm":"bg-panel text-primary hover:bg-accent-primary/10"}`,style:{backgroundColor:r.is_public?"var(--accent-primary)":"var(--bg-panel)",color:r.is_public?"var(--button-text)":"var(--text-primary)",border:"1px solid var(--border-primary)"},title:"Offentliggr uppgift fr alla",disabled:!u(),children:[G6.is_public,m.jsx("span",{className:"font-mono",children:o6.is_public})]}),m.jsxs("button",{onClick:()=>a?.({type:"toggle-request"}),className:`flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs font-medium transition-all duration-200 hover:scale-105 active:scale-95 ${r.request_publish?"bg-accent-primary text-white shadow-sm":"bg-panel text-primary hover:bg-accent-primary/10"}`,style:{backgroundColor:r.request_publish?"var(--accent-primary)":"var(--bg-panel)",color:r.request_publish?"var(--button-text)":"var(--text-primary)",border:"1px solid var(--border-primary)"},title:"Dela uppgift endast med andra registrerade anvndare",disabled:!d(),children:[G6.request_publish,m.jsx("span",{className:"font-mono",children:o6.request_publish})]})]})]}),y.flags&&m.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center gap-1",children:[m.jsx("span",{className:"text-red-500",children:""}),y.flags.message]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(MH,{value:S,onChange:O,onImagePaste:i,pendingImages:t,placeholder:"Problemtext *",className:"h-full",showPreview:!1}),y.promptTex&&m.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center gap-1",children:[m.jsx("span",{className:"text-red-500",children:""}),y.promptTex.message]})]}),m.jsx(jH,{assessmentItems:p("assessment"),onChange:R=>{b("assessment",R,{shouldValidate:!0}),x("assessment")},areaId:p("areaId"),problemId:l?.bank_problem_definition_id??null,hierarchy:_}),y.assessment&&m.jsx("p",{className:"text-red-500 text-sm mt-1",children:y.assessment.message})]})}function RH({pendingImages:t=[],existingProblem:e}){const{watch:r}=C2(),n=r("promptTex")||"",a=r("title")||"",i=r("assessment")||[],l=T.useMemo(()=>i.map(d=>({max_points:d.max_points,ability_code:d.ability_code,level_code:d.level_code,description_text:d.description_text||""})),[i]),u=T.useMemo(()=>{let d=n;for(const h of t){const p=new RegExp(h.id,"g");d=d.replace(p,h.blobUrl)}return e?{...e,prompt_tex:d,title:a||e.title,assessment_items:l}:{bank_problem_definition_id:"draft",prompt_tex:d,title:a||void 0,assessment_items:l}},[n,a,l,t,e]);return m.jsx("div",{className:"h-full flex flex-col",children:m.jsx("div",{className:"flex-1 min-h-0",children:m.jsx(Fh,{problem:u,mode:"preview",pendingImages:t})})})}function FH({problemIds:t,onAddToMemory:e,onRemoveFromMemory:r,showRemoveButtons:n=!1}){const{data:a=[]}=jh(t);return a.length===0?m.jsx("div",{className:"text-center py-8",style:{color:"var(--text-muted)"},children:"Laddar liknande problem..."}):m.jsx("div",{className:"h-full",children:m.jsx(Fh,{problems:a,mode:"list",showRemoveButtons:n,onAddToMemory:e,onRemoveFromMemory:r})})}function LH({isOpen:t,similarProblems:e,onProceed:r,onCancel:n}){if(!t)return null;const a=(u,d)=>{console.log(`Add to memory: ${u}, part: ${d}`)},i=(u,d)=>{console.log(`Remove from memory: ${u}, part: ${d}`)},l=m.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",children:m.jsxs("div",{className:"bg-panel border border-border rounded-lg shadow-xl w-full max-w-3xl max-h-[90vh] overflow-y-auto p-6",children:[m.jsx("h3",{className:"text-lg font-semibold mb-4 text-primary",children:"Liknande uppgifter hittades"}),e.length===0?m.jsx("div",{className:"text-center",children:"Laddar"}):m.jsx("div",{className:"h-96",children:m.jsx(FH,{problemIds:e.map(u=>u.bank_problem_definition_id),onAddToMemory:a,onRemoveFromMemory:i,showRemoveButtons:!1})}),m.jsxs("div",{className:"mt-4 flex justify-end gap-4 sticky bottom-0 bg-panel pt-4",children:[m.jsx("button",{className:"border px-4 py-2 rounded",onClick:n,children:"Redigera"}),m.jsx("button",{className:"btn-primary px-4 py-2 rounded",onClick:r,children:"Skapa nd"})]})]})});return gc.createPortal(l,document.body)}function PH({isOpen:t,onClose:e,onSave:r,selectedAreaId:n,selectedNodeIds:a,draftId:i,existingProblem:l}){const u=!!l,{drafts:d,save:h,update:p,remove:b}=rg(),{user:y}=Lr(),x=kt=>{const St=crypto.randomUUID(),ur=new Date().toISOString();return h({id:St,created_at:ur,updated_at:ur,schema_version:1,data:kt}),St},{form:_,flags:k,extraFlags:S,dispatchFlags:A,dispatchExtraFlags:C,isValid:N,resetForm:D,saveDraft:j,draftPendingImages:O}=x$({selectedAreaId:n,draftId:i,existingProblem:l,drafts:d,onDraftUpdate:p,onDraftAdd:x}),{deleteProblem:F,checkSimilarity:R}=_$(),{showSimilarity:B,similarProblems:V,setSimilarIds:$,setShowSimilarity:G,resetSimilarity:le}=w$(),{pendingImages:ie,setPendingImages:pe,addPendingImage:K,clearPendingImages:ue}=A$({draftPendingImages:O}),[Ce,ze]=T.useState(!1),q=k$(y,l),{handleUpdateProblem:ae,handleCreateProblem:we,skipSimilarityRef:be}=S$({form:_,pendingImages:ie,setPendingImages:pe,isEditing:u,existingProblem:l,draftId:i,removeDraft:b,onSave:r,onClose:e,checkSimilarity:R,setSimilarIds:$,setShowSimilarity:G,setSaving:ze}),Se=()=>{ue(),D(),le(),ze(!1),be.current=!1},W=async()=>{await j(ie),Me("success","Utkast sparat","Ditt utkast har sparats och kan teranvndas senare.")},ce=async()=>{if(!(!l||!window.confirm("Radera uppgiften permanent? Detta gr inte att ngra.")))try{await F.mutateAsync({problemId:Number(l.bank_problem_definition_id),permanent:!0}),Me("success","Uppgift raderad","Uppgiften har raderats permanent."),e()}catch{Me("error","Fel vid radering","Kunde inte radera uppgiften. Frsk igen.")}},Ne=async()=>{const kt=_.getValues();if(_.formState.isValid){ze(!0);try{const St={...kt,flags:k,extraFlags:S};u&&l?await ae(St):await we(St)}catch{Me("error","Fel vid sparande","Kunde inte spara uppgiften. Frsk igen.")}finally{ze(!1),be.current=!1}}},Ze=()=>{G(!1),be.current=!0,queueMicrotask(()=>Ne())},Et=()=>{G(!1),be.current=!1};if(!t)return null;const wt=m.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-40",children:m.jsxs("div",{className:"bg-panel border border-border rounded-lg shadow-xl w-full max-w-7xl max-h-[95vh] overflow-hidden",children:[m.jsxs("div",{className:"flex justify-between items-center p-6 border-b",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-primary)"},children:[m.jsxs("div",{className:"flex items-center gap-3",children:[u?m.jsx(js,{size:20,style:{color:"var(--accent-primary)"}}):m.jsx(Za,{size:20,style:{color:"var(--accent-primary)"}}),m.jsx("h2",{className:"text-xl font-semibold",style:{color:"var(--text-primary)",paddingTop:"10px"},children:u?"Redigera uppgift":"Lgg till ny uppgift"})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsxs("button",{onClick:W,className:"flex items-center gap-2 px-3 py-2 rounded-lg transition-all duration-200 hover:bg-accent-primary/10",style:{backgroundColor:"var(--bg-panel)",color:"var(--text-primary)",border:"1px solid var(--border-primary)"},title:"Spara utkast",children:[m.jsx(xc,{size:16}),m.jsx("span",{className:"text-sm",children:"Utkast"})]}),m.jsxs("button",{disabled:!N||Ce,onClick:Ne,className:"flex items-center gap-2 px-4 py-2 rounded-lg transition-all duration-200 hover:scale-105 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:"var(--accent-primary)",color:"var(--button-text)",border:"1px solid var(--accent-primary)"},title:u?"Uppdatera uppgift":"Skapa uppgift",children:[m.jsx(js,{size:16}),m.jsx("span",{className:"text-sm font-medium",children:Ce?u?"Uppdaterar":"Skapar":u?"Uppdatera":"Skapa"})]}),q&&m.jsxs("button",{onClick:ce,className:"flex items-center gap-2 px-3 py-2 rounded-lg transition-all duration-200 hover:bg-red-500/10",style:{backgroundColor:"var(--bg-panel)",color:"var(--text-primary)",border:"1px solid var(--border-primary)"},title:"Radera permanent",children:[m.jsx(xa,{size:16,style:{color:"var(--text-muted)"}}),m.jsx("span",{className:"text-sm",children:"Radera"})]}),m.jsx("button",{onClick:()=>{Se(),e()},className:"flex items-center justify-center w-8 h-8 rounded-lg transition-all duration-200 hover:bg-accent-primary/10",style:{color:"var(--text-secondary)"},title:"Stng",children:m.jsx(va,{size:18})})]})]}),m.jsx("div",{className:"p-6 h-[calc(100vh-112px)] grid lg:grid-cols-4 gap-6 overflow-y-auto bg-panel",children:m.jsxs(Uj,{..._,children:[m.jsx("div",{className:"lg:col-span-2",children:m.jsx(OH,{selectedNodeIds:a,pendingImages:ie,onImagePaste:K,flags:k,extraFlags:S,dispatchFlags:A,dispatchExtraFlags:C,existingProblem:l})}),m.jsx("div",{className:"lg:col-span-2 overflow-x-hidden",children:m.jsx(RH,{pendingImages:ie,existingProblem:l})})]})})]})});return m.jsxs(m.Fragment,{children:[gc.createPortal(wt,document.getElementById("modal-root")),m.jsx(LH,{isOpen:B,similarProblems:V,onProceed:Ze,onCancel:Et})]})}const Z6="problem_test_memory",BH=()=>{const[t,e]=T.useState(()=>{const a=localStorage.getItem(Z6);if(a)try{const i=JSON.parse(a);return{hiddenIds:new Set(i.hiddenIds||[]),selectedIds:new Set(i.selectedIds||[]),part1Ids:new Set(i.part1Ids||[]),part2Ids:new Set(i.part2Ids||[]),lastModified:new Date(i.lastModified||Date.now())}}catch(i){console.error("Failed to parse stored memory:",i)}return{hiddenIds:new Set,selectedIds:new Set,part1Ids:new Set,part2Ids:new Set,lastModified:new Date}});T.useEffect(()=>{const a={hiddenIds:Array.from(t.hiddenIds),selectedIds:Array.from(t.selectedIds),part1Ids:Array.from(t.part1Ids),part2Ids:Array.from(t.part2Ids),lastModified:t.lastModified.toISOString()};localStorage.setItem(Z6,JSON.stringify(a))},[t]);const r=T.useCallback(a=>{e(i=>{const l={...i,lastModified:new Date};switch(a.type){case"ADD_TO_PART1":l.part1Ids=new Set([...i.part1Ids,a.problemId]),l.selectedIds=new Set([...i.selectedIds,a.problemId]),l.hiddenIds=new Set([...i.hiddenIds,a.problemId]);break;case"ADD_TO_PART2":l.part2Ids=new Set([...i.part2Ids,a.problemId]),l.selectedIds=new Set([...i.selectedIds,a.problemId]),l.hiddenIds=new Set([...i.hiddenIds,a.problemId]);break;case"REMOVE_FROM_PARTS":l.part1Ids=new Set([...i.part1Ids].filter(u=>u!==a.problemId)),l.part2Ids=new Set([...i.part2Ids].filter(u=>u!==a.problemId)),l.selectedIds=new Set([...i.selectedIds].filter(u=>u!==a.problemId)),l.hiddenIds=new Set([...i.hiddenIds].filter(u=>u!==a.problemId));break;case"HIDE_PROBLEM":l.hiddenIds=new Set([...i.hiddenIds,a.problemId]);break;case"SHOW_PROBLEM":l.hiddenIds=new Set([...i.hiddenIds].filter(u=>u!==a.problemId));break;case"CLEAR_MEMORY":l.hiddenIds=new Set,l.selectedIds=new Set,l.part1Ids=new Set,l.part2Ids=new Set;break}return l})},[]),n=T.useCallback(()=>{r({type:"CLEAR_MEMORY",problemId:0})},[r]);return{memory:t,dispatch:r,clearMemory:n}},IH=()=>{const{user:t}=Lr(),e=Gt(),[r,n]=T.useState([]),[a,i]=T.useState(null),[l,u]=T.useState(null),[d,h]=T.useState(void 0),[p,b]=T.useState(!1),[y,x]=T.useState(null),[_,k]=T.useState(void 0),{memory:S,dispatch:A,clearMemory:C}=BH(),{persistenceData:N,savePersistence:D,isLoading:j}=J7(),{page:O,totalPages:F,setPage:R,setTotalCount:B}=l$({pageSize:10,onPageChange:()=>{const Ne=document.querySelector(".overflow-y-auto");Ne instanceof HTMLElement&&(Ne.scrollTop=0)}}),V=T.useCallback((Ne,Ze)=>{n(Ne),B(Ze)},[B]),$=T.useCallback(Ne=>{i(Ne)},[]),G=T.useCallback(()=>{R(0)},[R]),le=T.useCallback((Ne,Ze)=>{A(Ze===1?{type:"ADD_TO_PART1",problemId:Ne}:{type:"ADD_TO_PART2",problemId:Ne})},[A]),ie=T.useCallback(Ne=>{A({type:"REMOVE_FROM_PARTS",problemId:Ne})},[A]),{hierarchyFilter:pe,handleHierarchySelect:K}=h$({onHierarchyFilterChange:G}),ue=T.useCallback(Ne=>{h(Ne?.uid),K(Ne),Ne&&D(Ne)},[K,D]),{hierarchyFilter:Ce,problemFilter:ze,greedyExclusions:q,handleGreedyResult:ae,handleProblemFilterChange:we}=aF({hierarchyFilter:pe,onGreedyResult:Ne=>{u(Ne)}}),{selectedAreaId:be}=f$(Ce);T.useEffect(()=>{if(N&&!j&&!pe.area_ids&&!pe.chapter_ids&&!pe.course_ids&&!pe.subject_ids){const Ne={id:N.selectedNodeId,uid:`${N.selectedNodeType}-${N.selectedNodeId}`,title:N.selectedNodeTitle,type:N.selectedNodeType,hasChildren:!0,parentSubjectId:N.parentPath?.subject_id};h(Ne.uid),K(Ne)}},[N,j,pe,K]),T.useEffect(()=>{u(null),R(0);const Ne=document.querySelector(".overflow-y-auto");Ne instanceof HTMLElement&&(Ne.scrollTop=0)},[Ce,ze]);const Se=T.useCallback(Ne=>{if(!c6(t,Ne)){Me("error","Behrighet saknas","Du kan endast redigera dina egna problem eller ha admin-behrighet.");return}x(Ne),b(!0)},[t]),W=Hr(),ce=async(Ne,Ze,Et)=>{try{let wt;if(Ze&&Et){const kt=await st(`/v1/problems/${Et}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ne)},e??void 0);if(!kt.ok){const ur=await kt.json().catch(()=>({detail:kt.statusText}));throw new Error(ur.detail??kt.statusText)}Me("success","Problem uppdaterat","Uppgiften har uppdaterats framgngsrikt.");const St=await kt.json().catch(()=>null);wt=St&&St.bank_problem_definition_id?St:{bank_problem_definition_id:Et}}else{const kt=await st("/v1/problems",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ne)},e??void 0);if(!kt.ok){const ur=await kt.json().catch(()=>({detail:kt.statusText}));throw new Error(ur.detail??kt.statusText)}wt=await kt.json(),Me("success","Problem skapat","Uppgiften har skapats framgngsrikt.")}return W.invalidateQueries({queryKey:_t.all,exact:!1}),W.invalidateQueries({queryKey:_t.lists(),exact:!1}),W.invalidateQueries({queryKey:_t.details(),exact:!1}),wt}catch(wt){throw wt.message?.includes("401")?Me("error","Behrighet saknas","Du har inte behrighet att skapa/redigera problem."):wt.message?.includes("422")?Me("error","Ogiltig data","Kontrollera att alla flt r korrekt ifyllda."):Me("error","Oknt fel","Ett ovntat fel uppstod. Frsk igen."),console.error(wt),wt}};return m.jsxs("div",{className:"min-h-screen",style:{background:"var(--bg-primary)"},children:[m.jsx("div",{className:"container mx-auto p-2",children:m.jsx("div",{className:"rounded-xl p-3",style:{background:"var(--bg-panel)"},children:m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-10 gap-3",children:[m.jsx("div",{className:"lg:col-span-3",children:m.jsx("div",{className:"rounded-xl p-3",style:{background:"var(--bg-panel)"},children:m.jsx(k8,{onSelect:ue,selectedNodeId:d})})}),m.jsx("div",{className:"lg:col-span-7",children:m.jsx("div",{className:"rounded-xl h-[calc(100vh-120px)]",style:{background:"var(--bg-panel)"},children:m.jsxs("div",{className:"h-full flex flex-col rounded-xl",style:{background:"var(--bg-panel)"},children:[m.jsx("div",{className:"sticky top-0 p-2 border-b",style:{background:"var(--bg-panel)",borderColor:"var(--border-primary)"},children:m.jsx(c$,{hierarchyFilter:Ce,onFilterChange:we,onGreedyResult:ae,memory:S,clearMemory:C,onRemoveFromMemory:ie,greedyExclusions:q,onOpenDraft:Ne=>{k(Ne),x(null),b(!0)},onNewDraft:()=>{x(null),b(!0)},currentPage:O,totalPages:F,onPageChange:R})}),m.jsx("div",{className:"flex-1 flex min-h-0",children:m.jsx("div",{className:"flex-1 flex flex-col min-h-0 w-full",children:m.jsxs("div",{className:"flex-1 overflow-y-auto p-0 hide-scrollbar",children:[a&&m.jsxs("div",{className:"text-center py-8",style:{color:"var(--text-error)"},children:["Kunde inte hmta uppgifter: ",a]}),!a&&m.jsx("div",{className:"h-full",children:r.length===0?m.jsx("div",{className:"text-center py-8",style:{color:"var(--text-muted)"},children:"Inga problem hittades."}):m.jsx(Fh,{problems:r,mode:"list",showRemoveButtons:!1,onEdit:Se,onAddToMemory:le,onRemoveFromMemory:ie,hiddenProblemIds:S.hiddenIds,canEdit:Ne=>c6(t,Ne)})})]})})}),m.jsx(LD,{hierarchyFilter:Ce,extraFilter:ze,greedyProblemIds:l,page:O,onProblemsLoaded:V,onLoadingChange:()=>{},onErrorChange:$})]})})})]})})}),p&&m.jsx(PH,{isOpen:p,onClose:()=>{b(!1),x(null),k(void 0),W.refetchQueries({queryKey:_t.all,exact:!1}),W.refetchQueries({queryKey:_t.lists(),exact:!1}),W.refetchQueries({queryKey:_t.details(),exact:!1})},onSave:ce,selectedAreaId:be,selectedNodeIds:[],draftId:_,existingProblem:y})]})},$H=()=>{const t=zl(),[e]=vA(),[r,n]=T.useState(null),[a,i]=T.useState(""),{mutateAsync:l,isPending:u}=hD(),{register:d,handleSubmit:h,formState:{errors:p,isValid:b}}=fo({resolver:mo(mD),mode:"onChange"});T.useEffect(()=>{const x=e.get("token");if(!x){n(!1),Me("error","Invite token saknas. Du behver en giltig invite-lnk fr att registrera dig.");return}i(x),n(!0)},[e]);const y=async x=>{try{await l({data:{username:x.username,password:x.password,email:x.email||void 0,full_name:x.fullName||void 0},token:a}),Me("success","Konto skapat framgngsrikt! Du kan nu logga in."),t("/login")}catch(_){console.error("Signup error:",_);const k=_ instanceof Error?_.message:"Fel vid skapande av konto. Frsk igen.";Me("error",k)}};return r===null?m.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundColor:"var(--bg-primary)"},children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 mx-auto",style:{borderColor:"var(--accent-primary)"}}),m.jsx("p",{className:"mt-4",style:{color:"var(--text-secondary)"},children:"Validerar invite token..."})]})}):r===!1?m.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundColor:"var(--bg-primary)"},children:m.jsx("div",{className:"max-w-md w-full space-y-8",children:m.jsxs("div",{className:"text-center",children:[m.jsx("h2",{className:"text-3xl font-bold",style:{color:"var(--text-primary)"},children:"Ogiltig Invite"}),m.jsx("p",{className:"mt-2",style:{color:"var(--text-secondary)"},children:"Du behver en giltig invite-lnk fr att registrera dig."}),m.jsx("button",{onClick:()=>t("/login"),className:"mt-4 px-4 py-2 rounded transition-colors duration-200",style:{backgroundColor:"var(--accent-primary)",color:"var(--button-text)"},onMouseEnter:x=>{x.currentTarget.style.backgroundColor="var(--accent-secondary)"},onMouseLeave:x=>{x.currentTarget.style.backgroundColor="var(--accent-primary)"},children:"G till Login"})]})})}):m.jsx("div",{className:"flex items-start justify-center px-4 sm:px-6 lg:px-8",style:{backgroundColor:"var(--bg-primary)",height:"calc(100vh - 30vh)",paddingTop:"2rem"},children:m.jsxs("div",{className:"max-w-md w-full space-y-3",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-center text-2xl font-extrabold",style:{color:"var(--text-primary)"},children:"Skapa konto"}),m.jsx("p",{className:"mt-1 text-center text-sm",style:{color:"var(--text-secondary)"},children:"Registrera dig med din invite-lnk"})]}),m.jsxs("form",{className:"mt-3 space-y-2",onSubmit:h(y),children:[m.jsxs("div",{className:"space-y-2",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"username",className:"block text-sm font-medium",style:{color:"var(--text-primary)"},children:"Anvndarnamn *"}),m.jsx("input",{...d("username"),type:"text",required:!0,className:"mt-1 block w-full px-3 py-2 rounded-md shadow-sm focus:outline-none transition-colors duration-200",style:{border:"1px solid var(--border-primary)",backgroundColor:"var(--bg-primary)",color:"var(--text-primary)"},onFocus:x=>{x.target.style.borderColor="var(--accent-primary)",x.target.style.boxShadow="0 0 0 3px rgba(16, 163, 127, 0.1)"},onBlur:x=>{x.target.style.borderColor="var(--border-primary)",x.target.style.boxShadow="none"},placeholder:"Vlj anvndarnamn"}),p.username&&m.jsx("div",{className:"text-red-600 text-sm mt-1",children:p.username.message})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"fullName",className:"block text-sm font-medium",style:{color:"var(--text-primary)"},children:"Fullstndigt namn"}),m.jsx("input",{...d("fullName"),type:"text",className:"mt-1 block w-full px-3 py-2 rounded-md shadow-sm focus:outline-none transition-colors duration-200",style:{border:"1px solid var(--border-primary)",backgroundColor:"var(--bg-primary)",color:"var(--text-primary)"},onFocus:x=>{x.target.style.borderColor="var(--accent-primary)",x.target.style.boxShadow="0 0 0 3px rgba(16, 163, 127, 0.1)"},onBlur:x=>{x.target.style.borderColor="var(--border-primary)",x.target.style.boxShadow="none"},placeholder:"Ditt namn"}),p.fullName&&m.jsx("div",{className:"text-red-600 text-sm mt-1",children:p.fullName.message})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"email",className:"block text-sm font-medium",style:{color:"var(--text-primary)"},children:"Email"}),m.jsx("input",{...d("email"),type:"email",className:"mt-1 block w-full px-3 py-2 rounded-md shadow-sm focus:outline-none transition-colors duration-200",style:{border:"1px solid var(--border-primary)",backgroundColor:"var(--bg-primary)",color:"var(--text-primary)"},onFocus:x=>{x.target.style.borderColor="var(--accent-primary)",x.target.style.boxShadow="0 0 0 3px rgba(16, 163, 127, 0.1)"},onBlur:x=>{x.target.style.borderColor="var(--border-primary)",x.target.style.boxShadow="none"},placeholder:"din.email@example.com"}),p.email&&m.jsx("div",{className:"text-red-600 text-sm mt-1",children:p.email.message})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"password",className:"block text-sm font-medium",style:{color:"var(--text-primary)"},children:"Lsenord *"}),m.jsx("input",{...d("password"),type:"password",required:!0,className:"mt-1 block w-full px-3 py-2 rounded-md shadow-sm focus:outline-none transition-colors duration-200",style:{border:"1px solid var(--border-primary)",backgroundColor:"var(--bg-primary)",color:"var(--text-primary)"},onFocus:x=>{x.target.style.borderColor="var(--accent-primary)",x.target.style.boxShadow="0 0 0 3px rgba(16, 163, 127, 0.1)"},onBlur:x=>{x.target.style.borderColor="var(--border-primary)",x.target.style.boxShadow="none"},placeholder:"Minst 6 tecken"}),p.password&&m.jsx("div",{className:"text-red-600 text-sm mt-1",children:p.password.message})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium",style:{color:"var(--text-primary)"},children:"Bekrfta lsenord *"}),m.jsx("input",{...d("confirmPassword"),type:"password",required:!0,className:"mt-1 block w-full px-3 py-2 rounded-md shadow-sm focus:outline-none transition-colors duration-200",style:{border:"1px solid var(--border-primary)",backgroundColor:"var(--bg-primary)",color:"var(--text-primary)"},onFocus:x=>{x.target.style.borderColor="var(--accent-primary)",x.target.style.boxShadow="0 0 0 3px rgba(16, 163, 127, 0.1)"},onBlur:x=>{x.target.style.borderColor="var(--border-primary)",x.target.style.boxShadow="none"},placeholder:"Upprepa lsenord"}),p.confirmPassword&&m.jsx("div",{className:"text-red-600 text-sm mt-1",children:p.confirmPassword.message})]})]}),m.jsx("div",{children:m.jsx("button",{type:"submit",disabled:u||!b,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md transition-colors duration-200 disabled:opacity-50",style:{backgroundColor:"var(--accent-primary)",color:"var(--button-text)"},onMouseEnter:x=>{!u&&b&&(x.currentTarget.style.backgroundColor="var(--accent-secondary)")},onMouseLeave:x=>{!u&&b&&(x.currentTarget.style.backgroundColor="var(--accent-primary)")},children:u?"Skapar konto...":"Skapa konto"})}),m.jsx("div",{className:"text-center",children:m.jsx("button",{type:"button",onClick:()=>t("/login"),className:"transition-colors duration-200",style:{color:"var(--accent-primary)"},onMouseEnter:x=>{x.currentTarget.style.color="var(--accent-secondary)"},onMouseLeave:x=>{x.currentTarget.style.color="var(--accent-primary)"},children:"Har redan konto? Logga in"})})]})]})})},J9=({requiredRole:t,fallback:e=null,children:r})=>{const{user:n}=Lr();return Vc(n?.role||"guest",t)?m.jsx(m.Fragment,{children:r}):m.jsx(m.Fragment,{children:e})};function qH(t=!1,e=!1){const r=Gt();return lr({queryKey:["invites",t,e],queryFn:async()=>{const n=new URLSearchParams;t&&n.append("include_expired","true"),e&&n.append("include_used","true");const a=`/v1/invites/${n.toString()?`?${n.toString()}`:""}`,i=await st(a,{method:"GET"},r??void 0);if(!i.ok){const d=await i.json().catch(()=>({detail:"Oknt fel"}));throw new Error(d.detail??"Kunde inte hmta invite tokens")}return(await i.json()).map(d=>({invite_token_id:d.invite_token_id,email:d.email||void 0,is_used:d.is_used,created_at:d.created_at,expires_at:d.expires_at,used_at:d.used_at||void 0,used_by:d.used_by_username||void 0,is_expired:d.is_expired,is_valid:d.is_valid}))},enabled:!!r,staleTime:0,refetchInterval:1e4,refetchOnWindowFocus:!0})}function HH(){const t=Hr(),e=Gt();return pt({mutationKey:["createInvite"],mutationFn:async r=>{const n=await st("/v1/invites/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)},e??void 0);if(!n.ok){const a=await n.json().catch(()=>({detail:"Oknt fel"}));throw new Error(a.detail??"Kunde inte skapa invite token")}return await n.json()},onSuccess:()=>{t.invalidateQueries({queryKey:["invites"]})}})}function UH(){const t=Hr(),e=Gt();return pt({mutationKey:["deleteInvite"],mutationFn:async r=>{const n=await st(`/v1/invites/${r}`,{method:"DELETE"},e??void 0);if(!n.ok){const a=await n.json().catch(()=>({detail:"Oknt fel"}));throw new Error(a.detail??"Kunde inte radera invite token")}},onSuccess:()=>{t.invalidateQueries({queryKey:["invites"]})}})}const K6={email:"",expires_in_days:7},VH=()=>{const{isTrustedOrHigher:t}=Aa(),e=Gt(),r=Hr();if(!t())return m.jsx("div",{className:"space-y-6",children:m.jsxs("div",{className:"bg-error/10 border border-error/20 rounded-lg p-4",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[m.jsx(Za,{size:16,className:"text-error"}),m.jsx("h4",{className:"font-medium text-error",children:"tkomst nekad"})]}),m.jsx("p",{className:"text-sm text-error",children:"Endast betrodda anvndare och administratrer kan hantera invite tokens."})]})});const[n,a]=T.useState(!1),[i,l]=T.useState(K6),{data:u=[],isLoading:d,isError:h,error:p}=qH(!0,!0),{mutate:b,isPending:y}=HH(),{mutate:x}=UH(),_=()=>{b(i,{onSuccess:()=>{Me("success","Invite token skapad!"),l(K6),a(!1)},onError:D=>{console.error("Error creating invite:",D),Me("error",D.message??"Kunde inte skapa invite token")}})},k=async D=>{try{const j=await r.fetchQuery({queryKey:["inviteDetail",D],queryFn:async()=>{const F=await st(`/v1/invites/${D}`,{method:"GET"},e??void 0);if(!F.ok)throw new Error("Kunde inte hmta invite token");return F.json()}}),O=`${window.location.origin}/#/signup?token=${j.token}`;await navigator.clipboard.writeText(O),Me("success","Invite-lnk kopierad till urklipp!")}catch(j){console.error("Error copying invite link:",j),Me("error","Kunde inte kopiera invite-lnk")}},S=async D=>{try{const j=await r.fetchQuery({queryKey:["inviteDetail",D],queryFn:async()=>{const F=await st(`/v1/invites/${D}`,{method:"GET"},e??void 0);if(!F.ok)throw new Error("Kunde inte hmta invite token");return F.json()}}),O=`${window.location.origin}/jd_pages/#/signup?token=${j.token}`;window.open(O,"_blank")}catch(j){console.error("Error opening invite link:",j),Me("error","Kunde inte ppna invite-lnk")}},A=D=>{confirm("r du sker p att du vill ta bort denna invite token?")&&x(D,{onSuccess:()=>{Me("success","Invite token borttagen")},onError:j=>{console.error("Error deleting invite:",j),Me("error",j.message??"Kunde inte ta bort invite token")}})},C=D=>new Date(D).toLocaleString("sv-SE"),N=D=>{if(D.is_used)return m.jsx("span",{className:"px-2 py-1 text-xs bg-success text-white rounded-full",children:"Anvnd"});const j=new Date;return new Date(D.expires_at)<j?m.jsx("span",{className:"px-2 py-1 text-xs bg-error text-error rounded-full",children:"Utgngen"}):m.jsx("span",{className:"px-2 py-1 text-xs bg-accent-primary/20 text-secondary rounded-full",children:"Aktiv"})};return h&&(console.error("Error loading invites:",p),Me("error","Kunde inte ladda invite tokens")),m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"bg-panel rounded-lg p-6",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4 gap-2",children:[m.jsxs("button",{onClick:()=>a(!n),className:"flex items-center px-4 py-2 rounded-md",style:{backgroundColor:"var(--accent-primary)",color:"var(--button-text)",border:"none"},children:[m.jsx(Za,{size:16,className:"mr-2"}),n?"Avbryt":"Skapa invite"]}),m.jsxs("button",{onClick:()=>r.invalidateQueries({queryKey:["invites"]}),className:"flex items-center px-4 py-2 border border-border rounded-md hover:bg-secondary",children:[m.jsx(wl,{size:16,className:"mr-2"}),"Uppdatera"]})]}),n&&m.jsx("div",{className:"border-t border-border pt-4",children:m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-primary mb-1",children:"Email (valfritt)"}),m.jsx("input",{type:"email",value:i.email,onChange:D=>l(j=>({...j,email:D.target.value})),className:"w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-accent-primary focus:border-transparent bg-panel text-primary",placeholder:"anvndare@example.com"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-primary mb-1",children:"Giltig i dagar"}),m.jsx("input",{type:"number",min:"1",max:"365",value:i.expires_in_days,onChange:D=>l(j=>({...j,expires_in_days:parseInt(D.target.value)||7})),className:"w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-accent-primary focus:border-transparent bg-panel text-primary"})]}),m.jsx("div",{className:"flex items-end",children:m.jsx("button",{onClick:_,disabled:y,className:"w-full px-4 py-2 rounded-md disabled:opacity-50",style:{backgroundColor:"var(--accent-primary)",color:"var(--button-text)",border:"none"},children:y?"Skapar...":"Skapa invite"})})]})})]}),m.jsxs("div",{className:"bg-panel rounded-lg",children:[m.jsx("div",{className:"px-6 py-4"}),m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"min-w-full divide-y divide-border",children:[m.jsx("thead",{className:"bg-panel",children:m.jsxs("tr",{children:[m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted uppercase tracking-wider",children:"Email"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted uppercase tracking-wider",children:"ID"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted uppercase tracking-wider",children:"Status"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted uppercase tracking-wider",children:"Skapad"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted uppercase tracking-wider",children:"Utgr"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted uppercase tracking-wider",children:"tgrder"})]})}),m.jsx("tbody",{className:"bg-panel divide-y divide-border",children:d?m.jsx("tr",{children:m.jsx("td",{colSpan:6,className:"px-6 py-4 text-center text-muted",children:"Laddar invites..."})}):u.length===0?m.jsx("tr",{children:m.jsx("td",{colSpan:6,className:"px-6 py-4 text-center text-muted",children:"Inga invite tokens skapade n"})}):u.map(D=>m.jsxs("tr",{children:[m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-primary",children:D.email||"-"}),m.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-mono text-primary",children:["#",D.invite_token_id]}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:N(D)}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-muted",children:C(D.created_at)}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-muted",children:C(D.expires_at)}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:m.jsxs("div",{className:"flex space-x-2",children:[m.jsx("button",{onClick:()=>k(D.invite_token_id),className:"text-accent-primary hover:text-accent-secondary",title:"Kopiera invite-lnk",children:m.jsx(fM,{size:16})}),m.jsx("button",{onClick:()=>S(D.invite_token_id),className:"text-accent-primary hover:text-accent-secondary",title:"ppna invite-lnk",children:m.jsx(vM,{size:16})}),m.jsx("button",{onClick:()=>A(D.invite_token_id),className:"text-red-600 hover:text-red-700",title:"Ta bort invite",children:m.jsx(xa,{size:16})})]})})]},D.invite_token_id))})]})})]})]})};function GH(){const t=Gt(),e=Hr();return pt({mutationKey:["updateProfile"],mutationFn:async r=>{const n=await st("/auth/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)},t??void 0);if(!n.ok){const i=await n.json().catch(()=>({detail:"Oknt fel"}));throw new Error(i.detail??"Kunde inte uppdatera profil")}const a=await n.json();try{return x2.parse(a)}catch{return v2.parse(a)}},onSuccess:()=>{e.invalidateQueries({queryKey:["currentUser"]})}})}function ZH(){const t=Gt();return pt({mutationKey:["updatePassword"],mutationFn:async e=>{const r=await st("/auth/password",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)},t??void 0);if(!r.ok){const a=await r.json().catch(()=>({detail:"Oknt fel"}));throw new Error(a.detail??"Kunde inte ndra lsenord")}const n=await r.json();return v2.parse(n)}})}function KH(){return pt({mutationKey:["forgotPassword"],mutationFn:async t=>{const e=await st("/auth/forgot-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok){const n=await e.json().catch(()=>({detail:"Oknt fel"}));throw new Error(n.detail??"Kunde inte skicka lsenordsterstllning")}const r=await e.json();return v2.parse(r)}})}const YH=()=>{const{user:t}=Lr(),{isUserOrHigher:e}=Aa(),r=fo({resolver:mo(pD),mode:"onChange"}),n=fo({resolver:mo(gD),mode:"onChange"}),a=fo({resolver:mo(bD),mode:"onChange"}),[i,l]=T.useState(!1),[u,d]=T.useState(!1),[h,p]=T.useState(!1),[b,y]=T.useState(!1),x=GH(),_=ZH(),k=KH(),S=x.isPending||_.isPending||k.isPending;if(T.useEffect(()=>{t&&r.reset({username:t.username||"",email:t.email||"",full_name:t.full_name||""})},[t,r]),!t||!e())return m.jsx("div",{className:"space-y-6",children:m.jsxs("div",{className:"bg-error/10 border border-error/20 rounded-lg p-4",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[m.jsx(kl,{size:16,className:"text-error"}),m.jsx("h4",{className:"font-medium text-error",children:"tkomst nekad"})]}),m.jsx("p",{className:"text-sm text-error",children:"Du mste vara inloggad med anvndarroll eller hgre fr att hantera din profil."})]})});const A=async D=>{try{await x.mutateAsync({username:D.username,email:D.email??"",full_name:D.full_name??""}),Me("success","Profil uppdaterad framgngsrikt!")}catch(j){const O=j instanceof Error?j.message:"Kunde inte uppdatera profil";Me("error",O)}},C=async D=>{try{await _.mutateAsync({current_password:D.current_password,new_password:D.new_password}),Me("success","Lsenord ndrat framgngsrikt!"),n.reset(),l(!1)}catch(j){const O=j instanceof Error?j.message:"Kunde inte ndra lsenord";Me("error",O)}},N=async D=>{try{await k.mutateAsync(D),Me("success","Temporrt lsenord skickat till din email!"),a.reset(),d(!1)}catch(j){const O=j instanceof Error?j.message:"Kunde inte skicka lsenordsterstllning";Me("error",O)}};return m.jsxs("div",{className:"space-y-8",children:[m.jsxs("div",{className:"bg-panel",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[m.jsx(kl,{size:24,className:"text-accent-primary"}),m.jsx("h2",{className:"text-xl font-semibold text-primary",children:"Profilinstllningar"})]}),m.jsxs("form",{onSubmit:r.handleSubmit(A),className:"space-y-6",children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-primary mb-2",children:"Anvndarnamn"}),m.jsx("input",{...r.register("username"),type:"text",className:"w-full px-4 py-3 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-accent-primary focus:border-transparent bg-panel text-primary",placeholder:"Anvndarnamn",autoComplete:"username"}),r.formState.errors.username&&m.jsx("div",{className:"text-red-600 text-sm mt-1",children:r.formState.errors.username.message})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-primary mb-2",children:"Email"}),m.jsx("input",{...r.register("email"),type:"email",className:"w-full px-4 py-3 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-accent-primary focus:border-transparent bg-panel text-primary",placeholder:"email@example.com",autoComplete:"email"}),r.formState.errors.email&&m.jsx("div",{className:"text-red-600 text-sm mt-1",children:r.formState.errors.email.message})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-primary mb-2",children:"Fullstndigt namn"}),m.jsx("input",{...r.register("full_name"),type:"text",className:"w-full px-4 py-3 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-accent-primary focus:border-transparent bg-panel text-primary",placeholder:"Frnamn Efternamn",autoComplete:"name"}),r.formState.errors.full_name&&m.jsx("div",{className:"text-red-600 text-sm mt-1",children:r.formState.errors.full_name.message})]}),m.jsx("div",{className:"flex justify-end",children:m.jsxs("button",{type:"submit",disabled:S||!r.formState.isValid,className:"flex items-center gap-2 px-6 py-3 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 hover:shadow-md",style:{backgroundColor:"var(--accent-primary)",color:"var(--button-text)",border:"none"},children:[m.jsx(js,{size:18}),S?"Sparar...":"Spara ndringar"]})})]})]}),m.jsxs("div",{className:"bg-panel",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[m.jsx(Wx,{size:24,className:"text-accent-primary"}),m.jsx("h2",{className:"text-xl font-semibold text-primary",children:"Lsenordsndring"})]}),i?m.jsxs("form",{onSubmit:n.handleSubmit(C),className:"space-y-6",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-primary mb-2",children:"Nuvarande lsenord"}),m.jsxs("div",{className:"relative",children:[m.jsx("input",{...n.register("current_password"),type:h?"text":"password",className:"w-full px-4 py-3 pr-12 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-accent-primary focus:border-transparent bg-panel text-primary",placeholder:"Nuvarande lsenord",autoComplete:"current-password"}),m.jsx("button",{type:"button",onClick:()=>p(!h),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted hover:text-primary",children:h?m.jsx(vl,{size:16}):m.jsx(_l,{size:16})})]}),n.formState.errors.current_password&&m.jsx("div",{className:"text-red-600 text-sm mt-1",children:n.formState.errors.current_password.message})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-primary mb-2",children:"Nytt lsenord"}),m.jsxs("div",{className:"relative",children:[m.jsx("input",{...n.register("new_password"),type:b?"text":"password",className:"w-full px-4 py-3 pr-12 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-accent-primary focus:border-transparent bg-panel text-primary",placeholder:"Nytt lsenord (minst 8 tecken med stor bokstav, liten bokstav och siffra)",autoComplete:"new-password"}),m.jsx("button",{type:"button",onClick:()=>y(!b),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted hover:text-primary",children:b?m.jsx(vl,{size:16}):m.jsx(_l,{size:16})})]}),n.formState.errors.new_password&&m.jsx("div",{className:"text-red-600 text-sm mt-1",children:n.formState.errors.new_password.message})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-primary mb-2",children:"Bekrfta nytt lsenord"}),m.jsx("input",{...n.register("confirm_password"),type:"password",className:"w-full px-4 py-3 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-accent-primary focus:border-transparent bg-panel text-primary",placeholder:"Bekrfta nytt lsenord",autoComplete:"new-password"}),n.formState.errors.confirm_password&&m.jsx("div",{className:"text-red-600 text-sm mt-1",children:n.formState.errors.confirm_password.message})]}),m.jsxs("div",{className:"flex gap-3",children:[m.jsxs("button",{type:"submit",disabled:S||!n.formState.isValid,className:"flex items-center gap-2 px-6 py-3 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 hover:shadow-md",style:{backgroundColor:"var(--accent-primary)",color:"var(--button-text)",border:"none"},children:[m.jsx(js,{size:18}),S?"Sparar...":"ndra lsenord"]}),m.jsx("button",{type:"button",onClick:()=>{l(!1),n.reset()},className:"px-6 py-3 rounded-lg transition-all duration-200",style:{backgroundColor:"var(--button-secondary-bg)",color:"var(--button-secondary-text)",border:"1px solid var(--button-secondary-border)"},children:"Avbryt"})]})]}):m.jsxs("button",{onClick:()=>l(!0),className:"flex items-center gap-2 px-4 py-2 rounded-lg transition-all duration-200",style:{backgroundColor:"var(--accent-primary)",color:"var(--button-text)",border:"none"},children:[m.jsx(Wx,{size:16}),"ndra lsenord"]})]}),m.jsxs("div",{className:"bg-panel",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[m.jsx(Ba,{size:24,className:"text-accent-primary"}),m.jsx("h2",{className:"text-xl font-semibold text-primary",children:"Glmt lsenord"})]}),u?m.jsxs("form",{onSubmit:a.handleSubmit(N),className:"space-y-6",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-primary mb-2",children:"Email-adress"}),m.jsx("input",{...a.register("email"),type:"email",className:"w-full px-4 py-3 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-accent-primary focus:border-transparent bg-panel text-primary",placeholder:"Ange din email-adress",autoComplete:"email"}),a.formState.errors.email&&m.jsx("div",{className:"text-red-600 text-sm mt-1",children:a.formState.errors.email.message})]}),m.jsxs("div",{className:"flex gap-3",children:[m.jsxs("button",{type:"submit",disabled:S||!a.formState.isValid,className:"flex items-center gap-2 px-6 py-3 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 hover:shadow-md",style:{backgroundColor:"var(--accent-primary)",color:"var(--button-text)",border:"none"},children:[m.jsx(Ap,{size:18}),S?"Skickar...":"Skicka terstllning"]}),m.jsx("button",{type:"button",onClick:()=>{d(!1),a.reset()},className:"px-6 py-3 rounded-lg transition-all duration-200",style:{backgroundColor:"var(--button-secondary-bg)",color:"var(--button-secondary-text)",border:"1px solid var(--button-secondary-border)"},children:"Avbryt"})]})]}):m.jsxs("button",{onClick:()=>d(!0),className:"flex items-center gap-2 px-4 py-2 rounded-lg transition-all duration-200",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-primary)",border:"1px solid var(--border-primary)"},children:[m.jsx(Ap,{size:16}),"Begr lsenordsterstllning"]})]})]})},XH=()=>{const{isUserOrHigher:t}=Aa(),[e,r]=T.useState([]),[n,a]=T.useState(!1),[i,l]=T.useState(!1),[u,d]=T.useState({name:"",content:"",category:""});if(!t())return m.jsx("div",{className:"space-y-6",children:m.jsxs("div",{className:"bg-error/10 border border-error/20 rounded-lg p-4",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[m.jsx(kl,{size:16,className:"text-error"}),m.jsx("h4",{className:"font-medium text-error",children:"tkomst nekad"})]}),m.jsx("p",{className:"text-sm text-error",children:"Du mste vara inloggad med anvndarroll eller hgre fr att hantera snippets."})]})});const h=async()=>{if(!u.name.trim()||!u.content.trim()){Me("error","Namn och innehll krvs");return}l(!0);try{const b={id:Date.now().toString(),name:u.name,content:u.content,category:u.category,created_at:new Date().toISOString()};r(y=>[b,...y]),d({name:"",content:"",category:""}),a(!1),Me("success","Snippet skapad!")}catch(b){console.error("Error creating snippet:",b),Me("error","Kunde inte skapa snippet")}finally{l(!1)}},p=async b=>{if(confirm("r du sker p att du vill ta bort denna snippet?"))try{r(y=>y.filter(x=>x.id!==b)),Me("success","Snippet borttagen")}catch(y){console.error("Error deleting snippet:",y),Me("error","Kunde inte ta bort snippet")}};return m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"bg-panel rounded-lg p-6",children:[m.jsx("div",{className:"flex items-center justify-between mb-4",children:m.jsxs("button",{onClick:()=>a(!n),className:"flex items-center px-4 py-2 rounded-md",style:{backgroundColor:"var(--accent-primary)",color:"var(--button-text)",border:"none"},children:[m.jsx(Za,{size:16,className:"mr-2"}),n?"Avbryt":"Skapa snippet"]})}),n&&m.jsx("div",{className:"border-t border-border pt-4",children:m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-primary mb-1",children:"Namn"}),m.jsx("input",{type:"text",value:u.name,onChange:b=>d(y=>({...y,name:b.target.value})),className:"w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-accent-primary focus:border-transparent bg-panel text-primary",placeholder:"Snippet namn"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-primary mb-1",children:"Kategori"}),m.jsx("input",{type:"text",value:u.category,onChange:b=>d(y=>({...y,category:b.target.value})),className:"w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-accent-primary focus:border-transparent bg-panel text-primary",placeholder:"Algebra, Geometri, etc."})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-primary mb-1",children:"Innehll"}),m.jsx("textarea",{value:u.content,onChange:b=>d(y=>({...y,content:b.target.value})),rows:4,className:"w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-accent-primary focus:border-transparent bg-panel text-primary",placeholder:"LaTeX-kod eller text..."})]}),m.jsx("div",{children:m.jsx("button",{onClick:h,disabled:i,className:"px-4 py-2 rounded-md disabled:opacity-50",style:{backgroundColor:"var(--accent-primary)",color:"var(--button-text)",border:"none"},children:i?"Skapar...":"Skapa snippet"})})]})})]}),m.jsxs("div",{className:"bg-panel rounded-lg",children:[m.jsx("div",{className:"px-6 py-4"}),m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"min-w-full divide-y divide-border",children:[m.jsx("thead",{className:"bg-panel",children:m.jsxs("tr",{children:[m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted uppercase tracking-wider",children:"Namn"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted uppercase tracking-wider",children:"Kategori"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted uppercase tracking-wider",children:"Innehll"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted uppercase tracking-wider",children:"Skapad"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted uppercase tracking-wider",children:"tgrder"})]})}),m.jsx("tbody",{className:"bg-panel divide-y divide-border",children:e.map(b=>m.jsxs("tr",{children:[m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-primary",children:b.name}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-primary",children:b.category||"-"}),m.jsx("td",{className:"px-6 py-4 text-sm text-primary",children:m.jsx("div",{className:"max-w-xs truncate",children:b.content})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-muted",children:new Date(b.created_at).toLocaleDateString("sv-SE")}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:m.jsxs("div",{className:"flex space-x-2",children:[m.jsx("button",{className:"text-accent-primary hover:text-accent-secondary",title:"Redigera snippet",children:m.jsx(d8,{size:16})}),m.jsx("button",{onClick:()=>p(b.id),className:"text-red-600 hover:text-red-700",title:"Ta bort snippet",children:m.jsx(xa,{size:16})})]})})]},b.id))})]})}),e.length===0&&m.jsx("div",{className:"text-center py-8",children:m.jsx("p",{className:"text-muted",children:"Inga snippets skapade n"})})]})]})},QH=({onCreateSubject:t,onExpandAll:e,onCollapseAll:r,onReload:n})=>m.jsx("div",{className:"bg-panel rounded-lg p-6",children:m.jsx("div",{className:"flex items-center justify-between mb-4",children:m.jsxs("div",{className:"flex gap-2",children:[m.jsxs("button",{onClick:t,className:"flex items-center px-4 py-2 rounded-md",style:{backgroundColor:"var(--accent-primary)",color:"var(--button-text)",border:"none"},children:[m.jsx(Za,{size:16,className:"mr-2"}),"mne"]}),m.jsxs("button",{onClick:e,className:"flex items-center px-4 py-2 border border-border rounded-md hover:bg-secondary",children:[m.jsx(ko,{size:16,className:"mr-2"}),"Expandera"]}),m.jsxs("button",{onClick:r,className:"flex items-center px-4 py-2 border border-border rounded-md hover:bg-secondary",children:[m.jsx(tM,{size:16,className:"mr-2"}),"Komprimera"]}),m.jsxs("button",{onClick:n,className:"flex items-center px-4 py-2 border border-border rounded-md hover:bg-secondary",children:[m.jsx(wl,{size:16,className:"mr-2"}),"Uppdatera"]})]})})}),WH=({isOpen:t,position:e,onClose:r,nodeType:n,nodeId:a,nodeTitle:i,hasChildren:l,problemCount:u,onEdit:d,onDelete:h,onMove:p,onCreateChild:b,onToggleExpand:y,isExpanded:x})=>{const _=T.useRef(null),[k,S]=T.useState({width:0,height:0});T.useLayoutEffect(()=>{if(t&&_.current){const V=_.current.getBoundingClientRect();S({width:V.width,height:V.height})}},[t]);const A=typeof window<"u"?window.innerWidth:0,C=typeof window<"u"?window.innerHeight:0,N=Math.min(e.x,A-k.width-8),D=Math.min(e.y,C-k.height-8);if(!t)return null;const j=V=>{switch(V){case"subject":return"mne";case"course":return"Kurs";case"chapter":return"Kapitel";case"area":return"Omrde";default:return"Nod"}},O=V=>{switch(V){case"subject":return"course";case"course":return"chapter";case"chapter":return"area";default:return null}},F=V=>{switch(V){case"course":return"Kurs";case"chapter":return"Kapitel";case"area":return"Omrde";default:return"Barn"}},R=O(n),B=V=>{V(),r()};return m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"fixed inset-0 z-40",onClick:r}),m.jsxs("div",{className:"fixed z-50 bg-panel border border-border rounded-lg shadow-lg py-2 min-w-48",ref:_,style:{left:N,top:D},children:[m.jsxs("div",{className:"px-4 py-2 border-b border-border mb-2",children:[m.jsx("div",{className:"font-medium text-primary",children:i}),m.jsxs("div",{className:"text-xs text-muted",children:[j(n)," (ID: ",a,")"]}),u!==void 0&&u>0&&m.jsxs("div",{className:"text-xs text-warning mt-1 flex items-center gap-1",children:[m.jsx(Ba,{size:12}),u," problem refererar till denna nod"]})]}),m.jsxs("div",{className:"space-y-1",children:[l&&y&&m.jsx("button",{onClick:()=>B(y),className:"w-full px-4 py-2 text-left text-sm hover:bg-secondary flex items-center gap-2",children:x?m.jsxs(m.Fragment,{children:[m.jsx(w2,{size:16}),"Komprimera"]}):m.jsxs(m.Fragment,{children:[m.jsx(sh,{size:16}),"Expandera"]})}),m.jsxs("button",{onClick:()=>B(d),className:"w-full px-4 py-2 text-left text-sm hover:bg-secondary flex items-center gap-2",children:[m.jsx(d8,{size:16}),"Redigera ",j(n).toLowerCase()]}),m.jsxs("button",{onClick:()=>B(p),className:"w-full px-4 py-2 text-left text-sm hover:bg-secondary flex items-center gap-2",children:[m.jsx(nj,{size:16}),"Flytta ",j(n).toLowerCase()]}),R&&m.jsxs("button",{onClick:()=>B(()=>b(R)),className:"w-full px-4 py-2 text-left text-sm hover:bg-secondary flex items-center gap-2",children:[m.jsx(Za,{size:16}),"Skapa ",F(R).toLowerCase()]}),m.jsx("div",{className:"border-t border-border pt-1 mt-1",children:m.jsxs("button",{onClick:()=>B(h),className:`w-full px-4 py-2 text-left text-sm flex items-center gap-2 ${u&&u>0,"text-error hover:bg-secondary"}`,children:[m.jsx(xa,{size:16}),"Ta bort ",j(n).toLowerCase(),u&&u>0&&m.jsxs("span",{className:"text-xs ml-1 flex items-center gap-1",children:["(",m.jsx(Ba,{size:10})," ",u," problem)"]})]})})]})]})]})},e_=({node:t,level:e,isExpanded:r,onToggleExpand:n,onEdit:a,onDelete:i,onMove:l,onCreateChild:u,availableParents:d})=>{const[h,p]=T.useState(!1),[b,y]=T.useState({x:0,y:0}),x=T.useRef(null),_=t.children&&t.children.length>0,k=_||t.type!=="area",S=O=>{O.preventDefault(),O.stopPropagation(),x.current?.getBoundingClientRect()&&(y({x:O.clientX,y:O.clientY}),p(!0))},A=O=>{O.stopPropagation(),k&&n(t.id)},C=()=>t.type==="area"?m.jsx("div",{className:"w-4 h-4 rounded-full bg-accent-primary"}):_?r?m.jsx(w2,{size:16}):m.jsx(sh,{size:16}):m.jsx(sh,{size:16}),N=()=>k?r?m.jsx(ko,{size:16,className:"text-muted"}):m.jsx(Fc,{size:16,className:"text-muted"}):null,D=O=>{switch(O){case"subject":return"text-success";case"course":return"text-info";case"chapter":return"text-accent-primary";case"area":return"text-warning";default:return"text-secondary"}},j=O=>{switch(O){case"subject":return"mne";case"course":return"Kurs";case"chapter":return"Kapitel";case"area":return"Omrde";default:return"Nod"}};return m.jsxs(m.Fragment,{children:[m.jsxs("div",{ref:x,className:`flex items-center py-2 px-3 hover:bg-secondary rounded-md cursor-pointer group ${e>0?"ml-4":""}`,style:{paddingLeft:`${e*20+12}px`},onClick:A,onContextMenu:S,children:[m.jsx("div",{className:"flex items-center justify-center w-4 h-4 mr-2",children:N()}),m.jsx("div",{className:"flex items-center justify-center w-4 h-4 mr-2",children:C()}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:`font-medium truncate ${D(t.type)}`,children:t.title}),m.jsxs("span",{className:"text-xs text-muted",children:["(",j(t.type),")"]}),t.problem_count&&t.problem_count>0&&m.jsxs("span",{className:"text-xs bg-warning text-warning rounded-full px-2 py-1 flex items-center gap-1",children:[m.jsx(Ba,{size:10}),t.problem_count," problem"]})]}),t.description&&m.jsx("div",{className:"text-xs text-muted truncate",children:t.description})]}),m.jsx("button",{onClick:O=>{O.stopPropagation(),S(O)},className:"opacity-0 group-hover:opacity-100 transition-opacity p-1 hover:bg-secondary rounded",children:m.jsx(yM,{size:16,className:"text-muted"})})]}),r&&_&&m.jsx("div",{className:"ml-4",children:t.children.map(O=>m.jsx(e_,{node:O,level:e+1,isExpanded:r,onToggleExpand:n,onEdit:a,onDelete:i,onMove:l,onCreateChild:u,availableParents:d},O.id))}),m.jsx(WH,{isOpen:h,position:b,onClose:()=>p(!1),nodeType:t.type,nodeId:t.id,nodeTitle:t.title,hasChildren:_||!1,problemCount:t.problem_count,onEdit:()=>a(t),onDelete:()=>i(t),onMove:()=>l(t),onCreateChild:O=>u(t,O),onToggleExpand:()=>n(t.id),isExpanded:void 0})]})},JH=({hierarchy:t,expandedNodes:e,onToggleExpand:r,onEdit:n,onDelete:a,onMove:i,onCreateChild:l})=>m.jsx("div",{className:"bg-panel rounded-lg",children:m.jsx("div",{className:"p-6",children:t.map(u=>m.jsx(e_,{node:u,level:0,isExpanded:e.has(u.id),onToggleExpand:r,onEdit:n,onDelete:a,onMove:i,onCreateChild:l,availableParents:[]},u.id))})}),eU=t=>({id:t.id,title:t.title,type:"area",parent_id:t.chapter_id,children:[],problem_count:t.problem_count,position:t.position,is_active:t.is_active,created_at:t.created_at,updated_at:t.updated_at}),tU=t=>({id:t.id,title:t.title,type:"chapter",parent_id:t.course_id,children:t.areas?.map(eU)||[],problem_count:t.problem_count,position:t.position,is_active:t.is_active,created_at:t.created_at,updated_at:t.updated_at}),rU=t=>({id:t.id,title:t.title,type:"course",parent_id:t.subject_id,children:t.chapters?.map(tU)||[],problem_count:t.problem_count,is_active:t.is_active,created_at:t.created_at,updated_at:t.updated_at,code:t.code}),nU=t=>({id:t.id,title:t.title,type:"subject",parent_id:t.parent_id,children:t.courses?.map(rU)||[],problem_count:t.problem_count,is_active:t.is_active,created_at:t.created_at,updated_at:t.updated_at,code:t.code,description:t.description,matrix_name:t.matrix_name,abilities:t.abilities}),aU=()=>{const t=Gt(),e=Hr(),r=async(W,ce={})=>{const Ne=await st(W,ce,t??void 0);if(!Ne.ok){const Ze=await Ne.json().catch(()=>({detail:Ne.statusText}));throw new Error(Ze.detail??Ne.statusText)}return Ne.json()},{data:n,isLoading:a,error:i,refetch:l}=lr({queryKey:["hierarchy"],enabled:!!t,queryFn:async()=>({hierarchy:(await r("/api/hierarchy/")).hierarchy?.map(nU)||[]}),staleTime:60*1e3}),u=pt({mutationFn:async W=>await r("/api/hierarchy/subjects/with-abilities",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(W)}),onSuccess:()=>{e.invalidateQueries({queryKey:["hierarchy"]}),Me("success","mne skapat")},onError:W=>{const ce=W?.message||"Kunde inte skapa mne";Me("error",ce)}}),d=pt({mutationFn:async({id:W,data:ce})=>await r(`/api/hierarchy/subjects/${W}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(ce)}),onSuccess:()=>{e.invalidateQueries({queryKey:["hierarchy"]}),Me("success","mne uppdaterat")},onError:W=>{const ce=W?.message||"Kunde inte uppdatera mne";Me("error",ce)}}),h=pt({mutationFn:async W=>await r(`/api/hierarchy/subjects/${W}`,{method:"DELETE"}),onSuccess:()=>{e.invalidateQueries({queryKey:["hierarchy"]}),Me("success","mne borttaget")},onError:W=>{const ce=W?.message||"Kunde inte ta bort mne";Me("error",ce)}}),p=pt({mutationFn:async W=>await r("/api/hierarchy/courses",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(W)}),onSuccess:()=>{e.invalidateQueries({queryKey:["hierarchy"]}),Me("success","Kurs skapad")},onError:W=>{const ce=W?.message||"Kunde inte skapa kurs";Me("error",ce)}}),b=pt({mutationFn:async({id:W,data:ce})=>await r(`/api/hierarchy/courses/${W}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(ce)}),onSuccess:()=>{e.invalidateQueries({queryKey:["hierarchy"]}),Me("success","Kurs uppdaterad")},onError:W=>{const ce=W?.message||"Kunde inte uppdatera kurs";Me("error",ce)}}),y=pt({mutationFn:async W=>await r(`/api/hierarchy/courses/${W}`,{method:"DELETE"}),onSuccess:()=>{e.invalidateQueries({queryKey:["hierarchy"]}),Me("success","Kurs borttagen")},onError:W=>{const ce=W?.message||"Kunde inte ta bort kurs";Me("error",ce)}}),x=pt({mutationFn:async W=>await r("/api/hierarchy/chapters",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(W)}),onSuccess:()=>{e.invalidateQueries({queryKey:["hierarchy"]}),Me("success","Kapitel skapat")},onError:W=>{const ce=W?.message||"Kunde inte skapa kapitel";Me("error",ce)}}),_=pt({mutationFn:async({id:W,data:ce})=>await r(`/api/hierarchy/chapters/${W}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(ce)}),onSuccess:()=>{e.invalidateQueries({queryKey:["hierarchy"]}),Me("success","Kapitel uppdaterat")},onError:W=>{const ce=W?.message||"Kunde inte uppdatera kapitel";Me("error",ce)}}),k=pt({mutationFn:async W=>await r(`/api/hierarchy/chapters/${W}`,{method:"DELETE"}),onSuccess:()=>{e.invalidateQueries({queryKey:["hierarchy"]}),Me("success","Kapitel borttaget")},onError:W=>{const ce=W?.message||"Kunde inte ta bort kapitel";Me("error",ce)}}),S=pt({mutationFn:async W=>await r("/api/hierarchy/areas",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(W)}),onSuccess:()=>{e.invalidateQueries({queryKey:["hierarchy"]}),Me("success","Omrde skapat")},onError:W=>{const ce=W?.message||"Kunde inte skapa omrde";Me("error",ce)}}),A=pt({mutationFn:async({id:W,data:ce})=>await r(`/api/hierarchy/areas/${W}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(ce)}),onSuccess:()=>{e.invalidateQueries({queryKey:["hierarchy"]}),Me("success","Omrde uppdaterat")},onError:W=>{const ce=W?.message||"Kunde inte uppdatera omrde";Me("error",ce)}}),C=pt({mutationFn:async W=>await r(`/api/hierarchy/areas/${W}`,{method:"DELETE"}),onSuccess:()=>{e.invalidateQueries({queryKey:["hierarchy"]}),Me("success","Omrde borttaget")},onError:W=>{const ce=W?.message||"Kunde inte ta bort omrde";Me("error",ce)}}),N=pt({mutationFn:async({courseId:W,subjectId:ce})=>await r(`/api/hierarchy/courses/${W}/move?target_subject_id=${ce}`,{method:"PUT"}),onSuccess:()=>{e.invalidateQueries({queryKey:["hierarchy"]}),Me("success","Kurs flyttad")},onError:W=>{const ce=W?.message||"Kunde inte flytta kurs";Me("error",ce)}}),D=pt({mutationFn:async({chapterId:W,parentType:ce,parentId:Ne})=>await r(`/api/hierarchy/chapters/${W}/move?target_parent_type=${ce}&target_parent_id=${Ne}`,{method:"PUT"}),onSuccess:()=>{e.invalidateQueries({queryKey:["hierarchy"]}),Me("success","Kapitel flyttat")},onError:W=>{const ce=W?.message||"Kunde inte flytta kapitel";Me("error",ce)}}),j=pt({mutationFn:async({areaId:W,parentType:ce,parentId:Ne})=>await r(`/api/hierarchy/areas/${W}/move?target_parent_type=${ce}&target_parent_id=${Ne}`,{method:"PUT"}),onSuccess:()=>{e.invalidateQueries({queryKey:["hierarchy"]}),Me("success","Omrde flyttat")},onError:W=>{const ce=W?.message||"Kunde inte flytta omrde";Me("error",ce)}}),O=T.useCallback(async W=>{await u.mutateAsync(W)},[u]),F=T.useCallback(async(W,ce)=>{await d.mutateAsync({id:W,data:ce})},[d]),R=T.useCallback(async W=>{await h.mutateAsync(W)},[h]),B=T.useCallback(async W=>{await p.mutateAsync(W)},[p]),V=T.useCallback(async(W,ce)=>{await b.mutateAsync({id:W,data:ce})},[b]),$=T.useCallback(async W=>{await y.mutateAsync(W)},[y]),G=T.useCallback(async W=>{await x.mutateAsync(W)},[x]),le=T.useCallback(async(W,ce)=>{await _.mutateAsync({id:W,data:ce})},[_]),ie=T.useCallback(async W=>{await k.mutateAsync(W)},[k]),pe=T.useCallback(async W=>{await S.mutateAsync(W)},[S]),K=T.useCallback(async(W,ce)=>{await A.mutateAsync({id:W,data:ce})},[A]),ue=T.useCallback(async W=>{await C.mutateAsync(W)},[C]),Ce=T.useCallback(async(W,ce)=>{await N.mutateAsync({courseId:W,subjectId:ce})},[N]),ze=T.useCallback(async(W,ce,Ne)=>{await D.mutateAsync({chapterId:W,parentType:ce,parentId:Ne})},[D]),q=T.useCallback(async(W,ce,Ne)=>{await j.mutateAsync({areaId:W,parentType:ce,parentId:Ne})},[j]),ae=T.useCallback(W=>r(`/api/hierarchy/subjects/${W}/check-delete`),[r]),we=T.useCallback(W=>r(`/api/hierarchy/courses/${W}/check-delete`),[r]),be=T.useCallback(W=>r(`/api/hierarchy/chapters/${W}/check-delete`),[r]),Se=T.useCallback(W=>r(`/api/hierarchy/areas/${W}/check-delete`),[r]);return{hierarchy:n,loading:a,error:i?.message||null,loadHierarchy:l,createSubject:O,updateSubject:F,deleteSubject:R,createCourse:B,updateCourse:V,deleteCourse:$,createChapter:G,updateChapter:le,deleteChapter:ie,createArea:pe,updateArea:K,deleteArea:ue,moveCourse:Ce,moveChapter:ze,moveArea:q,checkDeleteSubject:ae,checkDeleteCourse:we,checkDeleteChapter:be,checkDeleteArea:Se}},sU=xt({E:Je().min(0,"E-vrde mste vara minst 0"),C:Je().min(0,"C-vrde mste vara minst 0"),A:Je().min(0,"A-vrde mste vara minst 0")}),iU=xt({ability_code:Oe().min(1,"Frmgekod krvs").max(2),ability_name:Oe().min(1,"Frmgenamn krvs"),description:Oe().optional(),matrix_cells:sU}),t_=xt({title:Oe().min(1,"mnesnamn krvs").max(255),code:Oe().min(1,"mneskod krvs").max(50),description:Oe().optional(),matrix_name:Oe().min(1,"Matrisnamn krvs"),abilities:an(iU).min(1,"Minst en frmga krvs")}).refine(t=>{const e=t.abilities.map(n=>n.ability_code),r=new Set(e);return e.length===r.size},{message:"Alla frmgekoder mste vara unika",path:["abilities"]}),oU=xt({title:Oe().min(1,"Namn krvs"),code:Oe().optional(),description:Oe().optional(),type:Ei(["subject","course","unit","area","chapter"]).optional(),position:Je().min(1,"Position mste vara minst 1").optional()}).refine(t=>!(t.type==="course"&&!t.code),{message:"Kurskod krvs fr kurser",path:["code"]});function Ag(t,e,r="onChange"){const n=fo({resolver:mo(t),defaultValues:e,mode:r}),a=T.useRef(e),i=T.useCallback(()=>{n.reset(a.current)},[n]);return{...n,isValid:n.formState.isValid,isDirty:n.formState.isDirty,resetForm:i}}const lU=({isOpen:t,onClose:e,onSubmit:r})=>{const[n,a]=T.useState(!1),{register:i,control:l,handleSubmit:u,formState:{errors:d,isValid:h},resetForm:p}=Ag(t_,{title:"",code:"",description:"",matrix_name:"",abilities:[]}),{fields:b,append:y,remove:x}=_8({control:l,name:"abilities"}),_=()=>{y({ability_code:"",ability_name:"",description:"",matrix_cells:{E:1,C:2,A:3}})},k=async S=>{a(!0);try{const A={title:S.title,code:S.code,description:S.description??"",matrix_name:S.matrix_name,abilities:S.abilities.map(C=>({ability_code:C.ability_code,ability_name:C.ability_name,description:C.description??"",matrix_cells:C.matrix_cells}))};await r(A),e(),p()}catch(A){console.error("Error creating subject:",A),Me("error","Kunde inte skapa mne")}finally{a(!1)}};return t?m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:m.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[m.jsxs("div",{className:"flex justify-between items-center mb-6",children:[m.jsx("h2",{className:"text-xl font-semibold",children:"Skapa nytt mne"}),m.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700",children:m.jsx(va,{size:20})})]}),m.jsxs("form",{onSubmit:u(k),className:"space-y-6",children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:"mnesnamn *"}),m.jsx("input",{...i("title"),type:"text",id:"title",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${d.title?"border-red-500":"border-gray-300"}`,placeholder:"t.ex. Matematik, Kemi"}),!!d.title?.message&&m.jsx("p",{className:"text-red-500 text-sm mt-1",children:d.title?.message})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"code",className:"block text-sm font-medium text-gray-700 mb-1",children:"mneskod *"}),m.jsx("input",{...i("code"),type:"text",id:"code",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${d.code?"border-red-500":"border-gray-300"}`,placeholder:"t.ex. MAT, KEM"}),!!d.code?.message&&m.jsx("p",{className:"text-red-500 text-sm mt-1",children:d.code?.message})]})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Beskrivning"}),m.jsx("textarea",{...i("description"),id:"description",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Beskrivning av mnet"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"matrix_name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Matrisnamn *"}),m.jsx("input",{...i("matrix_name"),type:"text",id:"matrix_name",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${d.matrix_name?"border-red-500":"border-gray-300"}`,placeholder:"t.ex. Matematik mnesmatris"}),!!d.matrix_name?.message&&m.jsx("p",{className:"text-red-500 text-sm mt-1",children:d.matrix_name?.message})]}),m.jsxs("div",{children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsx("h3",{className:"text-lg font-medium",children:"Frmgor"}),m.jsxs("button",{type:"button",onClick:_,className:"flex items-center space-x-2 px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[m.jsx(Za,{size:16}),m.jsx("span",{children:"Lgg till frmga"})]})]}),!!d.abilities?.message&&m.jsx("p",{className:"text-red-500 text-sm mb-4",children:d.abilities.message}),m.jsx("div",{className:"space-y-4",children:b.map((S,A)=>m.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsxs("h4",{className:"font-medium",children:["Frmga ",A+1]}),m.jsx("button",{type:"button",onClick:()=>x(A),className:"text-red-500 hover:text-red-700",children:m.jsx(xa,{size:16})})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Frmgekod *"}),m.jsx("input",{...i(`abilities.${A}.ability_code`),type:"text",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${d.abilities?.[A]?.ability_code?"border-red-500":"border-gray-300"}`,placeholder:"t.ex. T, L, B"}),d.abilities?.[A]?.ability_code&&m.jsx("p",{className:"text-red-500 text-sm mt-1",children:d.abilities[A]?.ability_code?.message})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Frmgenamn *"}),m.jsx("input",{...i(`abilities.${A}.ability_name`),type:"text",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${d.abilities?.[A]?.ability_name?"border-red-500":"border-gray-300"}`,placeholder:"t.ex. Teorifrstelse"}),d.abilities?.[A]?.ability_name&&m.jsx("p",{className:"text-red-500 text-sm mt-1",children:d.abilities[A]?.ability_name?.message})]})]}),m.jsxs("div",{className:"mt-4",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Beskrivning"}),m.jsx("textarea",{...i(`abilities.${A}.description`),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Beskrivning av frmgan"})]}),m.jsxs("div",{className:"mt-4",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Matrisvikter (E, C, A)"}),m.jsx("div",{className:"grid grid-cols-3 gap-4",children:["E","C","A"].map(C=>m.jsxs("div",{children:[m.jsxs("label",{className:"block text-xs text-gray-600 mb-1",children:[C,"-niv"]}),m.jsx("input",{...i(`abilities.${A}.matrix_cells.${C}`,{valueAsNumber:!0}),type:"number",step:"0.1",min:"0",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${d.abilities?.[A]?.matrix_cells?.[C]?"border-red-500":"border-gray-300"}`,placeholder:"0.0"}),d.abilities?.[A]?.matrix_cells?.[C]&&m.jsx("p",{className:"text-red-500 text-xs mt-1",children:d.abilities[A]?.matrix_cells?.[C]?.message})]},C))})]})]},S.id))})]}),m.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[m.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",children:"Avbryt"}),m.jsx("button",{type:"submit",disabled:!h||n,className:`px-4 py-2 rounded-md flex items-center space-x-2 ${h&&!n?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:n?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),m.jsx("span",{children:"Skapar..."})]}):m.jsxs(m.Fragment,{children:[m.jsx(js,{size:16}),m.jsx("span",{children:"Skapa mne"})]})})]})]})]})}):null},uU=({isOpen:t,onClose:e,onSubmit:r,editData:n})=>{const[a,i]=T.useState(!1),{register:l,control:u,handleSubmit:d,formState:{errors:h,isValid:p},setValue:b,resetForm:y,reset:x}=Ag(t_,{title:"",code:"",description:"",matrix_name:"",abilities:[]}),{fields:_,append:k,remove:S}=_8({control:u,name:"abilities"}),A=T.useRef(!1),C=T.useRef(null);T.useEffect(()=>{if(!t){A.current=!1,C.current=null;return}const O=(n&&(n.id??n.subject?.id))??null;if(t&&n){if(C.current!==O||!A.current){const F=n.subject??n,R=n.abilities??F?.abilities??[],B=n.matrix_name??n.matrix?.name??"";x({title:F?.title||"",code:F?.code||"",description:F?.description||"",matrix_name:B,abilities:R||[]}),C.current=O,A.current=!0}return}t&&!n&&!A.current&&(y(),A.current=!0)},[t,n,b,y]);const N=()=>{k({ability_code:"",ability_name:"",description:"",matrix_cells:{E:1,C:2,A:3}})},D=async O=>{i(!0);try{const F={title:O.title,code:O.code,description:O.description??"",matrix_name:O.matrix_name,abilities:O.abilities.map(R=>({ability_code:R.ability_code,ability_name:R.ability_name,description:R.description??"",matrix_cells:R.matrix_cells}))};await r(F),e(),y()}catch(F){console.error("Error creating/updating subject:",F),Me("error","Kunde inte uppdatera mne")}finally{i(!1)}};if(!t)return null;const j=!!n;return m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:m.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[m.jsxs("div",{className:"flex justify-between items-center mb-6",children:[m.jsx("h2",{className:"text-xl font-semibold",children:j?"Redigera mne":"Skapa nytt mne"}),m.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700",children:m.jsx(va,{size:20})})]}),m.jsxs("form",{onSubmit:d(D),className:"space-y-6",children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:"mnesnamn *"}),m.jsx("input",{...l("title"),type:"text",id:"title",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${h.title?"border-red-500":"border-gray-300"}`,placeholder:"t.ex. Matematik, Kemi"}),!!h.title?.message&&m.jsx("p",{className:"text-red-500 text-sm mt-1",children:h.title?.message})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"code",className:"block text-sm font-medium text-gray-700 mb-1",children:"mneskod *"}),m.jsx("input",{...l("code"),type:"text",id:"code",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${h.code?"border-red-500":"border-gray-300"}`,placeholder:"t.ex. MAT, KEM"}),!!h.code?.message&&m.jsx("p",{className:"text-red-500 text-sm mt-1",children:h.code?.message})]})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Beskrivning"}),m.jsx("textarea",{...l("description"),id:"description",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Beskrivning av mnet"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"matrix_name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Matrisnamn *"}),m.jsx("input",{...l("matrix_name"),type:"text",id:"matrix_name",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${h.matrix_name?"border-red-500":"border-gray-300"}`,placeholder:"t.ex. Matematik mnesmatris"}),!!h.matrix_name?.message&&m.jsx("p",{className:"text-red-500 text-sm mt-1",children:h.matrix_name?.message})]}),m.jsxs("div",{children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsx("h3",{className:"text-lg font-medium",children:"Frmgor"}),m.jsxs("button",{type:"button",onClick:N,className:"flex items-center space-x-2 px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[m.jsx(Za,{size:16}),m.jsx("span",{children:"Lgg till frmga"})]})]}),!!h.abilities?.message&&m.jsx("p",{className:"text-red-500 text-sm mb-4",children:h.abilities.message}),m.jsx("div",{className:"space-y-4",children:_.map((O,F)=>m.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsxs("h4",{className:"font-medium",children:["Frmga ",F+1]}),m.jsx("button",{type:"button",onClick:()=>S(F),className:"text-red-500 hover:text-red-700",children:m.jsx(xa,{size:16})})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Frmgekod *"}),m.jsx("input",{...l(`abilities.${F}.ability_code`),type:"text",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${h.abilities?.[F]?.ability_code?"border-red-500":"border-gray-300"}`,placeholder:"t.ex. T, L, B"}),h.abilities?.[F]?.ability_code&&m.jsx("p",{className:"text-red-500 text-sm mt-1",children:h.abilities[F]?.ability_code?.message})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Frmgenamn *"}),m.jsx("input",{...l(`abilities.${F}.ability_name`),type:"text",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${h.abilities?.[F]?.ability_name?"border-red-500":"border-gray-300"}`,placeholder:"t.ex. Teorifrstelse"}),h.abilities?.[F]?.ability_name&&m.jsx("p",{className:"text-red-500 text-sm mt-1",children:h.abilities[F]?.ability_name?.message})]})]}),m.jsxs("div",{className:"mt-4",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Beskrivning"}),m.jsx("textarea",{...l(`abilities.${F}.description`),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Beskrivning av frmgan"})]}),m.jsxs("div",{className:"mt-4",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Matrisvikter (E, C, A)"}),m.jsx("div",{className:"grid grid-cols-3 gap-4",children:["E","C","A"].map(R=>m.jsxs("div",{children:[m.jsxs("label",{className:"block text-xs text-gray-600 mb-1",children:[R,"-niv"]}),m.jsx("input",{...l(`abilities.${F}.matrix_cells.${R}`,{valueAsNumber:!0}),type:"number",step:"0.1",min:"0",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${h.abilities?.[F]?.matrix_cells?.[R]?"border-red-500":"border-gray-300"}`,placeholder:"0.0"}),h.abilities?.[F]?.matrix_cells?.[R]&&m.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.abilities[F]?.matrix_cells?.[R]?.message})]},R))})]})]},O.id))})]}),m.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[m.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",children:"Avbryt"}),m.jsx("button",{type:"submit",disabled:!p||a,className:`px-4 py-2 rounded-md flex items-center space-x-2 ${p&&!a?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:a?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),m.jsx("span",{children:"Uppdaterar..."})]}):m.jsxs(m.Fragment,{children:[m.jsx(js,{size:16}),m.jsxs("span",{children:[j?"Uppdatera":"Skapa"," mne"]})]})})]})]})]})})},cU=({isOpen:t,onClose:e,onSubmit:r,nodeType:n,parentId:a,parentType:i,editData:l})=>{const[u,d]=T.useState(!1),{register:h,handleSubmit:p,formState:{errors:b,isValid:y},setValue:x,resetForm:_}=Ag(oU,{title:"",description:"",code:"",type:n,position:void 0}),k=T.useRef(!1),S=T.useRef(null);T.useEffect(()=>{if(!t){k.current=!1,S.current=null;return}if(t&&l?.id){S.current!==l.id&&(x("title",l.title||""),x("description",l.description||""),x("code",l.code||""),x("position",typeof l.position=="number"?l.position:void 0),x("type",n),S.current=l.id,k.current=!0);return}t&&!l&&!k.current&&(_(),x("type",n),k.current=!0)},[t,l?.id,n,x,_]);const A=F=>{switch(F){case"subject":return"mne";case"course":return"Kurs";case"chapter":return"Kapitel";case"area":return"Omrde";default:return"Nod"}},C=F=>{switch(F){case"subject":return"mne";case"course":return"kurs";case"chapter":return"kapitel";default:return"frlder"}},N=async F=>{d(!0);try{let R={...F};l||(n==="course"&&i==="subject"&&a&&(R.subject_id=a),n==="chapter"&&i==="course"&&a&&(R.course_id=a),n==="area"&&i==="chapter"&&a&&(R.chapter_id=a)),await r(R),e(),_()}catch(R){console.error("Error creating/updating node:",R),Me("error","Kunde inte skapa/uppdatera nod")}finally{d(!1)}};if(!t)return null;const D=!!l,j=A(n),O=i?C(i):"";return m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:m.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsx("h2",{className:"text-xl font-semibold",children:D?`Redigera ${j}`:`Skapa ny ${j}`}),m.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700",children:m.jsx(va,{size:20})})]}),m.jsxs("form",{onSubmit:p(N),className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Namn *"}),m.jsx("input",{...h("title"),type:"text",id:"title",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${b.title?"border-red-500":"border-gray-300"}`,placeholder:`Ange ${j.toLowerCase()} namn`}),!!b.title?.message&&m.jsx("p",{className:"text-red-500 text-sm mt-1",children:b.title?.message})]}),n==="course"&&m.jsxs("div",{children:[m.jsx("label",{htmlFor:"code",className:"block text-sm font-medium text-gray-700 mb-1",children:"Kod *"}),m.jsx("input",{...h("code"),type:"text",id:"code",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${b.code?"border-red-500":"border-gray-300"}`,placeholder:"t.ex. Ma3c, Fy1"}),!!b.code?.message&&m.jsx("p",{className:"text-red-500 text-sm mt-1",children:b.code?.message})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Beskrivning"}),m.jsx("textarea",{...h("description"),id:"description",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:`Beskrivning av ${j.toLowerCase()}`})]}),(n==="chapter"||n==="area")&&m.jsxs("div",{children:[m.jsx("label",{htmlFor:"position",className:"block text-sm font-medium text-gray-700 mb-1",children:"Position"}),m.jsx("input",{...h("position",{valueAsNumber:!0}),type:"number",id:"position",min:1,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${b.position?"border-red-500":"border-gray-300"}`,placeholder:"(valfritt) sorteringsindex"}),!!b?.position?.message&&m.jsx("p",{className:"text-red-500 text-sm mt-1",children:b?.position?.message})]}),a&&i&&m.jsx("div",{className:"bg-gray-50 p-3 rounded-md",children:m.jsxs("p",{className:"text-sm text-gray-600",children:["Skapas under ",O,": ",a]})}),m.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[m.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",children:"Avbryt"}),m.jsx("button",{type:"submit",disabled:!y||u,className:`px-4 py-2 rounded-md flex items-center space-x-2 ${y&&!u?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:u?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),m.jsx("span",{children:"Sparar..."})]}):m.jsxs(m.Fragment,{children:[m.jsx(js,{size:16}),m.jsx("span",{children:D?"Uppdatera":"Skapa"})]})})]})]})]})})},dU=({isOpen:t,onClose:e,onSubmit:r,nodeType:n,nodeId:a,nodeTitle:i,currentParentType:l,currentParentId:u,hierarchy:d=[]})=>{const[h,p]=T.useState(null),[b,y]=T.useState(!1),[x,_]=T.useState(new Set);T.useEffect(()=>{if(t){p(null);const F=new Set,R=B=>{B.forEach(V=>{F.add(V.id),V.children&&R(V.children)})};R(d),_(F)}},[t,d]);const k=F=>{switch(F){case"subject":return"mne";case"course":return"Kurs";case"chapter":return"Kapitel";case"area":return"Omrde";default:return"Nod"}},A=(F=>{switch(F){case"course":return["subject"];case"chapter":return["course"];case"area":return["chapter"];default:return[]}})(n),C=F=>{const R=($,G,le)=>$.id===G&&$.type===le;if(R(F,a,n)||u&&l&&R(F,u,l))return!1;const B=$=>$.children?$.children.some(G=>R(G,a,n)||B(G)):!1;return B(F)?!1:A.includes(F.type)},N=F=>{_(R=>{const B=new Set(R);return B.has(F)?B.delete(F):B.add(F),B})},D=(F,R=0)=>{const B=x.has(F.id),V=F.children&&F.children.length>0,$=C(F),G=h?.id===F.id&&h?.type===F.type;return m.jsxs("div",{children:[m.jsxs("div",{className:`flex items-center p-2 rounded-md cursor-pointer transition-colors ${$?G?"bg-accent-primary bg-opacity-20 border border-accent-primary":"hover:bg-secondary border border-transparent":"opacity-50 cursor-not-allowed"}`,style:{paddingLeft:`${R*20+12}px`},onClick:()=>{$&&(console.log("MoveNodeDialog - clicking node:",{id:F.id,title:F.title,type:F.type}),p({id:F.id,type:F.type}))},children:[V&&m.jsx("button",{onClick:le=>{le.stopPropagation(),N(F.id)},className:"mr-2 p-1 hover:bg-secondary rounded",children:B?m.jsx(ko,{size:16,className:"text-muted"}):m.jsx(Fc,{size:16,className:"text-muted"})}),m.jsx("div",{className:"mr-2",children:V?B?m.jsx(w2,{size:16}):m.jsx(sh,{size:16}):m.jsx("div",{className:"w-4 h-4 rounded-full bg-accent-primary"})}),m.jsx("div",{className:"flex-1",children:m.jsxs("div",{className:"flex items-center",children:[m.jsx("span",{className:"font-medium text-primary",children:F.title}),m.jsxs("span",{className:"ml-2 text-xs text-muted",children:["(",k(F.type),")"]})]})}),$&&m.jsx("input",{type:"radio",name:"targetParent",value:F.id,checked:G,onChange:()=>p({id:F.id,type:F.type}),className:"ml-2"})]}),B&&V&&m.jsx("div",{children:F.children.map(le=>D(le,R+1))})]},F.id)},j=async F=>{if(F.preventDefault(),!h){Me("error","Vlj en ml-frlder");return}const R=h;if(u===R.id&&l===R.type){Me("info","Noden ligger redan under vald frlder"),e();return}y(!0);try{await r(R.type,R.id),e()}catch(B){console.error("Error moving node:",B)}finally{y(!1)}};if(!t)return null;const O=k(n);return m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:m.jsxs("div",{className:"bg-panel rounded-lg p-6 w-full max-w-2xl max-h-[80vh] overflow-hidden",children:[m.jsxs("div",{className:"flex items-center justify-between mb-6",children:[m.jsxs("h2",{className:"text-xl font-semibold text-primary",children:["Flytta ",O]}),m.jsx("button",{onClick:e,className:"text-muted hover:text-primary",children:m.jsx(va,{size:20})})]}),m.jsxs("div",{className:"mb-4",children:[m.jsxs("p",{className:"text-sm text-muted mb-2",children:["Flyttar: ",m.jsx("strong",{children:i})," (ID: ",a,")"]}),l&&u&&m.jsxs("p",{className:"text-sm text-muted",children:["Frn: ",k(l)," ID: ",u]}),m.jsx("p",{className:"text-sm text-muted mt-2",children:"Vlj en giltig ml-frlder frn hierarkin nedan:"})]}),m.jsxs("form",{onSubmit:j,className:"space-y-4",children:[m.jsxs("div",{children:[m.jsxs("label",{className:"block text-sm font-medium text-primary mb-2",children:["Vlj ml-frlder frn hierarkin (endast ",n==="area"?"kapitel":n==="chapter"?"kurser":"mnen"," r klickbara)"]}),d.length===0?m.jsx("p",{className:"text-sm text-muted",children:"Inga hierarki-noder tillgngliga."}):m.jsx("div",{className:"border border-border rounded-md p-4 max-h-96 overflow-y-auto",children:d.map(F=>D(F))})]}),m.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-border",children:[m.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm border rounded-md hover:bg-secondary",style:{backgroundColor:"var(--button-secondary-bg)",color:"var(--button-secondary-text)",borderColor:"var(--button-secondary-border)"},children:"Avbryt"}),m.jsx("button",{type:"submit",disabled:b||!h,className:"px-4 py-2 text-sm rounded-md disabled:opacity-50",style:{backgroundColor:"var(--accent-primary)",color:"var(--button-text)",border:"none"},children:b?"Flyttar...":"Flytta"})]})]})]})})},hU=()=>{const{isAdmin:t}=Aa(),e=Gt();if(!t())return m.jsx("div",{className:"space-y-6",children:m.jsxs("div",{className:"bg-error/10 border border-error/20 rounded-lg p-4",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[m.jsx(Ba,{size:16,className:"text-error"}),m.jsx("h4",{className:"font-medium text-error",children:"tkomst nekad"})]}),m.jsx("p",{className:"text-sm text-error",children:"Endast administratrer kan hantera hierarki."})]})});const{hierarchy:r,loading:n,error:a,loadHierarchy:i,createSubject:l,updateSubject:u,deleteSubject:d,createCourse:h,updateCourse:p,deleteCourse:b,createChapter:y,updateChapter:x,deleteChapter:_,createArea:k,updateArea:S,deleteArea:A,moveCourse:C,moveChapter:N,moveArea:D,checkDeleteSubject:j,checkDeleteCourse:O,checkDeleteChapter:F,checkDeleteArea:R}=aU(),B=t(),V=T.useRef(!1);T.useEffect(()=>{B&&!V.current&&(i(),V.current=!0)},[B,i]);const[$,G]=T.useState(!1),[le,ie]=T.useState(!1),[pe,K]=T.useState(!1),[ue,Ce]=T.useState(!1),[ze,q]=T.useState(null),[ae,we]=T.useState(null),[be,Se]=T.useState(null),[W,ce]=T.useState(null),[Ne,Ze]=T.useState(null),[Et,wt]=T.useState(new Set),kt=de=>{wt(fe=>{const xe=new Set(fe);if(xe.has(de)){const De=new Set([de]),Ke=et=>{et.forEach(it=>{it.id===de&&it.children&&it.children.forEach(dr=>{De.add(dr.id),dr.children&&Ke(dr.children)})})};r&&Ke(r.hierarchy),De.forEach(et=>xe.delete(et))}else xe.add(de);return xe})},St=async de=>{try{await l(de),G(!1)}catch(fe){console.error("Error creating subject:",fe)}},ur=async de=>{if(ae)try{switch(ae.nodeType){case"course":await h(de);break;case"chapter":await y(de);break;case"area":await k(de);break}K(!1),we(null)}catch(fe){console.error("Error creating node:",fe)}},cr=async de=>{if(ae?.editData)try{const fe=ae.editData.id;switch(ae.nodeType){case"subject":await u(fe,de);break;case"course":await p(fe,de);break;case"chapter":await x(fe,de);break;case"area":await S(fe,de);break}K(!1),we(null)}catch(fe){console.error("Error updating node:",fe)}},Sn=async(de,fe)=>{if(Ne)try{const{node:xe}=Ne;switch(console.log("HierarchyManagement - handleMoveNodeSubmit called with:",{targetParentType:de,targetParentId:fe,node:xe}),xe.type){case"course":await C(xe.id,fe);break;case"chapter":await N(xe.id,de,fe);break;case"area":await D(xe.id,de,fe);break}await i(),Ce(!1),Ze(null)}catch(xe){console.error("Error moving node:",xe)}},Hn=async de=>{try{let fe;switch(de.type){case"subject":fe=await j(de.id);break;case"course":fe=await O(de.id);break;case"chapter":fe=await F(de.id);break;case"area":fe=await R(de.id);break;default:return}const xe=fe.can_delete!==void 0?fe.can_delete:fe.safe_to_delete,De=fe.problem_count;if(!xe){q({node:de,problemCount:De});return}if(confirm(`r du sker p att du vill ta bort ${de.title}?`))switch(de.type){case"subject":await d(de.id);break;case"course":await b(de.id);break;case"chapter":await _(de.id);break;case"area":await A(de.id);break}}catch(fe){console.error("Error deleting node:",fe)}},qt=async de=>{if(de.type==="subject")try{const xe=await(await st(`/api/hierarchy/subjects/${de.id}/edit`,{method:"GET"},e??void 0)).json();Se(xe),ce(de.id),ie(!0)}catch(fe){console.error("Error loading subject data for editing:",fe),Me("error","Kunde inte ladda mnesdata")}else we({nodeType:de.type,editData:de}),K(!0)},un=de=>{const fe=[],xe=it=>{it.forEach(dr=>{dr.id!==de.id&&(fe.push({id:dr.id,title:dr.title,type:dr.type}),dr.children&&xe(dr.children))})};r&&xe(r.hierarchy);const Ke=(it=>{switch(it){case"course":return["subject"];case"chapter":return["course"];case"area":return["chapter"];default:return[]}})(de.type),et=fe.filter(it=>Ke.includes(it.type));Ze({node:de,availableParents:et}),Ce(!0)},Pr=(de,fe)=>{we({nodeType:fe,parentId:de.id,parentType:de.type}),K(!0)},Z=()=>{if(!r)return;const de=new Set,fe=xe=>{xe.forEach(De=>{de.add(De.id),De.children&&fe(De.children)})};fe(r.hierarchy),wt(de)},re=()=>{wt(new Set)},he=de=>{switch(de){case"subject":return"mne";case"course":return"Kurs";case"chapter":return"Kapitel";case"area":return"Omrde";default:return"Nod"}};return n?m.jsxs("div",{className:"flex items-center justify-center py-8",children:[m.jsx(wl,{className:"animate-spin mr-2"}),"Laddar hierarki..."]}):a?m.jsxs("div",{className:"bg-error/10 border border-error/20 rounded-lg p-4",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[m.jsx(Ba,{size:16,className:"text-error"}),m.jsx("h4",{className:"font-medium text-error",children:"Fel vid laddning"})]}),m.jsx("p",{className:"text-sm text-error",children:a}),m.jsx("button",{onClick:()=>i(),className:"mt-3 px-4 py-2 text-sm rounded hover:opacity-80 transition-opacity",style:{backgroundColor:"var(--status-error)",color:"var(--button-text)",border:"none"},children:"Frsk igen"})]}):m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"bg-warning/10 border border-warning/20 rounded-lg p-4",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[m.jsx(Ba,{size:16,className:"text-warning"}),m.jsx("h4",{className:"font-medium text-warning",children:"Sker borttagning"})]}),m.jsx("p",{className:"text-sm text-warning",children:"Hierarki-noder kan endast tas bort om inga problem refererar till dem. Du mste frst flytta eller ta bort problem innan du kan ta bort en nod."})]}),ze&&m.jsxs("div",{className:"bg-error/10 border border-error/20 rounded-lg p-4",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[m.jsx(Ba,{size:16,className:"text-error"}),m.jsxs("h4",{className:"font-medium text-error",children:["Kan inte ta bort ",he(ze.node.type)]})]}),m.jsxs("p",{className:"text-sm text-error mb-3",children:[ze.problemCount," problem refererar till ",he(ze.node.type),' "',ze.node.title,'". Du mste frst hantera dessa problem innan du kan ta bort ',he(ze.node.type),"en."]}),m.jsx("div",{className:"flex gap-2",children:m.jsx("button",{onClick:()=>q(null),className:"px-3 py-1 text-sm rounded hover:opacity-80 transition-opacity",style:{backgroundColor:"var(--status-error)",color:"var(--button-text)",border:"none"},children:"Frst"})})]}),m.jsx(QH,{onCreateSubject:()=>G(!0),onExpandAll:Z,onCollapseAll:re,onReload:i}),m.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted mb-4",children:[m.jsx(l8,{size:16}),'Hgerklicka p en nod fr att se tgrder. Anvnd "Flytta" fr att ndra hierarki.']}),!r||!Array.isArray(r.hierarchy)||r.hierarchy.length===0?m.jsxs("div",{className:"bg-panel rounded-lg text-center py-8",children:[m.jsx("p",{className:"text-muted",children:"Inga hierarki-noder skapade n"}),m.jsx("button",{onClick:()=>G(!0),className:"mt-4 px-4 py-2 text-sm rounded-md",style:{backgroundColor:"var(--accent-primary)",color:"var(--button-text)",border:"none"},children:"Skapa frsta mnet"})]}):m.jsx(JH,{hierarchy:r.hierarchy,expandedNodes:Et,onToggleExpand:kt,onEdit:qt,onDelete:Hn,onMove:un,onCreateChild:Pr}),m.jsx(lU,{isOpen:$,onClose:()=>G(!1),onSubmit:St}),m.jsx(uU,{isOpen:le,onClose:()=>ie(!1),editData:be,onSubmit:async de=>{if(W!==null)try{await u(W,de),ie(!1),Se(null),ce(null)}catch(fe){console.error("Error updating subject:",fe)}}}),m.jsx(cU,{isOpen:pe,onClose:()=>{K(!1),we(null)},onSubmit:ae?.editData?cr:ur,nodeType:ae?.nodeType||"area",parentId:ae?.parentId,parentType:ae?.parentType,editData:ae?.editData}),m.jsx(dU,{isOpen:ue,onClose:()=>{Ce(!1),Ze(null)},onSubmit:Sn,nodeType:Ne?.node.type||"area",nodeId:Ne?.node.id||0,nodeTitle:Ne?.node.title||"",availableParents:Ne?.availableParents||[],hierarchy:r?.hierarchy||[]})]})};function Y6(t){const e=Hr(),r=Gt();return pt({mutationKey:["saveApiKey",t],mutationFn:async n=>{if(!r)throw new Error("Du mste vara inloggad fr att spara API-nycklar");const a=await st(`/v1/ai/api-key?provider=${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},r);if(!a.ok){const i=await a.json().catch(()=>({detail:"Oknt fel"}));throw new Error(i.detail??"Kunde inte spara API-nyckel")}return!0},onSuccess:()=>{e.invalidateQueries({queryKey:["aiKeys"]})}})}function X6(t){const e=Hr(),r=Gt();return pt({mutationKey:["deleteApiKey",t],mutationFn:async()=>{if(!r)throw new Error("Du mste vara inloggad fr att radera API-nycklar");const n=await st(`/v1/ai/api-key?provider=${t}`,{method:"DELETE"},r);if(!n.ok){const a=await n.json().catch(()=>({detail:"Oknt fel"}));throw new Error(a.detail??"Kunde inte radera API-nyckel")}return!0},onSuccess:()=>{e.invalidateQueries({queryKey:["aiKeys"]})}})}const fU=xt({openai:Bt(),gemini:Bt()}),mU=()=>{const{token:t}=Lr();return lr({queryKey:["ai-key-status"],queryFn:async()=>r8("/v1/ai/api-key/status",fU,{},t||void 0),staleTime:5*60*1e3,retry:2,enabled:!!t})},pU=()=>{const{user:t,isAuthenticated:e}=Lr(),{userRole:r,isUserOrHigher:n}=Aa(),[a,i]=T.useState({openai:"",gemini:""}),[l,u]=T.useState({openai:!1,gemini:!1}),[d,h]=T.useState(""),{data:p,isLoading:b,refetch:y}=mU();if(T.useEffect(()=>()=>{i({openai:"",gemini:""})},[]),!e||!t||!n())return m.jsx("div",{className:"space-y-6",children:m.jsxs("div",{className:"bg-error/10 border border-error/20 rounded-lg p-4",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[m.jsx(ho,{size:16,className:"text-error"}),m.jsx("h4",{className:"font-medium text-error",children:"tkomst nekad"})]}),m.jsx("p",{className:"text-sm text-error",children:"Du mste vara inloggad med anvndarroll eller hgre fr att hantera AI API-nycklar."})]})});const x=Y6("openai"),_=X6("openai"),k=Y6("gemini"),S=X6("gemini"),A=x.isPending||_.isPending,C=k.isPending||S.isPending,N=async j=>{if(!a[j].trim()){Me("error","API-nyckel kan inte vara tom");return}if(j==="openai"&&!a[j].startsWith("sk-")){Me("error",'OpenAI API-nyckel mste brja med "sk-"');return}if(j==="gemini"&&!a[j].startsWith("AIza")){Me("error",'Google Gemini API-nyckel mste brja med "AIza"');return}try{j==="openai"?await x.mutateAsync({api_key:a.openai.trim()}):await k.mutateAsync({api_key:a.gemini.trim()}),Me("success",`${j.toUpperCase()} API-nyckel sparad skert`),u(O=>({...O,[j]:!1})),h(`Sparade ${j.toUpperCase()} nyckel`),y(),setTimeout(()=>{i(O=>({...O,[j]:""}))},1e3)}catch(O){console.error("API Key Save Error:",O);const F=O instanceof Error?O.message:"Ett fel uppstod";Me("error",F)}},D=async j=>{try{j==="openai"?await _.mutateAsync():await S.mutateAsync(),Me("success",`${j.toUpperCase()} API-nyckel raderad`),i(O=>({...O,[j]:""})),h(`Raderade ${j.toUpperCase()} nyckel`),y()}catch(O){console.error("API Key Delete Error:",O);const F=O instanceof Error?O.message:"Ett fel uppstod";Me("error",F)}};return m.jsxs("div",{className:"space-y-8",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-2xl font-semibold text-primary mb-3",children:"AI API-nycklar"}),m.jsx("p",{className:"text-secondary mb-4",children:"Konfigurera dina API-nycklar fr AI-generering. Nycklarna krypteras och lagras skert p servern."}),m.jsxs("p",{className:"text-sm text-muted",children:["Hanteras fr: ",m.jsx("span",{className:"font-medium text-primary",children:t.username})," (",r,")"]})]}),m.jsxs("div",{className:"bg-error/10 border border-error/20 rounded-xl p-6",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[m.jsx(ho,{size:20,className:"text-error"}),m.jsx("h4",{className:"font-semibold text-error",children:"Skerhetsvarning"})]}),m.jsx("p",{className:"text-sm text-error",children:"API-nycklar r extremt knsliga. De krypteras och lagras skert p servern, men var frsiktig nr du hanterar dem. Dela aldrig dina API-nycklar med andra."})]}),m.jsxs("div",{className:"bg-panel p-4",children:[m.jsxs("div",{className:"flex items-center justify-between mb-6",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(Sp,{size:24,className:"text-accent-primary"}),m.jsx("h3",{className:"text-lg font-semibold text-primary",children:"OpenAI API-nyckel"}),!b&&p&&m.jsx("div",{className:"flex items-center gap-2",children:p.openai?m.jsxs("div",{className:"flex items-center gap-1 text-success",children:[m.jsx(kp,{size:16}),m.jsx("span",{className:"text-xs font-medium",children:"Konfigurerad"})]}):m.jsxs("div",{className:"flex items-center gap-1 text-muted",children:[m.jsx(Xx,{size:16}),m.jsx("span",{className:"text-xs font-medium",children:"Ej konfigurerad"})]})})]}),m.jsx("div",{className:"flex items-center gap-2",children:m.jsx("button",{onClick:()=>u(j=>({...j,openai:!j.openai})),className:"p-2 text-muted hover:text-secondary transition-colors rounded-lg hover:bg-secondary",title:l.openai?"Dlj nyckel":"Visa nyckel",children:l.openai?m.jsx(vl,{size:18}):m.jsx(_l,{size:18})})})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("input",{type:l.openai?"text":"password",value:a.openai,onChange:j=>i(O=>({...O,openai:j.target.value})),placeholder:"sk-...",className:"w-full px-4 py-3 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-accent-primary focus:border-transparent bg-panel text-primary",autoComplete:"off",spellCheck:"false"}),m.jsx("p",{className:"text-xs text-muted mt-2",children:'Nyckeln mste brja med "sk-"'})]}),m.jsxs("div",{className:"flex gap-3",children:[m.jsxs("button",{onClick:()=>N("openai"),disabled:A||!a.openai.trim(),className:"flex items-center gap-2 px-6 py-3 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 hover:shadow-md",style:{backgroundColor:"var(--accent-primary)",color:"var(--button-text)",border:"none"},children:[m.jsx(js,{size:18}),"Spara skert"]}),m.jsxs("button",{onClick:()=>D("openai"),disabled:A,className:"flex items-center gap-2 px-6 py-3 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 hover:shadow-md",style:{backgroundColor:"var(--status-error)",color:"var(--button-text)",border:"none"},children:[m.jsx(xa,{size:18}),"Radera"]})]})]})]}),m.jsxs("div",{className:"bg-panel p-4",children:[m.jsxs("div",{className:"flex items-center justify-between mb-6",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(Sp,{size:24,className:"text-accent-primary"}),m.jsx("h3",{className:"text-lg font-semibold text-primary",children:"Google Gemini API-nyckel"}),!b&&p&&m.jsx("div",{className:"flex items-center gap-2",children:p.gemini?m.jsxs("div",{className:"flex items-center gap-1 text-success",children:[m.jsx(kp,{size:16}),m.jsx("span",{className:"text-xs font-medium",children:"Konfigurerad"})]}):m.jsxs("div",{className:"flex items-center gap-1 text-muted",children:[m.jsx(Xx,{size:16}),m.jsx("span",{className:"text-xs font-medium",children:"Ej konfigurerad"})]})})]}),m.jsx("div",{className:"flex items-center gap-2",children:m.jsx("button",{onClick:()=>u(j=>({...j,gemini:!j.gemini})),className:"p-2 text-muted hover:text-secondary transition-colors rounded-lg hover:bg-secondary",title:l.gemini?"Dlj nyckel":"Visa nyckel",children:l.gemini?m.jsx(vl,{size:18}):m.jsx(_l,{size:18})})})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("input",{type:l.gemini?"text":"password",value:a.gemini,onChange:j=>i(O=>({...O,gemini:j.target.value})),placeholder:"AIza...",className:"w-full px-4 py-3 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-accent-primary focus:border-transparent bg-panel text-primary",autoComplete:"off",spellCheck:"false"}),m.jsx("p",{className:"text-xs text-muted mt-2",children:'Nyckeln mste brja med "AIza"'})]}),m.jsxs("div",{className:"flex gap-3",children:[m.jsxs("button",{onClick:()=>N("gemini"),disabled:C||!a.gemini.trim(),className:"flex items-center gap-2 px-6 py-3 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 hover:shadow-md",style:{backgroundColor:"var(--accent-primary)",color:"var(--button-text)",border:"none"},children:[m.jsx(js,{size:18}),"Spara skert"]}),m.jsxs("button",{onClick:()=>D("gemini"),disabled:C,className:"flex items-center gap-2 px-6 py-3 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 hover:shadow-md",style:{backgroundColor:"var(--status-error)",color:"var(--button-text)",border:"none"},children:[m.jsx(xa,{size:18}),"Radera"]})]})]})]}),m.jsxs("div",{className:"bg-info/10 border border-info/20 rounded-xl p-6",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[m.jsx(ho,{size:20,className:"text-info"}),m.jsx("h4",{className:"font-semibold text-info",children:"Skerhet"})]}),m.jsxs("ul",{className:"text-sm text-info space-y-2",children:[m.jsx("li",{children:" API-nycklarna krypteras med AES-256 innan lagring"}),m.jsx("li",{children:" Nycklarna lagras endast p servern, aldrig i webblsaren"}),m.jsx("li",{children:" Alla API-anrop loggas fr skerhet"}),m.jsx("li",{children:" Nycklarna rensas automatiskt frn memory efter sparande"})]})]}),d&&m.jsx("div",{className:"bg-success/10 border border-success/20 rounded-xl p-6",children:m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(Ba,{size:20,className:"text-success"}),m.jsxs("span",{className:"text-sm text-success",children:["Senaste aktivitet: ",d]})]})})]})};function gU(){const t=Gt();return lr({queryKey:["users"],queryFn:async()=>{const e=await st("/v1/users/",{method:"GET"},t??void 0);if(!e.ok){const r=await e.json().catch(()=>({detail:"Oknt fel"}));throw new Error(r.detail??"Kunde inte hmta anvndare")}return await e.json()},enabled:!!t,staleTime:1e3*60*5})}function bU(){const t=Hr(),e=Gt();return pt({mutationKey:["promoteUser"],mutationFn:async r=>{const n=await st(`/v1/users/${r}/promote`,{method:"POST"},e??void 0);if(!n.ok){const a=await n.json().catch(()=>({detail:"Oknt fel"}));throw new Error(a.detail??"Kunde inte befordra anvndare")}return await n.json()},onSuccess:()=>{t.invalidateQueries({queryKey:["users"]})}})}function yU(){const t=Hr(),e=Gt();return pt({mutationKey:["demoteUser"],mutationFn:async r=>{const n=await st(`/v1/users/${r}/demote`,{method:"POST"},e??void 0);if(!n.ok){const a=await n.json().catch(()=>({detail:"Oknt fel"}));throw new Error(a.detail??"Kunde inte degradera anvndare")}return await n.json()},onSuccess:()=>{t.invalidateQueries({queryKey:["users"]})}})}function xU(){const t=Hr(),e=Gt();return pt({mutationKey:["toggleUserActive"],mutationFn:async({userId:r,isActive:n})=>{const a=await st(`/v1/users/${r}/toggle-active`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({is_active:n})},e??void 0);if(!a.ok){const i=await a.json().catch(()=>({detail:"Oknt fel"}));throw new Error(i.detail??"Kunde inte ndra anvndarstatus")}return await a.json()},onSuccess:()=>{t.invalidateQueries({queryKey:["users"]})}})}const vU=()=>{const{user:t,isAuthenticated:e}=Lr(),{isAdmin:r}=Aa(),[n,a]=T.useState(null),[i,l]=T.useState(!1),[u,d]=T.useState(!1),[h,p]=T.useState(!1),{data:b=[],isLoading:y,refetch:x}=gU(),_=bU(),k=yU(),S=xU();if(!e||!r())return m.jsx("div",{className:"space-y-6",children:m.jsxs("div",{className:"bg-error/10 border border-error/20 rounded-lg p-4",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[m.jsx(ho,{size:16,className:"text-error"}),m.jsx("h4",{className:"font-medium text-error",children:"tkomst nekad"})]}),m.jsx("p",{className:"text-sm text-error",children:"Endast administratrer kan hantera anvndare."})]})});const A=async R=>{try{await _.mutateAsync(R),Me("success","Anvndare befordrad framgngsrikt"),l(!1),a(null)}catch(B){const V=B instanceof Error?B.message:"Kunde inte promovera anvndare";Me("error",V)}},C=async R=>{try{await k.mutateAsync(R),Me("success","Anvndare degraderad framgngsrikt"),d(!1),a(null)}catch(B){const V=B instanceof Error?B.message:"Kunde inte degradera anvndare";Me("error",V)}},N=async(R,B)=>{try{await S.mutateAsync({userId:R,isActive:B}),Me("success","Anvndarstatus ndrad framgngsrikt"),p(!1),a(null)}catch(V){const $=V instanceof Error?V.message:"Kunde inte ndra anvndarstatus";Me("error",$)}},D=R=>{switch(R){case"admin":return m.jsx(ho,{size:16,className:"text-error"});case"trusted":return m.jsx(gj,{size:16,className:"text-info"});case"user":return m.jsx(Jx,{size:16,className:"text-secondary"});default:return m.jsx(Jx,{size:16,className:"text-secondary"})}},j=R=>{switch(R){case"admin":return"Administratr";case"trusted":return"Betrodd";case"user":return"Anvndare";default:return R}},O=R=>R?m.jsx(Mj,{size:16,className:"text-success"}):m.jsx(Dj,{size:16,className:"text-error"}),F=R=>new Date(R).toLocaleDateString("sv-SE",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-2xl font-semibold text-primary mb-3",children:"Anvndarhantering"}),m.jsx("p",{className:"text-secondary mb-4",children:"Hantera anvndares roller och aktiva status. Endast administratrer kan utfra dessa tgrder."}),m.jsxs("p",{className:"text-sm text-muted",children:["Hanteras av: ",m.jsx("span",{className:"font-medium text-primary",children:t?.username||"Oknd"})," (admin)"]})]}),m.jsxs("div",{className:"bg-warning/10 border border-warning/20 rounded-xl p-6",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[m.jsx(Ba,{size:20,className:"text-warning"}),m.jsx("h4",{className:"font-semibold text-warning",children:"Skerhetsvarning"})]}),m.jsx("p",{className:"text-sm text-warning",children:"Var frsiktig nr du ndrar anvndares roller och status. Inaktiverade anvndare kan inte logga in p systemet."})]}),m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(Lc,{size:20,className:"text-primary"}),m.jsxs("span",{className:"text-sm text-muted",children:[b.length," anvndare totalt"]})]}),m.jsxs("button",{onClick:()=>x(),disabled:y,className:"flex items-center gap-2 px-4 py-2 border border-border rounded-md hover:bg-secondary disabled:opacity-50",children:[m.jsx(wl,{size:16,className:y?"animate-spin":""}),"Uppdatera"]})]}),m.jsx("div",{className:"bg-panel rounded-lg overflow-hidden",children:y?m.jsxs("div",{className:"flex items-center justify-center py-8",children:[m.jsx(wl,{className:"animate-spin mr-2"}),"Laddar anvndare..."]}):m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"w-full",children:[m.jsx("thead",{className:"bg-secondary border-b border-border",children:m.jsxs("tr",{children:[m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted uppercase tracking-wider",children:"Anvndare"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted uppercase tracking-wider",children:"Roll"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted uppercase tracking-wider",children:"Status"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted uppercase tracking-wider",children:"Skapad"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted uppercase tracking-wider",children:"tgrder"})]})}),m.jsx("tbody",{className:"divide-y divide-border",children:b.map(R=>m.jsxs("tr",{className:"hover:bg-secondary",children:[m.jsx("td",{className:"px-6 py-4",children:m.jsxs("div",{children:[m.jsx("div",{className:"font-medium text-primary",children:R.username}),R.email&&m.jsx("div",{className:"text-sm text-muted",children:R.email}),R.full_name&&m.jsx("div",{className:"text-sm text-muted",children:R.full_name})]})}),m.jsx("td",{className:"px-6 py-4",children:m.jsxs("div",{className:"flex items-center gap-2",children:[D(R.role),m.jsx("span",{className:"text-sm",children:j(R.role)})]})}),m.jsx("td",{className:"px-6 py-4",children:m.jsxs("div",{className:"flex items-center gap-2",children:[O(R.is_active),m.jsx("span",{className:`text-sm ${R.is_active?"text-success":"text-error"}`,children:R.is_active?"Aktiv":"Inaktiv"})]})}),m.jsx("td",{className:"px-6 py-4 text-sm text-muted",children:F(R.created_at)}),m.jsx("td",{className:"px-6 py-4",children:m.jsxs("div",{className:"flex gap-2",children:[R.role==="user"&&m.jsx("button",{onClick:()=>{a(R),l(!0)},className:"px-3 py-1 text-xs rounded hover:opacity-80 transition-opacity",style:{backgroundColor:"var(--accent-primary)",color:"var(--button-text)",border:"none"},children:"Promovera till Betrodd"}),R.role==="trusted"&&m.jsx("button",{onClick:()=>{a(R),d(!0)},className:"px-3 py-1 text-xs rounded hover:opacity-80 transition-opacity",style:{backgroundColor:"var(--status-warning)",color:"var(--button-text)",border:"none"},children:"Degradera till Anvndare"}),R.core_user_id!==t?.core_user_id&&m.jsx("button",{onClick:()=>{a(R),p(!0)},className:"px-3 py-1 text-xs rounded hover:opacity-80 transition-opacity",style:{backgroundColor:R.is_active?"var(--text-muted)":"var(--accent-primary)",color:"var(--button-text)",border:"none"},children:R.is_active?"Inaktivera":"Aktivera"})]})})]},R.core_user_id))})]})})}),i&&n&&m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:m.jsxs("div",{className:"bg-panel rounded-lg p-6 w-full max-w-md",children:[m.jsxs("h3",{className:"text-lg font-semibold text-primary mb-4",children:["Promovera ",n.username]}),m.jsx("p",{className:"text-sm text-muted mb-6",children:"Denna anvndare kommer att f betrodd status och kan hantera invite tokens och snippets."}),m.jsxs("div",{className:"flex justify-end gap-3",children:[m.jsx("button",{onClick:()=>{l(!1),a(null)},className:"px-4 py-2 text-sm border rounded-md hover:bg-secondary",style:{backgroundColor:"var(--button-secondary-bg)",color:"var(--button-secondary-text)",borderColor:"var(--button-secondary-border)"},children:"Avbryt"}),m.jsx("button",{onClick:()=>A(n.core_user_id),className:"px-4 py-2 text-sm rounded-md hover:opacity-80 transition-opacity",style:{backgroundColor:"var(--accent-primary)",color:"var(--button-text)",border:"none"},children:"Promovera till Betrodd"})]})]})}),u&&n&&m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:m.jsxs("div",{className:"bg-panel rounded-lg p-6 w-full max-w-md",children:[m.jsxs("h3",{className:"text-lg font-semibold text-primary mb-4",children:["Degradera ",n.username]}),m.jsx("p",{className:"text-sm text-muted mb-6",children:"Denna anvndare kommer att f grundlggande anvndarstatus."}),m.jsxs("div",{className:"flex justify-end gap-3",children:[m.jsx("button",{onClick:()=>{d(!1),a(null)},className:"px-4 py-2 text-sm border rounded-md hover:bg-secondary",style:{backgroundColor:"var(--button-secondary-bg)",color:"var(--button-secondary-text)",borderColor:"var(--button-secondary-border)"},children:"Avbryt"}),m.jsx("button",{onClick:()=>C(n.core_user_id),className:"px-4 py-2 text-sm rounded-md hover:opacity-80 transition-opacity",style:{backgroundColor:"var(--status-warning)",color:"var(--button-text)",border:"none"},children:"Degradera till Anvndare"})]})]})}),h&&n&&m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:m.jsxs("div",{className:"bg-panel rounded-lg p-6 w-full max-w-md",children:[m.jsxs("h3",{className:"text-lg font-semibold text-primary mb-4",children:[n.is_active?"Inaktivera":"Aktivera"," ",n.username]}),m.jsx("p",{className:"text-sm text-muted mb-6",children:n.is_active?"Inaktiverade anvndare kan inte logga in p systemet.":"Aktiverade anvndare kan logga in och anvnda systemet."}),m.jsxs("div",{className:"flex justify-end gap-3",children:[m.jsx("button",{onClick:()=>{p(!1),a(null)},className:"px-4 py-2 text-sm border rounded-md hover:bg-secondary",style:{backgroundColor:"var(--button-secondary-bg)",color:"var(--button-secondary-text)",borderColor:"var(--button-secondary-border)"},children:"Avbryt"}),m.jsx("button",{onClick:()=>N(n.core_user_id,!n.is_active),className:"px-4 py-2 text-sm rounded-md hover:opacity-80 transition-opacity",style:{backgroundColor:n.is_active?"var(--text-muted)":"var(--accent-primary)",color:"var(--button-text)",border:"none"},children:n.is_active?"Inaktivera":"Aktivera"})]})]})})]})},r_=["flagPermissions"],_U=["roleHierarchy"];function wU(){const t=Gt();return lr({queryKey:r_,queryFn:async()=>{const e=await st("/v1/flag-permissions/",{method:"GET"},t??void 0);if(!e.ok){const r=await e.json().catch(()=>({detail:e.statusText}));throw new Error(r.detail??"Kunde inte hmta flaggbehrigheter")}return e.json()},enabled:!!t})}function kU(){return lr({queryKey:_U,queryFn:async()=>{const t=await st("/v1/flag-permissions/role-hierarchy",{method:"GET"});if(!t.ok)throw new Error(t.statusText);return t.json()},staleTime:1e3*60*60})}function SU(){const t=Hr(),e=Gt();return pt({mutationKey:["updateFlagPermission"],mutationFn:async({flagName:r,min_role:n})=>{const a=await st(`/v1/flag-permissions/${encodeURIComponent(r)}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({min_role:n})},e??void 0);if(!a.ok){const i=await a.json().catch(()=>({detail:a.statusText}));throw new Error(i.detail??"Kunde inte uppdatera behrighet")}return a.json()},onSuccess:()=>{t.invalidateQueries({queryKey:r_})}})}const Q6={is_np:"NP",is_s:"SEC",is_r:"REP",is_fake:"AI",is_elev:"ELEV",is_whole:"HEL",is_digital:"DIG",request_publish:"REQ"},W6={guest:"Guest",user:"User",trusted:"Trusted",admin:"Admin"},AU=()=>{const t=T.useContext(h2),{isAdmin:e}=Aa();if(!t)return null;if(!e())return m.jsx("div",{className:"space-y-6",children:m.jsxs("div",{className:"bg-error/10 border border-error/20 rounded-lg p-4",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[m.jsx(ho,{size:16,className:"text-error"}),m.jsx("h4",{className:"font-medium text-error",children:"tkomst nekad"})]}),m.jsx("p",{className:"text-sm text-error",children:"Endast administratrer kan hantera flaggbehrigheter."})]})});const{data:r={},isPending:n,error:a}=wU(),{data:i={},isPending:l,error:u}=kU(),d=SU(),h=n||l,p=d.isPending,b=(a??u)?.message??null,y=(x,_)=>{const k={flagName:x,min_role:_};d.mutate(k,{onSuccess:()=>{Me("success",`Behrighet fr ${Q6[x]} uppdaterad till ${W6[_]}`)},onError:S=>{const A=S instanceof Error?S.message:"Kunde inte uppdatera behrighet";Me("error",A)}})};return h?m.jsx("div",{className:"flex items-center justify-center p-8",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),m.jsx("p",{style:{color:"var(--text-secondary)"},children:"Laddar flaggbehrigheter..."})]})}):b?m.jsxs("div",{className:"p-6",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-4 p-3 rounded-lg",style:{backgroundColor:"var(--bg-error)",color:"var(--text-error)"},children:[m.jsx(wp,{size:20}),m.jsx("span",{className:"font-medium",children:"Fel vid laddning"})]}),m.jsx("p",{style:{color:"var(--text-secondary)"},className:"mb-4",children:b}),m.jsx("button",{onClick:()=>{d.reset()},className:"px-4 py-2 rounded border",style:{backgroundColor:"var(--accent-primary)",color:"var(--button-text)",borderColor:"var(--accent-primary)"},children:"Frsk igen"})]}):m.jsxs("div",{className:"p-6",children:[m.jsxs("div",{className:"mb-6",children:[m.jsx("h2",{className:"text-xl font-semibold mb-2",style:{color:"var(--text-primary)"},children:"Flaggbehrigheter"}),m.jsx("p",{style:{color:"var(--text-secondary)"},children:"Konfigurera vilka roller som kan anvnda olika problem-flaggor. Endast admin kan ndra dessa instllningar."})]}),p&&m.jsxs("div",{className:"mb-4 p-3 rounded-lg flex items-center gap-2",style:{backgroundColor:"var(--bg-info)",color:"var(--text-info)"},children:[m.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current"}),m.jsx("span",{children:"Sparar ndringar..."})]}),m.jsx("div",{className:"space-y-4",children:Object.keys(i).length>0&&Object.entries(r).map(([x,_])=>m.jsx("div",{className:"p-4 rounded-lg border",style:{backgroundColor:"var(--bg-panel)",borderColor:"var(--border-primary)",borderStyle:"solid",borderWidth:"1px"},children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(_2,{size:20,style:{color:"var(--text-secondary)"}}),m.jsx("div",{children:m.jsx("div",{className:"font-medium",style:{color:"var(--text-primary)"},children:Q6[x]})})]}),m.jsx("select",{value:_,onChange:k=>y(x,k.target.value),className:"px-3 py-2 rounded border",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-primary)",borderColor:"var(--border-primary)"},disabled:p,children:Object.keys(i).sort((k,S)=>i[k]-i[S]).map(k=>m.jsx("option",{value:k,children:W6[k]},k))})]})},x))})]})},EU=()=>{const{hasRole:t}=Aa(),[e,r]=T.useState("profile"),n=[{id:"profile",title:"Profil",icon:m.jsx(kl,{size:20})},{id:"invite",title:"Invite",icon:m.jsx(Lc,{size:20}),requiredRole:"trusted"},{id:"snippets",title:"Snippets",icon:m.jsx(i8,{size:20})},{id:"ai-keys",title:"AI API-nycklar",icon:m.jsx(Sp,{size:20})},{id:"hierarchy",title:"Hierarki",icon:m.jsx($M,{size:20}),requiredRole:"admin"},{id:"users",title:"Anvndarhantering",icon:m.jsx(ho,{size:20}),requiredRole:"admin"},{id:"flag-permissions",title:"Flaggbehrigheter",icon:m.jsx(_2,{size:20}),requiredRole:"admin"}],a=x=>x.requiredRole?t(x.requiredRole):!0,i=()=>m.jsx(YH,{}),l=()=>m.jsx(VH,{}),u=()=>m.jsx(XH,{}),d=()=>m.jsx(hU,{}),h=()=>m.jsx(pU,{}),p=()=>m.jsx(vU,{}),b=()=>m.jsx(AU,{}),y=()=>{switch(e){case"profile":return i();case"invite":return l();case"snippets":return u();case"ai-keys":return h();case"hierarchy":return d();case"users":return p();case"flag-permissions":return b();default:return i()}};return m.jsx("div",{className:"max-w-7xl mx-auto",style:{background:"var(--bg-panel)"},children:m.jsxs("div",{className:"flex gap-8",children:[m.jsx("div",{className:"w-72 flex-shrink-0",children:m.jsxs("div",{className:"bg-panel rounded-xl shadow-sm border border-border p-6",children:[m.jsxs("div",{className:"flex items-center gap-4 mb-4 pb-1",children:[m.jsx(c8,{size:24,className:"text-accent-primary"}),m.jsx("h1",{className:"text-xl font-semibold text-primary",children:"Instllningar"})]}),m.jsx("nav",{className:"space-y-2",children:n.map(x=>a(x)?m.jsxs("button",{onClick:()=>r(x.id),className:`w-full flex items-center gap-3 px-4 py-3 text-left rounded-lg transition-all duration-200 ${e===x.id?"bg-accent-primary/10 text-accent-primary border-r-2 border-accent-primary shadow-sm":"text-secondary hover:bg-accent-primary/5 hover:text-accent-primary hover:shadow-sm"}`,children:[x.icon,m.jsx("span",{className:"flex-1 font-medium",children:x.title}),m.jsx(Fc,{size:18,className:"opacity-60"})]},x.id):null)})]})}),m.jsx("div",{className:"flex-1",children:m.jsx("div",{className:"bg-panel rounded-xl shadow-sm border border-border p-8",children:y()})})]})})};var CU=function(e,r,n){for(var a=n,i=0,l=e.length;a<r.length;){var u=r[a];if(i<=0&&r.slice(a,a+l)===e)return a;u==="\\"?a++:u==="{"?i++:u==="}"&&i--,a++}return-1},TU=function(e){return e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")},NU=/^\\begin{/,MU=function(e,r){for(var n,a=[],i=new RegExp("("+r.map(h=>TU(h.left)).join("|")+")");n=e.search(i),n!==-1;){n>0&&(a.push({type:"text",data:e.slice(0,n)}),e=e.slice(n));var l=r.findIndex(h=>e.startsWith(h.left));if(n=CU(r[l].right,e,r[l].left.length),n===-1)break;var u=e.slice(0,n+r[l].right.length),d=NU.test(u)?u:e.slice(r[l].left.length,n);a.push({type:"math",data:d,rawData:u,display:r[l].display}),e=e.slice(n+r[l].right.length)}return e!==""&&a.push({type:"text",data:e}),a},jU=function(e,r){var n=MU(e,r.delimiters);if(n.length===1&&n[0].type==="text")return null;for(var a=document.createDocumentFragment(),i=0;i<n.length;i++)if(n[i].type==="text")a.appendChild(document.createTextNode(n[i].data));else{var l=document.createElement("span"),u=n[i].data;r.displayMode=n[i].display;try{r.preProcess&&(u=r.preProcess(u)),Es.render(u,l,r)}catch(d){if(!(d instanceof Es.ParseError))throw d;r.errorCallback("KaTeX auto-render: Failed to parse `"+n[i].data+"` with ",d),a.appendChild(document.createTextNode(n[i].rawData));continue}a.appendChild(l)}return a},DU=function t(e,r){for(var n=0;n<e.childNodes.length;n++){var a=e.childNodes[n];if(a.nodeType===3){for(var i=a.textContent,l=a.nextSibling,u=0;l&&l.nodeType===Node.TEXT_NODE;)i+=l.textContent,l=l.nextSibling,u++;var d=jU(i,r);if(d){for(var h=0;h<u;h++)a.nextSibling.remove();n+=d.childNodes.length-1,e.replaceChild(d,a)}else n+=u}else a.nodeType===1&&function(){var p=" "+a.className+" ",b=r.ignoredTags.indexOf(a.nodeName.toLowerCase())===-1&&r.ignoredClasses.every(y=>p.indexOf(" "+y+" ")===-1);b&&t(a,r)}()}},zU=function(e,r){if(!e)throw new Error("No element provided to render");var n={};for(var a in r)r.hasOwnProperty(a)&&(n[a]=r[a]);n.delimiters=n.delimiters||[{left:"$$",right:"$$",display:!0},{left:"\\(",right:"\\)",display:!1},{left:"\\begin{equation}",right:"\\end{equation}",display:!0},{left:"\\begin{align}",right:"\\end{align}",display:!0},{left:"\\begin{alignat}",right:"\\end{alignat}",display:!0},{left:"\\begin{gather}",right:"\\end{gather}",display:!0},{left:"\\begin{CD}",right:"\\end{CD}",display:!0},{left:"\\[",right:"\\]",display:!0}],n.ignoredTags=n.ignoredTags||["script","noscript","style","textarea","pre","code","option"],n.ignoredClasses=n.ignoredClasses||[],n.errorCallback=n.errorCallback||console.error,n.macros=n.macros||{},DU(e,n)};function OU(t){return t.toLowerCase().trim().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")}const n_=({markdown:t,onHeadings:e})=>{const r=T.useRef(null),n=T.useMemo(()=>{const a=t.replace(/^---[\s\S]*?---\s*/m,""),l=new _n({html:!0,linkify:!0,breaks:!0}).render(a);return t7.sanitize(l)},[t]);return T.useEffect(()=>{const a=r.current;if(!a)return;const i=[];a.querySelectorAll("h2, h3").forEach(l=>{const u=(l.textContent||"").trim();if(!u)return;const d=l.id||OU(u);l.id=d;const h=l.tagName.toLowerCase()==="h2"?2:3;i.push({id:d,text:u,level:h})}),e?.(i);try{zU(a,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}],throwOnError:!1})}catch{}},[n,e]),m.jsx("div",{ref:r,dangerouslySetInnerHTML:{__html:n}})},a_=({headings:t})=>{const[e,r]=T.useState(null),n=T.useRef(null),a=T.useMemo(()=>t,[t]);return T.useEffect(()=>{n.current&&(n.current.disconnect(),n.current=null);const i=new IntersectionObserver(l=>{l.forEach(u=>{u.isIntersecting&&r(u.target.id)})},{rootMargin:"0px 0px -70% 0px",threshold:[0,1]});return n.current=i,t.forEach(l=>{const u=document.getElementById(l.id);u&&i.observe(u)}),()=>i.disconnect()},[t]),m.jsxs("nav",{className:"sticky top-[64px] max-h-[calc(100vh-80px)] overflow-auto pr-4 text-sm","aria-label":"Innehll",children:[m.jsx("div",{className:"font-semibold mb-2",style:{color:"var(--text-secondary)"},children:"Innehll"}),m.jsx("ul",{className:"space-y-1",children:a.map(i=>m.jsx("li",{className:i.level===3?"ml-3":"",children:m.jsx("a",{href:`#${i.id}`,className:`block px-2 py-1 rounded hover:underline ${e===i.id?"bg-[var(--bg-secondary)]":""}`,style:{color:"var(--text-primary)"},children:i.text})},i.id))})]})};function RU(){const[t,e]=T.useState([]),[r,n]=T.useState("");return T.useEffect(()=>{fetch("/static/docs/overview.md").then(i=>i.ok?i.text():Promise.reject(new Error(`HTTP ${i.status}`))).then(n).catch(()=>n(`# Dokumentation
Kunde inte lsa dokumentationen just nu.`))},[]),m.jsx("main",{className:"overflow-y-auto h-[calc(100vh-56px)] p-6 md:p-12 main-content bg-panel",children:m.jsxs("div",{className:"mx-auto w-full max-w-6xl grid grid-cols-1 md:grid-cols-[260px_1fr] gap-6",children:[m.jsx("div",{className:"hidden md:block",children:m.jsx(a_,{headings:t})}),m.jsxs("article",{className:"prose max-w-none",style:{color:"var(--text-primary)"},children:[m.jsx(n_,{markdown:r,onHeadings:e}),m.jsx(J9,{requiredRole:"admin",children:m.jsxs("div",{className:"mt-8 p-4 rounded border",style:{borderColor:"var(--border-primary)"},children:[m.jsx("div",{className:"font-semibold mb-2",style:{color:"var(--text-secondary)"},children:"Admin: Redigera dokumentation"}),m.jsxs("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:["Innehllet laddas frn ",m.jsx("code",{children:"/public/static/docs/overview.md"}),". Erstt filen eller uppdatera den direkt fr att ndra text och bilder. Std fr KaTeX och bilder r aktiverat."]})]})})]})]})})}function FU(){const[t,e]=T.useState([]),[r,n]=T.useState("");return T.useEffect(()=>{fetch("/static/docs/changelog.md").then(i=>i.ok?i.text():Promise.reject(new Error(`HTTP ${i.status}`))).then(n).catch(()=>n(`# Changelog
Kunde inte lsa changelog just nu.`))},[]),m.jsx("main",{className:"overflow-y-auto h-[calc(100vh-56px)] p-6 md:p-12 main-content bg-panel",children:m.jsxs("div",{className:"mx-auto w-full max-w-6xl grid grid-cols-1 md:grid-cols-[260px_1fr] gap-6",children:[m.jsx("div",{className:"hidden md:block",children:m.jsx(a_,{headings:t})}),m.jsxs("article",{className:"prose max-w-none",style:{color:"var(--text-primary)"},children:[m.jsx(n_,{markdown:r,onHeadings:e}),m.jsx(J9,{requiredRole:"admin",children:m.jsxs("div",{className:"mt-8 p-4 rounded border",style:{borderColor:"var(--border-primary)"},children:[m.jsx("div",{className:"font-semibold mb-2",style:{color:"var(--text-secondary)"},children:"Admin: Uppdatera Changelog"}),m.jsxs("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:["Innehllet laddas frn ",m.jsx("code",{children:"/public/static/docs/changelog.md"}),". Erstt eller uppdatera fr att lgga till nya poster."]})]})})]})]})})}function LU(){const{isAuthenticated:t}=Lr(),e=ka();function r({children:n}){return t?m.jsx(m.Fragment,{children:n}):m.jsx(qS,{to:"/login",state:{from:e},replace:!0})}return m.jsxs("div",{className:"min-h-screen grid grid-rows-[auto_1fr] layout-container",children:[m.jsx("div",{className:"sticky top-0 z-30",children:m.jsx(Bj,{})}),m.jsxs(US,{children:[m.jsx(ci,{path:"/",element:m.jsx("main",{className:"overflow-y-auto h-[calc(100vh-56px)] p-6 md:p-12 main-content bg-panel",children:m.jsx("div",{className:"flex items-center justify-center h-full",children:m.jsxs("div",{className:"text-center",children:[m.jsx("h1",{className:"text-4xl font-bold mb-4 text-primary",children:"Hello world!"}),m.jsx("p",{className:"text-secondary",children:"Vlkommen till Judgement Day"})]})})})}),m.jsx(ci,{path:"/docs",element:m.jsx(RU,{})}),m.jsx(ci,{path:"/changelog",element:m.jsx(FU,{})}),m.jsx(ci,{path:"/problems",element:m.jsx(r,{children:m.jsx(IH,{})})}),m.jsx(ci,{path:"/login",element:m.jsx("main",{className:"overflow-y-auto h-[calc(100vh-56px)] p-6 md:p-12 main-content bg-panel",children:m.jsx(yD,{})})}),m.jsx(ci,{path:"/signup",element:m.jsx("main",{className:"overflow-y-auto h-[calc(100vh-56px)] p-6 md:p-12 main-content bg-panel",children:m.jsx($H,{})})}),m.jsx(ci,{path:"/settings",element:m.jsx(r,{children:m.jsx("main",{className:"overflow-y-auto h-[calc(100vh-56px)] p-6 md:p-12 main-content bg-panel",children:m.jsx(EU,{})})})})]})]})}const PU="modulepreload",BU=function(t){return"/jd_pages/"+t},J6={},Ju=function(e,r,n){let a=Promise.resolve();if(r&&r.length>0){let d=function(h){return Promise.all(h.map(p=>Promise.resolve(p).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=l?.nonce||l?.getAttribute("nonce");a=d(r.map(h=>{if(h=BU(h),h in J6)return;J6[h]=!0;const p=h.endsWith(".css"),b=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${b}`))return;const y=document.createElement("link");if(y.rel=p?"stylesheet":PU,p||(y.as="script"),y.crossOrigin="",y.href=h,u&&y.setAttribute("nonce",u),document.head.appendChild(y),p)return new Promise((x,_)=>{y.addEventListener("load",x),y.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${h}`)))})}))}function i(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return a.then(l=>{for(const u of l||[])u.status==="rejected"&&i(u.reason);return e().catch(i)})},s_=({children:t})=>{const[e,r]=T.useState(null),[n,a]=T.useState(null),i=T.useRef(null),l=T.useRef(null),u=Hr(),{data:d}=cD(e??void 0);rt.useEffect(()=>u.getMutationCache().subscribe(S=>{if(S.type==="updated"&&S.mutation.options.mutationKey?.[0]==="login"){const A=S.mutation;if(A.state.status==="success"&&A.state.data){const C=A.state.data;r(C.access_token),Ju(async()=>{const{OpenAPI:N}=await Promise.resolve().then(()=>hd);return{OpenAPI:N}},[]).then(({OpenAPI:N})=>{N.TOKEN=C.access_token}),a(C.refresh_token||null),u.setQueryData(["currentUser"],C.user)}}}),[u]);const h=T.useCallback(()=>{i.current&&(clearTimeout(i.current),i.current=null),r(null),a(null),l.current=null,u.clear(),Ju(async()=>{const{OpenAPI:k}=await Promise.resolve().then(()=>hd);return{OpenAPI:k}},void 0).then(({OpenAPI:k})=>{k.TOKEN=void 0})},[u]),p=T.useCallback(async()=>{if(!n)return h(),!1;try{const{AuthenticationService:k}=await Ju(async()=>{const{AuthenticationService:N}=await import("./AuthenticationService-CBz-RICr.js");return{AuthenticationService:N}},[]),{OpenAPI:S}=await Ju(async()=>{const{OpenAPI:N}=await Promise.resolve().then(()=>hd);return{OpenAPI:N}},void 0),A=S.TOKEN;S.TOKEN=n;const C=await k.refreshTokenAuthRefreshPost();return S.TOKEN=A,r(C.access_token),a(C.refresh_token||null),l.current=C.access_token,u.setQueryData(["currentUser"],C.user),!0}catch{return h(),!1}},[n,h,u]);T.useEffect(()=>{Ju(async()=>{const{OpenAPI:k}=await Promise.resolve().then(()=>hd);return{OpenAPI:k}},void 0).then(({OpenAPI:k})=>{k.TOKEN=e??void 0})},[e]);const b=T.useCallback(()=>{if(i.current&&clearTimeout(i.current),!!e)try{const S=JSON.parse(atob(e.split(".")[1])).exp*1e3,A=Date.now(),C=S-A,N=Math.max(C-30*1e3,30*1e3);i.current=setTimeout(()=>{p()},N)}catch{}},[e,p]);T.useEffect(()=>(e?b():i.current&&(clearTimeout(i.current),i.current=null),()=>{i.current&&clearTimeout(i.current)}),[e,b]);const y=T.useCallback(()=>{const k=l.current||e;if(!k)return null;try{return JSON.parse(atob(k.split(".")[1])).exp*1e3}catch{return null}},[e]),x=d?{core_user_id:d.core_user_id,username:d.username,email:d.email??null,full_name:d.full_name??void 0,role:d.role,is_active:d.is_active}:null,_={isAuthenticated:!!(l.current||e),user:x,role:d?.role??"guest",token:l.current||e,expiresAt:y(),logout:h,renewToken:p};return m.jsx(h2.Provider,{value:_,children:t})};function IU({type:t,title:e,message:r,duration:n=5e3,onClose:a}){const[i,l]=T.useState(!1);T.useEffect(()=>{const h=setTimeout(()=>l(!0),100);if(n>0){const p=setTimeout(()=>{l(!1),setTimeout(()=>a?.(),300)},n);return()=>{clearTimeout(h),clearTimeout(p)}}return()=>clearTimeout(h)},[n,a]);const u=()=>{switch(t){case"success":return m.jsx(kp,{size:20,className:"text-green-500"});case"error":return m.jsx(wp,{size:20,className:"text-red-500"});case"warning":return m.jsx(wp,{size:20,className:"text-yellow-500"});case"info":return m.jsx(l8,{size:20,className:"text-blue-500"})}},d=()=>{switch(t){case"success":return"bg-green-50 border-green-200";case"error":return"bg-red-50 border-red-200";case"warning":return"bg-yellow-50 border-yellow-200";case"info":return"bg-blue-50 border-blue-200"}};return m.jsxs("div",{className:`flex items-start gap-3 p-4 rounded-lg border shadow-lg transition-all duration-300 ${i?"translate-x-0 opacity-100":"translate-x-full opacity-0"} ${d()}`,children:[u(),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("h3",{className:"text-sm font-medium text-gray-900",children:e}),r&&m.jsx("p",{className:"text-sm text-gray-600 mt-1",children:r})]}),m.jsx("button",{onClick:()=>{l(!1),setTimeout(()=>a?.(),300)},className:"flex-shrink-0 p-1 rounded-md hover:bg-gray-100 transition-colors",children:m.jsx(va,{size:16,className:"text-gray-400"})})]})}function $U({notifications:t,onRemove:e}){return m.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2 max-w-sm",children:t.map((r,n)=>m.jsx(IU,{...r,onClose:()=>e(n)},n))})}function qU(){const{notifications:t,removeNotification:e}=QI();return gc.createPortal(m.jsx($U,{notifications:t,onRemove:e}),document.body)}const HU=({onAccept:t,onDecline:e})=>{const[r,n]=T.useState(!1);T.useEffect(()=>{localStorage.getItem("cookie_consent")||n(!0)},[]);const a=()=>{localStorage.setItem("cookie_consent","accepted"),n(!1),t()},i=()=>{localStorage.setItem("cookie_consent","declined"),n(!1),e()};return r?m.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-lg z-50 p-4",children:m.jsxs("div",{className:"max-w-screen-2xl mx-auto flex items-center justify-between gap-4",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(dM,{size:20,className:"text-accent-primary"}),m.jsxs("div",{className:"flex-1",children:[m.jsx("h3",{className:"font-medium text-gray-900 mb-1",children:"Vi anvnder cookies fr att frbttra din upplevelse"}),m.jsx("p",{className:"text-sm text-gray-600",children:"Vi anvnder cookies fr autentisering och skerhet. Genom att fortstta godknner du vr anvndning av cookies."})]})]}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("button",{onClick:i,className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-800 transition-colors",children:"Avbj"}),m.jsx("button",{onClick:a,className:"px-4 py-2 text-sm bg-accent-primary text-black rounded-md hover:bg-accent-primary/90 transition-colors",children:"Acceptera"}),m.jsx("button",{onClick:()=>n(!1),className:"p-1 text-gray-400 hover:text-gray-600 transition-colors",children:m.jsx(va,{size:16})})]})]})}):null},UU=new d5({defaultOptions:{queries:{staleTime:5*60*1e3,retry:(t,e)=>e?.status===401?(console.log("401 error detected, but not retrying - silent refresh handles it"),!1):t<1,retryDelay:t=>Math.min(1e3*2**t,3e4)},mutations:{retry:!1}}});function VU(){const t=()=>{},e=()=>{};return m.jsx(f5,{client:UU,children:m.jsx(pA,{children:m.jsxs(s_,{children:[m.jsx(LU,{}),m.jsx(qU,{}),m.jsx(HU,{onAccept:t,onDecline:e})]})})})}var GU=function(){return null};const ZU=new d5;_k.createRoot(document.getElementById("root")).render(m.jsx(rt.StrictMode,{children:m.jsxs(f5,{client:ZU,children:[m.jsx(s_,{children:m.jsx(VU,{})}),m.jsx(GU,{initialIsOpen:!1})]})}));export{tt as O,ft as r};
//# sourceMappingURL=index-D5dQnIhV.js.map
